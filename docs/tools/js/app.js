(function(t){function e(e){for(var n,r,s=e[0],l=e[1],u=e[2],c=0,p=[];c<s.length;c++)r=s[c],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,s=1;s<i.length;s++){var l=i[s];0!==o[l]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},o={app:0},a=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/annona/tools/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var d=l;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var n=i("64a9"),o=i.n(n);o.a},"0554":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},a=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form"},[t.settings.fullpage&&t.fullpage?i("button",{staticClass:"buttons closebutton",on:{click:t.closeFullpage}},[t._v("Close "),i("i",{staticClass:"fa fa-times"})]):t._e(),"flask"!=t.env.NODE_ENV?i("div",{staticClass:"examples"},[i("a",{attrs:{href:t.baseurl+"tag-builder?url=https%3A%2F%2Fdnoneill.github.io%2Fannotate%2Fannotations%2Ffullbayeux-list.json&viewtype=iiif-storyboard&listtype=annotationlist&settings=%7B%22tagscolor%22%3A%5B%7B%22tagvalue%22%3A%22%22,%22color%22%3A%22%22%7D%5D,%22additionalinfo%22%3A%22%22,%22fit%22%3A%22horizontal%22%7D&props=%7B%22layers%22%3A%5B%7B%22label%22%3A%22%22,%22xywh%22%3A%22%22,%22image%22%3A%22%22,%22section%22%3A%22%22,%22rotation%22%3A%22%22%7D%5D,%22images%22%3A%5B%5D%7D"}},[t._v("\n  Bayeux Example")]),i("br"),i("a",{attrs:{href:t.baseurl+"tag-builder?url=https://dnoneill.github.io/annotate/annotations/wh234bz9013-0001-list.json&viewtype=iiif-storyboard&listtype=annotationlist"}},[t._v("\n  Example with tags")]),i("br"),i("a",{attrs:{href:t.baseurl+"tag-builder?url=https://dnoneill.github.io/annotate/annotations/ba-obj-722-conservation-list.json&viewtype=iiif-storyboard&listtype=annotationlist"}},[t._v("\n  Example with layers")]),i("br"),i("a",{attrs:{href:t.baseurl+"tag-builder?url=https%3A%2F%2Fdnoneill.github.io%2Fannotate%2Fannotations%2F131424-list.json&viewtype=iiif-storyboard&listtype=annotationlist&manifesturl=&settings=%7B%22tagscolor%22%3A%5B%7B%22tagvalue%22%3A%22%22,%22color%22%3A%22%23add8e6%22%7D%5D,%22additionalinfo%22%3A%22%22,%22overlaycolor%22%3A%22%23add8e6%22,%22activecolor%22%3A%22%2390ee90%22%7D&props=%7B%22layers%22%3A%5B%7B%22label%22%3A%22%3Ca%20href%3D%5C%5C%27https%3A%2F%2Fwww.wikidata.org%2Fwiki%2FQ4792194%5C%5C%27%3EView%20from%20Arles%3C%2Fa%3E%22,%22xywh%22%3A%22200,200,4750,6513%22,%22image%22%3A%22https%3A%2F%2Ftools.wmflabs.org%2Fzoomviewer%2Fproxy.php%3Fiiif%3DVan_Gogh_-_Weizenfeld_mit_Blick_auf_Arles.jpeg%2Finfo.json%22,%22section%22%3A%22%22,%22rotation%22%3A%22%22%7D%5D,%22images%22%3A%5B%5D%7D"}},[t._v("\n  Example with custom layers (Van Gogh)")]),i("br"),i("a",{attrs:{href:t.baseurl+"tag-builder?url=https%3A%2F%2Fdnoneill.github.io%2Fannotate%2Fannotations%2F04fbbb28-d5a7-4408-b7da-800c4e65eda3-list.json&viewtype=iiif-storyboard&listtype=annotationlist&manifesturl=&settings=%7B%22tagscolor%22%3A%5B%7B%22tagvalue%22%3A%22%22,%22color%22%3A%22%23add8e6%22%7D%5D,%22additionalinfo%22%3A%22%22,%22overlaycolor%22%3A%22%23add8e6%22,%22activecolor%22%3A%22%2390ee90%22,%22togglelayers%22%3Atrue%7D&props=%7B%22layers%22%3A%5B%7B%22label%22%3A%22x-ray%22,%22xywh%22%3A%22%22,%22image%22%3A%22https%3A%2F%2Fdlcs.io%2Fiiif-img%2F3%2F2%2F8034eb5b-9c90-4471-ad68-52124232ec0c%2Finfo.json%22,%22section%22%3A%22%22,%22rotation%22%3A%22%22%7D%5D,%22images%22%3A%5B%5D%7D"}},[t._v("\n  Example with custom layers (x-ray image)")]),i("br"),i("a",{attrs:{href:t.baseurl+"tag-builder?url=https%3A%2F%2Fncsu-libraries.github.io%2Fannona%2Fwebannotations%2Fmc00084-001-te0159-000-001-0001-list.json%3Bhttps%3A%2F%2Fncsu-libraries.github.io%2Fannona%2Fwebannotations%2Fua023-015-003-bx0002-004-026-list.json&viewtype=iiif-multistoryboard&listtype=annotationlists&manifesturl=&settings=%7B%22tagscolor%22%3A%5B%7B%22tagvalue%22%3A%22%22,%22color%22%3A%22%23add8e6%22%7D%5D,%22additionalinfo%22%3A%22%22,%22overlaycolor%22%3A%22%23add8e6%22,%22activecolor%22%3A%22%2390ee90%22,%22matchclick%22%3Atrue%7D&props=%7B%22layers%22%3A%5B%5D,%22images%22%3A%5B%22%22%5D%7D&css=%7B%22.content%22%3A%7B%22font-size%22%3A%22%22%7D,%22.annotation%22%3A%7B%22width%22%3A%22%22,%22height%22%3A%22%22,%22margin%22%3A%22%22%7D%7D"}},[t._v("\n  Multistoryboard Example")]),i("br"),i("a",{attrs:{href:"tag-builder?url=https%3A%2F%2Fdnoneill.github.io%2Fannotate%2Fannotations%2F04fbbb28-d5a7-4408-b7da-800c4e65eda3-list.json&viewtype=iiif-multistoryboard&listtype=annotationlists&manifesturl=&settings=%7B%22tagscolor%22%3A%5B%7B%22tagvalue%22%3A%22%22,%22color%22%3A%22%23add8e6%22%7D%5D,%22additionalinfo%22%3A%22%22,%22overlaycolor%22%3A%22%23add8e6%22,%22activecolor%22%3A%22%2390ee90%22%7D&props=%7B%22layers%22%3A%5B%5D,%22images%22%3A%5B%22https%3A%2F%2Fdlcs.io%2Fiiif-img%2F3%2F2%2F8034eb5b-9c90-4471-ad68-52124232ec0c%2Finfo.json%22%5D%7D&css=%7B%22.content%22%3A%7B%22font-size%22%3A%22%22%7D,%22.annotation%22%3A%7B%22width%22%3A%22%22,%22height%22%3A%22%22,%22margin%22%3A%22%22%7D%7D"}},[t._v("\n  Multistoryboard Example with custom image")]),i("br"),i("a",{attrs:{href:t.baseurl+"tag-builder?url=https%3A%2F%2Fdnoneill.github.io%2Fannotate%2Franges%2Frange.json&viewtype=iiif-rangestoryboard&listtype=rangeurl"}},[t._v("\n  Example with range. Storyboards have layers.")]),i("br")]):t._e(),t.tag&&t.apiurl?i("div",{staticClass:"savebutton"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.apifilename,expression:"apifilename"}],attrs:{placeholder:"filename for created file"},domProps:{value:t.apifilename},on:{input:function(e){e.target.composing||(t.apifilename=e.target.value)}}}),i("button",{on:{click:function(e){return t.savetoapi()}}},[t._v("Save")])]):t._e(),i("div",{staticClass:"requiredfields"},[t._l(t.urllength,(function(e,n){return i("span",{key:n+"_urls"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.url[n],expression:"url[index]"}],key:n+"_link",attrs:{"aria-label":"Annotation URL "+n,value:"",placeholder:"Annotation URL "},domProps:{value:t.url[n]},on:{change:function(e){return t.updateRouter()},input:function(e){e.target.composing||t.$set(t.url,n,e.target.value)}}}),0!=n?i("button",{on:{click:function(e){return t.deleteField("url",n,"urllength")}}},[t._v("\n      Delete Annotation URL\n    ")]):t._e()])})),"iiif-multistoryboard"==t.viewtype?i("span",[i("button",{attrs:{"aria-label":"Add Annotation URL"},on:{click:function(e){t.urllength+=1}}},[t._v("\n      Add Annotation URL\n    ")])]):t._e(),i("input",{directives:[{name:"model",rawName:"v-model",value:t.manifesturl,expression:"manifesturl"}],attrs:{id:"manifesturl","aria-label":"Manifest URL (Optional)",placeholder:"Manifest URL (Optional)"},domProps:{value:t.manifesturl},on:{change:function(e){return t.updateRouter()},input:function(e){e.target.composing||(t.manifesturl=e.target.value)}}}),i("select",{directives:[{name:"model",rawName:"v-model",value:t.viewtype,expression:"viewtype"}],attrs:{"aria-label":"dropdown for storyboard, imageviewer, multistoryboard, range storyboard"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.viewtype=e.target.multiple?i:i[0]},function(e){return t.updateListType()}]}},[i("option",{attrs:{disabled:"",value:""}},[t._v("Please select one")]),i("option",{attrs:{value:"iiif-storyboard"}},[t._v("Storyboard")]),i("option",{attrs:{value:"iiif-annotation"}},[t._v("Image Viewer")]),i("option",{attrs:{value:"iiif-multistoryboard"}},[t._v("Multistoryboard Viewer")]),i("option",{attrs:{value:"iiif-rangestoryboard"}},[t._v("Range Storyboard")])]),this.listoptions.length>0?i("select",{directives:[{name:"model",rawName:"v-model",value:t.listtype,expression:"listtype"}],attrs:{"aria-label":"List type (annotation url/list, range url, etc.) dropdown"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.listtype=e.target.multiple?i:i[0]},function(e){return t.updateRouter()}]}},t._l(t.listoptions,(function(e){return i("option",{key:e.value,domProps:{value:e.value}},[t._v("\n      "+t._s(e.text)+"\n    ")])})),0):t._e(),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.annotationtext,expression:"annotationtext"}],attrs:{"aria-label":"Annotation JSON to be used instead of annotation URL; Will not save in the URL parameters so it is unfortunately not shareable.",type:"text",placeholder:"Annotation JSON to be used instead of annotation URL; Will not save in the URL parameters so it is unfortunately not shareable."},domProps:{value:t.annotationtext},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.buildTags()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void e.preventDefault()},input:function(e){e.target.composing||(t.annotationtext=e.target.value)}}})],2),t.viewtype?i("button",{staticClass:"buttons clearbutton",on:{click:t.updateListType}},[t._v("Clear all settings")]):t._e(),t.viewtype?i("h2",[t._v("Settings")]):t._e(),t.viewtype?i("div",{class:t.viewtype,attrs:{id:"settings"}},[t.booleanoptions.length>0?i("div",{staticClass:"groupings"},[i("h2",[t._v("Boolean Settings")]),t._l(t.booleanoptions,(function(e){return i("div",{key:e},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.settings[e],expression:"settings[option]"}],attrs:{type:"checkbox",id:e},domProps:{value:e,checked:Array.isArray(t.settings[e])?t._i(t.settings[e],e)>-1:t.settings[e]},on:{change:[function(i){var n=t.settings[e],o=i.target,a=!!o.checked;if(Array.isArray(n)){var r=e,s=t._i(n,r);o.checked?s<0&&t.$set(t.settings,e,n.concat([r])):s>-1&&t.$set(t.settings,e,n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.settings,e,a)},function(e){return t.updateRouter()}]}}),i("label",{attrs:{for:e}},[t._v(t._s(e))])])}))],2):t._e(),i("div",{staticClass:"groupings"},[i("h2",[t._v("Free Text fields")]),t._l(t.textsettings,(function(e){return i("div",{key:e},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.settings[e],expression:"settings[setting]"}],attrs:{placeholder:e,"aria-label":e},domProps:{value:t.settings[e]},on:{change:function(e){return t.updateRouter()},input:function(i){i.target.composing||t.$set(t.settings,e,i.target.value)}}})])})),t.viewtype&&"iiif-annotation"!=t.viewtype?i("input",{directives:[{name:"model",rawName:"v-model",value:t.props["ws"],expression:"props['ws']"}],attrs:{placeholder:"websocket","aria-label":"websocket"},domProps:{value:t.props["ws"]},on:{change:function(e){return t.updateRouter()},input:function(e){e.target.composing||t.$set(t.props,"ws",e.target.value)}}}):t._e(),t.viewtype&&"iiif-annotation"!=t.viewtype?i("span",{attrs:{id:"additionalinfo"}},t._l(t.additionalinfo,(function(e,n){return i("span",{key:n+"_additionalinfo"},[i("h3",[t._v("Additional Info")]),t._l(e,(function(e,o){return i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.additionalinfo[n][o],expression:"additionalinfo[index][key]"}],key:o,attrs:{"aria-label":"Additional Info "+o+"; Shift+Enter creates a new line",type:"text",placeholder:"Additional Info "+o+"; Shift+Enter creates a new line"},domProps:{value:t.additionalinfo[n][o]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.buildTags()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void e.preventDefault()},input:function(e){e.target.composing||t.$set(t.additionalinfo[n],o,e.target.value)}}})}))],2)})),0):t._e(),t.viewtype&&"iiif-storyboard"==t.viewtype?i("span",{attrs:{id:"additionalinfo"}},[t._l(t.props.layers,(function(e,n){return i("div",{key:n+"_layers"},[i("h4",[t._v("Layer "+t._s(n+1))]),t._l(e,(function(e,o){return i("input",{directives:[{name:"model",rawName:"v-model",value:t.props.layers[n][o],expression:"props.layers[index][key]"}],key:o,attrs:{"aria-label":"Layer "+(n+1)+" "+o,placeholder:"Layer "+(n+1)+" "+o},domProps:{value:t.props.layers[n][o]},on:{change:function(e){return t.updateRouter()},input:function(e){e.target.composing||t.$set(t.props.layers[n],o,e.target.value)}}})})),i("button",{attrs:{"aria-label":"delete layer"},on:{click:function(e){return t.deleteField("props",n,"layers")}}},[t._v("\n        Delete Layer\n      ")])],2)})),i("button",{attrs:{"aria-label":"add additional layer"},on:{click:function(e){return t.addListField("props","layers",{label:"",xywh:"",image:"",section:"",rotation:""})}}},[t._v("\n     Add Additional Layer\n    ")])],2):t._e(),t.viewtype&&"iiif-multistoryboard"==t.viewtype?i("span",{attrs:{id:"additionalinfo"}},[t._l(t.props.images,(function(e,n){return i("div",{key:n+"_images"},[i("h4",[t._v("Image "+t._s(n+1))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.props.images[n],expression:"props.images[index]"}],attrs:{"aria-label":"Image "+(n+1)+" ",placeholder:"Image "+(n+1)+" "},domProps:{value:t.props.images[n]},on:{change:function(e){return t.updateRouter()},input:function(e){e.target.composing||t.$set(t.props.images,n,e.target.value)}}}),i("button",{on:{click:function(e){return t.deleteField("props",n,"images")}}},[t._v("\n        Delete Image\n      ")])])})),i("button",{on:{click:function(e){return t.addListField("props","images","")}}},[t._v("\n     Add Additional Image\n    ")])],2):t._e()],2),t.viewtype?i("div",{staticClass:"groupings"},[i("h2",[t._v("CSS")]),t._l(t.cssfields,(function(e,n){return i("div",{key:n+"_css"},[e.icon?i("span",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.css[e.tag],expression:"css[style.tag]"}],attrs:{type:"checkbox",id:e.tag},domProps:{checked:Array.isArray(t.css[e.tag])?t._i(t.css[e.tag],null)>-1:t.css[e.tag]},on:{change:[function(i){var n=t.css[e.tag],o=i.target,a=!!o.checked;if(Array.isArray(n)){var r=null,s=t._i(n,r);o.checked?s<0&&t.$set(t.css,e.tag,n.concat([r])):s>-1&&t.$set(t.css,e.tag,n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.css,e.tag,a)},function(e){return t.updateRouter()}]}}),i("label",{attrs:{for:e.tag,"aria-label":"hide "+e.tag}},[t._v("Hide "),i("span",{domProps:{innerHTML:t._s(e.icon)}})])]):e.field?t._l(e.field,(function(n){return i("span",{key:n},[n&&e.tag?i("input",{directives:[{name:"model",rawName:"v-model",value:t.css[e.tag][n],expression:"css[style.tag][field]"}],attrs:{"aria-label":e.tag+"(css class/tag) "+n+"(css field)",placeholder:e.tag+" "+n,id:e.tag+" "+n},domProps:{value:t.css[e.tag][n]},on:{change:function(e){return t.updateRouter()},input:function(i){i.target.composing||t.$set(t.css[e.tag],n,i.target.value)}}}):t._e()])})):t._e()],2)})),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.css["freetextcss"],expression:"css['freetextcss']"}],attrs:{"aria-label":"Free text CSS field. Add any css. Shift+Enter creates a new line",placeholder:"Free text CSS field. Add any css. Shift+Enter creates a new line",type:"text"},domProps:{value:t.css["freetextcss"]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.buildTags()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void e.preventDefault()},input:function(e){e.target.composing||t.$set(t.css,"freetextcss",e.target.value)}}})],2):t._e(),t.viewtype&&"iiif-annotation"!=t.viewtype?i("div",{staticClass:"groupings"},[i("h2",[t._v("Dropdowns")]),i("p",[t._v("Choose from one of the options")]),t._l(t.dropdowns,(function(e){return i("div",{key:e.field},[i("label",{attrs:{for:e.field}},[t._v(t._s(e.field)+":")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.settings[e.field],expression:"settings[dropdown.field]"}],attrs:{id:e.field},on:{change:[function(i){var n=Array.prototype.filter.call(i.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.settings,e.field,i.target.multiple?n:n[0])},function(e){return t.updateRouter()}]}},[i("option",{attrs:{value:""}}),t._l(e.options,(function(e){return i("option",{key:e},[t._v(t._s(e))])}))],2)])}))],2):t._e(),t.viewtype&&"iiif-annotation"!=t.viewtype?i("div",{staticClass:"groupings"},[i("h2",[t._v("Color Choosers")]),t._l(t.colorpickers,(function(e){return i("div",{key:e.field},[i("span",{staticClass:"headerblock"},[t._v(t._s(e.field))]),t.viewtype&&"iiif-annotation"!=t.viewtype?i("color-picker",{attrs:{startColor:e.default,width:100,height:100},on:{"color-change":function(e){return t.updateRouter()}},model:{value:t.settings[e.field],callback:function(i){t.$set(t.settings,e.field,i)},expression:"settings[colorfield.field]"}}):t._e()],1)}))],2):t._e(),i("div",{staticClass:"groupings"},[i("h2",[t._v("Tag Color Coding")]),t._l(t.settings.tagscolor,(function(e,n){return i("div",{key:n+"_tagscolor"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.tagscolor[n].tagvalue,expression:"settings.tagscolor[index].tagvalue"}],attrs:{placeholder:"tag field","aria-label":"tag field "+n+1},domProps:{value:t.settings.tagscolor[n].tagvalue},on:{change:function(e){return t.updateRouter()},input:function(e){e.target.composing||t.$set(t.settings.tagscolor[n],"tagvalue",e.target.value)}}}),i("color-picker",{attrs:{width:100,height:100,startColor:t.colorpickers[0].default},on:{"color-change":function(e){return t.updateRouter()}},model:{value:t.settings.tagscolor[n].color,callback:function(e){t.$set(t.settings.tagscolor[n],"color",e)},expression:"settings.tagscolor[index].color"}}),i("button",{staticStyle:{"vertical-align":"top"},on:{click:function(e){return t.deleteField("settings",n,"tagscolor")}}},[t._v("\n     Delete Tag\n    ")])],1)})),i("button",{on:{click:function(e){return t.addListField("settings","tagscolor",{tagvalue:"",color:""})}}},[t._v("\n   New Tag\n  ")])],2)]):t._e(),t.tag?i("div",{staticClass:"tagfield",attrs:{"aria-label":"copy tag button"}},[i("div",{attrs:{id:"tagdata"}},[t._v(t._s(t.tag))]),i("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.tag,expression:"tag"}]},[t._v("Copy Tag")])]):t._e(),i("div",{attrs:{id:"livedemo"}},[i("span",{domProps:{innerHTML:t._s(t.tag)}})])])},s=[],l=(i("a481"),i("ac6a"),i("456d"),i("28a5"),i("1e8a")),u=(i("6b54"),{createScriptTag:function(t){var e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),i=document.createElement("script");return i.setAttribute("type","application/json"),i.id=e,i.innerHTML=t,{id:e,outerHTML:i.outerHTML}},redirect:function(){var t=window.location.href;t.indexOf("/iiif-annotation/")>-1&&(location.href=t.replace(/\/iiif-annotation\//g,"/annona/"))}}),d=i("bc3a"),c=i.n(d),p={name:"tagbuilder",components:{ColorPicker:l["a"]},props:["apiurl"],data:function(){return{url:[],apifilename:"",manifesturl:"",viewtype:"",props:{},listoptions:[],listtype:"",settings:{tagscolor:[{tagvalue:"",color:""}]},tag:"",annotationtext:"",booleanoptions:[],textsettings:[],dropdowns:[],overlay:"",colorpickers:[{field:"overlaycolor",default:"#add8e6"},{field:"activecolor",default:"#90ee90"}],additionalinfo:[{title:"",content:""}],cssfields:[],css:{},urllength:1,fullpage:!0,baseurl:"",env:Object({NODE_ENV:"production",BASE_URL:"/annona/tools/"})}},created:function(){u.redirect(),this.baseurl="/annona/tools/"},mounted:function(){},watch:{"$route.query":{handler:function(t,e){JSON.stringify(t)!=JSON.stringify(e)&&this.setParams()},immediate:!0}},methods:{deleteField:function(t,e,i){var n=this[i]?this[i]-=1:"issecondary";"issecondary"==n?this[t][i].splice(e,1):this[t].splice(e,1),this.updateRouter()},setParams:function(){var t=this.$route.query;this.listtype=t.listtype?t.listtype:"",this.url=t.url?t.url.split(";"):[],this.urllength=this.url.length>1?this.url.length:1,this.viewtype=t.viewtype?t.viewtype:"",this.manifesturl=t.manifesturl?t.manifesturl:"",this.setDefaults(),t.apiurl&&(this.apiurl=t.apiurl),t.settings&&(this.settings=JSON.parse(t.settings)),t.props&&(this.props=JSON.parse(t.props)),t.css&&(this.css=JSON.parse(t.css)),this.buildTags()},addListField:function(t,e,i){this[t][e].push(i),this.updateRouter()},setDefaults:function(){this.tag="","iiif-annotation"!=this.viewtype&&"iiif-storyboard"!=this.viewtype||(this.listoptions=[{value:"annotationlist",text:"Annotation List",selected:!0},{value:"annotationurl",text:"Single Annotation"}]),"iiif-multistoryboard"==this.viewtype&&(this.listoptions=[{value:"annotationlists",text:"Annotation List",selected:!0},{value:"annotationurls",text:"Single Annotation"}]),"iiif-rangestoryboard"==this.viewtype&&(this.listoptions=[{value:"rangeurl",text:"Range URL",selected:!0}]),this.booleanoptions="iiif-annotation"==this.viewtype?["hide_viewlarger","hide_fullobject","hide_tags","image_only","text_only","hide_tagcount","hide_beforeafter","table_view"]:["autorun_onload","fullpage","toggleoverlay","controller","togglelayers","hide_tagcount","overlaynext","hide_annocontrols","hide_toolbar","hide_tagsbutton","hide_autorunbutton","hide_infobutton","hide_overlaybutton","hide_layersbutton","hide_nextbuttons","hide_fullscreenbutton","hide_shortcutbutton","hide_annotationtext","transcription","textfirst"],"iiif-multistoryboard"==this.viewtype&&this.booleanoptions.push("matchclick"),this.textsettings="iiif-annotation"==this.viewtype?["height","width"]:["autorun_interval","mapmarker","tts","truncate_length","customid","imagecrop","title","startposition"],this.dropdowns="iiif-annotation"==this.viewtype?[]:[{field:"fit",options:["fill","horizontal"]},{field:"panorzoom",options:["pan"]},{field:"textposition",options:["top","bottom","right","left"]},{field:"startenddisplay",options:["tags","info","transcription","keyboard"]},{field:"annoview",options:["sidebyside","collapse"]},{field:"toolbarposition",options:["bottom"]}],this.props.layers="iiif-storyboard"==this.viewtype?[{label:"",xywh:"",image:"",section:"",rotation:""}]:[],this.props.images="iiif-multistoryboard"==this.viewtype?[""]:[],this.cssfields="iiif-annotation"==this.viewtype?[{tag:"#content",field:["font-size"]},{tag:"#tags",field:["font-size"]}]:[{tag:"#zoomInButton",icon:'<i class="fas fa-search-plus"></i>'},{tag:"#zoomOutButton",icon:'<i class="fas fa-search-minus"></i>'},{tag:"#homeZoomButton",icon:'<i class="fas fa-home"></i>'},{tag:".fullcontent",icon:"Content Box"},{tag:".content",field:["font-size"]},{tag:".annotation",field:["width","height","margin"]}],this.css={};for(var t=0;t<this.cssfields.length;t++){var e=this.cssfields[t];if(e.field&&(this.css[e.tag]={}),e.field)for(var i=0;i<e.field.length;i++)this.css[e.tag][e.field[i]]=""}},updateListType:function(){var t=this;this.props={},this.settings={tagscolor:[{tagvalue:"",color:""}]},this.additionalinfo=[{title:"",content:""}],this.url=this.url.length>1&&"iiif-multistoryboard"==this.viewtype?this.url:[this.url[0]],!(this.url.length>1&&"iiif-multistoryboard"==this.viewtype)||this.url.length,this.setDefaults();var e=this.listoptions.filter((function(e){return e.value==t.listtype}));this.listtype=e.length>0?this.listtype:this.listoptions[0]["value"],this.updateRouter()},savetoapi:function(){c.a.post(this.apiurl,{tag:this.tag,slug:this.apifilename}).then((function(t){console.log(t)})).catch((function(t){alert(t)}))},getsettings:function(){for(var t=this,e=this.colorpickers.map((function(t){return t.default})),i=Object.keys(this.settings).filter((function(i){return""!=t.settings[i]&&-1==e.indexOf(t.settings[i])})),n="",o=0;o<i.length;o++){var a=i[o],r=this.settings[a];if("tagscolor"===a){for(var s={},l=0;l<r.length;l++){var u=r[l];""!=u["tagvalue"]&&(s[u["tagvalue"].trim()]=u["color"])}Object.keys(s).length>0&&(n+="".concat(a,": ").concat(JSON.stringify(s),";"))}else n+="".concat(a,": ").concat(r,";");"fullpage"==a&&(this.fullpage=!0)}return n},closeFullpage:function(){this.fullpage=!1,document.getElementsByTagName(this.viewtype)[0].childNodes[0].setAttribute("class","storyboard_viewer")},getAdditionalInfo:function(){for(var t="",e=this.url?this.url[0].split("/").slice(-1)[0].replace(".json",""):"",i="",n=0;n<this.additionalinfo.length;n++){var o=this.additionalinfo[n],a="".concat(e,"_").concat(n,"_additionalinfo");o["content"]&&o["title"]&&(i+="".concat(a,";"),t+='<div id="'.concat(a,'" title="').concat(o["title"],'">').concat(o["content"].replace(/\n/g,"<br />"),"</div>"))}return this.settings["additionalinfo"]=i.slice(0,-1),t},getpropstring:function(){var t="";for(var e in this.props){var i=this.props[e];i="images"==e?i.join(";"):i;var n="layers"==e&&i.length>0?i[0].image:"images"==e&&i.length>0?i[0]:i;i="layers"==e?JSON.stringify(i).replace(/'/g,'\\"'):i,n&&n.length>0&&(t+=" ".concat(e,"='").concat(i,"'"))}return t},buildCSS:function(){var t="";for(var e in this.css)if(1==this.css[e])t+="".concat(e," {display: none!important;}");else if("freetextcss"!=e)for(var i in this.css[e]){var n=this.css[e][i];n&&(e="font-size"==i?"".concat(e," > * > *"):e,t+="".concat(e," {").concat(i,": ").concat(n,"!important}"))}else t+=this.css[e];return t=""!=t?"<style>"+t+"</style>":t,t},updateRouter:function(){var t={url:this.url.join(";"),viewtype:this.viewtype,listtype:this.listtype,manifesturl:this.manifesturl,apiurl:this.apiurl,settings:JSON.stringify(this.settings),props:JSON.stringify(this.props),css:JSON.stringify(this.css)};if(JSON.stringify(this.$route.query)==JSON.stringify(t))return!1;this.$router.push({name:"tagbuilder",query:t}).catch((function(t){console.log("router error"),console.log(t)}))},buildTags:function(){if(this.url.length>0&&this.listoptions.length>0||this.annotationtext.length>0&&this.listoptions.length>0){var t;this.annotationtext&&(t=u.createScriptTag(this.annotationtext),this.url=[t["id"]]),this.apiurl&&(this.apifilename=this.url[0].split("/").slice(-1)[0].replace(".json",""));var e=this.getAdditionalInfo(),i=this.buildCSS(),n="".concat(e?e+"\n":"","\n          ").concat(i?i+"\n":"","<").concat(this.viewtype," ").concat(this.listtype,"='").concat(this.url.join(";"),"'"),o=this.getsettings(),a=this.getpropstring();this.manifesturl&&(n+=" manifesturl='".concat(this.manifesturl,"'")),a&&(n+="".concat(a)),o&&(n+=" styling='".concat(o,"'")),n+="></".concat(this.viewtype,">"),this.tag="",this.tag=t?"".concat(t["outerHTML"]).concat(n.trim()):n.trim()}}}},f=p,g=(i("f683"),i("2877")),h=Object(g["a"])(f,r,s,!1,null,"1e5d271c",null),v=h.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form"},[i("div",{staticClass:"requiredfields"},[i("div",{staticClass:"headerbuttons"},[t.originalannotation?i("button",{on:{click:function(e){return t.downloadAnnotation()}}},[t._v("Download Annotation")]):t._e(),t.originalannotation&&t.endpointapi?i("button",{on:{click:function(e){return t.writeToEndpoint()}}},[t._v("Write to Endpoint")]):t._e()]),i("div",{staticClass:"inputform"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],attrs:{"aria-label":"Annotation URL",value:"",placeholder:"Annotation URL"},domProps:{value:t.url},on:{change:function(e){return t.updateRouter()},input:function(e){e.target.composing||(t.url=e.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.manifesturl,expression:"manifesturl"}],attrs:{id:"manifesturl","aria-label":"Manifest URL (Optional)",placeholder:"Manifest URL (Optional)"},domProps:{value:t.manifesturl},on:{change:function(e){return t.updateRouter()},input:function(e){e.target.composing||(t.manifesturl=e.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.endpointapi,expression:"endpointapi"}],attrs:{id:"endpointapi","aria-label":"Endpoint URL (Optional)",placeholder:"Endpoint URL (Optional)"},domProps:{value:t.endpointapi},on:{change:function(e){return t.updateRouter()},input:function(e){e.target.composing||(t.endpointapi=e.target.value)}}})]),t.originalannotation?i("div",{staticClass:"annotationlistcontent"},[i("h2",[t._v("Annotation List Fields")]),t._l(t.originalannotation,(function(e,n){return e.constructor==String?i("div",{staticClass:"annotationlistfields"},[i("label",[t._v(t._s(n))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.originalannotation[n],expression:"originalannotation[key]"}],domProps:{value:t.originalannotation[n]},on:{input:function(e){e.target.composing||t.$set(t.originalannotation,n,e.target.value)}}})]):t._e()}))],2):t._e(),i("draggable",{attrs:{draggable:".item",id:t.hasbeenupdated},on:{change:function(e){return t.updateOrder()}},model:{value:t.annotationorder,callback:function(e){t.annotationorder=e},expression:"annotationorder"}},t._l(t.originalannotation[t.bodykey],(function(e,n){return i("b-card",{key:n,staticClass:"item"},[i("div",{staticClass:"controlbuttons"},[t.originalannotation[t.bodykey].length>1?i("button",{staticClass:"annotationbutton",on:{click:function(e){return t.deleteField(n)}}},[t._v("Delete Annotation "+t._s(n+1))]):t._e()]),i("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[i("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"accordion-"+n,expression:"'accordion-' + index"}],attrs:{block:"",href:"#",variant:"info"}},[i("h2",[t._v("Annotation "+t._s(n+1)+" "),i("i",{staticClass:"fas fa-arrows-alt-v"})]),e["@id"]?i("span",{domProps:{innerHTML:t._s(t.annotations[e["@id"]])}}):e["id"]?i("span",{domProps:{innerHTML:t._s(t.annotations[e["id"]])}}):1==Object.values(t.annotations).length?i("span",{domProps:{innerHTML:t._s(Object.values(t.annotations)[0])}}):t._e()])],1),i("b-collapse",{attrs:{id:"accordion-"+n,visible:"",accordion:"my-accordion"}},[t._l(e,(function(e,o){return e.constructor==String?i("div",{staticClass:"annotationtext"},[i("label",[t._v(t._s(o))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.originalannotation[t.bodykey][n][o],expression:"originalannotation[bodykey][index][key]"}],domProps:{value:t.originalannotation[t.bodykey][n][o]},on:{input:function(e){e.target.composing||t.$set(t.originalannotation[t.bodykey][n],o,e.target.value)}}})]):t._e()})),t._l(e[t.format["body"]],(function(o,a){return e[t.format["body"]]?i("div",{staticClass:"annotationbody"},[i("div",{staticClass:"bodyheader"},[i("h3",[t._v("Body field "+t._s(a+1))]),e[t.format["body"]].length>1?i("button",{staticClass:"deletebodyfield",on:{click:function(e){return t.deleteField(n,a)}}},[t._v("Delete body field "+t._s(a+1))]):t._e()]),t._l(o,(function(e,r){return i("div",["items"!=r&&"selector"!=r?i("div",{staticClass:"singleitems"},[i("label",[t._v(t._s(r))]),"value"==r||"chars"==r?i("ckeditor",{attrs:{editor:t.editor},model:{value:t.originalannotation[t.bodykey][n][t.format["body"]][a][r],callback:function(e){t.$set(t.originalannotation[t.bodykey][n][t.format["body"]][a],r,e)},expression:"originalannotation[bodykey][index][format['body']][charindex][key]"}}):-1==r.indexOf("type")&&"purpose"!=r?i("input",{directives:[{name:"model",rawName:"v-model",value:t.originalannotation[t.bodykey][n][t.format["body"]][a][r],expression:"originalannotation[bodykey][index][format['body']][charindex][key]"}],domProps:{value:t.originalannotation[t.bodykey][n][t.format["body"]][a][r]},on:{input:function(e){e.target.composing||t.$set(t.originalannotation[t.bodykey][n][t.format["body"]][a],r,e.target.value)}}}):r.indexOf("type")>-1?i("select",{directives:[{name:"model",rawName:"v-model",value:t.originalannotation[t.bodykey][n][t.format["body"]][a][r],expression:"originalannotation[bodykey][index][format['body']][charindex][key]"}],on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.originalannotation[t.bodykey][n][t.format["body"]][a],r,e.target.multiple?i:i[0])},function(e){return t.switchType(n,a)}]}},t._l(t.format["typechoices"],(function(e){return i("option",{domProps:{value:e}},[t._v(t._s(e))])})),0):"purpose"==r?i("select",{directives:[{name:"model",rawName:"v-model",value:t.originalannotation[t.bodykey][n][t.format["body"]][a][r],expression:"originalannotation[bodykey][index][format['body']][charindex][key]"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.originalannotation[t.bodykey][n][t.format["body"]][a],r,e.target.multiple?i:i[0])}}},t._l(t.purposes,(function(e){return i("option",{domProps:{value:e}},[t._v(t._s(e))])})),0):t._e()],1):t._e(),"items"==r?i("div",{staticClass:"choicefield"},[t._l(o[r],(function(e,s){return i("div",{staticClass:"choiceindex",attrs:{id:"choice_"+s}},[i("h4",[t._v("Choice "+t._s(s+1))]),o[r].length>1?i("button",{on:{click:function(e){return t.deleteField(n,a,s)}}},[t._v("Delete "+t._s(s+1))]):t._e(),t._l(e,(function(o,l){return i("span",["selector"!=l?i("div",[i("label",[t._v(t._s(l))]),"value"==l||"chars"==l?i("ckeditor",{attrs:{editor:t.editor},model:{value:e[l],callback:function(i){t.$set(e,l,i)},expression:"item[choicekey]"}}):-1==l.indexOf("type")&&"purpose"!=l?i("input",{directives:[{name:"model",rawName:"v-model",value:e[l],expression:"item[choicekey]"}],domProps:{value:e[l]},on:{input:function(i){i.target.composing||t.$set(e,l,i.target.value)}}}):l.indexOf("type")>-1?i("select",{directives:[{name:"model",rawName:"v-model",value:t.originalannotation[t.bodykey][n][t.format["body"]][a][r][s][l],expression:"originalannotation[bodykey][index][format['body']][charindex][key][choiceindex][choicekey]"}],on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.originalannotation[t.bodykey][n][t.format["body"]][a][r][s],l,e.target.multiple?i:i[0])},function(e){return t.switchType(n,a)}]}},t._l(t.format["typechoices"],(function(e){return i("option",{domProps:{value:e}},[t._v(t._s(e))])})),0):"purpose"==l?i("select",{directives:[{name:"model",rawName:"v-model",value:t.originalannotation[t.bodykey][n][t.format["body"]][a][r][s][l],expression:"originalannotation[bodykey][index][format['body']][charindex][key][choiceindex][choicekey]"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.originalannotation[t.bodykey][n][t.format["body"]][a][r][s],l,e.target.multiple?i:i[0])}}},t._l(t.purposes,(function(e){return i("option",{domProps:{value:e}},[t._v(t._s(e))])})),0):t._e()],1):t._e()])}))],2)})),i("button",{on:{click:function(e){return t.addField(n,a)}}},[t._v("Add Choice Field")])],2):t._e()])}))],2):t._e()})),i("button",{on:{click:function(e){return t.addField(n)}}},[t._v("Add Another Body Field")])],2)],1)})),1)],1)])},m=[],b=i("310e"),_=i.n(b),w=i("5f5b"),k=i("3730"),x=i.n(k),A=i("fb3d"),F=i.n(A);n["default"].use(x.a),n["default"].use(w["a"]);var O={name:"annotationeditor",components:{ckeditor:x.a.component,draggable:_.a,collapse:w["a"]},data:function(){return{url:"",editor:F.a,manifesturl:"",endpointapi:"",annotations:{},originalannotation:"",annotationorder:[],bodykey:"",update:!0,purposes:["assessing","bookmarking","classifying","commenting","describing","editing","highlighting","identifying","linking","moderating","questioning","replying","tagging"],bodyfields:["language","rights","creator","textDirection"],w3oakey:{w3:{type:"w3",body:"body",typechoices:["TextualBody","Choice","Dataset","Image","Video","Sound","Text"],fields:["modified","created","label"],value:"value"},oa:{type:"oa",body:"resource",typechoices:["cnt:ContentAsText","oa:Choice","dctypes:Dataset","dctypes:Image","dctypes:Video","dctypes:Sound","dctypes:Text","oa:Tag"],value:"chars",fields:["oa:annotatedAt","oa:serializedAt","label"]}},formats:{},hasbeenupdated:0}},created:function(){u.redirect()},mounted:function(){},watch:{"$route.query":{handler:function(t,e){JSON.stringify(t)!=JSON.stringify(e)&&this.setParams()},immediate:!0}},methods:{addField:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"false",i="false"!=e?this.originalannotation[this.bodykey][t][this.format["body"]][e].items:this.originalannotation[this.bodykey][t][this.format["body"]],n=Object.keys(i[0]),o={},a=0;a<n.length;a++){var r=n[a],s="value"!=r&&"chars"!=r?i[0][r]:"";o[r]=s}"false"!=e?this.originalannotation[this.bodykey][t][this.format["body"]][e].items.push(o):this.originalannotation[this.bodykey][t][this.format["body"]].push(o),this.hasbeenupdated+=1},deleteField:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"false",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"false";"false"!=i?this.originalannotation[this.bodykey][t][this.format["body"]][e].items.splice(i,1):"false"!=e&&"false"==i?this.originalannotation[this.bodykey][t][this.format["body"]].splice(e,1):"false"==e&&"false"==i&&this.originalannotation[this.bodykey].splice(t,1),this.hasbeenupdated+=1},setParams:function(){var t=this.$route.query;this.url=t.url?t.url:"",this.manifesturl=t.manifesturl?t.manifesturl:"",this.endpointapi=t.endpointapi?t.endpointapi:"",this.buildView()},updateOrder:function(){for(var t=this.annotationorder,e=[],i=0;i<t.length;i++){var n=this.originalannotation[this.bodykey].filter((function(e){return e["@id"]==t[i]}))[0];e.push(n)}this.originalannotation[this.bodykey]=e},updateRouter:function(){var t={url:this.url,manifesturl:this.manifesturl,endpointapi:this.endpointapi};if(JSON.stringify(this.$route.query)==JSON.stringify(t))return!1;this.$router.push({name:"annotationeditor",query:t}).catch((function(t){console.log("router error"),console.log(t)})),this.buildView()},buildView:function(){var t=this,e=this;this.url?c.a.get(this.url).then((function(e){t.parseAnnotation(e.data)})).catch((function(t){e.originalannotation="",console.log(t)})):this.originalannotation=""},downloadAnnotation:function(){this.updateOrder();var t=JSON.stringify(this.originalannotation),e=new Blob([t],{type:"application/json"}),i=document.createEvent("MouseEvents"),n=document.createElement("a");n.download=this.url.split("/").slice(-1)[0],n.href=window.URL.createObjectURL(e),n.dataset.downloadurl=["text/json",n.download,n.href].join(":"),i.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)},switchType:function(t,e){var i=this.format["body"],n=this.originalannotation[this.bodykey][t][i][e],o=Object.keys(n).filter((function(t){return t.indexOf("type")>-1}))[0],a=n[o];if(-1==a.indexOf("Choice")&&Object.keys(n).indexOf("items")>-1){var r=n["items"][0];delete this.originalannotation[this.bodykey][t][i][e]["items"],this.originalannotation[this.bodykey][t][i][e]=r,n=this.originalannotation[this.bodykey][t][i][e]}var s=this.format["value"],l=n[s];if(-1==a.indexOf("Text")&&"TextualBody"!=a&&"cnt:ContentAsText"!=a&&-1==a.indexOf("Choice")?l&&(this.originalannotation[this.bodykey][t][i][e]["@id"]=l,delete this.originalannotation[this.bodykey][t][i][e][s]):l||(this.originalannotation[this.bodykey][t][i][e][s]=n["@id"],delete this.originalannotation[this.bodykey][t][i][e]["@id"]),a.indexOf("Choice")>-1){this.annotationvalue=n;var u=n[o];n[o]=this.format["typechoices"][0],this.originalannotation[this.bodykey][t][i][e]={items:[n]},this.originalannotation[this.bodykey][t][i][e][o]=u}this.originalannotation[this.bodykey][t][i][e][o]=a,this.hasbeenupdated+=1},writeToEndpoint:function(){this.updateOrder();var t=this;c.a.post(this.endpointapi,this.originalannotation).then((function(t){console.log(t)})).catch((function(e){alert("".concat(t.endpointapi," is returning error"))}))},parseAnnotation:function(t){this.originalannotation=t;var e=t.resources?t.resources:[t];this.bodykey=t.resources?"resources":"";var i=t["@context"].indexOf("w3")>-1?"w3":"oa";this.format=this.w3oakey[i],"w3"==i&&this.bodyfields.push("purpose");for(var n=0;n<e.length;n++){var o=e[n],a=o["@id"]?o["@id"]:o["id"]?o["id"]:n.toString(),r=u.createScriptTag(JSON.stringify(o));this.annotationorder.push(a),this.annotations[a]=r["outerHTML"]+"<iiif-annotation annotationurl='".concat(r["id"],"' styling='image_only:true'></iiifannotation>");for(var s=0;s<this.bodyfields.length;s++){var l=this.format["fields"][s];if(l){var d=t[l]?t[l]:"";t[l]=d||""}for(var c=this.format["body"],p=0;p<o[c].length;p++){var f=this.bodyfields[s];if(f){var g=o[c][p][f]?o[c][p][f]:"";o[c][p][f]=g}}}}}}},C=O,D=(i("a36a"),Object(g["a"])(C,y,m,!1,null,"35cd269e",null)),S=D.exports,N={name:"app",components:{tagbuilder:v,annotationeditor:S}},B=N,j=(i("034f"),Object(g["a"])(B,o,a,!1,null,null,null)),L=j.exports,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("tagbuilder",{attrs:{apiurl:"/saveannonaview"}})],1)},E=[],R={name:"flaskapp",components:{tagbuilder:v}},P=R,$=(i("fb7f"),Object(g["a"])(P,T,E,!1,null,null,null)),K=($.exports,i("8c4f")),M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.items,(function(e){return i("div",{key:e.path},[i("router-link",{attrs:{to:e.path}},[t._v("\n        "+t._s(e.name)+"\n    ")]),i("p",[t._v(t._s(e.blurb))])],1)})),0)},J=[],U={created:function(){var t=this;u.redirect(),this.$router.options.routes.forEach((function(e){t.items.push({name:e.title,path:e.path,blurb:e.blurb})}))},data:function(){return{items:[]}}},I=U,z=Object(g["a"])(I,M,J,!1,null,null,null),H=z.exports,V=i("af88");n["default"].use(K["a"]),n["default"].use(V["a"]),n["default"].config.productionTip=!1;var q=[{path:"/",component:H,name:"index"},{path:"/tag-builder",component:v,name:"tagbuilder",title:"Tag Builder",blurb:"The Tag Builder is a user interface for creating tags to be used with this library. It provides a more user friendly way of implementing settings."},{path:"/annotationeditor",component:S,name:"annotationeditor",title:"Annotation Editor",blurb:"The Annotation Editor is currently in development. It provides a user friendly for editing annotations with fields like rights. If there are things you would like to see implemented in this viewer please open an issue in the GitHub repo."}];console.log(q);var W=new K["a"]({mode:"history",routes:q});new n["default"]({render:function(t){return t(L)},router:W}).$mount("#app")},"64a9":function(t,e,i){},"8b2b":function(t,e,i){},a36a:function(t,e,i){"use strict";var n=i("8b2b"),o=i.n(n);o.a},b498:function(t,e,i){},f683:function(t,e,i){"use strict";var n=i("0554"),o=i.n(n);o.a},fb7f:function(t,e,i){"use strict";var n=i("b498"),o=i.n(n);o.a}});
//# sourceMappingURL=app.js.map