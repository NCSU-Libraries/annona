(function(t){function e(e){for(var i,r,s=e[0],l=e[1],c=e[2],d=0,p=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},o={app:0},a=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/annona/tools/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("64a9"),o=n.n(i);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["/display"!=this.$route.path?n("div",{staticClass:"form"},[t.settings.fullpage&&t.fullpage?n("button",{staticClass:"buttons closebutton",on:{click:t.closeFullpage}},[t._v("Close "),n("i",{staticClass:"fa fa-times"})]):t._e(),"flask"!=t.env.NODE_ENV?n("div",{staticClass:"examples"},[n("a",{attrs:{href:t.baseurl+"#/tag-builder?url=https%3A%2F%2Fdnoneill.github.io%2Fannotate%2Fannotations%2Ffullbayeux-list.json&viewtype=iiif-storyboard&manifesturl=&css=&settings=%7B%22fit%22%3A%22horizontal%22%7D&props="}},[t._v("\n    Bayeux Example")]),n("br"),n("a",{attrs:{href:t.baseurl+"#/tag-builder?url=https://dnoneill.github.io/annotate/annotations/wh234bz9013-0001-list.json&viewtype=iiif-storyboard"}},[t._v("\n    Example with tags")]),n("br"),n("a",{attrs:{href:t.baseurl+"#/tag-builder?url=https://dnoneill.github.io/annotate/annotations/ba-obj-722-conservation-list.json&viewtype=iiif-storyboard"}},[t._v("\n    Example with layers")]),n("br"),n("a",{attrs:{href:t.baseurl+"#/tag-builder?url=https%3A%2F%2Fdnoneill.github.io%2Fannotate%2Fannotations%2F131424-list.json&viewtype=iiif-storyboard&manifesturl=&settings=%7B%22tagscolor%22%3A%5B%7B%22tagvalue%22%3A%22%22,%22color%22%3A%22%23add8e6%22%7D%5D,%22additionalinfo%22%3A%22%22,%22overlaycolor%22%3A%22%23add8e6%22,%22activecolor%22%3A%22%2390ee90%22%7D&props=%7B%22layers%22%3A%5B%7B%22label%22%3A%22%3Ca%20href%3D%5C%5C%27https%3A%2F%2Fwww.wikidata.org%2Fwiki%2FQ4792194%5C%5C%27%3EView%20from%20Arles%3C%2Fa%3E%22,%22xywh%22%3A%22200,200,4750,6513%22,%22image%22%3A%22https%3A%2F%2Ftools.wmflabs.org%2Fzoomviewer%2Fproxy.php%3Fiiif%3DVan_Gogh_-_Weizenfeld_mit_Blick_auf_Arles.jpeg%2Finfo.json%22,%22section%22%3A%22%22,%22rotation%22%3A%22%22%7D%5D,%22images%22%3A%5B%5D%7D"}},[t._v("\n    Example with custom layers (Van Gogh)")]),n("br"),n("a",{attrs:{href:t.baseurl+"#/tag-builder?url=https%3A%2F%2Fdnoneill.github.io%2Fannotate%2Fannotations%2F04fbbb28-d5a7-4408-b7da-800c4e65eda3-list.json&viewtype=iiif-storyboard&manifesturl=&settings=%7B%22tagscolor%22%3A%5B%7B%22tagvalue%22%3A%22%22,%22color%22%3A%22%23add8e6%22%7D%5D,%22additionalinfo%22%3A%22%22,%22overlaycolor%22%3A%22%23add8e6%22,%22activecolor%22%3A%22%2390ee90%22,%22togglelayers%22%3Atrue%7D&props=%7B%22layers%22%3A%5B%7B%22label%22%3A%22x-ray%22,%22xywh%22%3A%22%22,%22image%22%3A%22https%3A%2F%2Fdlcs.io%2Fiiif-img%2F3%2F2%2F8034eb5b-9c90-4471-ad68-52124232ec0c%2Finfo.json%22,%22section%22%3A%22%22,%22rotation%22%3A%22%22%7D%5D,%22images%22%3A%5B%5D%7D"}},[t._v("\n    Example with custom layers (x-ray image)")]),n("br"),n("a",{attrs:{href:t.baseurl+"#/tag-builder?url=https%3A%2F%2Fncsu-libraries.github.io%2Fannona%2Fwebannotations%2Fmc00084-001-te0159-000-001-0001-list.json%3Bhttps%3A%2F%2Fncsu-libraries.github.io%2Fannona%2Fwebannotations%2Fua023-015-003-bx0002-004-026-list.json&viewtype=iiif-multistoryboard&manifesturl=&settings=%7B%22tagscolor%22%3A%5B%7B%22tagvalue%22%3A%22%22,%22color%22%3A%22%23add8e6%22%7D%5D,%22additionalinfo%22%3A%22%22,%22overlaycolor%22%3A%22%23add8e6%22,%22activecolor%22%3A%22%2390ee90%22,%22matchclick%22%3Atrue%7D&props=%7B%22layers%22%3A%5B%5D,%22images%22%3A%5B%22%22%5D%7D&css=%7B%22.content%22%3A%7B%22font-size%22%3A%22%22%7D,%22.annotation%22%3A%7B%22width%22%3A%22%22,%22height%22%3A%22%22,%22margin%22%3A%22%22%7D%7D"}},[t._v("\n    Multistoryboard Example")]),n("br"),n("a",{attrs:{href:"#/tag-builder?url=https%3A%2F%2Fdnoneill.github.io%2Fannotate%2Fannotations%2F04fbbb28-d5a7-4408-b7da-800c4e65eda3-list.json&viewtype=iiif-multistoryboard&manifesturl=&settings=%7B%22tagscolor%22%3A%5B%7B%22tagvalue%22%3A%22%22,%22color%22%3A%22%23add8e6%22%7D%5D,%22additionalinfo%22%3A%22%22,%22overlaycolor%22%3A%22%23add8e6%22,%22activecolor%22%3A%22%2390ee90%22%7D&props=%7B%22layers%22%3A%5B%5D,%22images%22%3A%5B%22https%3A%2F%2Fdlcs.io%2Fiiif-img%2F3%2F2%2F8034eb5b-9c90-4471-ad68-52124232ec0c%2Finfo.json%22%5D%7D&css=%7B%22.content%22%3A%7B%22font-size%22%3A%22%22%7D,%22.annotation%22%3A%7B%22width%22%3A%22%22,%22height%22%3A%22%22,%22margin%22%3A%22%22%7D%7D"}},[t._v("\n    Multistoryboard Example with custom image")]),n("br"),n("a",{attrs:{href:t.baseurl+"#/tag-builder?url=https%3A%2F%2Fdnoneill.github.io%2Fannotate%2Franges%2Frange.json&viewtype=iiif-rangestoryboard"}},[t._v("\n    Example with range. Storyboards have layers.")]),n("br")]):t._e(),n("div",{staticClass:"requiredfields"},[t._l(t.urllength,(function(e,i){return n("span",{key:i+"_urls"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.url[i],expression:"url[index]"}],key:i+"_link",attrs:{"aria-label":"Annotation URL "+i,value:"",placeholder:"Annotation URL "},domProps:{value:t.url[i]},on:{change:function(e){return t.updateListType()},input:function(e){e.target.composing||t.$set(t.url,i,e.target.value)}}}),0!=i?n("button",{on:{click:function(e){return t.deleteField("url",i,"urllength")}}},[t._v("\n        Delete Annotation URL\n      ")]):t._e()])})),"iiif-multistoryboard"==t.viewtype?n("span",[n("button",{attrs:{"aria-label":"Add Annotation URL"},on:{click:function(e){t.urllength+=1}}},[t._v("\n        Add Annotation URL\n      ")])]):t._e(),n("input",{directives:[{name:"model",rawName:"v-model",value:t.manifesturl,expression:"manifesturl"}],attrs:{id:"manifesturl","aria-label":"Manifest URL (Optional)",placeholder:"Manifest URL (Optional)"},domProps:{value:t.manifesturl},on:{change:function(e){return t.updateListType()},input:function(e){e.target.composing||(t.manifesturl=e.target.value)}}}),n("select",{directives:[{name:"model",rawName:"v-model",value:t.viewtype,expression:"viewtype"}],attrs:{"aria-label":"dropdown for storyboard, imageviewer, multistoryboard, range storyboard"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.viewtype=e.target.multiple?n:n[0]},function(e){return t.updateListType()}]}},[n("option",{attrs:{disabled:"",value:""}},[t._v("Please select one")]),n("option",{attrs:{value:"iiif-storyboard"}},[t._v("Storyboard")]),n("option",{attrs:{value:"iiif-annotation"}},[t._v("Image Viewer")]),n("option",{attrs:{value:"iiif-multistoryboard"}},[t._v("Multistoryboard Viewer")]),n("option",{attrs:{value:"iiif-rangestoryboard"}},[t._v("Range Storyboard")])]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.annotationtext,expression:"annotationtext"}],attrs:{"aria-label":"Annotation JSON to be used instead of annotation URL; Will not save in the URL parameters so it is unfortunately not shareable.",type:"text",placeholder:"Annotation JSON to be used instead of annotation URL; Will not save in the URL parameters so it is unfortunately not shareable."},domProps:{value:t.annotationtext},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.buildTags()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void e.preventDefault()},input:function(e){e.target.composing||(t.annotationtext=e.target.value)}}}),t.tag&&t.apiurl?n("div",{staticClass:"savebutton"},[t._m(0),n("input",{directives:[{name:"model",rawName:"v-model",value:t.apifilename,expression:"apifilename"}],attrs:{id:"savetoapi",placeholder:"filename for created file"},domProps:{value:t.apifilename},on:{input:function(e){e.target.composing||(t.apifilename=e.target.value)}}}),n("button",{on:{click:function(e){return t.savetoapi()}}},[t._v("Save")])]):t._e(),t.tag&&t.collectionurl&&"iiif-rangestoryboard"!=t.viewtype?n("div",{staticClass:"savecollection"},[t._m(1),n("select",{directives:[{name:"model",rawName:"v-model",value:t.savecollection["title"],expression:"savecollection['title']"}],attrs:{"aria-label":"collection"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.savecollection,"title",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("New Collection")]),t._l(t.parsecollections,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2),n("input",{directives:[{name:"model",rawName:"v-model",value:t.savecollection["annotitle"],expression:"savecollection['annotitle']"}],attrs:{placeholder:"Annotation title","aria-label":"annotation title"},domProps:{value:t.savecollection["annotitle"]},on:{input:function(e){e.target.composing||t.$set(t.savecollection,"annotitle",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.savecollection["description"],expression:"savecollection['description']"}],attrs:{placeholder:"Annotation description","aria-label":"annotation title"},domProps:{value:t.savecollection["description"]},on:{input:function(e){e.target.composing||t.$set(t.savecollection,"description",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.savecollection["thumbnail"],expression:"savecollection['thumbnail']"}],attrs:{placeholder:"Annotation Thumbnail","aria-label":"annotation title"},domProps:{value:t.savecollection["thumbnail"]},on:{input:function(e){e.target.composing||t.$set(t.savecollection,"thumbnail",e.target.value)}}}),n("button",{on:{click:function(e){return t.savetocollection()}}},[t._v("Add to Collection")])]):t._e()],2),t.viewtype?n("button",{staticClass:"buttons clearbutton",on:{click:t.updateListType}},[t._v("Clear all settings")]):t._e(),t.viewtype?n("h2",[t._v("Settings")]):t._e(),t.viewtype?n("div",{class:t.viewtype,attrs:{id:"settings"}},[t.booleanoptions.length>0?n("div",{staticClass:"groupings"},[n("h2",[t._v("Boolean Settings")]),t._l(t.booleanoptions,(function(e){return n("div",{key:e.name},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings[e.name],expression:"settings[option.name]"}],attrs:{type:"checkbox",id:e.name},domProps:{value:e.name,checked:Array.isArray(t.settings[e.name])?t._i(t.settings[e.name],e.name)>-1:t.settings[e.name]},on:{change:[function(n){var i=t.settings[e.name],o=n.target,a=!!o.checked;if(Array.isArray(i)){var r=e.name,s=t._i(i,r);o.checked?s<0&&t.$set(t.settings,e.name,i.concat([r])):s>-1&&t.$set(t.settings,e.name,i.slice(0,s).concat(i.slice(s+1)))}else t.$set(t.settings,e.name,a)},function(e){return t.updateRouter()}]}}),n("label",{attrs:{for:e.name}},[t._v(t._s(e.name)+"\n        "),n("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{trigger:"click",placement:"top",arrow:!0},expression:"{ trigger : 'click', placement : 'top',  arrow: true }"}],staticClass:"infobutton",attrs:{"aria-label":e.name+" description",content:e.description}},[n("i",{staticClass:"fas fa-info-circle"})])])])}))],2):t._e(),n("div",{staticClass:"groupings"},[n("h2",[t._v("Free Text fields")]),t._l(t.textsettings,(function(e){return n("div",{key:e.name},[n("label",{attrs:{for:e.name}},[t._v(t._s(e.name)+"\n        "),n("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{trigger:"click",placement:"top",arrow:!0},expression:"{ trigger : 'click', placement : 'top',  arrow: true }"}],staticClass:"infobutton",attrs:{content:e.description,"aria-label":e.name+" description"}},[n("i",{staticClass:"fas fa-info-circle"})])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings[e.name],expression:"settings[setting.name]"}],attrs:{id:e.name,placeholder:e.name,"aria-label":e.name},domProps:{value:t.settings[e.name]},on:{change:function(e){return t.updateRouter()},input:function(n){n.target.composing||t.$set(t.settings,e.name,n.target.value)}}})])})),t.viewtype&&"iiif-annotation"!=t.viewtype?n("input",{directives:[{name:"model",rawName:"v-model",value:t.props["ws"],expression:"props['ws']"}],attrs:{placeholder:"websocket","aria-label":"websocket"},domProps:{value:t.props["ws"]},on:{change:function(e){return t.updateRouter()},input:function(e){e.target.composing||t.$set(t.props,"ws",e.target.value)}}}):t._e(),t.viewtype&&"iiif-annotation"!=t.viewtype?n("span",{attrs:{id:"additionalinfo"}},t._l(t.additionalinfo,(function(e,i){return n("span",{key:i+"_additionalinfo"},[n("h3",[t._v("Additional Info")]),n("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{trigger:"click",placement:"top",arrow:!0},expression:"{ trigger : 'click', placement : 'top',  arrow: true }"}],staticClass:"infobutton",attrs:{"aria-label":"about additional info feature",content:"Allows the user to add additonal information to the info box; Requires both fields to be filled out to work. This will build a section with the title that is clickable and the user can click on to display the information."}},[n("i",{staticClass:"fas fa-info-circle"})]),t._l(e,(function(e,o){return n("div",{key:o},[n("label",{attrs:{for:o}},[t._v(t._s(o)+": ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.additionalinfo[i][o],expression:"additionalinfo[index][key]"}],key:o,attrs:{id:o,"aria-label":"Additional Info "+o+"; Shift+Enter creates a new line",type:"text"},domProps:{value:t.additionalinfo[i][o]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.buildTags()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void e.preventDefault()},input:function(e){e.target.composing||t.$set(t.additionalinfo[i],o,e.target.value)}}})])}))],2)})),0):t._e(),t.viewtype&&"iiif-storyboard"==t.viewtype?n("span",{attrs:{id:"additionalinfo"}},[n("h3",[t._v("Layers \n        "),n("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{trigger:"click",placement:"top",arrow:!0},expression:"{ trigger : 'click', placement : 'top',  arrow: true }"}],staticClass:"infobutton",attrs:{"aria-label":"about layer feature",content:"Allows the user to add image layers to the viewer. \n        This will add images that can be placed on top of the base image."}},[n("i",{staticClass:"fas fa-info-circle"})])]),t._l(t.props.layers,(function(e,i){return n("div",{key:i+"_layers"},[n("h4",[t._v("Layer "+t._s(i+1))]),t._l(e,(function(e,o){return n("div",{key:o},[n("label",{attrs:{for:o}},[t._v("Layer "+t._s(i+1)+" "+t._s(o)+" \n          "),n("span","label"==o||"image"==o?[t._v("(Required)")]:[t._v("(optional)")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.props.layers[i][o],expression:"props.layers[index][key]"}],key:o,attrs:{id:o,"aria-label":"Layer "+(i+1)+" "+o},domProps:{value:t.props.layers[i][o]},on:{change:function(e){return t.updateRouter()},input:function(e){e.target.composing||t.$set(t.props.layers[i],o,e.target.value)}}})])})),n("button",{attrs:{"aria-label":"delete layer"},on:{click:function(e){return t.deleteField("props",i,"layers")}}},[t._v("\n          Delete Layer\n        ")])],2)})),n("button",{attrs:{"aria-label":"add additional layer"},on:{click:function(e){return t.addListField("props","layers",{label:"label placeholder",image:"image placeholder",xywh:"",section:"",rotation:""})}}},[t._v("\n      Add Additional Layer\n      ")])],2):t._e(),t.viewtype&&"iiif-multistoryboard"==t.viewtype?n("span",{attrs:{id:"additionalinfo"}},[t._l(t.props.images,(function(e,i){return n("div",{key:i+"_images"},[n("h4",[t._v("Image "+t._s(i+1))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.props.images[i],expression:"props.images[index]"}],attrs:{"aria-label":"Image "+(i+1)+" ",placeholder:"Image "+(i+1)+" "},domProps:{value:t.props.images[i]},on:{change:function(e){return t.updateRouter()},input:function(e){e.target.composing||t.$set(t.props.images,i,e.target.value)}}}),n("button",{on:{click:function(e){return t.deleteField("props",i,"images")}}},[t._v("\n          Delete Image\n        ")])])})),n("button",{on:{click:function(e){return t.addListField("props","images","image placeholder")}}},[t._v("\n      Add Additional Image\n      ")])],2):t._e()],2),t.viewtype?n("div",{staticClass:"groupings"},[n("h2",[t._v("CSS")]),t._l(t.cssfields,(function(e,i){return n("div",{key:i+"_css"},[e.icon?n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.css[e.tag],expression:"css[style.tag]"}],attrs:{type:"checkbox",id:e.tag},domProps:{checked:Array.isArray(t.css[e.tag])?t._i(t.css[e.tag],null)>-1:t.css[e.tag]},on:{change:[function(n){var i=t.css[e.tag],o=n.target,a=!!o.checked;if(Array.isArray(i)){var r=null,s=t._i(i,r);o.checked?s<0&&t.$set(t.css,e.tag,i.concat([r])):s>-1&&t.$set(t.css,e.tag,i.slice(0,s).concat(i.slice(s+1)))}else t.$set(t.css,e.tag,a)},function(e){return t.updateRouter()}]}}),n("label",{attrs:{for:e.tag,"aria-label":"hide "+e.tag}},[t._v("\n          Hide "),n("span",{domProps:{innerHTML:t._s(e.icon)}})])]):e.field?t._l(e.field,(function(i){return n("span",{key:i},[i&&e.tag?n("input",{directives:[{name:"model",rawName:"v-model",value:t.css[e.tag][i],expression:"css[style.tag][field]"}],attrs:{"aria-label":e.tag+"(css class/tag) "+i+"(css field)",placeholder:e.tag+" "+i,id:e.tag+" "+i},domProps:{value:t.css[e.tag][i]},on:{change:function(e){return t.updateRouter()},input:function(n){n.target.composing||t.$set(t.css[e.tag],i,n.target.value)}}}):t._e(),n("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{trigger:"click",placement:"top",arrow:!0},expression:"{ trigger : 'click', placement : 'top',  arrow: true }"}],staticClass:"infobutton",attrs:{"aria-label":"about"+e.tag+"feature",content:e.description}},[n("i",{staticClass:"fas fa-info-circle"})])])})):t._e()],2)})),n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.css["freetextcss"],expression:"css['freetextcss']"}],attrs:{"aria-label":"Free text CSS field.",placeholder:"Free text CSS field. Add any css. Shift+Enter creates a new line",type:"text"},domProps:{value:t.css["freetextcss"]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.buildTags()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void e.preventDefault()},input:function(e){e.target.composing||t.$set(t.css,"freetextcss",e.target.value)}}}),n("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{trigger:"click",placement:"top",arrow:!0},expression:"{ trigger : 'click', placement : 'top',  arrow: true }"}],staticClass:"infobutton",attrs:{"aria-label":"About free text css feature",content:"Add any css code. Shift+Enter creates a new line in the box."}},[n("i",{staticClass:"fas fa-info-circle"})])])],2):t._e(),t.viewtype&&"iiif-annotation"!=t.viewtype?n("div",{staticClass:"groupings"},[n("h2",[t._v("Dropdowns")]),n("p",[t._v("Choose from one of the options")]),t._l(t.dropdowns,(function(e){return n("div",{key:e.name},[n("label",{attrs:{for:e.name}},[t._v(t._s(e.name)+"\n        "),n("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{trigger:"click",placement:"top",arrow:!0},expression:"{ trigger : 'click', placement : 'top',  arrow: true }"}],staticClass:"infobutton",attrs:{"aria-label":"about"+e.name+"feature",content:e.description}},[n("i",{staticClass:"fas fa-info-circle"})])]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.settings[e.name],expression:"settings[dropdown.name]"}],attrs:{id:e.name},on:{change:[function(n){var i=Array.prototype.filter.call(n.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.settings,e.name,n.target.multiple?i:i[0])},function(e){return t.updateRouter()}]}},[n("option",{attrs:{value:""}}),t._l(e.options,(function(e){return n("option",{key:e},[t._v(t._s(e))])}))],2)])}))],2):t._e(),t.viewtype&&"iiif-annotation"!=t.viewtype?n("div",{staticClass:"groupings"},[n("h2",[t._v("Color Choosers")]),t._l(t.colorpickers,(function(e){return n("div",{key:e.field},[n("label",{attrs:{for:e.field}},[t._v(t._s(e.field)+"\n        "),n("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{trigger:"click",placement:"top",arrow:!0},expression:"{ trigger : 'click', placement : 'top',  arrow: true }"}],staticClass:"infobutton",attrs:{"aria-label":"about"+e.field+"feature",content:e.description}},[n("i",{staticClass:"fas fa-info-circle"})])]),t.viewtype&&"iiif-annotation"!=t.viewtype?n("color-picker",{attrs:{id:e.field,startColor:e.default,width:100,height:100},on:{"color-change":function(e){return t.updateRouter()}},model:{value:t.settings[e.field],callback:function(n){t.$set(t.settings,e.field,n)},expression:"settings[colorfield.field]"}}):t._e()],1)}))],2):t._e(),n("div",{staticClass:"groupings"},[n("h2",[t._v("Tag Color Coding")]),n("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{trigger:"click",placement:"top",arrow:!0},expression:"{ trigger : 'click', placement : 'top',  arrow: true }"}],staticClass:"infobutton",attrs:{"aria-label":"about tag color coding feature",content:"Color code overlays based on tag value."}},[n("i",{staticClass:"fas fa-info-circle"})]),t._l(t.settings.tagscolor,(function(e,i){return n("div",{key:i+"_tagscolor"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.tagscolor[i].tagvalue,expression:"settings.tagscolor[index].tagvalue"}],attrs:{placeholder:"tag field","aria-label":"tag field "+i+1},domProps:{value:t.settings.tagscolor[i].tagvalue},on:{change:function(e){return t.updateRouter()},input:function(e){e.target.composing||t.$set(t.settings.tagscolor[i],"tagvalue",e.target.value)}}}),n("color-picker",{attrs:{width:100,height:100,startColor:t.colorpickers[0].default},on:{"color-change":function(e){return t.updateRouter()}},model:{value:t.settings.tagscolor[i].color,callback:function(e){t.$set(t.settings.tagscolor[i],"color",e)},expression:"settings.tagscolor[index].color"}}),n("button",{staticStyle:{"vertical-align":"top"},on:{click:function(e){return t.deleteField("settings",i,"tagscolor")}}},[t._v("\n      Delete Tag\n      ")])],1)})),n("button",{on:{click:function(e){return t.addListField("settings","tagscolor",{tagvalue:"tag placeholder",color:t.defaultoverlaycolor})}}},[t._v("\n    New Tag\n    ")])],2)]):t._e(),t.tag&&!t.apiurl?n("div",{staticClass:"tagfield",attrs:{"aria-label":"copy tag button"}},[n("div",{staticClass:"tagfieldline"},[n("div",{attrs:{id:"tagdata"}},[t._v(t._s(t.tag))]),n("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.tag,expression:"tag"}]},[t._v("Copy Tag")])]),t.annotationtext?t._e():n("hr"),t.annotationtext?t._e():n("div",{staticClass:"tagfieldline"},[n("a",{attrs:{href:t.displayURL,target:"_blank"}},[t._v("Display URL")]),n("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.displayURL,expression:"displayURL"}]},[t._v("Copy URL")])])]):t._e()]):t._e(),n("div",{attrs:{id:"livedemo"}},[n("span",{domProps:{innerHTML:t._s(t.tag)}})])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:"savetoapi"}},[n("b",[t._v("Filename:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:"savecollection"}},[n("b",[t._v("Collection:")])])}],l=(n("7f7f"),n("75fc")),c=(n("ac6a"),n("456d"),n("a481"),n("28a5"),n("1e8a")),u=(n("6b54"),{createScriptTag:function(t){var e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),n=document.createElement("script");return n.setAttribute("type","application/json"),n.id=e,n.innerHTML=t,{id:e,outerHTML:n.outerHTML}},redirect:function(){var t=window.location.href;t.indexOf("/iiif-annotation/")>-1&&(location.href=t.replace(/\/iiif-annotation\//g,"/annona/"))}}),d=n("bc3a"),p=n.n(d),h={iiifstoryboard:function(){return[{name:"autorun_onload",description:"When enabled, this function has the storyboard auto run through\n         the annotations when the storyboard loads on the page. \n         The autorun functionality is avaliable through the toolbar, so this functionality should only be\n         enabled if you want the functionality to start on page load."},{name:"fullpage",description:"This will only fill the browser window. \n        It will only work with a single storyboard. \n        This will not display the storyboard full screen, due to the basic structure of the internet this can not be automated.\n         This will only fill the browser window"},{name:"toggleoverlay",description:"This setting shows the overlays on load.\n        The overlays are the shape of the annotations on the image."},{name:"controller",description:"Should only be instantiated if property of ws is also used.\n        The ws property can be seen in the Free text field section. \n        This setting sets the storyboard with the setting enabled \n        as being able to control other storyboards connected to the web socket server."},{name:"togglelayers",description:'This setting only works if there are layers in your storyboard.\n        If there are layers in your storyboard a <i class="fas fa-layer-group"></i> button\n        will appear in the toolbar. When enabled all the layers will automatically be loaded \n        in the viewer. By default the user has to toggle these layers.'},{name:"hide_tagcount",description:'This only works if there are tags in your annotation (<i class="fas fa-tags"></i> in toolbar).\n        By default, the viewer will the show the number of times each tag appears in the tag box.\n        This setting removes that count from view.\n        '},{name:"overlaynext",description:"When overlays have not been toggled, this will toggle only the overlay of the current annotation.\n        This feature is extremely useful for highlighting the specific feature of the annotation.\n        "},{name:"hide_annocontrols",description:'This setting hides <i class="fas fa-times close_button"></i>, <i class="fas fa-caret-square-up close_button"></i> \n        and any other icons in annotation box.'},{name:"hide_toolbar",description:"This setting will hide the toolbar. \n        If you enable this setting it is recommended you enable toggle_overlays so users can interact with the storyboard."},{name:"hide_tagsbutton",description:'If there are tags in the annotation, \n        this will hide the tags button (<i class="fas fa-tags"></i>) in the toolbar\n        and stop keyboard shortcuts from rendering.'},{name:"hide_autorunbutton",description:'Will stop the autorun button (<i class="fas fa-magic"></i>) from rendering and\n         will not allow the keyboard shortcuts to render.'},{name:"hide_infobutton",description:'Will stop the info button (<i class="fas fa-info"></i>) from rendering and\n        will not allow the keyboard shortcuts to render.'},{name:"hide_overlaybutton",description:'Will stop the info button (<i class="fas fa-toggle-on"></i>) from rendering and\n        will not allow the keyboard shortcuts to render.'},{name:"hide_reloadbutton",description:"Hides the reload button"},{name:"hide_layersbutton",description:'Will stop the info button (<i class="fas fa-layer-group"></i>) from rendering and\n        will not allow the keyboard shortcuts to render.'},{name:"hide_nextbuttons",description:'Will stop the prev (<i class="fas fa-arrow-left"></i>) \n        and next buttons (<i class="fas fa-arrow-right"></i>) from rendering \n        and will not allow the keyboard shortcuts to render.'},{name:"hide_fullscreenbutton",description:'Will stop the fullscreen button (<i class="fas fa-expand"></i>) from rendering and\n        will not allow the keyboard shortcuts to render.'},{name:"hide_shortcutbutton",description:'Will stop the shortcuts button (<i class="fas fa-keyboard"></i>) from rendering and\n        will not allow the keyboard shortcuts to render.'},{name:"hide_textoverlaybutton",description:'Will stop the textoverlay button (<i class="fas fa-align-justify"></i>) from rendering and\n        will not allow the keyboard shortcuts to render.'},{name:"hide_annotationtext",description:"This will hide the annotation text \n        associated with annotation while still allowing for the box to\n        appear for overlays and tags"},{name:"transcription",description:"For annotations that contain transcriptions. \n        This will combine all annotations that the annotation recognizes as a transcription. \n        This requires a purpose of transcribing in W3 annotations \n        or a type of cnt:ContentAsText in OpenAnnotation standards. \n        If there are multiple annotations the transcription will display \n        first with this setting. \n        Enable the textfirst setting to set the comments first."},{name:"textfirst",description:"Will show the commenting annotations before the transcription. \n        Is only effective if used when the transcription setting is enabled."},{name:"toggletextoverlay",description:"Will have the text overlay toggled on the storyboard load. \n        This only works with Annotations that have a OCR text annotations. In OpenAnnotation \n        it is Cnt:ContentAsText with sc:paiting.\n        In W3 web annotations it is anything with a purpose of transcribing or supplementing.\n        \n        "}]},iiifmultistoryboard:function(){var t=this.iiifstoryboard();return t.push({name:"matchclick",description:"When clicking overlays the default is the match\n       the position on the image. \n       If you would like to match position in annotation set this to true."}),t.push({name:"continousboard",description:"Instead of having annotations being tabbed together, this setting allows\n      the users to view all annotations in order (based on board order). All of the annotaitons \n      in the first board will be run through, then the next board, etc.\n      "}),t},iiifrangestoryboard:function(){return this.iiifstoryboard()},iiifannotation:function(){return[{name:"hide_viewlarger",description:"Hides the “View Full Image” button"},{name:"hide_fullobject",description:"Hides the full object url"},{name:"hide_tags",description:"Hides the tags if they exists in the annotation."},{name:"image_only",description:"Will only show the annotated image."},{name:"text_only",description:"Will only show the text and tags"},{name:"hide_tagcount",description:"Will hide the count number in the tag."},{name:"hide_beforeafter",description:"Will hide the before and after results from search views."},{name:"table_view",description:"Displays annotations in a table. \n        tagscolor, hide_tagcount do not work with this view"}]}},f={iiifstoryboard:function(){return[{name:"autorun_interval",description:"Time between when the autorun functionality will \n          go to the next annotation in seconds, \n          e.g. 4 will go to the next annotation after four seconds; \n          Default is 3 seconds.",options:"any number"},{name:"mapmarker",description:'For annotations with a height and width of 0 \n          or items that have a pin specification (often those annotations created in Mirador 2)\n          The default view for these items is: <i class="fas fa-map-marker-alt"></i>. \n          This can be overridden by entering new HTML icon or SVG element in this field.',options:"HTML icon or SVG element"},{name:"tts",description:"Any ISO language code. \n          This will provide text to speech for the annotation. \n          It will only read the main content, not the tags or labels. \n          If the language is set in the individual annotations \n          it will set the language automatically and this can field can be set to true.\n          A list of language codes can be found here: http://www.lingoes.net/en/translator/langcode.htm. \n          If you are implementing autorun_onload and tts together it will not work in Chrome. \n          It requires user activation (clicking the Auto Run button) to work in Chrome \n          but should work fine in Safari and Firefox. \n          It does not work with Internet Explorer.",options:"language code"},{name:"truncate_length",description:'This can be set to any Integer. \n          By default it is set to 2; \n          This determines how many words appear when the hide button (<i class="fas fa-caret-up"></i>) is clicked. \n          The hide button will only show words in the annotation and will truncate the annotation and hide the tags. \n          If you are looking for a way to hide the tags \n          listed in the annotation (not the tags button) add to css to .tags {display: none;}',options:"any number"},{name:"maplayer",description:"This can be set to any Leaflet compatible map tile. \n          The corresponding mapattribution setting needs to be filled out for this to work.\n          By default it is set to https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png; \n          This only works if your annotation has GeoJSON and you have the <b>mapattribution setting enabled</b>.",options:"Leaflet compatible map tile"},{name:"mapattribution",description:"This needs to be set to the correct attribution for the map you are using. \n          If it is not loaded your custom map layer will not load. \n          By default it is set to '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'.\n          This only works if your annotation has GeoJSON",options:"Leaflet compatible map tile"},{name:"customid",description:"If for some reason you would like to customize\n           the identifier which gets automatically generated \n           from the annotation filename use this setting. \n           This setting is necessary if two storyboards with the same annotation \n           get added to the same page.",options:"any combination of letters and numbers"},{name:"textoverlayopacity",description:"Allows you to set the default opacity for text overlay when the storyboard loads. 100 is no opacity, 0 is invisible. Default is 100.",options:"any number between 1-100"},{name:"textoverlayfontcolor",description:"Allows you to set the default text color for text overlay when the storyboard loads. Default is #000000.",options:"HEX color code"},{name:"textoverlaybackground",description:"Allows you to set the default background color for text overlay when the storyboard loads. Default is none;",options:"HEX color code"},{name:"imagecrop",description:" X,Y,W,H coordinates on the image in the following format “x,y,w,h”, \n          e.g. “200,300,600,400”. \n          This will crop the image to a box \n          that is created starting from the upper left hand corner at the x coordinate 200, y coordinate 300,\n          with a width of 600 and height of 400.  \n          Make sure not to crop out any annotations you have created.",options:"x,y,w,h coordinates"},{name:"title",description:"Allows for a custom title to be placed in the info box.",options:"any combination of letters and numbers"},{name:"startposition",description:"Any number that is within the length of your annotation.\n    It will set where the view starts. By default this is 0. \n    If you set this to 1, it will go the first annotation in your list on load.\n    ",options:"any number that is less than or equal to the number of annotations."}]},iiifmultistoryboard:function(){return this.iiifstoryboard()},iiifrangestoryboard:function(){var t=this.iiifstoryboard();return t.push({name:"perpage",description:"Any number.\n      This will place images side by side. For example, if you enter 3, the first 3 images/annotations will show up side by side \n      and the arrows will tab through all the annotations in order of boards (left-to-right).\n      ",options:"any integer (no decimals)"}),t.push({name:"listnumber",description:"By default, the range storyboard will treat each list in a manifest as seperate board. \n      If you want only one list to show up, you can choose that list, and only those will show up. For example, \n      if your manifest has a word, paragraph and section list for each canvas, by default you will get a seperate word, paragraph and section page in your viewer. \n      You can choose to only have one lists be visible by choosing the correct number of item. If the word, paragraph and section lists are in that order, word would be 1, paragraph would be 2, section would be 3.\n      ",options:"any integer (no decimals)"}),t},iiifannotation:function(){return[{name:"width",description:"Any width dimension in pixels. \n          Changes annotation and full size image size.",options:"number"},{name:"height",description:"Any height dimension in pixels. \n          Changes annotation and full size image size.",options:"number"}]}},g={iiifstoryboard:function(){return[{name:"fit",options:["fill","horizontal"],description:"By default the image is fit vertically \n          to the viewer. \n          <b>Horizontal: </b>Fits the image to the viewer on the horizontal (x-axis).\n          <b>Fill: </b> Fits the image to the viewer so there is no margins.\n          These options can mean poritions of the image are not visible based on your image."},{name:"panorzoom",options:["pan"],description:"By default when clicking or tabbing through\n           annotations the viewer will zoom into the annotated area. \n            Updating this setting to “pan”\n            will keep the current zoom level and \n            recenter the image to the clicked annotation"},{name:"textposition",options:["top","bottom","right","left"],description:"By default this option is\n           and the annotation text appears in the top left hand corner of the viewer. \n          This setting moves the box where the annotation appears \n          to the left, right, bottom, or top of annotated area.\n           Each option has a dedicated CSS class based on the option name (.top, .right, etc.)"},{name:"startenddisplay",options:["tags","info","transcription","keyboard"],description:"By default the first and last items are the full image\n           without a text box. \n           This setting allows for the option selected to be shown\n          for the first and last item."},{name:"annoview",options:["sidebyside","collapse","scrollview"],description:" Will change how the annotation and information box style. \n          <b>Collapse:<b> positions the box on top of the viewer and allows for the bar to collapse. \n          <b>Side by side:</b> is similar to the default but it is positioned next to the viewer"},{name:"toolbarposition",options:["bottom"],description:"\n          Will move the toolbar to the bottom of the viewer. \n          The default is the top of the viewer"}]},iiifmultistoryboard:function(){return this.iiifstoryboard()},iiifrangestoryboard:function(){return this.iiifstoryboard()},iiifannotation:function(){return[]}},m={iiifstoryboard:function(){return[{icon:"<i class='fas fa-search-plus'></i>",tag:"#zoomInButton",description:"Hide the Zoom in Button"},{icon:"<i class='fas fa-search-minus'></i>",tag:"#zoomOutButton",description:"Hide the Zoom out Button"},{icon:"<i class='fas fa-home'></i>",tag:"#homeZoomButton",description:"Hide the Home Button"},{icon:"<i class='fa fa-arrow-left'></i><i class='fa fa-arrow-right'></i> in content box",tag:"#previousButton.annocontrols_button, #nextButton.annocontrols_button",description:"Hide the Previous and Next buttons in the annotation text box only/"},{icon:"Content Box",tag:".fullcontent",description:"Hide the annotation content box."},{field:["font-size"],tag:".content",description:"change the content box font size"},{field:["width","height","margin"],tag:".annotation",description:"change the content box width, height and margins."}]},iiifmultistoryboard:function(){return this.iiifstoryboard()},iiifrangestoryboard:function(){return this.iiifstoryboard()},iiifannotation:function(){return[{field:["font-size"],tag:"#content"},{field:["font-size"],tag:"#tags"}]}},v=n("2ef0"),y={name:"tagbuilder",components:{ColorPicker:c["a"]},props:["apiurl","collectionurl","collections"],data:function(){return{url:[],apifilename:"",manifesturl:"",savecollection:{title:"",annotitle:"",description:"",thumbnail:""},viewtype:"",props:{},settings:{tagscolor:[{tagvalue:"",color:this.defaultoverlaycolor}]},tag:"",annotationtext:"",booleanoptions:[],textsettings:[],dropdowns:[],overlay:"",colorpickers:[{field:"overlaycolor",default:"#add8e6",description:"Color of overlays when the annotation does not have a tag."},{field:"activecolor",default:"#90ee90",description:"Color that outlines an overlay when the annotation is clicked."}],additionalinfo:[{title:"",content:""}],cssfields:[],css:{},urllength:1,fullpage:!0,baseurl:"",env:Object({NODE_ENV:"production",BASE_URL:"/annona/tools/"})}},created:function(){u.redirect(),this.collections&&(this.parsecollections=JSON.parse(this.collections)),this.baseurl="/annona/tools/"},watch:{"$route.query":{handler:function(t,e){JSON.stringify(t)!=JSON.stringify(e)&&this.setParams()},immediate:!0}},methods:{deleteField:function(t,e,n){var i=this[n]?this[n]-=1:"issecondary";"issecondary"==i?this[t][n].splice(e,1):this[t].splice(e,1),this.updateRouter()},setParams:function(){var t=this.$route.query;this.url=t.url?t.url.split(";"):[],this.urllength=this.url.length>1?this.url.length:1,this.viewtype=t.viewtype?t.viewtype:"",this.manifesturl=t.manifesturl?t.manifesturl:"",this.setDefaults(),t.apiurl&&(this.apiurl=t.apiurl),this.settings=t.settings?v.merge({tagscolor:[{tagvalue:"",color:""}]},JSON.parse(t.settings)):{tagscolor:[{tagvalue:"",color:""}]},t.props&&(this.props=JSON.parse(t.props)),t.css&&(this.css=Object.assign(this.css,JSON.parse(t.css))),this.buildTags()},addListField:function(t,e,n){this[t][e].push(n),this.updateRouter()},setDefaults:function(){this.tag="";var t=this.viewtype.replace("-","");this.viewtype&&(this.booleanoptions=v.sortBy(h[t](),"name"),this.textsettings=v.sortBy(f[t](),"name"),this.dropdowns=v.sortBy(g[t](),"name"),this.cssfields=m[t](),this.css=this.parseCSS(this.cssfields)),this.props.layers="iiif-storyboard"==this.viewtype?[{label:"",xywh:"",image:"",section:"",rotation:""}]:[],this.props.images="iiif-multistoryboard"==this.viewtype?[""]:[]},updateListType:function(){this.props={},this.settings={tagscolor:[{tagvalue:"",color:""}]},this.additionalinfo=[{title:"",content:""}],this.url=this.url.length>1&&"iiif-multistoryboard"==this.viewtype?this.url:[this.url[0]],!(this.url.length>1&&"iiif-multistoryboard"==this.viewtype)||this.url.length,this.setDefaults(),this.updateRouter()},savetocollection:function(){var t={add:!0,annotations:[{board:this.tag,description:this.savecollection["description"],thumbnail:this.savecollection["thumbnail"],title:this.savecollection["annotitle"],url:this.url.join(";"),viewtype:this.viewtype,annotation:""}],title:this.savecollection["title"]};this.annotationtext&&(t["annotations"][0]["annotation"]=this.annotationtext,t["annotations"][0]["board"]=this.tag.split("<\/script>")[1]),this.savecollection["title"]?p.a.post(this.collectionurl,t).then((function(t){console.log(t),alert("Success!")})).catch((function(t){alert(t)})):location.href="".concat(this.collectionurl,"?tag=").concat(t["annotations"][0]["board"],"&viewtype=").concat(this.viewtype,"&url=").concat(this.url.join(";"),"&desc=").concat(this.savecollection["description"],"&annotitle=").concat(this.savecollection["annotitle"],"&annotation=").concat(this.annotationtext)},savetoapi:function(){p.a.post(this.apiurl,{tag:this.tag,slug:this.apifilename}).then((function(t){console.log(t),alert(t.data.message)})).catch((function(t){alert(t)}))},getsettings:function(){for(var t=this,e=this.colorpickers.map((function(t){return t.default})),n=Object.keys(this.settings).filter((function(n){return""!=t.settings[n]&&-1==e.indexOf(t.settings[n])})),i="",o=0;o<n.length;o++){var a=n[o],r=this.settings[a];if("tagscolor"===a){for(var s={},l=0;l<r.length;l++){var c=r[l];""!=c["tagvalue"]&&-1==c["tagvalue"].indexOf("placeholder")&&(s[this.tagToClass(c["tagvalue"].trim())]=c["color"])}Object.keys(s).length>0&&(i+="".concat(a,": ").concat(JSON.stringify(s),";"))}else i+="".concat(a,": ").concat(r,";");"fullpage"==a&&(this.fullpage=!0)}return i},closeFullpage:function(){this.fullpage=!1,document.getElementsByTagName(this.viewtype)[0].childNodes[0].setAttribute("class","storyboard_viewer")},tagToClass:function(t){var e="-?[_a-zA-Z]+[_a-zA-Z0-9-]*";return t.length>0?Object(l["a"])("".concat(t.toLowerCase()).matchAll(e)).join(""):""},getAdditionalInfo:function(){for(var t="",e=this.url?this.url[0].split("/").slice(-1)[0].replace(".json",""):"",n="",i=0;i<this.additionalinfo.length;i++){var o=this.additionalinfo[i],a="".concat(e,"_").concat(i,"_additionalinfo");o["content"]&&o["title"]&&(n+="".concat(a,";"),t+='<div id="'.concat(a,'" title="').concat(o["title"],'">').concat(o["content"].replace(/\n/g,"<br />"),"</div>"))}return this.settings["additionalinfo"]=n.slice(0,-1),t},getpropstring:function(){var t="";for(var e in this.props){var n=this.props[e];n="images"==e?n.filter((function(t){return-1==t.indexOf("placeholder")})).join(";"):n.filter((function(t){return-1==t.label.indexOf("placeholder")}));var i="layers"==e&&n.length>0?n[0].image:"images"==e&&n.length>0?n[0]:n;n="layers"==e?JSON.stringify(n).replace(/'/g,'\\"'):n,i&&i.length>0&&(t+=" ".concat(e,"='").concat(n,"'"))}return t},buildCSS:function(){var t="";for(var e in this.css)if(1==this.css[e])t+="".concat(e," {display: none!important;}");else if("freetextcss"!=e)for(var n in this.css[e]){var i=this.css[e][n];i&&(e="font-size"==n?"".concat(e," > * > *"):e,t+="".concat(e," {").concat(n,": ").concat(i,"!important}"))}else t+=this.css[e];return t=""!=t?"<style>"+t+"</style>":t,t},parseCSS:function(t){for(var e={},n=0;n<t.length;n++){var i=t[n];if(i.field&&(e[i.tag]={}),i.field)for(var o=0;o<i.field.length;o++)e[i.tag][i.field[o]]=""}return e},removeEmpty:function(t){var e={};for(var n in t)if("String"==t[n].constructor.name||"Boolean"==t[n].constructor.name)t[n]&&("activecolor"==n&&t[n]!=this.defaultactivecolor?e[n]=t[n]:"overlaycolor"==n&&t[n]!=this.defaultoverlaycolor?e[n]=t[n]:"activecolor"!=n&&"overlaycolor"!=n&&(e[n]=t[n]));else if("Array"==t[n].constructor.name){if(t[n].length>0)if("tagscolor"==n){for(var i=[],o=0;o<t[n].length;o++)t[n][o]["tagvalue"]&&t[n][o]["tagvalue"]&&i.push(t[n][o]);i.length>0&&(e[n]=i)}else if("layers"==n){for(var a=[],r=0;r<t[n].length;r++)t[n][r]["image"]&&t[n][r]["label"]&&a.push(t[n][r]);a.length>0&&(e[n]=a)}else e[n]=t[n]}else for(var s in t[n])t[n][s]&&(e[n]=e[n]?e[n]:{},e[n][s]=t[n][s]);return e=0==Object.keys(e).length?"":JSON.stringify(e),e},updateRouter:function(){var t=this.removeEmpty(this.css),e=this.removeEmpty(this.settings),n=this.removeEmpty(this.props),i={url:this.url.join(";"),viewtype:this.viewtype,manifesturl:this.manifesturl,apiurl:this.apiurl,css:t,settings:e,props:n};if(JSON.stringify(this.$route.query)==JSON.stringify(i))return!1;this.$router.push({name:"tagbuilder",query:i}).catch((function(t){console.log("router error"),console.log(t)}))},buildTags:function(){if((this.url.length>0||this.annotationtext.length>0)&&""!=this.viewtype){var t;this.annotationtext&&(t=u.createScriptTag(this.annotationtext),this.url=[t["id"]]),this.apiurl&&(this.apifilename=this.url[0].split("/").slice(-1)[0].replace(".json",""));var e=this.getAdditionalInfo(),n=this.buildCSS(),i="annotationurl";"iiif-multistoryboard"==this.viewtype?i="annotationurls":"iiif-rangestoryboard"==this.viewtype&&(i="rangeurl");var o="".concat(e?e+"\n":"","\n          ").concat(n?n+"\n":"","<").concat(this.viewtype," ").concat(i,"='").concat(this.url.join(";"),"'"),a=this.getsettings(),r=this.getpropstring();this.manifesturl&&(o+=" manifesturl='".concat(this.manifesturl,"'")),r&&(o+="".concat(r)),a&&(o+=" styling='".concat(a,"'")),o+="></".concat(this.viewtype,">"),this.tag="",this.tag=t?"".concat(t["outerHTML"]).concat(o.trim()):o.trim()}}},computed:{defaultoverlaycolor:function(){return this.colorpickers.filter((function(t){return"overlaycolor"==t["field"]}))[0]["default"]},defaultactivecolor:function(){return this.colorpickers.filter((function(t){return"activecolor"==t["field"]}))[0]["default"]},displayURL:function(){var t=this.$route.query,e={};t["settings"]&&(e=JSON.parse(t["settings"])),e["fullpage"]=!0,t["settings"]=JSON.stringify(e);var n=window.location.protocol+"//"+location.hostname+(location.port?":"+location.port:""),i="flask"!=this.env.NODE_ENV?"".concat(n).concat(this.$router.resolve({name:"display",query:t}).href):"https://ncsu-libraries.github.io/annona/tools/#/tag-builder".concat(this.$router.resolve({name:"display",query:t}).href);return i}}},b=y,w=(n("c65c"),n("2877")),_=Object(w["a"])(b,r,s,!1,null,"0628f66c",null),x=_.exports,k={name:"app",components:{tagbuilder:x}},A=k,C=(n("034f"),Object(w["a"])(A,o,a,!1,null,null,null)),F=C.exports,T=n("8c4f"),B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.items,(function(e){return n("div",{key:e.path},[n("router-link",{attrs:{to:e.path}},[t._v("\n        "+t._s(e.name)+"\n    ")]),n("p",[t._v(t._s(e.blurb))])],1)})),0)},S=[],N={created:function(){var t=this;u.redirect(),this.$router.options.routes.forEach((function(e){t.items.push({name:e.title,path:e.path,blurb:e.blurb})}))},data:function(){return{items:[]}}},O=N,D=Object(w["a"])(O,B,S,!1,null,null,null),L=D.exports,j=(n("289e"),n("c894"),n("af88")),E=n("6018");i["a"].use(E["b"]),i["a"].component("tippy",E["a"]),i["a"].use(T["a"]),i["a"].use(j["a"]),i["a"].config.productionTip=!1;var R=[{path:"/",component:L,name:"index"},{path:"/tag-builder",component:x,name:"tagbuilder",title:"Tag Builder",blurb:"The Tag Builder is a user interface for creating tags to be used with this library. It provides a more user friendly way of implementing settings."},{path:"/display",component:x,name:"display",title:"Display Annona items",blurb:"Static URL to display Annona views"}];var I=new T["a"]({base:"/annona/tools/",routes:R});console.log(R),new i["a"]({render:function(t){return t(F)},router:I}).$mount("#app")},"64a9":function(t,e,n){},"6fa6":function(t,e,n){},c65c:function(t,e,n){"use strict";var i=n("6fa6"),o=n.n(i);o.a}});
//# sourceMappingURL=app.js.map