import Vue from 'vue'
//import index from 'karma-chai'
import { mount } from '@vue/test-utils';
import { shallowMount } from '@vue/test-utils';

import rangestoryboard from '../src/components/rangestoryboard.vue';
import shared from '../src/components/shared.js'

import flushPromises from 'flush-promises';
let consoleSpy;


describe('Component', () => {
    test('test range list', async ()  => {
      const wrapper =  shallowMount(rangestoryboard,{
        propsData: {
          rangeurl: 'range.json'
        }
      })
      const saveMock = jest.fn()
      wrapper.vm.createViewer = saveMock;
      await wrapper.vm.$nextTick()
      await flushPromises()
      var data = wrapper.vm.$data
      expect(data.tags).toBe(false)
      expect(data.layerslist).toBe(false)
      expect(wrapper.isws).toBe(undefined)
      expect(data.buttons).toEqual({"autorunbutton": "<i class=\"fas fa-magic\"></i>", "expandbutton": "<i class=\"fas fa-expand\"></i>", "hide_button": "<i class=\"fas fa-caret-up\"></i>", "info": "<i class=\"fas fa-info-circle\"></i>", "layer": "<i class=\"fas fa-layer-group\"></i>", "next": "<i class=\"fas fa-chevron-left\"></i>", "overlaybutton": "<i class=\"fas fa-toggle-on\"></i>", "playpause": "<i class=\"fas fa-play\"></i>", "prev": "<i class=\"fas fa-chevron-right\"></i>", "tags": "<i class=\"fas fa-tag\"></i>"})
      expect(data.range).toBe(true)
      expect(data.toctitle).toEqual("Range Pages")
      expect(data.stylingstring).toEqual("autorun_interval:3;title:十二類絵巻: 1;")
      expect(data.annotationurl).toEqual({"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/1", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "1"})
      expect(data.rangelist).toEqual( [{"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/1", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "1"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/4", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "4"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/5", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "5"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/6", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "6"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/7", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "7"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/8", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "8"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/9", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "9"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/10", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "10"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/11", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "11"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/12", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "12"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/13", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "13"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/14", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "14"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/15", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "15"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/16", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "16"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/17", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "17"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/18", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "18"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/20", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "20"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/21", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "21"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/22", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "22"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/23", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "23"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/24", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "24"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/25", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "25"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/26", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "26"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/27", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "27"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/28", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "28"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/29", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "29"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/30", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "30"}, {"anno": "https://kotenseki.nijl.ac.jp/biblio/200015137/list/31", "canvas": {"within": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest"}, "manifest": "https://kotenseki.nijl.ac.jp/biblio/200015137/manifest", "section": undefined, "title": "31"}])
      expect(data.position).toEqual(0)
      expect(data.prevPageInactive).toBe(true)
      expect(data.nextPageInactive).toBe(false)
      expect(data.rangeid).toBe('range.json')
      expect(data.customlayers).toEqual('')
      expect(data.isfullscreen).toBe(false)
      expect(data.toc).toEqual([{"description": "", "label": "1", "position": 0}, {"description": "", "label": "4", "position": 1}, {"description": "", "label": "5", "position": 2}, {"description": "", "label": "6", "position": 3}, {"description": "", "label": "7", "position": 4}, {"description": "", "label": "8", "position": 5}, {"description": "", "label": "9", "position": 6}, {"description": "", "label": "10", "position": 7}, {"description": "", "label": "11", "position": 8}, {"description": "", "label": "12", "position": 9}, {"description": "", "label": "13", "position": 10}, {"description": "", "label": "14", "position": 11}, {"description": "", "label": "15", "position": 12}, {"description": "", "label": "16", "position": 13}, {"description": "", "label": "17", "position": 14}, {"description": "", "label": "18", "position": 15}, {"description": "", "label": "20", "position": 16}, {"description": "", "label": "21", "position": 17}, {"description": "", "label": "22", "position": 18}, {"description": "", "label": "23", "position": 19}, {"description": "", "label": "24", "position": 20}, {"description": "", "label": "25", "position": 21}, {"description": "", "label": "26", "position": 22}, {"description": "", "label": "27", "position": 23}, {"description": "", "label": "28", "position": 24}, {"description": "", "label": "29", "position": 25}, {"description": "", "label": "30", "position": 26}, {"description": "", "label": "31", "position": 27}])
      expect(data.viewingDirection).toBe('rtl')
      expect(data.rangetitle).toEqual('十二類絵巻')
    })

    test('test range list without canvases', async ()  => {
      const wrapper =  shallowMount(rangestoryboard,{
        propsData: {
          rangeurl: 'range2.json'
        }
      })
      const saveMock = jest.fn()
      wrapper.vm.createViewer = saveMock;
      await wrapper.vm.$nextTick()
      await flushPromises()
      var data = wrapper.vm.$data
      expect(data.tags).toBe(false)
      expect(data.layerslist).toBe(false)
      expect(data.isws).toBe("")
      expect(data.buttons).toEqual({"autorunbutton": "<i class=\"fas fa-magic\"></i>", "expandbutton": "<i class=\"fas fa-expand\"></i>", "hide_button": "<i class=\"fas fa-caret-up\"></i>", "info": "<i class=\"fas fa-info-circle\"></i>", "layer": "<i class=\"fas fa-layer-group\"></i>", "next": "<i class=\"fas fa-chevron-right\"></i>", "overlaybutton": "<i class=\"fas fa-toggle-on\"></i>", "playpause": "<i class=\"fas fa-play\"></i>", "prev": "<i class=\"fas fa-chevron-left\"></i>", "tags": "<i class=\"fas fa-tag\"></i>"})
      expect(data.range).toBe(true)
      expect(data.toctitle).toEqual("Range Pages")
      expect(data.stylingstring).toEqual("autorun_interval:3;title:A Profound Warrior For Us All;")
      expect(data.annotationurl).toEqual({"anno": "https://tomcrane.github.io/iiif-collector/objects/longer-article-annos1.json", "canvas": undefined, "jsonanno": undefined, "manifest": "", "section": undefined, "title": "Page 1"})
      expect(data.position).toEqual(0)
      expect(data.prevPageInactive).toBe(true)
      expect(data.nextPageInactive).toBe(true)
      expect(data.rangeid).toBe('range2.json')
      expect(data.customlayers).toEqual('')
      expect(data.isfullscreen).toBe(false)
      expect(data.toc).toEqual([{"description": "", "label": "Page 1", "position": 0}])
      expect(data.viewingDirection).toBe('ltr')
      expect(data.rangetitle).toEqual('A Profound Warrior For Us All')
    })

    test('test range list without canvases and settings', async ()  => {
      const wrapper =  mount(rangestoryboard,{
        propsData: {
          rangeurl: 'range2.json',
          layers: '[{"label":"View from Arles", "xywh": "200,200,4750,6513", "image":"https://tools.wmflabs.org/zoomviewer/iipsrv.fcgi/?iiif=cache/8937e1777945b722457fac2cde0cf61b.tif/info.json"}]',
          ws: "wss://echo",
          styling: "autorun_interval:4; panorzoom: pan"
        },
        attachToDocument: true
      })
      await wrapper.vm.$nextTick()
      await flushPromises()
      var data = wrapper.vm.$data;
      expect(data.tags).toBe(false)
      expect(data.layerslist).toBe(false)
      expect(data.isws).toBe("wss://echo")
      expect(data.buttons).toEqual({"autorunbutton": "<i class=\"fas fa-magic\"></i>", "expandbutton": "<i class=\"fas fa-expand\"></i>", "hide_button": "<i class=\"fas fa-caret-up\"></i>", "info": "<i class=\"fas fa-info-circle\"></i>", "layer": "<i class=\"fas fa-layer-group\"></i>", "next": "<i class=\"fas fa-chevron-right\"></i>", "overlaybutton": "<i class=\"fas fa-toggle-on\"></i>", "playpause": "<i class=\"fas fa-play\"></i>", "prev": "<i class=\"fas fa-chevron-left\"></i>", "tags": "<i class=\"fas fa-tag\"></i>"})
      expect(data.range).toBe(true)
      expect(data.toctitle).toEqual("Range Pages")
      expect(data.stylingstring).toEqual("autorun_interval:4;panorzoom:pan;title:A Profound Warrior For Us All;")
      expect(data.annotationurl).toEqual({"anno": "https://tomcrane.github.io/iiif-collector/objects/longer-article-annos1.json", "canvas": undefined, "jsonanno": undefined, "manifest": "", "section": undefined, "title": "Page 1"})
      expect(data.position).toEqual(0)
      expect(data.prevPageInactive).toBe(true)
      expect(data.nextPageInactive).toBe(true)
      expect(data.rangeid).toBe('range2.json')
      expect(data.customlayers).toEqual('[{"label":"View from Arles", "xywh": "200,200,4750,6513", "image":"https://tools.wmflabs.org/zoomviewer/iipsrv.fcgi/?iiif=cache/8937e1777945b722457fac2cde0cf61b.tif/info.json"}]')
      expect(data.isfullscreen).toBe(false)
      expect(data.toc).toEqual([{"description": "", "label": "Page 1", "position": 0}])
      expect(data.viewingDirection).toBe('ltr')
      expect(data.rangetitle).toBe("A Profound Warrior For Us All")
      var sbd = wrapper.vm.$children[0].$el['__vue__']._data;
      expect(sbd.zoomsections).toEqual([{"section": ["1958,1907,113,51"], "svg_path": [undefined], "type": "rect"}, {"section": ["1537,579,382,352"], "svg_path": [undefined], "type": "rect"}, {"section": ["1704,1509,319,123"], "svg_path": [undefined], "type": "rect"}])
      expect(sbd.seadragontile).toEqual("https://iiif.bodleian.ox.ac.uk/iiif/image/467a8da6-02b6-4643-a376-4b0afaff6ab7/info.json")
      expect(sbd.position).toBe(-1);
      expect(sbd.seadragonid).toBe("longer-article-annos1_storyboard");
      expect(sbd.annotations).toEqual([{"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["Lodinv<div class=\"authorship\">Written by: https://recogito.pelagios.org/rainer</div>"], "tags": [], "textual_body": ["<div class=\"identifying\">http://pleiades.stoa.org/places/79574<div class=\"authorship\">Written by: https://recogito.pelagios.org/rainer</div></div>"], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["MARE HIBERNICVM<div class=\"authorship\">Written by: https://recogito.pelagios.org/rainer</div>"], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["BRITANIA INSVLA<div class=\"authorship\">Written by: https://recogito.pelagios.org/rainer</div>"], "tags": [], "textual_body": ["<div class=\"commenting\">The British Isles<div class=\"authorship\">Written by: https://recogito.pelagios.org/rainer</div></div>"], "type": undefined}]);
      expect(sbd.currentanno).toBe("");
      expect(sbd.transcription).toBe("");
      expect(sbd.textposition).toBe("corner");
      expect(sbd.prev_inactive).toBe(true);
      expect(sbd.next_inactive).toBe(false);
      expect(sbd.toolbar_id).toBe("");
      expect(sbd.booleanitems).toEqual({"additionalinfoshown": false, "annoinfoshown": false, "imageinfoshown": false, "isexcerpt": false, "isoverlaytoggled": false, "istranscription": false, "tocshown": false});
      expect(sbd.shown).toBe(false);
      expect(sbd.mapmarker).toBe("<i class=\"fas fa-map-marker-alt map-marker\"></i>");
      expect(sbd.isautorunning).toBe("");
      expect(sbd.buttons).toEqual({"anno": "<i class=\"fas fa-file-alt\"></i>", "autorunbutton": "<i class=\"fas fa-magic\"></i>", "expandbutton": "<i class=\"fas fa-expand\"></i>", "hide_button": "<i class=\"fas fa-caret-up\"></i>", "info": "<i class=\"fas fa-info-circle\"></i>", "keyboard": "<i class=\"fas fa-keyboard\"></i>", "layer": "<i class=\"fas fa-layer-group\"></i>", "overlaybutton": "<i class=\"fas fa-toggle-on\"></i>", "playpause": "<i class=\"fas fa-play\"></i>", "tags": "<i class=\"fas fa-tag\"></i>"});
      expect(sbd.settings).toEqual({"autorun_interval": 4, "panorzoom": "pan", "title": "A Profound Warrior For Us All", "truncate_length": 2});
      expect(sbd.currentlang).toBe("");
      expect(sbd.languages).toEqual([]);
      expect(sbd.fullscreen).toBe(false);
      expect(sbd.tagslist).toEqual({});
      expect(sbd.imageinfo).toEqual({"label": "Manifest information", "text": ""});
      expect(sbd.imagetitle).toBe("A Profound Warrior For Us All");
      expect(sbd.layerslist).toEqual([{"checked": true, "label": "Layer 1", "opacity": 1, "tile": "https://iiif.bodleian.ox.ac.uk/iiif/image/467a8da6-02b6-4643-a376-4b0afaff6ab7/info.json"}, {"checked": false, "label": "View from Arles", "opacity": 0, "rotation": 0, "section": "", "tile": "https://tools.wmflabs.org/zoomviewer/iipsrv.fcgi/?iiif=cache/8937e1777945b722457fac2cde0cf61b.tif/info.json", "xywh": ["200", "200", "4750", "6513"]}]);
      expect(sbd.shortcuts).toEqual({"autorun": {"icon": "<i class=\"fas fa-magic\"></i>", "label": "Auto Run", "shortcut": ["b", "1"]}, "close": {"icon": "<i class=\"fas fa-times\"></i>", "label": "Close", "shortcut": ["x", "6"]}, "fullscreen": {"icon": "<i class=\"fas fa-expand\"></i>", "label": "Fullscreen", "shortcut": ["alt+f", ";"]}, "hide": {"icon": "<i class=\"fas fa-caret-up\"></i>", "label": "Collapse text", "shortcut": ["c", "7"]}, "home": {"icon": "<i class=\"fas fa-home\"></i>", "label": "Home", "shortcut": ["h", "0"]}, "info": {"icon": "<i class=\"fas fa-info-circle\"></i>", "label": "Info Button", "shortcut": ["i", "2"]}, "layers": {"icon": "<i class=\"fas fa-layer-group\"></i>", "label": "Layers", "shortcut": ["l", "5"]}, "next": {"icon": "<i class=\"fa fa-arrow-right\"></i>", "label": "Next", "shortcut": ["n", ".", "shift+right"]}, "nextanno": {"icon": "<i class=\"fa fa-chevron-right\"></i>", "label": "Next Annotation", "shortcut": ["alt+n", "alt+.", "alt+right"]}, "overlay": {"icon": "<i class=\"fas fa-toggle-on\"></i>", "label": "Toggle", "shortcut": ["o", "4"]}, "prev": {"icon": "<i class=\"fa fa-arrow-left\"></i>", "label": "Previous", "shortcut": ["p", ",", "shift+left"]}, "prevanno": {"icon": "<i class=\"fa fa-chevron-left\"></i>", "label": "Previous Annotation", "shortcut": ["alt+p", "alt+,", "alt+left"]}, "shortcut": {"icon": "<i class=\"fas fa-keyboard\"></i>", "label": "Keyboard Shortcuts", "shortcut": ["s", "8"]}, "transcription": {"icon": "<i class=\"fas fa-file-alt\"></i>", "label": "Toggle between transcription/annotation", "shortcut": ["a", "/"]}, "zoomin": {"icon": "<i class=\"fas fa-search-plus\"></i>", "label": "Zoom In", "shortcut": ["z", "+", "shift+up"]}, "zoomout": {"icon": "<i class=\"fas fa-search-minus\"></i>", "label": "Zoom Out", "shortcut": ["m", "-", "shift+down"]}});
    })

    test('test manifesturl range', async ()  => {
      const wrapper =  mount(rangestoryboard,{
        propsData: {
          rangeurl: 'https://d.lib.ncsu.edu/collections/catalog/technician-basketballspecial-1991-11/manifest'
        },
        attachToDocument: true
      });
      
      await wrapper.vm.$nextTick()
      await flushPromises()
      var data = wrapper.vm.$data
      expect(data.tags).toBe(false)
      expect(data.layerslist).toBe(false)
      expect(data.buttons).toEqual({"autorunbutton": "<i class=\"fas fa-magic\"></i>", "expandbutton": "<i class=\"fas fa-expand\"></i>", "hide_button": "<i class=\"fas fa-caret-up\"></i>", "info": "<i class=\"fas fa-info-circle\"></i>", "layer": "<i class=\"fas fa-layer-group\"></i>", "next": "<i class=\"fas fa-chevron-right\"></i>", "overlaybutton": "<i class=\"fas fa-toggle-on\"></i>", "playpause": "<i class=\"fas fa-play\"></i>", "prev": "<i class=\"fas fa-chevron-left\"></i>", "tags": "<i class=\"fas fa-tag\"></i>"})
      expect(data.range).toBe(true)
      expect(data.toctitle).toEqual("Range Pages")
      expect(data.stylingstring).toEqual("autorun_interval:3;title:Technician Basketball Special, November 1991: Text of this page (word level);")
      expect(data.annotationurl).toEqual({"anno": "https://ocr.lib.ncsu.edu/ocr/te/technician-basketballspecial-1991-11_0001/technician-basketballspecial-1991-11_0001-annotation-list-word.json", "canvas": "https://d.lib.ncsu.edu/collections/canvas/technician-basketballspecial-1991-11_0001", "jsonanno": undefined, "manifest": "https://d.lib.ncsu.edu/collections/catalog/technician-basketballspecial-1991-11/manifest", "section": undefined, "title": "Text of this page (word level)"})
      expect(data.position).toEqual(0)
      expect(data.prevPageInactive).toBe(true)
      expect(data.nextPageInactive).toBe(false)
      expect(data.rangeid).toBe('manifest')
      expect(data.isfullscreen).toBe(false)
      expect(data.toc).toEqual([{"position":0,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0001/full/30,/0/default.jpg","description":""},{"position":1,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0001/full/30,/0/default.jpg","description":""},{"position":2,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0001/full/30,/0/default.jpg","description":""},{"position":1,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0002/full/30,/0/default.jpg","description":""},{"position":2,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0002/full/30,/0/default.jpg","description":""},{"position":3,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0002/full/30,/0/default.jpg","description":""},{"position":2,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0003/full/30,/0/default.jpg","description":""},{"position":3,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0003/full/30,/0/default.jpg","description":""},{"position":4,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0003/full/30,/0/default.jpg","description":""},{"position":3,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0004/full/30,/0/default.jpg","description":""},{"position":4,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0004/full/30,/0/default.jpg","description":""},{"position":5,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0004/full/30,/0/default.jpg","description":""},{"position":4,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0005/full/30,/0/default.jpg","description":""},{"position":5,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0005/full/30,/0/default.jpg","description":""},{"position":6,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0005/full/30,/0/default.jpg","description":""},{"position":5,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0006/full/30,/0/default.jpg","description":""},{"position":6,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0006/full/30,/0/default.jpg","description":""},{"position":7,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0006/full/30,/0/default.jpg","description":""},{"position":6,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0007/full/30,/0/default.jpg","description":""},{"position":7,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0007/full/30,/0/default.jpg","description":""},{"position":8,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0007/full/30,/0/default.jpg","description":""},{"position":7,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0008/full/30,/0/default.jpg","description":""},{"position":8,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0008/full/30,/0/default.jpg","description":""},{"position":9,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0008/full/30,/0/default.jpg","description":""},{"position":8,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0009/full/30,/0/default.jpg","description":""},{"position":9,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0009/full/30,/0/default.jpg","description":""},{"position":10,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0009/full/30,/0/default.jpg","description":""},{"position":9,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0010/full/30,/0/default.jpg","description":""},{"position":10,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0010/full/30,/0/default.jpg","description":""},{"position":11,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0010/full/30,/0/default.jpg","description":""},{"position":10,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0011/full/30,/0/default.jpg","description":""},{"position":11,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0011/full/30,/0/default.jpg","description":""},{"position":12,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0011/full/30,/0/default.jpg","description":""},{"position":11,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0012/full/30,/0/default.jpg","description":""},{"position":12,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0012/full/30,/0/default.jpg","description":""},{"position":13,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0012/full/30,/0/default.jpg","description":""},{"position":12,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0013/full/30,/0/default.jpg","description":""},{"position":13,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0013/full/30,/0/default.jpg","description":""},{"position":14,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0013/full/30,/0/default.jpg","description":""},{"position":13,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0014/full/30,/0/default.jpg","description":""},{"position":14,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0014/full/30,/0/default.jpg","description":""},{"position":15,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0014/full/30,/0/default.jpg","description":""},{"position":14,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0015/full/30,/0/default.jpg","description":""},{"position":15,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0015/full/30,/0/default.jpg","description":""},{"position":16,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0015/full/30,/0/default.jpg","description":""},{"position":15,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0016/full/30,/0/default.jpg","description":""},{"position":16,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0016/full/30,/0/default.jpg","description":""},{"position":17,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0016/full/30,/0/default.jpg","description":""},{"position":16,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0017/full/30,/0/default.jpg","description":""},{"position":17,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0017/full/30,/0/default.jpg","description":""},{"position":18,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0017/full/30,/0/default.jpg","description":""},{"position":17,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0018/full/30,/0/default.jpg","description":""},{"position":18,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0018/full/30,/0/default.jpg","description":""},{"position":19,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0018/full/30,/0/default.jpg","description":""},{"position":18,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0019/full/30,/0/default.jpg","description":""},{"position":19,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0019/full/30,/0/default.jpg","description":""},{"position":20,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0019/full/30,/0/default.jpg","description":""},{"position":19,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0020/full/30,/0/default.jpg","description":""},{"position":20,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0020/full/30,/0/default.jpg","description":""},{"position":21,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0020/full/30,/0/default.jpg","description":""},{"position":20,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0021/full/30,/0/default.jpg","description":""},{"position":21,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0021/full/30,/0/default.jpg","description":""},{"position":22,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0021/full/30,/0/default.jpg","description":""},{"position":21,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0022/full/30,/0/default.jpg","description":""},{"position":22,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0022/full/30,/0/default.jpg","description":""},{"position":23,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0022/full/30,/0/default.jpg","description":""},{"position":22,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0023/full/30,/0/default.jpg","description":""},{"position":23,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0023/full/30,/0/default.jpg","description":""},{"position":24,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0023/full/30,/0/default.jpg","description":""},{"position":23,"label":"Text of this page (word level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0024/full/30,/0/default.jpg","description":""},{"position":24,"label":"Text of this page (line level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0024/full/30,/0/default.jpg","description":""},{"position":25,"label":"Text of this page (paragraph level)","thumbnail":"https://iiif.lib.ncsu.edu/iiif/technician-basketballspecial-1991-11_0024/full/30,/0/default.jpg","description":""}])
      expect(data.viewingDirection).toBe('ltr')
      expect(data.rangetitle).toBe("Technician Basketball Special, November 1991");
      var sbd = wrapper.vm.$children[0].$el['__vue__']._data;
      expect(sbd.zoomsections).toEqual([{"section": ["6270,3903,2250,2250"], "svg_path": [undefined], "type": "rect"}, {"section": ["12288,16567,2250,2250"], "svg_path": [undefined], "type": "rect"}])
      expect(sbd.seadragontile).toEqual("https://iiif.lib.ncsu.edu/iiif/segIns_023/318,499,2891,3339/1200,/0/default.jpg")
      expect(sbd.position).toBe(-1);
      expect(sbd.seadragonid).toBe("technician-basketballspecial-1991-11_0001-annotation-word_storyboard");
      expect(sbd.annotations).toEqual([{"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["Annotation 1"], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["Annotation 2"], "tags": [], "textual_body": [], "type": undefined}]);
      expect(sbd.currentanno).toBe("");
      expect(sbd.transcription).toBe("");
      expect(sbd.textposition).toBe("corner");
      expect(sbd.prev_inactive).toBe(true);
      expect(sbd.next_inactive).toBe(false);
      expect(sbd.toolbar_id).toBe("");
      expect(sbd.booleanitems).toEqual({"additionalinfoshown": false, "annoinfoshown": false, "imageinfoshown": false, "isexcerpt": false, "isoverlaytoggled": false, "istranscription": false, "tocshown": false});
      expect(sbd.shown).toBe(false);
      expect(sbd.mapmarker).toBe("<i class=\"fas fa-map-marker-alt map-marker\"></i>");
      expect(sbd.isautorunning).toBe("");
      expect(sbd.buttons).toEqual({"anno": "<i class=\"fas fa-file-alt\"></i>", "autorunbutton": "<i class=\"fas fa-magic\"></i>", "expandbutton": "<i class=\"fas fa-expand\"></i>", "hide_button": "<i class=\"fas fa-caret-up\"></i>", "info": "<i class=\"fas fa-info-circle\"></i>", "keyboard": "<i class=\"fas fa-keyboard\"></i>", "layer": "<i class=\"fas fa-layer-group\"></i>", "overlaybutton": "<i class=\"fas fa-toggle-on\"></i>", "playpause": "<i class=\"fas fa-play\"></i>", "tags": "<i class=\"fas fa-tag\"></i>"});
      expect(sbd.settings).toEqual({"autorun_interval": 3, "title": "Technician Basketball Special, November 1991: Text of this page (word level)", "truncate_length": 2});
      expect(sbd.currentlang).toBe("");
      expect(sbd.languages).toEqual([]);
      expect(sbd.fullscreen).toBe(false);
      expect(sbd.tagslist).toEqual({});
      expect(sbd.imageinfo).toEqual({"label": "Manifest information", "text": "<div id=\"Manifest\"><b>Manifest: </b><a href=\"https://d.lib.ncsu.edu/collections/catalog/technician-basketballspecial-1991-11/manifest\" target=\"_blank\">https://d.lib.ncsu.edu/collections/catalog/technician-basketballspecial-1991-11/manifest</a></div><div id=\"title\"><b>Title: </b>Technician Basketball Special, November 1991</div><div id=\"attribution\"><b>Attribution: </b>Technician (Raleigh, N.C.) (LH1 .N6 T4), Special Collections Research Center at NC State University Libraries</div><div id=\"license\"><b>License: </b>https://d.lib.ncsu.edu/collections/about#rights_and_use</div><div id=\"title\"><b>Title: </b>Technician Basketball Special, November 1991</div><div id=\"Creator\"><b>Creator: </b><span><a href=\"https://d.lib.ncsu.edu/collections/catalog?f%5Bnames_facet%5D%5B%5D=Technician+%28Raleigh%2C+N.C.%29\">Technician (Raleigh, N.C.)</a> (Publisher)</span></div><div id=\"Created Date\"><b>Created Date: </b>1991-11</div><div id=\"URL\"><b>URL: </b><span><a href=\"https://d.lib.ncsu.edu/collections/catalog/technician-basketballspecial-1991-11\">https://d.lib.ncsu.edu/collections/catalog/technician-basketballspecial-1991-11</a></span></div><div id=\"\"></b><span><a title=\"IIIF drag &amp; drop\" href=\"https://d.lib.ncsu.edu/collections/catalog/technician-basketballspecial-1991-11?manifest=https%3A%2F%2Fd.lib.ncsu.edu%2Fcollections%2Fcatalog%2Ftechnician-basketballspecial-1991-11%2Fmanifest.json\">IIIF drag &amp; drop</a> (<a href=\"https://d.lib.ncsu.edu/collections/about-iiif\">About IIIF</a>)</span></div>"});
      expect(sbd.imagetitle).toBe("Technician Basketball Special, November 1991: Text of this page (word level)");
      expect(sbd.layerslist).toEqual([{"checked": true, "label": "Layer 1", "opacity": 1, "tile": "https://iiif.lib.ncsu.edu/iiif/segIns_023/318,499,2891,3339/1200,/0/default.jpg"}]);
      expect(sbd.shortcuts).toEqual({"autorun": {"icon": "<i class=\"fas fa-magic\"></i>", "label": "Auto Run", "shortcut": ["b", "1"]}, "close": {"icon": "<i class=\"fas fa-times\"></i>", "label": "Close", "shortcut": ["x", "6"]}, "fullscreen": {"icon": "<i class=\"fas fa-expand\"></i>", "label": "Fullscreen", "shortcut": ["alt+f", ";"]}, "hide": {"icon": "<i class=\"fas fa-caret-up\"></i>", "label": "Collapse text", "shortcut": ["c", "7"]}, "home": {"icon": "<i class=\"fas fa-home\"></i>", "label": "Home", "shortcut": ["h", "0"]}, "info": {"icon": "<i class=\"fas fa-info-circle\"></i>", "label": "Info Button", "shortcut": ["i", "2"]}, "next": {"icon": "<i class=\"fa fa-arrow-right\"></i>", "label": "Next", "shortcut": ["n", ".", "shift+right"]}, "nextanno": {"icon": "<i class=\"fa fa-chevron-right\"></i>", "label": "Next Annotation", "shortcut": ["alt+n", "alt+.", "alt+right"]}, "overlay": {"icon": "<i class=\"fas fa-toggle-on\"></i>", "label": "Toggle", "shortcut": ["o", "4"]}, "prev": {"icon": "<i class=\"fa fa-arrow-left\"></i>", "label": "Previous", "shortcut": ["p", ",", "shift+left"]}, "prevanno": {"icon": "<i class=\"fa fa-chevron-left\"></i>", "label": "Previous Annotation", "shortcut": ["alt+p", "alt+,", "alt+left"]}, "shortcut": {"icon": "<i class=\"fas fa-keyboard\"></i>", "label": "Keyboard Shortcuts", "shortcut": ["s", "8"]}, "zoomin": {"icon": "<i class=\"fas fa-search-plus\"></i>", "label": "Zoom In", "shortcut": ["z", "+", "shift+up"]}, "zoomout": {"icon": "<i class=\"fas fa-search-minus\"></i>", "label": "Zoom Out", "shortcut": ["m", "-", "shift+down"]}});
    })

    test('test single list manifesturl', async ()  => {
      const wrapper =  mount(rangestoryboard,{
        propsData: {
          rangeurl: 'https://storiiies.cogapp.com/holbein/manifest.json'
        },
        attachToDocument: true
      });
      
      await wrapper.vm.$nextTick()
      await flushPromises()
      var data = wrapper.vm.$data
      expect(data.tags).toBe(false)
      expect(data.layerslist).toBe(false)
      expect(data.buttons).toEqual({"autorunbutton": "<i class=\"fas fa-magic\"></i>", "expandbutton": "<i class=\"fas fa-expand\"></i>", "hide_button": "<i class=\"fas fa-caret-up\"></i>", "info": "<i class=\"fas fa-info-circle\"></i>", "layer": "<i class=\"fas fa-layer-group\"></i>", "next": "<i class=\"fas fa-chevron-right\"></i>", "overlaybutton": "<i class=\"fas fa-toggle-on\"></i>", "playpause": "<i class=\"fas fa-play\"></i>", "prev": "<i class=\"fas fa-chevron-left\"></i>", "tags": "<i class=\"fas fa-tag\"></i>"})
      expect(data.range).toBe(true)
      expect(data.toctitle).toEqual("Range Pages")
      expect(data.stylingstring).toEqual("autorun_interval:3;title:Holbein's 'The Ambassadors': The Ambassadors;")
      expect(data.annotationurl).toEqual({"anno": "https://storiiies.cogapp.com/holbein/annotations/list.json", "canvas": "https://storiies.cogapp.com/holbein/canvas/c0", "jsonanno": undefined, "manifest": "https://storiiies.cogapp.com/holbein/manifest.json", "section": undefined, "title": "The Ambassadors"})
      expect(data.position).toEqual(0)
      expect(data.prevPageInactive).toBe(true)
      expect(data.nextPageInactive).toBe(true)
      expect(data.rangeid).toBe('manifest.json')
      expect(data.isfullscreen).toBe(false)
      expect(data.toc).toEqual([{"description": "", "label": "The Ambassadors", "position": 0, "thumbnail": "https://images.cogapp.com/iiif/holbein_big_p.tif/full/30,/0/default.jpg"}])
      expect(data.viewingDirection).toBe('ltr')
      expect(data.rangetitle).toBe("Holbein's 'The Ambassadors'");
      await wrapper.vm.$nextTick()
      await flushPromises()
      var sbd = wrapper.vm.$children[0];
      expect(sbd.zoomsections).toEqual([{"section": ["6270,3903,2250,2250"], "svg_path": [undefined], "type": "rect"}, {"section": ["12288,16567,2250,2250"], "svg_path": [undefined], "type": "rect"}, {"section": ["5310,14872,2250,2250"], "svg_path": [undefined], "type": "rect"}, {"section": ["24266,4312,2250,2250"], "svg_path": [undefined], "type": "rect"}, {"section": ["19106,8865,2250,2250"], "svg_path": [undefined], "type": "rect"}, {"section": ["19106,8865,2250,2250"], "svg_path": [undefined], "type": "rect"}, {"section": ["7188,2021,2250,2250", "7132,22158,14625,7500", "14805,18945,2250,2250"], "svg_path": [undefined, undefined, undefined], "type": "rect"}, {"section": ["full"], "svg_path": [undefined], "type": "rect"}, {"section": ["10987,4312,11250,7125", "11737,15937,11250,5250"], "svg_path": [undefined, undefined], "type": "rect"}, {"section": ["11587,5325,3562,3562"], "svg_path": [undefined], "type": "rect"}, {"section": ["14175,8062,937,2325"], "svg_path": [undefined], "type": "rect"}, {"section": ["14625,10125,9375,4500"], "svg_path": [undefined], "type": "rect"}, {"section": ["15187,6937,3000,3375"], "svg_path": [undefined], "type": "rect"}, {"section": ["17700,8625,2250,2250"], "svg_path": [undefined], "type": "rect"}, {"section": ["18937,4312,2250,4125"], "svg_path": [undefined], "type": "rect"}, {"section": ["12000,16125,3000,3000"], "svg_path": [undefined], "type": "rect"}, {"section": ["12375,19200,2625,1500"], "svg_path": [undefined], "type": "rect"}, {"section": ["16275,18562,4762,2062"], "svg_path": [undefined], "type": "rect"}, {"section": ["19500,18750,3000,3000"], "svg_path": [undefined], "type": "rect"}, {"section": ["14531,19050,3000,3000"], "svg_path": [undefined], "type": "rect"}, {"section": ["7132,22158,14625,7500"], "svg_path": [undefined], "type": "rect"}])
      expect(sbd.seadragontile).toEqual("https://images.cogapp.com/iiif/holbein_big_p.tif/info.json")
      expect(sbd.position).toBe(-1);
      expect(sbd.seadragonid).toBe("list_storyboard");
      expect(sbd.annotations).toEqual([{"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["When this double portrait was painted, Jean de Dinteville, Seigneur de Polisy, was ambassador to London from the court of the French king, François I."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["The globe (bottom shelf) marks Dinteville's château at Polisy."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["His dagger sheath is inscribed in Latin 'aet. svae/29' (meaning aged 29)."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["Georges de Selve, Bishop of Lavaur, visited Dinteville in London in spring 1533."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["He leans on a book inscribed in Latin 'aet. svae/25' (meaning aged 25)."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": [], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["The hat badge, skull and the broken lute string are all possibly vanitas elements. The crucifix may be a reminder of the Christian promise of resurrection."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["Scholarship and luxury: The floor is based on the famous (and mystically symbolic) Cosmati pavement in front of the main altar in Westminster Abbey."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["The objects on the two shelves relate to heaven and earth respectively."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["The celestial globe shows a map of the heavens. Constellations are shown as signs of the zodiac."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["This sundial is an instrument for telling the time and date from the position of the sun."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["Expensive oriental rugs like this one were displayed on tables rather than floors."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["The quadrant determines the user's geographical position."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["This is a sundial in the form of a ten-sided polyhedron. There is a compass inset on the top face."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["This complex instrument, a torquetum, is for measuring the position of stars and planets."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["The globe shows Dinteville's chateau at Polisy."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["A printed mathematical text book illustrating techniques for calculation with decimal numbers. The use of an explicit zero, shown in this example, was an important technical innovation."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["A hymn book with German text by Martin Luther, the founder of the Reformation. "], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["The leather case has a lock and key. It contains flutes. One flute appears to be missing."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["One of the lute strings is broken."], "tags": [], "textual_body": [], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": ["The distorted image - or anamorphosis - of the skull comes into focus from a point to the right of the picture."], "tags": [], "textual_body": [], "type": undefined}]);
      expect(sbd.currentanno).toBe("");
      expect(sbd.transcription).toBe("");
      expect(sbd.textposition).toBe("corner");
      expect(sbd.prev_inactive).toBe(true);
      expect(sbd.next_inactive).toBe(false);
      expect(sbd.toolbar_id).toBe("");
      expect(sbd.booleanitems).toEqual({"additionalinfoshown": false, "annoinfoshown": false, "imageinfoshown": false, "isexcerpt": false, "isoverlaytoggled": false, "istranscription": false, "tocshown": false});
      expect(sbd.shown).toBe(false);
      expect(sbd.mapmarker).toBe("<i class=\"fas fa-map-marker-alt map-marker\"></i>");
      expect(sbd.isautorunning).toBe("");
      expect(sbd.buttons).toEqual({"anno": "<i class=\"fas fa-file-alt\"></i>", "autorunbutton": "<i class=\"fas fa-magic\"></i>", "expandbutton": "<i class=\"fas fa-expand\"></i>", "hide_button": "<i class=\"fas fa-caret-up\"></i>", "info": "<i class=\"fas fa-info-circle\"></i>", "keyboard": "<i class=\"fas fa-keyboard\"></i>", "layer": "<i class=\"fas fa-layer-group\"></i>", "overlaybutton": "<i class=\"fas fa-toggle-on\"></i>", "playpause": "<i class=\"fas fa-play\"></i>", "tags": "<i class=\"fas fa-tag\"></i>"});
      expect(sbd.settings).toEqual({"autorun_interval": 3, "title": "Holbein's 'The Ambassadors': The Ambassadors", "truncate_length": 2});
      expect(sbd.currentlang).toBe("");
      expect(sbd.languages).toEqual([]);
      expect(sbd.fullscreen).toBe(false);
      expect(sbd.tagslist).toEqual({});
      expect(sbd.imageinfo).toEqual({"label": "Image information", "text": "<div id=\"Manifest\"><b>Manifest: </b><a href=\"https://storiiies.cogapp.com/holbein/manifest.json\" target=\"_blank\">https://storiiies.cogapp.com/holbein/manifest.json</a></div><div id=\"title\"><b>Title: </b>Holbein's 'The Ambassadors'</div><div id=\"description\"><b>Description: </b>Let's explore some of the symbolism and features in this iconic painting</div><div id=\"attribution\"><b>Attribution: </b>Copyright National Gallery, London; used under license.</div>"});
      expect(sbd.imagetitle).toBe("Holbein's 'The Ambassadors': The Ambassadors");
      expect(sbd.layerslist).toEqual([{"checked": true, "label": "Layer 1", "opacity": 1, "tile": "https://images.cogapp.com/iiif/holbein_big_p.tif/info.json"}]);
      expect(sbd.shortcuts).toEqual({"autorun": {"icon": "<i class=\"fas fa-magic\"></i>", "label": "Auto Run", "shortcut": ["b", "1"]}, "close": {"icon": "<i class=\"fas fa-times\"></i>", "label": "Close", "shortcut": ["x", "6"]}, "fullscreen": {"icon": "<i class=\"fas fa-expand\"></i>", "label": "Fullscreen", "shortcut": ["alt+f", ";"]}, "hide": {"icon": "<i class=\"fas fa-caret-up\"></i>", "label": "Collapse text", "shortcut": ["c", "7"]}, "home": {"icon": "<i class=\"fas fa-home\"></i>", "label": "Home", "shortcut": ["h", "0"]}, "info": {"icon": "<i class=\"fas fa-info-circle\"></i>", "label": "Info Button", "shortcut": ["i", "2"]}, "next": {"icon": "<i class=\"fa fa-arrow-right\"></i>", "label": "Next", "shortcut": ["n", ".", "shift+right"]}, "nextanno": {"icon": "<i class=\"fa fa-chevron-right\"></i>", "label": "Next Annotation", "shortcut": ["alt+n", "alt+.", "alt+right"]}, "overlay": {"icon": "<i class=\"fas fa-toggle-on\"></i>", "label": "Toggle", "shortcut": ["o", "4"]}, "prev": {"icon": "<i class=\"fa fa-arrow-left\"></i>", "label": "Previous", "shortcut": ["p", ",", "shift+left"]}, "prevanno": {"icon": "<i class=\"fa fa-chevron-left\"></i>", "label": "Previous Annotation", "shortcut": ["alt+p", "alt+,", "alt+left"]}, "shortcut": {"icon": "<i class=\"fas fa-keyboard\"></i>", "label": "Keyboard Shortcuts", "shortcut": ["s", "8"]}, "zoomin": {"icon": "<i class=\"fas fa-search-plus\"></i>", "label": "Zoom In", "shortcut": ["z", "+", "shift+up"]}, "zoomout": {"icon": "<i class=\"fas fa-search-minus\"></i>", "label": "Zoom Out", "shortcut": ["m", "-", "shift+down"]}});
    })
    
    test('test v3 manifest with embedded annotations', async ()  => {
      const wrapper =  mount(rangestoryboard,{
        propsData: {
          rangeurl: 'https://stephenwf.github.io/ocean-liners.json'
        },
        attachToDocument: true
      });
      
      await wrapper.vm.$nextTick()
      await flushPromises()
      var data = wrapper.vm.$data
      expect(data.tags).toBe(false)
      expect(data.layerslist).toBe(false)
      expect(data.buttons).toEqual({"autorunbutton": "<i class=\"fas fa-magic\"></i>", "expandbutton": "<i class=\"fas fa-expand\"></i>", "hide_button": "<i class=\"fas fa-caret-up\"></i>", "info": "<i class=\"fas fa-info-circle\"></i>", "layer": "<i class=\"fas fa-layer-group\"></i>", "next": "<i class=\"fas fa-chevron-right\"></i>", "overlaybutton": "<i class=\"fas fa-toggle-on\"></i>", "playpause": "<i class=\"fas fa-play\"></i>", "prev": "<i class=\"fas fa-chevron-left\"></i>", "tags": "<i class=\"fas fa-tag\"></i>"})
      expect(data.range).toBe(true)
      expect(data.toctitle).toEqual("Range Pages")
      expect(data.stylingstring).toEqual("autorun_interval:3;title:Cunard Line - to all parts of the world: Object image 0;")
      expect(data.position).toEqual(0)
      expect(data.prevPageInactive).toBe(true)
      expect(data.nextPageInactive).toBe(true)
      expect(data.rangeid).toBe('ocean-liners.json')
      expect(data.isfullscreen).toBe(false)
      expect(data.toc).toEqual([{"description": "", "label": "Object image 0", "position": 0, "thumbnail": "https://framemark.vam.ac.uk/collections/2013GU2911/full/30,/0/default.jpg"}])
      expect(data.viewingDirection).toBe('ltr')
      expect(data.rangetitle).toBe("Cunard Line - to all parts of the world");
      var sbd = wrapper.vm.$children[0].$el['__vue__']._data;
      expect(sbd.zoomsections).toEqual([{"section": ["1800,2000,500,500"], "svg_path": [undefined], "type": "rect"}, {"section": ["3000,2100,100,200"], "svg_path": [undefined], "type": "rect"}, {"section": ["2000,2800,400,400"], "svg_path": [undefined], "type": "rect"}, {"section": ["1400,2500,100,200"], "svg_path": [undefined], "type": "rect"}, {"section": ["2450,3800,100,200"], "svg_path": [undefined], "type": "rect"}, {"section": ["800,3500,100,200"], "svg_path": [undefined], "type": "rect"}, {"section": ["2500,4500,500,800"], "svg_path": [undefined], "type": "rect"}, {"section": ["3000,4000,100,200"], "svg_path": [undefined], "type": "rect"}, {"section": ["2100,4000,100,200"], "svg_path": [undefined], "type": "rect"}, {"section": ["1500,3250,100,200"], "svg_path": [undefined], "type": "rect"}])
      expect(sbd.seadragontile).toEqual("https://framemark.vam.ac.uk/collections/2013GU2911/info.json")
      expect(sbd.position).toBe(-1);
      expect(sbd.seadragonid).toBe("p1_storyboard");
      expect(sbd.annotations).toEqual([{"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": [], "tags": [], "textual_body": ["<div class=\"textualbody\"><h2 class=\"annotatedzoom-annotation-detail__label\">First-class lounge</h2><div class=\"annotatedzoom-annotation-detail__content\"><img class=\"annotatedzoom-annotation-detail__image\" src=\"https://media.vam.ac.uk/feature/annotatedzoom/O1023003/Aquitania-lounge-drawing-room-cropped.jpg\" width=300 height=250/><p>First-class public rooms were located in the centre of the ship &mdash; the most stable and comfortable areas on board. The <i>Aquitania</i>'s opulent interiors were inspired by classical architecture &ndash; spot the Ionic columns in the lounge. Architect Arthur Davis recommended the use of plaster and papier-m&acirc;ch&eacute; for ceilings, domes, and other decorative moulding, but advised against using marble and brickwork, as these would make the ship top-heavy.</p><p class=\"annotatedzoom-annotation-detail__credit\">Photograph from <em>The New Art of Going Abroad</em>, 1929, US. National Art Library: 38041986015030. &copy; Victoria and Albert Museum, London</p></div></div>"], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": [], "tags": [], "textual_body": ["<div class=\"textualbody\"><h2 class=\"annotatedzoom-annotation-detail__label\">Garden lounge</h2><div class=\"annotatedzoom-annotation-detail__content\"><img class=\"annotatedzoom-annotation-detail__image\" src=\"https://media.vam.ac.uk/feature/annotatedzoom/O1023003/2017KE6202-Aquitania-Garden-Lounge-cropped.jpg\" width=300 height=250/><p>&ldquo;As cool, as restful, as any terrace overlooking a rose-garden.&rdquo; (<i>The New Art of Going Abroad</i>, 1929). Overlooking the sea and decorated with palms, the garden lounge was a fashionable place to have tea and was sometimes used for dancing.</p><p class=\"annotatedzoom-annotation-detail__credit\">Photograph from <em>The New Art of Going Abroad</em>, 1929, US. National Art Library: 38041986015030. &copy; Victoria and Albert Museum, London</p></div></div>"], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": [], "tags": [], "textual_body": ["<div class=\"textualbody\"><h2 class=\"annotatedzoom-annotation-detail__label\">First-class restaurant</h2><div class=\"annotatedzoom-annotation-detail__content\"><img class=\"annotatedzoom-annotation-detail__image\" src=\"https://media.vam.ac.uk/feature/annotatedzoom/O1023003/2017KE6204-Aquitania-restaurant-cropped.jpg\" width=300 height=250/><p>Dining on ocean liners was a radically different experience depending on the class of travel. In first class, the <i>Aquitania</i>&#39;s Louis XVI-style dining room offered seating in small isolated groups, echoing elegant restaurants on land. The ship&#39;s architect, Arthur Davis, explained that a &ldquo;cheerful room with comfortable surroundings&rdquo; was a necessary distraction from &ldquo;the often very unpleasant conditions&rdquo; at sea. </p><p class=\"annotatedzoom-annotation-detail__credit\">Photograph from <em>The New Art of Going Abroad</em>, 1929, US. National Art Library: 38041986015030. &copy; Victoria and Albert Museum, London</p></div></div>"], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": [], "tags": [], "textual_body": ["<div class=\"textualbody\"><h2 class=\"annotatedzoom-annotation-detail__label\">First-class state room</h2><div class=\"annotatedzoom-annotation-detail__content\"><img class=\"annotatedzoom-annotation-detail__image\" src=\"https://media.vam.ac.uk/feature/annotatedzoom/O1023003/2017KE6205-state-rooms-on-B-deck-+-D-deck-cropped.jpg\" width=300 height=250/><p>The <i>Aquitania</i>&#39;s first-class cabins were designed by architect Arthur Davis, whose firm, Mew&egrave;s and Davis Architects, had decorated the famously opulent Ritz hotels in Paris and London. The cabins were &ldquo;as spacious as a bedroom at the Ritz or the Barclay. The walls are panelled in grey silk. The carpets are vibrant blue and yellow, as are also the striped silk chair coverings. Note the bath &mdash; just off-stage, and the electric heater&rdquo;. (<i>The New Art of Going Abroad</i>, 1929).</p><p class=\"annotatedzoom-annotation-detail__credit\">Photograph from <em>The New Art of Going Abroad</em>, 1929, US. National Art Library: 38041986015030. &copy; Victoria and Albert Museum, London</p></div></div>"], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": [], "tags": [], "textual_body": ["<div class=\"textualbody\"><h2 class=\"annotatedzoom-annotation-detail__label\">Third-class dining saloon</h2><div class=\"annotatedzoom-annotation-detail__content\"><p>While extravagant dishes and refined delicacies were served in first class, third-class meals were less sophisticated. A third-class lunch on a Cunard ship in the 1920s could include rice soup, boiled haddock or braised beef with cabbage, boiled potatoes, bread and &lsquo;cabin biscuits&rsquo;, followed by bread and butter pudding. To save space, passengers sat at long communal tables on chairs bolted to the floor, in case of bad weather.</p></div></div>"], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": [], "tags": [], "textual_body": ["<div class=\"textualbody\"><h2 class=\"annotatedzoom-annotation-detail__label\">Third-class four berth room</h2><div class=\"annotatedzoom-annotation-detail__content\"><p>Liners were strictly organised spaces which reflected social hierarchies. Although people travelling in third class could account for 60% of the total number of passengers, they were segregated into a relatively small space in the lower decks of the ship, close to the noisy engine room. These four-berth rooms had none of the luxurious furnishings or fabrics found in first class, but they were an improvement on the communal sleeping quarters provided for steerage-class passengers on earlier liners.</p></div></div>"], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": [], "tags": [], "textual_body": ["<div class=\"textualbody\"><h2 class=\"annotatedzoom-annotation-detail__label\">Boiler room</h2><div class=\"annotatedzoom-annotation-detail__content\"><p>In 1919 the <i>Aquitania</i> was refitted and converted from coal-burning to oil-burning engines, which meant fewer crew were required to labour in the engine room.</p></div></div>"], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": [], "tags": [], "textual_body": ["<div class=\"textualbody\"><h2 class=\"annotatedzoom-annotation-detail__label\">Stores</h2><div class=\"annotatedzoom-annotation-detail__content\"><p>Ocean liners required huge quantities of food, enough for all crew and passengers &mdash; the equivalent to feeding a floating city. Cunard catered for varied tastes. Provisions for one trip included 500 sheep kidneys, 400 ox tails, 800 tongues and large quantities of frogs&#39; legs, as well as geese, turkey, duck, game and &ldquo;75 heads of cattle and calfs&rdquo;.</p></div></div>"], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": [], "tags": [], "textual_body": ["<div class=\"textualbody\"><h2 class=\"annotatedzoom-annotation-detail__label\">Baggage</h2><div class=\"annotatedzoom-annotation-detail__content\"><p>Passengers travelling for weeks or months would bring a huge number of trunks, most of which were kept in the baggage store deep in the hull of the ship. Cabins could only accommodate smaller trunks. Louis Vuitton designed the &lsquo;steamer trunk&rsquo; specifically to fit under a first-class cabin bed. The baggage store was opened daily so that maids or stewards could collect personal items that were needed during the voyage.</p></div></div>"], "type": undefined}, {"authors": "", "label": undefined, "language": undefined, "languages": undefined, "ocr": [], "tags": [], "textual_body": ["<div class=\"textualbody\"><h2 class=\"annotatedzoom-annotation-detail__label\">Second-class dining saloon</h2><div class=\"annotatedzoom-annotation-detail__content\"><p>The second-class spaces, like first class, were decorated in a neo-classical style. &ldquo;The second-class accommodation on the vessel, though not so sumptuous as the first-class, is still very elaborate and comfortable&rdquo;, explained the architect. &ldquo;The dining-room, no less than 104 ft in length and extending across the whole width of the ship, is decorated with paintings adapted from panels by Pergolesi&rdquo;&mdash; the 18th-century decorative artist. (Arthur Davis, <i>The Architectural Review</i>, April 1914)</p></div></div>"], "type": undefined}]);
      expect(sbd.currentanno).toBe("");
      expect(sbd.transcription).toBe("");
      expect(sbd.textposition).toBe("corner");
      expect(sbd.prev_inactive).toBe(true);
      expect(sbd.next_inactive).toBe(false);
      expect(sbd.toolbar_id).toBe("");
      expect(sbd.booleanitems).toEqual({"additionalinfoshown": false, "annoinfoshown": false, "imageinfoshown": false, "isexcerpt": false, "isoverlaytoggled": false, "istranscription": false, "tocshown": false});
      expect(sbd.shown).toBe(false);
      expect(sbd.mapmarker).toBe("<i class=\"fas fa-map-marker-alt map-marker\"></i>");
      expect(sbd.isautorunning).toBe("");
      expect(sbd.buttons).toEqual({"anno": "<i class=\"fas fa-file-alt\"></i>", "autorunbutton": "<i class=\"fas fa-magic\"></i>", "expandbutton": "<i class=\"fas fa-expand\"></i>", "hide_button": "<i class=\"fas fa-caret-up\"></i>", "info": "<i class=\"fas fa-info-circle\"></i>", "keyboard": "<i class=\"fas fa-keyboard\"></i>", "layer": "<i class=\"fas fa-layer-group\"></i>", "overlaybutton": "<i class=\"fas fa-toggle-on\"></i>", "playpause": "<i class=\"fas fa-play\"></i>", "tags": "<i class=\"fas fa-tag\"></i>"});
      expect(sbd.settings).toEqual({"autorun_interval": 3, "title": "Cunard Line - to all parts of the world: Object image 0", "truncate_length": 2});
      expect(sbd.currentlang).toBe("");
      expect(sbd.languages).toEqual([]);
      expect(sbd.fullscreen).toBe(false);
      expect(sbd.tagslist).toEqual({});
      expect(sbd.imageinfo).toEqual({"label": "Manifest information", "text": "<div id=\"Manifest\"><b>Manifest: </b><a href=\"https://stephenwf.github.io/ocean-liners.json\" target=\"_blank\">https://stephenwf.github.io/ocean-liners.json</a></div><div id=\"title\"><b>Title: </b>Cunard Line - to all parts of the world</div><div id=\"Museum number\"><b>Museum number: </b>E.1829-2004</div><div id=\"title\"><b>Title: </b>Cunard Line - to all parts of the world</div><div id=\"Descriptive Line\"><b>Descriptive Line: </b>Chromolithograph travel poster for \"Cunard Line - to all parts of the world\", depicting a cross section of the Aquitania at sea, printed by Thos. Forman & Sons, Nottingham, ca. 1920.</div><div id=\"Collection\"><b>Collection: </b>PDP</div><div id=\"Place\"><b>Place: </b>Nottingham (printed)</div><div id=\"Materials & Techniques\"><b>Materials & Techniques: </b>chromolithograph</div><div id=\"Date\"><b>Date: </b>ca. 1920 (made)</div><div id=\"Categories\"><b>Categories: </b>Posters;Boats and ships;Tourism & Travel</div><div id=\"Description\"><b>Description: </b>Chromolithograph travel poster for \"Cunard Line - to all parts of the world\", depicting a cross section of the Aquitania at sea, printed by Thos. Forman & Sons, Nottingham, ca. 1920.</div>"});
      expect(sbd.imagetitle).toBe("Cunard Line - to all parts of the world: Object image 0");
      expect(sbd.layerslist).toEqual([{"checked": true, "label": "Layer 1", "opacity": 1, "tile": "https://framemark.vam.ac.uk/collections/2013GU2911/info.json", "xywh": ""}]);
      expect(sbd.shortcuts).toEqual({"autorun": {"icon": "<i class=\"fas fa-magic\"></i>", "label": "Auto Run", "shortcut": ["b", "1"]}, "close": {"icon": "<i class=\"fas fa-times\"></i>", "label": "Close", "shortcut": ["x", "6"]}, "fullscreen": {"icon": "<i class=\"fas fa-expand\"></i>", "label": "Fullscreen", "shortcut": ["alt+f", ";"]}, "hide": {"icon": "<i class=\"fas fa-caret-up\"></i>", "label": "Collapse text", "shortcut": ["c", "7"]}, "home": {"icon": "<i class=\"fas fa-home\"></i>", "label": "Home", "shortcut": ["h", "0"]}, "info": {"icon": "<i class=\"fas fa-info-circle\"></i>", "label": "Info Button", "shortcut": ["i", "2"]}, "next": {"icon": "<i class=\"fa fa-arrow-right\"></i>", "label": "Next", "shortcut": ["n", ".", "shift+right"]}, "nextanno": {"icon": "<i class=\"fa fa-chevron-right\"></i>", "label": "Next Annotation", "shortcut": ["alt+n", "alt+.", "alt+right"]}, "overlay": {"icon": "<i class=\"fas fa-toggle-on\"></i>", "label": "Toggle", "shortcut": ["o", "4"]}, "prev": {"icon": "<i class=\"fa fa-arrow-left\"></i>", "label": "Previous", "shortcut": ["p", ",", "shift+left"]}, "prevanno": {"icon": "<i class=\"fa fa-chevron-left\"></i>", "label": "Previous Annotation", "shortcut": ["alt+p", "alt+,", "alt+left"]}, "shortcut": {"icon": "<i class=\"fas fa-keyboard\"></i>", "label": "Keyboard Shortcuts", "shortcut": ["s", "8"]}, "zoomin": {"icon": "<i class=\"fas fa-search-plus\"></i>", "label": "Zoom In", "shortcut": ["z", "+", "shift+up"]}, "zoomout": {"icon": "<i class=\"fas fa-search-minus\"></i>", "label": "Zoom Out", "shortcut": ["m", "-", "shift+down"]}});
    })
})

