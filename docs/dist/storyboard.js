(function(){var __webpack_modules__={104:function(e){e.exports=function(){return"undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")()}()},218:function(e){var t=1e3,n=60*t,i=60*n,r=24*i,s=365.25*r;function o(e){if(e=String(e),!(e.length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]),c=(o[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function a(e){return e>=r?Math.round(e/r)+"d":e>=i?Math.round(e/i)+"h":e>=n?Math.round(e/n)+"m":e>=t?Math.round(e/t)+"s":e+"ms"}function c(e){return l(e,r,"day")||l(e,i,"hour")||l(e,n,"minute")||l(e,t,"second")||e+" ms"}function l(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return o(e);if("number"===n&&!1===isNaN(e))return t.long?c(e):a(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},852:function(e,t,n){function i(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type)||("undefined"===typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function r(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var r=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(s=r))})),e.splice(s,0,i)}}function s(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}}function a(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",BASE_URL:"/"}.DEBUG),e}function c(){try{return window.localStorage}catch(e){}}t=e.exports=n(1175),t.log=s,t.formatArgs=r,t.save=o,t.load=a,t.useColors=i,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(a())},969:function(e){function t(e,t,i){var r=!1;return i=i||n,s.count=e,0===e?t():s;function s(e,n){if(s.count<=0)throw new Error("after called too many times");--s.count,e?(r=!0,t(e),t=i):0!==s.count||r||t(null,n)}}function n(){}e.exports=t},1175:function(e,t,n){function i(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,s=i-(n||i);e.diff=s,e.prev=n,e.curr=i,n=i;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=t.coerce(o[0]),"string"!==typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;c++;var r=t.formatters[i];if("function"===typeof r){var s=o[c];n=r.call(e,s),o.splice(c,1),c--}return n})),t.formatArgs.call(e,o);var l=r.log||t.log||console.log.bind(console);l.apply(e,o)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=i(e),r.destroy=s,"function"===typeof t.init&&t.init(r),t.instances.push(r),r}function s(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function o(e){var n;t.save(e),t.names=[],t.skips=[];var i=("string"===typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&(e=i[n].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var s=t.instances[n];s.enabled=t.enabled(s.namespace)}}function a(){t.enable("")}function c(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=r.debug=r["default"]=r,t.coerce=l,t.disable=a,t.enable=o,t.enabled=c,t.humanize=n(218),t.instances=[],t.names=[],t.skips=[],t.formatters={}},1264:function(e){e.exports={trueFunc:function(){return!0},falseFunc:function(){return!1}}},2121:function(e){"use strict";var t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,r={},s=0,o=0;function a(e){var t="";do{t=n[e%i]+t,e=Math.floor(e/i)}while(e>0);return t}function c(e){var t=0;for(o=0;o<e.length;o++)t=t*i+r[e.charAt(o)];return t}function l(){var e=a(+new Date);return e!==t?(s=0,t=e):e+"."+a(s++)}for(;o<i;o++)r[n[o]]=o;l.encode=a,l.decode=c,e.exports=l},2206:function(e){!function(t,n){e.exports=n()}(0,(function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";function i(){var e={},t=!1,n=0,r=arguments.length;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],n++);n<r;n++){var s=arguments[n];!function(n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t&&"[object Object]"===Object.prototype.toString.call(n[r])?e[r]=i(!0,e[r],n[r]):e[r]=n[r])}(s)}return e}t.a=i},function(e,t){!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=void 0!==e&&e.exports,i=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,r=n.length,s={};i<r;i++)if((e=n[i])&&e[1]in t){for(i=0;i<e.length;i++)s[n[0][i]]=e[i];return s}return!1}(),r={change:i.fullscreenchange,error:i.fullscreenerror},s={request:function(e,n){return new Promise(function(r,s){var o=function(){this.off("change",o),r()}.bind(this);this.on("change",o),e=e||t.documentElement;var a=e[i.requestFullscreen](n);a instanceof Promise&&a.then(o).catch(s)}.bind(this))},exit:function(){return new Promise(function(e,n){if(this.isFullscreen){var r=function(){this.off("change",r),e()}.bind(this);this.on("change",r);var s=t[i.exitFullscreen]();s instanceof Promise&&s.then(r).catch(n)}else e()}.bind(this))},toggle:function(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var i=r[e];i&&t.addEventListener(i,n,!1)},off:function(e,n){var i=r[e];i&&t.removeEventListener(i,n,!1)},raw:i};i?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(t[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[i.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[i.fullscreenEnabled])}}}),n?e.exports=s:window.screenfull=s):n?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()},function(e,t,n){"use strict";function i(e,t){e.style.position=t.position,e.style.left=t.left,e.style.top=t.top,e.style.width=t.width,e.style.height=t.height}function r(e){var t=e.element;t&&(t.classList.remove(e.options.fullscreenClass),(e.options.teleport||e.options.pageOnly)&&(e.options.teleport&&u&&(u.insertBefore(t,l),u.removeChild(l)),t.__styleCache&&i(t,t.__styleCache)))}var s=n(1),o=n.n(s),a=n(0),c={callback:function(){},fullscreenClass:"fullscreen",pageOnly:!1,teleport:!1},l=void 0,u=void 0,h={options:null,element:null,isFullscreen:!1,isEnabled:o.a.isEnabled,toggle:function(e,t,n){return void 0===n?this.isFullscreen?this.exit():this.request(e,t):n?this.request(e,t):this.exit()},request:function(e,t){var s=this;if(this.isFullscreen)return Promise.resolve();if(e||(e=document.body),this.options=n.i(a.a)({},c,t),e===document.body&&(this.options.teleport=!1),o.a.isEnabled||(this.options.pageOnly=!0),e.classList.add(this.options.fullscreenClass),this.options.teleport||this.options.pageOnly){var h=e.style,d=h.position,p=h.left,f=h.top,m=h.width,g=h.height;e.__styleCache={position:d,left:p,top:f,width:m,height:g},i(e,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"})}if(this.options.teleport&&(u=e.parentNode)&&(l=document.createComment("fullscreen-token"),u.insertBefore(l,e),document.body.appendChild(e)),this.options.pageOnly){var v=function e(t){"Escape"===t.key&&(document.removeEventListener("keyup",e),s.exit())};return this.isFullscreen=!0,this.element=e,document.removeEventListener("keyup",v),document.addEventListener("keyup",v),this.options.callback&&this.options.callback(this.isFullscreen),Promise.resolve()}var y=function t(){o.a.isFullscreen||(o.a.off("change",t),r(s)),s.isFullscreen=o.a.isFullscreen,s.options.teleport?s.element=e||null:s.element=o.a.element,s.options.callback&&s.options.callback(o.a.isFullscreen)};return o.a.on("change",y),o.a.request(this.options.teleport?document.body:e)},exit:function(){return this.isFullscreen?this.options.pageOnly?(r(this),this.isFullscreen=!1,this.element=null,this.options.callback&&this.options.callback(this.isFullscreen),Promise.resolve()):o.a.exit():Promise.resolve()}};h.support=h.isEnabled,h.getState=function(){return h.isFullscreen},h.enter=h.request,t.a=h},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}var r=n(2),s=n(0),o=function(e,t){var o=function(){var e=void 0,o={teleport:t.modifiers.teleport,pageOnly:t.modifiers.pageOnly};if(t.value)if("string"==typeof t.value)e=t.value;else{var a=t.value,c=a.target,l=i(a,["target"]);e=c,o=n.i(s.a)(o,l)}"string"==typeof e&&(e=document.querySelector(e)),r.a.toggle(e,o)};e._onClickFullScreen&&e.removeEventListener("click",e._onClickFullScreen),e.addEventListener("click",o),e._onClickFullScreen=o};t.a=o},function(e,t,n){var i=n(7)(n(6),n(8),null,null);e.exports=i.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=n.n(i),s=n(2),o=n(3),a=n(1),c=n.n(a),l=n(0);n.d(t,"screenfull",(function(){return c.a})),n.d(t,"api",(function(){return s.a})),n.d(t,"directive",(function(){return o.a})),n.d(t,"component",(function(){return r.a})),t.default={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.name||"fullscreen";e.component(i,n.i(l.a)(r.a,{name:i})),e.prototype["$"+i]=s.a,e.directive(i,o.a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n.n(i);t.default={props:{value:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},exitOnClickWrapper:{type:Boolean,default:!0},fullscreenClass:{type:String,default:"fullscreen"},pageOnly:{type:Boolean,default:!1},teleport:{type:Boolean,default:!1}},data:function(){return{isFullscreen:!1,isEnabled:!1}},computed:{support:function(){return this.isEnabled},isPageOnly:function(){return this.pageOnly||!r.a.isEnabled},wrapperStyle:function(){return(this.isPageOnly||this.teleport)&&this.isFullscreen?{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}:void 0}},methods:{toggle:function(e){void 0===e?this.isFullscreen?this.exit():this.request():e?this.request():this.exit()},request:function(){if(this.isPageOnly?(this.isFullscreen=!0,this.onChangeFullScreen(),document.removeEventListener("keyup",this.keypressCallback),document.addEventListener("keyup",this.keypressCallback)):(r.a.off("change",this.fullScreenCallback),r.a.on("change",this.fullScreenCallback),r.a.request(this.teleport?document.body:this.$el)),this.teleport){if(this.$el.parentNode===document.body)return;this.__parentNode=this.$el.parentNode,this.__token=document.createComment("fullscreen-token"),this.__parentNode.insertBefore(this.__token,this.$el),document.body.appendChild(this.$el)}},exit:function(){this.isFullscreen&&(this.isPageOnly?(this.isFullscreen=!1,this.onChangeFullScreen(),document.removeEventListener("keyup",this.keypressCallback)):r.a.exit())},shadeClick:function(e){e.target===this.$el&&this.exitOnClickWrapper&&this.exit()},fullScreenCallback:function(){r.a.isFullscreen||r.a.off("change",this.fullScreenCallback),this.isFullscreen=r.a.isFullscreen,this.onChangeFullScreen()},keypressCallback:function(e){"Escape"===e.key&&this.exit()},onChangeFullScreen:function(){this.isFullscreen||this.teleport&&this.__parentNode&&(this.__parentNode.insertBefore(this.$el,this.__token),this.__parentNode.removeChild(this.__token)),this.$emit("change",this.isFullscreen),this.$emit("update:fullscreen",this.isFullscreen),this.$emit("input",this.isFullscreen)},enter:function(){this.request()},getState:function(){return this.isFullscreen}},watch:{value:function(e){e!==this.isFullscreen&&(e?this.request():this.exit())},fullscreen:function(e){e!==this.isFullscreen&&(e?this.request():this.exit())}},created:function(){this.isEnabled=r.a.isEnabled}}},function(e,t){e.exports=function(e,t,n,i){var r,s=e=e||{},o=typeof e.default;"object"!==o&&"function"!==o||(r=e,s=e.default);var a="function"==typeof s?s.options:s;if(t&&(a.render=t.render,a.staticRenderFns=t.staticRenderFns),n&&(a._scopeId=n),i){var c=Object.create(a.computed||null);Object.keys(i).forEach((function(e){var t=i[e];c[e]=function(){return t}})),a.computed=c}return{esModule:r,exports:s,options:a}}},function(e,t){e.exports={render:function(){var e,t=this,n=t.$createElement;return(t._self._c||n)("div",t._b({ref:"wrapper",class:(e={},e[t.fullscreenClass]=t.isFullscreen,e),style:t.wrapperStyle,on:{click:function(e){return t.shadeClick(e)}}},"div",t.$attrs,!1),[t._t("default")],2)},staticRenderFns:[]}}])}))},2225:function(e,t,n){var i=n(4634),r=n(8247),s=Object.prototype.toString,o="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===s.call(Blob),a="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===s.call(File);function c(e,t){if(!e)return e;if(r(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(i(e)){for(var s=new Array(e.length),o=0;o<e.length;o++)s[o]=c(e[o],t);return s}if("object"===typeof e&&!(e instanceof Date)){s={};for(var a in e)s[a]=c(e[a],t);return s}return e}function l(e,t){if(!e)return e;if(e&&!0===e._placeholder){var n="number"===typeof e.num&&e.num>=0&&e.num<t.length;if(n)return t[e.num];throw new Error("illegal attachments")}if(i(e))for(var r=0;r<e.length;r++)e[r]=l(e[r],t);else if("object"===typeof e)for(var s in e)e[s]=l(e[s],t);return e}t.deconstructPacket=function(e){var t=[],n=e.data,i=e;return i.data=c(n,t),i.attachments=t.length,{packet:i,buffers:t}},t.reconstructPacket=function(e,t){return e.data=l(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){function n(e,l,u){if(!e)return e;if(o&&e instanceof Blob||a&&e instanceof File){s++;var h=new FileReader;h.onload=function(){u?u[l]=this.result:c=this.result,--s||t(c)},h.readAsArrayBuffer(e)}else if(i(e))for(var d=0;d<e.length;d++)n(e[d],d,e);else if("object"===typeof e&&!r(e))for(var p in e)n(e[p],p,e)}var s=0,c=e;n(c),s||t(c)}},2252:function(e,t,n){var i=n(5911),r=n(2370),s=n(104);e.exports=u;var o,a=/\n/g,c=/\\n/g;function l(){}function u(e){i.call(this,e),this.query=this.query||{},o||(o=s.___eio=s.___eio||[]),this.index=o.length;var t=this;o.push((function(e){t.onData(e)})),this.query.j=this.index,"function"===typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=l)}),!1)}r(u,i),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},u.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t;var i="undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent);i&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},u.prototype.doWrite=function(e,t){var n=this;if(!this.form){var i,r=document.createElement("form"),s=document.createElement("textarea"),o=this.iframeId="eio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=o,r.method="POST",r.setAttribute("accept-charset","utf-8"),s.name="d",r.appendChild(s),document.body.appendChild(r),this.form=r,this.area=s}function l(){u(),t()}function u(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';i=document.createElement(e)}catch(t){i=document.createElement("iframe"),i.name=n.iframeId,i.src="javascript:0"}i.id=n.iframeId,n.form.appendChild(i),n.iframe=i}this.form.action=this.uri(),u(),e=e.replace(c,"\\\n"),this.area.value=e.replace(a,"\\n");try{this.form.submit()}catch(h){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&l()}:this.iframe.onload=l}},2370:function(e){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},2505:function(e){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},2672:function(e,t,n){var i=n(3401),r=n(5971);function s(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=s,r(s.prototype),s.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},s.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},s.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},s.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},s.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},s.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},s.prototype.onPacket=function(e){this.emit("packet",e)},s.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},2902:function(e){var t=1e3,n=60*t,i=60*n,r=24*i,s=365.25*r;function o(e){if(e=String(e),!(e.length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]),c=(o[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function a(e){return e>=r?Math.round(e/r)+"d":e>=i?Math.round(e/i)+"h":e>=n?Math.round(e/n)+"m":e>=t?Math.round(e/t)+"s":e+"ms"}function c(e){return l(e,r,"day")||l(e,i,"hour")||l(e,n,"minute")||l(e,t,"second")||e+" ms"}function l(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return o(e);if("number"===n&&!1===isNaN(e))return t.long?c(e):a(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},2934:function(e,t,n){var i=n(8383),r=n(104);e.exports=function(e){var t=e.xdomain,n=e.xscheme,s=e.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(o){}try{if("undefined"!==typeof XDomainRequest&&!n&&s)return new XDomainRequest}catch(o){}if(!t)try{return new(r[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(o){}}},3059:function(e){function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},3097:function(e){var t=1e3,n=60*t,i=60*n,r=24*i,s=365.25*r;function o(e){if(e=String(e),!(e.length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]),c=(o[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function a(e){return e>=r?Math.round(e/r)+"d":e>=i?Math.round(e/i)+"h":e>=n?Math.round(e/n)+"m":e>=t?Math.round(e/t)+"s":e+"ms"}function c(e){return l(e,r,"day")||l(e,i,"hour")||l(e,n,"minute")||l(e,t,"second")||e+" ms"}function l(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return o(e);if("number"===n&&!1===isNaN(e))return t.long?c(e):a(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},3118:function(e){var t="undefined"!==typeof t?t:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder&&MozBlobBuilder,n=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(t){return!1}}(),i=n&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(t){return!1}}(),r=t&&t.prototype.append&&t.prototype.getBlob;function s(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function o(e,n){n=n||{};var i=new t;return s(e).forEach((function(e){i.append(e)})),n.type?i.getBlob(n.type):i.getBlob()}function a(e,t){return new Blob(s(e),t||{})}"undefined"!==typeof Blob&&(o.prototype=Blob.prototype,a.prototype=Blob.prototype),e.exports=function(){return n?i?Blob:a:r?o:void 0}()},3344:function(e){e.exports=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(t<0&&(t+=i),n<0&&(n+=i),n>i&&(n=i),t>=i||t>=n||0===i)return new ArrayBuffer(0);for(var r=new Uint8Array(e),s=new Uint8Array(n-t),o=t,a=0;o<n;o++,a++)s[a]=r[o];return s.buffer}},3357:function(e,t,n){e.exports=n(7292),e.exports.parser=n(3401)},3371:function(e,t){(function(e){"use strict";t.encode=function(t){var n,i=new Uint8Array(t),r=i.length,s="";for(n=0;n<r;n+=3)s+=e[i[n]>>2],s+=e[(3&i[n])<<4|i[n+1]>>4],s+=e[(15&i[n+1])<<2|i[n+2]>>6],s+=e[63&i[n+2]];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s},t.decode=function(t){var n,i,r,s,o,a=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),h=new Uint8Array(u);for(n=0;n<c;n+=4)i=e.indexOf(t[n]),r=e.indexOf(t[n+1]),s=e.indexOf(t[n+2]),o=e.indexOf(t[n+3]),h[l++]=i<<2|r>>4,h[l++]=(15&r)<<4|s>>2,h[l++]=(3&s)<<6|63&o;return u}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},3401:function(e,t,n){var i,r=n(2505),s=n(8839),o=n(3344),a=n(969),c=n(8758);"undefined"!==typeof ArrayBuffer&&(i=n(3371));var l="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent),u="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent),h=l||u;t.protocol=3;var d=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=r(d),f={type:"error",data:"parser error"},m=n(3118);function g(e,n){var i="b"+t.packets[e.type]+e.data.data;return n(i)}function v(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var r=e.data,s=new Uint8Array(r),o=new Uint8Array(1+r.byteLength);o[0]=d[e.type];for(var a=0;a<s.length;a++)o[a+1]=s[a];return i(o.buffer)}function y(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var r=new FileReader;return r.onload=function(){t.encodePacket({type:e.type,data:r.result},n,!0,i)},r.readAsArrayBuffer(e.data)}function T(e,n,i){if(!n)return t.encodeBase64Packet(e,i);if(h)return y(e,n,i);var r=new Uint8Array(1);r[0]=d[e.type];var s=new m([r.buffer,e.data]);return i(s)}function E(e){try{e=c.decode(e,{strict:!1})}catch(t){return!1}return e}function _(e,t,n){for(var i=new Array(e.length),r=a(e.length,n),s=function(e,n,r){t(n,(function(t,n){i[e]=n,r(t,i)}))},o=0;o<e.length;o++)s(o,e[o],r)}t.encodePacket=function(e,t,n,i){"function"===typeof t&&(i=t,t=!1),"function"===typeof n&&(i=n,n=null);var r=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!==typeof ArrayBuffer&&r instanceof ArrayBuffer)return v(e,t,i);if("undefined"!==typeof m&&r instanceof m)return T(e,t,i);if(r&&r.base64)return g(e,i);var s=d[e.type];return void 0!==e.data&&(s+=n?c.encode(String(e.data),{strict:!1}):String(e.data)),i(""+s)},t.encodeBase64Packet=function(e,n){var i,r="b"+t.packets[e.type];if("undefined"!==typeof m&&e.data instanceof m){var s=new FileReader;return s.onload=function(){var e=s.result.split(",")[1];n(r+e)},s.readAsDataURL(e.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(l){for(var o=new Uint8Array(e.data),a=new Array(o.length),c=0;c<o.length;c++)a[c]=o[c];i=String.fromCharCode.apply(null,a)}return r+=btoa(i),n(r)},t.decodePacket=function(e,n,i){if(void 0===e)return f;if("string"===typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(i&&(e=E(e),!1===e))return f;var r=e.charAt(0);return Number(r)==r&&p[r]?e.length>1?{type:p[r],data:e.substring(1)}:{type:p[r]}:f}var s=new Uint8Array(e),a=(r=s[0],o(e,1));return m&&"blob"===n&&(a=new m([a])),{type:p[r],data:a}},t.decodeBase64Packet=function(e,t){var n=p[e.charAt(0)];if(!i)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=i.decode(e.substr(1));return"blob"===t&&m&&(r=new m([r])),{type:n,data:r}},t.encodePayload=function(e,n,i){"function"===typeof n&&(i=n,n=null);var r=s(e);if(n&&r)return m&&!h?t.encodePayloadAsBlob(e,i):t.encodePayloadAsArrayBuffer(e,i);if(!e.length)return i("0:");function o(e){return e.length+":"+e}function a(e,i){t.encodePacket(e,!!r&&n,!1,(function(e){i(null,o(e))}))}_(e,a,(function(e,t){return i(t.join(""))}))},t.decodePayload=function(e,n,i){if("string"!==typeof e)return t.decodePayloadAsBinary(e,n,i);var r;if("function"===typeof n&&(i=n,n=null),""===e)return i(f,0,1);for(var s,o,a="",c=0,l=e.length;c<l;c++){var u=e.charAt(c);if(":"===u){if(""===a||a!=(s=Number(a)))return i(f,0,1);if(o=e.substr(c+1,s),a!=o.length)return i(f,0,1);if(o.length){if(r=t.decodePacket(o,n,!1),f.type===r.type&&f.data===r.data)return i(f,0,1);var h=i(r,c+s,l);if(!1===h)return}c+=s,a=""}else a+=u}return""!==a?i(f,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));function i(e,n){t.encodePacket(e,!0,!0,(function(e){return n(null,e)}))}_(e,i,(function(e,t){var i=t.reduce((function(e,t){var n;return n="string"===typeof t?t.length:t.byteLength,e+n.toString().length+n+2}),0),r=new Uint8Array(i),s=0;return t.forEach((function(e){var t="string"===typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);n=i.buffer}r[s++]=t?0:1;var a=n.byteLength.toString();for(o=0;o<a.length;o++)r[s++]=parseInt(a[o]);r[s++]=255;for(i=new Uint8Array(n),o=0;o<i.length;o++)r[s++]=i[o]})),n(r.buffer)}))},t.encodePayloadAsBlob=function(e,n){function i(e,n){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"===typeof e){for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);e=i.buffer,t[0]=0}var s=e instanceof ArrayBuffer?e.byteLength:e.size,o=s.toString(),a=new Uint8Array(o.length+1);for(r=0;r<o.length;r++)a[r]=parseInt(o[r]);if(a[o.length]=255,m){var c=new m([t.buffer,a.buffer,e]);n(null,c)}}))}_(e,i,(function(e,t){return n(new m(t))}))},t.decodePayloadAsBinary=function(e,n,i){"function"===typeof n&&(i=n,n=null);var r=e,s=[];while(r.byteLength>0){for(var a=new Uint8Array(r),c=0===a[0],l="",u=1;;u++){if(255===a[u])break;if(l.length>310)return i(f,0,1);l+=a[u]}r=o(r,2+l.length),l=parseInt(l);var h=o(r,0,l);if(c)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(m){var d=new Uint8Array(h);h="";for(u=0;u<d.length;u++)h+=String.fromCharCode(d[u])}s.push(h),r=o(r,l)}var p=s.length;s.forEach((function(e,r){i(t.decodePacket(e,n,!0),r,p)}))}},4258:function(e){var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function i(e,t){var n=/\/{2,9}/g,i=t.replace(n,"/").split("/");return"/"!=t.substr(0,1)&&0!==t.length||i.splice(0,1),"/"==t.substr(t.length-1,1)&&i.splice(i.length-1,1),i}function r(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,i){t&&(n[t]=i)})),n}e.exports=function(e){var s=e,o=e.indexOf("["),a=e.indexOf("]");-1!=o&&-1!=a&&(e=e.substring(0,o)+e.substring(o,a).replace(/:/g,";")+e.substring(a,e.length));var c=t.exec(e||""),l={},u=14;while(u--)l[n[u]]=c[u]||"";return-1!=o&&-1!=a&&(l.source=s,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=i(l,l["path"]),l.queryKey=r(l,l["query"]),l}},4634:function(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},4745:function(e){function t(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}e.exports=t},4791:function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;//! openseadragon 2.4.2
//! Built on 2020-03-05
//! Git commit: v2.4.2-0-c450749
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function OpenSeadragon(e){return new OpenSeadragon.Viewer(e)}(function(e){e.version={versionStr:"2.4.2",major:parseInt("2",10),minor:parseInt("4",10),revision:parseInt("2",10)};var t={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},n=Object.prototype.toString,i=Object.prototype.hasOwnProperty;e.isFunction=function(t){return"function"===e.type(t)},e.isArray=Array.isArray||function(t){return"array"===e.type(t)},e.isWindow=function(e){return e&&"object"===typeof e&&"setInterval"in e},e.type=function(e){return null===e||void 0===e?String(e):t[n.call(e)]||"object"},e.isPlainObject=function(t){if(!t||"object"!==OpenSeadragon.type(t)||t.nodeType||e.isWindow(t))return!1;if(t.constructor&&!i.call(t,"constructor")&&!i.call(t.constructor.prototype,"isPrototypeOf"))return!1;var n;for(var r in t)n=r;return void 0===n||i.call(t,n)},e.isEmptyObject=function(e){for(var t in e)return!1;return!0},e.freezeObject=function(t){return Object.freeze?e.freezeObject=Object.freeze:e.freezeObject=function(e){return e},e.freezeObject(t)},e.supportsCanvas=function(){var t=document.createElement("canvas");return!(!e.isFunction(t.getContext)||!t.getContext("2d"))}(),e.isCanvasTainted=function(e){var t=!1;try{e.getContext("2d").getImageData(0,0,1,1)}catch(n){t=!0}return t},e.pixelDensityRatio=function(){if(e.supportsCanvas){var t=document.createElement("canvas").getContext("2d"),n=window.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return Math.max(n,1)/i}return 1}()})(OpenSeadragon),function($){$.extend=function(){var e,t,n,i,r,s,o=arguments[0]||{},a=arguments.length,c=!1,l=1;for("boolean"===typeof o&&(c=o,o=arguments[1]||{},l=2),"object"===typeof o||OpenSeadragon.isFunction(o)||(o={}),a===l&&(o=this,--l);l<a;l++)if(e=arguments[l],null!==e||void 0!==e)for(t in e)n=o[t],i=e[t],o!==i&&(c&&i&&(OpenSeadragon.isPlainObject(i)||(r=OpenSeadragon.isArray(i)))?(r?(r=!1,s=n&&OpenSeadragon.isArray(n)?n:[]):s=n&&OpenSeadragon.isPlainObject(n)?n:{},o[t]=OpenSeadragon.extend(c,s,i)):void 0!==i&&(o[t]=i));return o};var isIOSDevice=function(){if("object"!==typeof navigator)return!1;var e=navigator.userAgent;return"string"===typeof e&&(-1!==e.indexOf("iPhone")||-1!==e.indexOf("iPad")||-1!==e.indexOf("iPod"))};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(e,t){return function(){var n=arguments;return void 0===n&&(n=[]),t.apply(e,n)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e},getElementPosition:function(e){var t,n,i=new $.Point;e=$.getElement(e),t="fixed"==$.getElementStyle(e).position,n=getOffsetParent(e,t);while(n)i.x+=e.offsetLeft,i.y+=e.offsetTop,t&&(i=i.plus($.getPageScroll())),e=n,t="fixed"==$.getElementStyle(e).position,n=getOffsetParent(e,t);return i},getElementOffset:function(e){e=$.getElement(e);var t,n,i=e&&e.ownerDocument,r={top:0,left:0};return i?(t=i.documentElement,"undefined"!==typeof e.getBoundingClientRect&&(r=e.getBoundingClientRect()),n=i==i.window?i:9===i.nodeType&&(i.defaultView||i.parentWindow),new $.Point(r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0),r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0))):new $.Point},getElementSize:function(e){return e=$.getElement(e),new $.Point(e.clientWidth,e.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(e){return e=$.getElement(e),e.currentStyle}:function(e){return e=$.getElement(e),window.getComputedStyle(e,"")},getCssPropertyWithVendorPrefix:function(e){var t={};return $.getCssPropertyWithVendorPrefix=function(e){if(void 0!==t[e])return t[e];var n=document.createElement("div").style,i=null;if(void 0!==n[e])i=e;else for(var r=["Webkit","Moz","MS","O","webkit","moz","ms","o"],s=$.capitalizeFirstLetter(e),o=0;o<r.length;o++){var a=r[o]+s;if(void 0!==n[a]){i=a;break}}return t[e]=i,i},$.getCssPropertyWithVendorPrefix(e)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},positiveModulo:function(e,t){var n=e%t;return n<0&&(n+=t),n},pointInElement:function(e,t){e=$.getElement(e);var n=$.getElementOffset(e),i=$.getElementSize(e);return t.x>=n.x&&t.x<n.x+i.x&&t.y<n.y+i.y&&t.y>=n.y},getEvent:function(e){return $.getEvent=e?function(e){return e}:function(){return window.event},$.getEvent(e)},getMousePosition:function(e){if("number"==typeof e.pageX)$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.pageX,t.y=e.pageY,t};else{if("number"!=typeof e.clientX)throw new Error("Unknown event mouse position, no known technique.");$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,t}}return $.getMousePosition(e)},getPageScroll:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.pageXOffset)$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(t.scrollLeft||t.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!e.scrollLeft&&!e.scrollTop)return new $.Point(0,0);$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return $.getPageScroll()},setPageScroll:function(e){if("undefined"!==typeof window.scrollTo)$.setPageScroll=function(e){window.scrollTo(e.x,e.y)};else{var t=$.getPageScroll();if(t.x===e.x&&t.y===e.y)return;document.body.scrollLeft=e.x,document.body.scrollTop=e.y;var n=$.getPageScroll();if(n.x!==t.x&&n.y!==t.y)return void($.setPageScroll=function(e){document.body.scrollLeft=e.x,document.body.scrollTop=e.y});if(document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y,n=$.getPageScroll(),n.x!==t.x&&n.y!==t.y)return void($.setPageScroll=function(e){document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y});$.setPageScroll=function(e){}}return $.setPageScroll(e)},getWindowSize:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.innerWidth)$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(e.clientWidth||e.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!t.clientWidth&&!t.clientHeight)throw new Error("Unknown window size, no known technique.");$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)}}return $.getWindowSize()},makeCenteredNode:function(e){e=$.getElement(e);var t=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(t[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(t[1].style,{display:"table-row"}),$.extend(t[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),t[0].appendChild(t[1]),t[1].appendChild(t[2]),t[2].appendChild(e),t[0]},makeNeutralElement:function(e){var t=document.createElement(e),n=t.style;return n.background="transparent none",n.border="none",n.margin="0px",n.padding="0px",n.position="static",t},now:function(){return Date.now?$.now=Date.now:$.now=function(){return(new Date).getTime()},$.now()},makeTransparentImage:function(e){return $.makeTransparentImage=function(e){var t=$.makeNeutralElement("img");return t.src=e,t},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(e){var t=$.makeNeutralElement("img"),n=null;return n=$.makeNeutralElement("span"),n.style.display="inline-block",t.onload=function(){n.style.width=n.style.width||t.width+"px",n.style.height=n.style.height||t.height+"px",t.onload=null,t=null},t.src=e,n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')",n}),$.makeTransparentImage(e)},setElementOpacity:function(e,t,n){var i,r;e=$.getElement(e),n&&!$.Browser.alpha&&(t=Math.round(t)),$.Browser.opacity?e.style.opacity=t<1?t:"":t<1?(i=Math.round(100*t),r="alpha(opacity="+i+")",e.style.filter=r):e.style.filter=""},setElementTouchActionNone:function(e){e=$.getElement(e),"undefined"!==typeof e.style.touchAction?e.style.touchAction="none":"undefined"!==typeof e.style.msTouchAction&&(e.style.msTouchAction="none")},addClass:function(e,t){e=$.getElement(e),e.className?-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=" "+t):e.className=t},indexOf:function(e,t,n){return Array.prototype.indexOf?this.indexOf=function(e,t,n){return e.indexOf(t,n)}:this.indexOf=function(e,t,n){var i,r,s=n||0;if(!e)throw new TypeError;if(r=e.length,0===r||s>=r)return-1;for(s<0&&(s=r-Math.abs(s)),i=s;i<r;i++)if(e[i]===t)return i;return-1},this.indexOf(e,t,n)},removeClass:function(e,t){var n,i,r=[];for(e=$.getElement(e),n=e.className.split(/\s+/),i=0;i<n.length;i++)n[i]&&n[i]!==t&&r.push(n[i]);e.className=r.join(" ")},addEvent:function(){if(window.addEventListener)return function(e,t,n,i){e=$.getElement(e),e.addEventListener(t,n,i)};if(window.attachEvent)return function(e,t,n,i){e=$.getElement(e),e.attachEvent("on"+t,n)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(e,t,n,i){e=$.getElement(e),e.removeEventListener(t,n,i)};if(window.detachEvent)return function(e,t,n,i){e=$.getElement(e),e.detachEvent("on"+t,n)};throw new Error("No known event model.")}(),cancelEvent:function(e){e=$.getEvent(e),e.preventDefault?$.cancelEvent=function(e){e.preventDefault()}:$.cancelEvent=function(e){e=$.getEvent(e),e.cancel=!0,e.returnValue=!1},$.cancelEvent(e)},stopEvent:function(e){e=$.getEvent(e),e.stopPropagation?$.stopEvent=function(e){e.stopPropagation()}:$.stopEvent=function(e){e=$.getEvent(e),e.cancelBubble=!0},$.stopEvent(e)},createCallback:function(e,t){var n,i=[];for(n=2;n<arguments.length;n++)i.push(arguments[n]);return function(){var n,r=i.concat([]);for(n=0;n<arguments.length;n++)r.push(arguments[n]);return t.apply(e,r)}},getUrlParameter:function(e){var t=URLPARAMS[e];return t||null},getUrlProtocol:function(e){var t=e.match(/^([a-z]+:)\/\//i);return null===t?window.location.protocol:t[1].toLowerCase()},createAjaxRequest:function(e){var t;try{t=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(n){t=!1}if(t)window.XMLHttpRequest?$.createAjaxRequest=function(e){return e?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");$.createAjaxRequest=function(){return new XMLHttpRequest}}return $.createAjaxRequest(e)},makeAjaxRequest:function(e,t,n){var i,r,s;$.isPlainObject(e)&&(t=e.success,n=e.error,i=e.withCredentials,r=e.headers,s=e.responseType||null,e=e.url);var o=$.getUrlProtocol(e),a=$.createAjaxRequest("file:"===o);if(!$.isFunction(t))throw new Error("makeAjaxRequest requires a success callback");a.onreadystatechange=function(){4==a.readyState&&(a.onreadystatechange=function(){},a.status>=200&&a.status<300||0===a.status&&"http:"!==o&&"https:"!==o?t(a):($.console.log("AJAX request returned %d: %s",a.status,e),$.isFunction(n)&&n(a)))};try{if(a.open("GET",e,!0),s&&(a.responseType=s),r)for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&a.setRequestHeader(c,r[c]);i&&(a.withCredentials=!0),a.send(null)}catch(d){var l=d.message,u=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10;if(u&&"undefined"!=typeof d.number&&-2147024891==d.number&&(l+="\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain"),$.console.log("%s while making AJAX request: %s",d.name,l),a.onreadystatechange=function(){},window.XDomainRequest){var h=new window.XDomainRequest;if(h){h.onload=function(e){$.isFunction(t)&&t({responseText:h.responseText,status:200,statusText:"OK"})},h.onerror=function(e){$.isFunction(n)&&n({responseText:h.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{h.open("GET",e),h.send()}catch(p){$.isFunction(n)&&n(a,d)}}}else $.isFunction(n)&&n(a,d)}return a},jsonp:function(e){var t,n=e.url,i=document.head||document.getElementsByTagName("head")[0]||document.documentElement,r=e.callbackName||"openseadragon"+$.now(),s=window[r],o="$1"+r+"$2",a=e.param||"callback",c=e.callback;n=n.replace(/(\=)\?(&|$)|\?\?/i,o),n+=(/\?/.test(n)?"&":"?")+a+"="+r,window[r]=function(e){if(s)window[r]=s;else try{delete window[r]}catch(t){}c&&$.isFunction(c)&&c(e)},t=document.createElement("script"),void 0===e.async&&!1===e.async||(t.async="async"),e.scriptCharset&&(t.charset=e.scriptCharset),t.src=n,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,i&&t.parentNode&&i.removeChild(t),t=void 0)},i.insertBefore(t,i.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(e){if(window.DOMParser)$.parseXml=function(e){var t,n=null;return t=new DOMParser,n=t.parseFromString(e,"text/xml"),n};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");$.parseXml=function(e){var t=null;return t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e),t}}return $.parseXml(e)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(e){return e=e||"",!!FILEFORMATS[e.toLowerCase()]}});var nullfunction=function(e){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};function getOffsetParent(e,t){return t&&e!=document.body?document.body:e.offsetParent}(function(){var e,t=navigator.appVersion,n=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(n.substring(n.indexOf("MSIE")+5,n.indexOf(";",n.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(n.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(n.substring(n.indexOf("Firefox")+8))):n.indexOf("Safari")>=0?($.Browser.vendor=n.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(n.substring(n.substring(0,n.indexOf("Safari")).lastIndexOf("/")+1,n.indexOf("Safari")))):(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(t);break}var i,r,s,o=window.location.search.substring(1),a=o.split("&");for(s=0;s<a.length;s++)if(i=a[s],r=i.indexOf("="),r>0){var c=i.substring(0,r),l=i.substring(r+1);try{URLPARAMS[c]=decodeURIComponent(l)}catch(u){$.console.error("Ignoring malformed URL parameter: %s=%s",c,l)}}$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)})(),function(e){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,n=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame;if(t&&n)$.requestAnimationFrame=function(){return t.apply(e,arguments)},$.cancelAnimationFrame=function(){return n.apply(e,arguments)};else{var i,r=[],s=[],o=0;$.requestAnimationFrame=function(e){return r.push([++o,e]),i||(i=setInterval((function(){if(r.length){var e=$.now(),t=s;s=r,r=t;while(s.length)s.shift()[1](e)}else clearInterval(i),i=void 0}),20)),o},$.cancelAnimationFrame=function(e){var t,n;for(t=0,n=r.length;t<n;t+=1)if(r[t][0]===e)return void r.splice(t,1);for(t=0,n=s.length;t<n;t+=1)if(s[t][0]===e)return void s.splice(t,1)}}}(window)}(OpenSeadragon),function(e,t){__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=t,__WEBPACK_AMD_DEFINE_RESULT__="function"===typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(0,(function(){return OpenSeadragon})),function(e){var t={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.fullscreenElement},t.requestFullScreen=function(e){return e.requestFullscreen()},t.exitFullScreen=function(){document.exitFullscreen()},t.fullScreenEventName="fullscreenchange",t.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.msFullscreenElement},t.requestFullScreen=function(e){return e.msRequestFullscreen()},t.exitFullScreen=function(){document.msExitFullscreen()},t.fullScreenEventName="MSFullscreenChange",t.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitFullscreenElement},t.requestFullScreen=function(e){return e.webkitRequestFullscreen()},t.exitFullScreen=function(){document.webkitExitFullscreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},t.requestFullScreen=function(e){return e.webkitRequestFullScreen()},t.exitFullScreen=function(){document.webkitCancelFullScreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.mozFullScreenElement},t.requestFullScreen=function(e){return e.mozRequestFullScreen()},t.exitFullScreen=function(){document.mozCancelFullScreen()},t.fullScreenEventName="mozfullscreenchange",t.fullScreenErrorEventName="mozfullscreenerror"),t.isFullScreen=function(){return null!==t.getFullScreenElement()},t.cancelFullScreen=function(){e.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),t.exitFullScreen()},e.extend(e,t)}(OpenSeadragon),function(e){e.EventSource=function(){this.events={}},e.EventSource.prototype={addOnceHandler:function(e,t,n,i){var r=this;i=i||1;var s=0,o=function(n){s++,s===i&&r.removeHandler(e,o),t(n)};this.addHandler(e,o,n)},addHandler:function(t,n,i){var r=this.events[t];r||(this.events[t]=r=[]),n&&e.isFunction(n)&&(r[r.length]={handler:n,userData:i||null})},removeHandler:function(t,n){var i,r=this.events[t],s=[];if(r&&e.isArray(r)){for(i=0;i<r.length;i++)r[i].handler!==n&&s.push(r[i]);this.events[t]=s}},removeAllHandlers:function(e){if(e)this.events[e]=[];else for(var t in this.events)this.events[t]=[]},getHandler:function(e){var t=this.events[e];return t&&t.length?(t=1===t.length?[t[0]]:Array.apply(null,t),function(e,n){var i,r=t.length;for(i=0;i<r;i++)t[i]&&(n.eventSource=e,n.userData=t[i].userData,t[i].handler(n))}):null},raiseEvent:function(e,t){var n=this.getHandler(e);n&&(t||(t={}),n(this,t))}}}(OpenSeadragon),function(e){var t=[],n={};function i(t){var i,r=n[t.hash],s=r.activePointersLists.length;for(i=0;i<s;i++)r.activePointersLists[i].captureCount>0&&(e.removeEvent(e.MouseTracker.captureElement,"mousemove",r.mousemovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"mouseup",r.mouseupcaptured,!0),e.removeEvent(e.MouseTracker.captureElement,e.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",r.pointermovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,e.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",r.pointerupcaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"touchmove",r.touchmovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"touchend",r.touchendcaptured,!0),r.activePointersLists[i].captureCount=0);for(i=0;i<s;i++)r.activePointersLists.pop()}function r(t){var r,s,o=n[t.hash];if(!o.tracking){for(s=0;s<e.MouseTracker.subscribeEvents.length;s++)r=e.MouseTracker.subscribeEvents[s],e.addEvent(t.element,r,o[r],!1);i(t),o.tracking=!0}}function s(t){var r,s,o=n[t.hash];if(o.tracking){for(s=0;s<e.MouseTracker.subscribeEvents.length;s++)r=e.MouseTracker.subscribeEvents[s],e.removeEvent(t.element,r,o[r],!1);i(t),o.tracking=!1}}function o(t,i){var r=n[t.hash];if("pointerevent"===i)return{upName:e.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:r.pointerupcaptured,moveName:e.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:r.pointermovecaptured};if("mouse"===i)return{upName:"mouseup",upHandler:r.mouseupcaptured,moveName:"mousemove",moveHandler:r.mousemovecaptured};if("touch"===i)return{upName:"touchend",upHandler:r.touchendcaptured,moveName:"touchmove",moveHandler:r.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function a(t,n,i){var r,s=t.getActivePointersListByType(n);s.captureCount+=i||1,1===s.captureCount&&(e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?t.element.setCapture(!0):(r=o(t,e.MouseTracker.havePointerEvents?"pointerevent":n),me&&ge(window.top)&&e.addEvent(window.top,r.upName,r.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,r.upName,r.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,r.moveName,r.moveHandler,!0)))}function c(t,n,i){var r,s=t.getActivePointersListByType(n);s.captureCount-=i||1,0===s.captureCount&&(e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?t.element.releaseCapture():(r=o(t,e.MouseTracker.havePointerEvents?"pointerevent":n),me&&ge(window.top)&&e.removeEvent(window.top,r.upName,r.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,r.moveName,r.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,r.upName,r.upHandler,!0)))}function l(t){var n;if(e.MouseTracker.unprefixedPointerEvents)n=t.pointerType;else switch(t.pointerType){case 2:n="touch";break;case 3:n="pen";break;case 4:n="mouse";break;default:n=""}return n}function u(t){return e.getMousePosition(t)}function h(e,t){return d(u(e),t)}function d(t,n){var i=e.getElementOffset(n);return t.minus(i)}function p(t,n){return new e.Point((t.x+n.x)/2,(t.y+n.y)/2)}function f(t,n){t.clickHandler&&e.cancelEvent(n)}function m(t,n){t.dblClickHandler&&e.cancelEvent(n)}function g(t,n){var i;t.keyDownHandler&&(n=e.getEvent(n),i=t.keyDownHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),i||e.cancelEvent(n))}function v(t,n){var i;t.keyUpHandler&&(n=e.getEvent(n),i=t.keyUpHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),i||e.cancelEvent(n))}function y(t,n){var i;t.keyHandler&&(n=e.getEvent(n),i=t.keyHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),i||e.cancelEvent(n))}function T(t,n){var i;t.focusHandler&&(n=e.getEvent(n),i=t.focusHandler({eventSource:t,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),!1===i&&e.cancelEvent(n))}function E(t,n){var i;t.blurHandler&&(n=e.getEvent(n),i=t.blurHandler({eventSource:t,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),!1===i&&e.cancelEvent(n))}function _(e,t){w(e,t,t)}function b(t,n){n=e.getEvent(n);var i={target:n.target||n.srcElement,type:"wheel",shiftKey:n.shiftKey||!1,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX?n.pageX:n.clientX,pageY:n.pageY?n.pageY:n.clientY,deltaMode:"MozMousePixelScroll"==n.type?0:1,deltaX:0,deltaZ:0};"mousewheel"==e.MouseTracker.wheelEventName?i.deltaY=-n.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:i.deltaY=n.detail,w(t,i,n)}function w(t,n,i){var r,s=0;s=n.deltaY<0?1:-1,t.scrollHandler&&(r=t.scrollHandler({eventSource:t,pointerType:"mouse",position:h(n,t.element),scroll:s,shift:n.shiftKey,isTouchEvent:!1,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),!1===r&&e.cancelEvent(i))}function S(e,t){if(e===t)return!1;while(t&&t!==e)t=t.parentNode;return t===e}function A(t,n){n=e.getEvent(n),x(t,n)}function C(t,n){n=e.getEvent(n),n.currentTarget===n.relatedTarget||S(n.currentTarget,n.relatedTarget)||x(t,n)}function x(t,n){var i={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:u(n),currentTime:e.now()};ce(t,n,[i])}function I(t,n){n=e.getEvent(n),k(t,n)}function N(t,n){n=e.getEvent(n),n.currentTarget===n.relatedTarget||S(n.currentTarget,n.relatedTarget)||k(t,n)}function k(t,n){var i={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:u(n),currentTime:e.now()};le(t,n,[i])}function O(t){return e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?1===t?0:2===t?2:4===t?1:-1:t}function R(t,n){var i;n=e.getEvent(n),i={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:u(n),currentTime:e.now()},ue(t,n,[i],O(n.button))&&(e.stopEvent(n),a(t,"mouse")),(t.clickHandler||t.dblClickHandler||t.pressHandler||t.dragHandler||t.dragEndHandler)&&e.cancelEvent(n)}function D(e,t){L(e,t)}function P(t,n){L(t,n),e.stopEvent(n)}function L(t,n){var i;n=e.getEvent(n),i={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:u(n),currentTime:e.now()},he(t,n,[i],O(n.button))&&c(t,"mouse")}function M(e,t){F(e,t)}function B(t,n){F(t,n),e.stopEvent(n)}function F(t,n){var i;n=e.getEvent(n),i={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:u(n),currentTime:e.now()},de(t,n,[i])}function H(e,t,n){var i,r=n.getLength(),s=[];if("touch"===n.type||n.contacts>0){for(i=0;i<r;i++)s.push(n.getByIndex(i));s.length>0&&(he(e,t,s,0),n.captureCount=1,c(e,n.type),le(e,t,s))}}function U(n,i){var r,s,o,c,l=i.changedTouches.length,h=[],d=n.getActivePointersListByType("touch");for(r=e.now(),d.getLength()>i.touches.length-l&&(e.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),H(n,i,d)),s=0;s<l;s++)h.push({id:i.changedTouches[s].identifier,type:"touch",currentPos:u(i.changedTouches[s]),currentTime:r});for(ce(n,i,h),s=0;s<t.length;s++)if(t[s]!==n&&t[s].isTracking()&&S(t[s].element,n.element)){for(c=[],o=0;o<l;o++)c.push({id:i.changedTouches[o].identifier,type:"touch",currentPos:u(i.changedTouches[o]),currentTime:r});ce(t[s],i,c)}ue(n,i,h,0)&&(e.stopEvent(i),a(n,"touch",l)),e.cancelEvent(i)}function q(e,t){$(e,t)}function G(t,n){$(t,n),e.stopEvent(n)}function $(n,i){var r,s,o,a,l=i.changedTouches.length,h=[];for(r=e.now(),s=0;s<l;s++)h.push({id:i.changedTouches[s].identifier,type:"touch",currentPos:u(i.changedTouches[s]),currentTime:r});for(he(n,i,h,0)&&c(n,"touch",l),le(n,i,h),s=0;s<t.length;s++)if(t[s]!==n&&t[s].isTracking()&&S(t[s].element,n.element)){for(a=[],o=0;o<l;o++)a.push({id:i.changedTouches[o].identifier,type:"touch",currentPos:u(i.changedTouches[o]),currentTime:r});le(t[s],i,a)}e.cancelEvent(i)}function z(e,t){V(e,t)}function j(t,n){V(t,n),e.stopEvent(n)}function V(t,n){var i,r=n.changedTouches.length,s=[];for(i=0;i<r;i++)s.push({id:n.changedTouches[i].identifier,type:"touch",currentPos:u(n.changedTouches[i]),currentTime:e.now()});de(t,n,s),e.cancelEvent(n)}function W(e,t){var n=e.getActivePointersListByType("touch");H(e,t,n)}function Y(e,t){return t.stopPropagation(),t.preventDefault(),!1}function X(e,t){return t.stopPropagation(),t.preventDefault(),!1}function K(t,n){var i;n.currentTarget===n.relatedTarget||S(n.currentTarget,n.relatedTarget)||(i={id:n.pointerId,type:l(n),isPrimary:n.isPrimary,currentPos:u(n),currentTime:e.now()},ce(t,n,[i]))}function Q(t,n){var i;n.currentTarget===n.relatedTarget||S(n.currentTarget,n.relatedTarget)||(i={id:n.pointerId,type:l(n),isPrimary:n.isPrimary,currentPos:u(n),currentTime:e.now()},le(t,n,[i]))}function Z(t,n){var i;i={id:n.pointerId,type:l(n),isPrimary:n.isPrimary,currentPos:u(n),currentTime:e.now()},ue(t,n,[i],n.button)&&(e.stopEvent(n),a(t,i.type)),(t.clickHandler||t.dblClickHandler||t.pressHandler||t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.cancelEvent(n)}function J(e,t){te(e,t)}function ee(t,n){var i=t.getActivePointersListByType(l(n));i.getById(n.pointerId)&&te(t,n),e.stopEvent(n)}function te(t,n){var i;i={id:n.pointerId,type:l(n),isPrimary:n.isPrimary,currentPos:u(n),currentTime:e.now()},he(t,n,[i],n.button)&&c(t,i.type)}function ne(e,t){re(e,t)}function ie(t,n){var i=t.getActivePointersListByType(l(n));i.getById(n.pointerId)&&re(t,n),e.stopEvent(n)}function re(t,n){var i;i={id:n.pointerId,type:l(n),isPrimary:n.isPrimary,currentPos:u(n),currentTime:e.now()},de(t,n,[i])}function se(e,t){var n;n={id:t.pointerId,type:l(t)},pe(e,t,[n])}function oe(e,t){return Object.prototype.hasOwnProperty.call(t,"isPrimary")||(0===e.getLength()?t.isPrimary=!0:t.isPrimary=!1),t.speed=0,t.direction=0,t.contactPos=t.currentPos,t.contactTime=t.currentTime,t.lastPos=t.currentPos,t.lastTime=t.currentTime,e.add(t)}function ae(e,t){var n,i;return e.getById(t.id)?(n=e.removeById(t.id),Object.prototype.hasOwnProperty.call(t,"isPrimary")||(i=e.getPrimary(),i||(i=e.getByIndex(0),i&&(i.isPrimary=!0)))):n=e.getLength(),n}function ce(t,n,i){var r,s,o,a,c=t.getActivePointersListByType(i[0].type),l=i.length;for(r=0;r<l;r++)s=i[r],o=c.getById(s.id),o?(o.insideElement=!0,o.lastPos=o.currentPos,o.lastTime=o.currentTime,o.currentPos=s.currentPos,o.currentTime=s.currentTime,s=o):(s.captured=!1,s.insideElementPressed=!1,s.insideElement=!0,oe(c,s)),t.enterHandler&&(a=t.enterHandler({eventSource:t,pointerType:s.type,position:d(s.currentPos,t.element),buttons:c.buttons,pointers:t.getActivePointerCount(),insideElementPressed:s.insideElementPressed,buttonDownAny:0!==c.buttons,isTouchEvent:"touch"===s.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),!1===a&&e.cancelEvent(n))}function le(t,n,i){var r,s,o,a,c=t.getActivePointersListByType(i[0].type),l=i.length;for(r=0;r<l;r++)s=i[r],o=c.getById(s.id),o&&(o.captured?(o.insideElement=!1,o.lastPos=o.currentPos,o.lastTime=o.currentTime,o.currentPos=s.currentPos,o.currentTime=s.currentTime):ae(c,o),s=o),t.exitHandler&&(a=t.exitHandler({eventSource:t,pointerType:s.type,position:s.currentPos&&d(s.currentPos,t.element),buttons:c.buttons,pointers:t.getActivePointerCount(),insideElementPressed:!!o&&o.insideElementPressed,buttonDownAny:0!==c.buttons,isTouchEvent:"touch"===s.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),!1===a&&e.cancelEvent(n))}function ue(t,i,r,s){var o,a,c,l,u=n[t.hash],h=t.getActivePointersListByType(r[0].type),f=r.length;"undefined"!==typeof i.buttons?h.buttons=i.buttons:e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?0===s?h.buttons+=1:1===s?h.buttons+=4:2===s?h.buttons+=2:3===s?h.buttons+=8:4===s?h.buttons+=16:5===s&&(h.buttons+=32):0===s?h.buttons|=1:1===s?h.buttons|=4:2===s?h.buttons|=2:3===s?h.buttons|=8:4===s?h.buttons|=16:5===s&&(h.buttons|=32);var m=t.getActivePointersListsExceptType(r[0].type);for(a=0;a<m.length;a++)H(t,i,m[a]);if(0!==s)return t.nonPrimaryPressHandler&&(o=t.nonPrimaryPressHandler({eventSource:t,pointerType:r[0].type,position:d(r[0].currentPos,t.element),button:s,buttons:h.buttons,isTouchEvent:"touch"===r[0].type,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),!1===o&&e.cancelEvent(i)),!1;for(a=0;a<f;a++)c=r[a],l=h.getById(c.id),l?(l.captured=!0,l.insideElementPressed=!0,l.insideElement=!0,l.contactPos=c.currentPos,l.contactTime=c.currentTime,l.lastPos=l.currentPos,l.lastTime=l.currentTime,l.currentPos=c.currentPos,l.currentTime=c.currentTime,c=l):(c.captured=!0,c.insideElementPressed=!0,c.insideElement=!0,oe(h,c)),h.addContact(),(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(t,c),1===h.contacts?t.pressHandler&&(o=t.pressHandler({eventSource:t,pointerType:c.type,position:d(c.contactPos,t.element),buttons:h.buttons,isTouchEvent:"touch"===c.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),!1===o&&e.cancelEvent(i)):2===h.contacts&&t.pinchHandler&&"touch"===c.type&&(u.pinchGPoints=h.asArray(),u.lastPinchDist=u.currentPinchDist=u.pinchGPoints[0].currentPos.distanceTo(u.pinchGPoints[1].currentPos),u.lastPinchCenter=u.currentPinchCenter=p(u.pinchGPoints[0].currentPos,u.pinchGPoints[1].currentPos));return!0}function he(t,i,r,s){var o,a,c,l,u,h,f,m=n[t.hash],g=t.getActivePointersListByType(r[0].type),v=r.length,y=!1,T=!1;if("undefined"!==typeof i.buttons?g.buttons=i.buttons:e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?0===s?g.buttons-=1:1===s?g.buttons-=4:2===s?g.buttons-=2:3===s?g.buttons-=8:4===s?g.buttons-=16:5===s&&(g.buttons-=32):0===s?g.buttons^=-2:1===s?g.buttons^=-5:2===s?g.buttons^=-3:3===s?g.buttons^=-9:4===s?g.buttons^=-17:5===s&&(g.buttons^=-33),0!==s){t.nonPrimaryReleaseHandler&&(o=t.nonPrimaryReleaseHandler({eventSource:t,pointerType:r[0].type,position:d(r[0].currentPos,t.element),button:s,buttons:g.buttons,isTouchEvent:"touch"===r[0].type,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),!1===o&&e.cancelEvent(i));var E=t.getActivePointersListByType("mouse");return H(t,i,E),!1}if("undefined"===typeof r[0].currentPos)return H(t,i,g),!1;for(l=0;l<v;l++)u=r[l],h=g.getById(u.id),h&&(h.captured&&(h.captured=!1,y=!0,T=!0),h.lastPos=h.currentPos,h.lastTime=h.currentTime,h.currentPos=u.currentPos,h.currentTime=u.currentTime,h.insideElement||ae(g,h),a=h.currentPos,c=h.currentTime,T?(g.removeContact(),(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(t,h),0===g.contacts?(t.releaseHandler&&(o=t.releaseHandler({eventSource:t,pointerType:h.type,position:d(a,t.element),buttons:g.buttons,insideElementPressed:h.insideElementPressed,insideElementReleased:h.insideElement,isTouchEvent:"touch"===h.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),!1===o&&e.cancelEvent(i)),t.dragEndHandler&&!h.currentPos.equals(h.contactPos)&&(o=t.dragEndHandler({eventSource:t,pointerType:h.type,position:d(h.currentPos,t.element),speed:h.speed,direction:h.direction,shift:i.shiftKey,isTouchEvent:"touch"===h.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),!1===o&&e.cancelEvent(i)),(t.clickHandler||t.dblClickHandler)&&h.insideElement&&(f=c-h.contactTime<=t.clickTimeThreshold&&h.contactPos.distanceTo(a)<=t.clickDistThreshold,t.clickHandler&&(o=t.clickHandler({eventSource:t,pointerType:h.type,position:d(h.currentPos,t.element),quick:f,shift:i.shiftKey,isTouchEvent:"touch"===h.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),!1===o&&e.cancelEvent(i)),t.dblClickHandler&&f&&(g.clicks++,1===g.clicks?(m.lastClickPos=a,m.dblClickTimeOut=setTimeout((function(){g.clicks=0}),t.dblClickTimeThreshold)):2===g.clicks&&(clearTimeout(m.dblClickTimeOut),g.clicks=0,m.lastClickPos.distanceTo(a)<=t.dblClickDistThreshold&&(o=t.dblClickHandler({eventSource:t,pointerType:h.type,position:d(h.currentPos,t.element),shift:i.shiftKey,isTouchEvent:"touch"===h.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),!1===o&&e.cancelEvent(i)),m.lastClickPos=null)))):2===g.contacts&&t.pinchHandler&&"touch"===h.type&&(m.pinchGPoints=g.asArray(),m.lastPinchDist=m.currentPinchDist=m.pinchGPoints[0].currentPos.distanceTo(m.pinchGPoints[1].currentPos),m.lastPinchCenter=m.currentPinchCenter=p(m.pinchGPoints[0].currentPos,m.pinchGPoints[1].currentPos))):t.releaseHandler&&(o=t.releaseHandler({eventSource:t,pointerType:h.type,position:d(a,t.element),buttons:g.buttons,insideElementPressed:h.insideElementPressed,insideElementReleased:h.insideElement,isTouchEvent:"touch"===h.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),!1===o&&e.cancelEvent(i)));return y}function de(t,i,r){var s,o,a,c,l,u,h=n[t.hash],f=t.getActivePointersListByType(r[0].type),m=r.length;for("undefined"!==typeof i.buttons&&(f.buttons=i.buttons),s=0;s<m;s++)o=r[s],a=f.getById(o.id),a?(Object.prototype.hasOwnProperty.call(o,"isPrimary")&&(a.isPrimary=o.isPrimary),a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=o.currentPos,a.currentTime=o.currentTime):(o.captured=!1,o.insideElementPressed=!1,o.insideElement=!0,oe(f,o));t.stopHandler&&"mouse"===r[0].type&&(clearTimeout(t.stopTimeOut),t.stopTimeOut=setTimeout((function(){fe(t,i,r[0].type)}),t.stopDelay)),0===f.contacts?t.moveHandler&&(u=t.moveHandler({eventSource:t,pointerType:r[0].type,position:d(r[0].currentPos,t.element),buttons:f.buttons,isTouchEvent:"touch"===r[0].type,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),!1===u&&e.cancelEvent(i)):1===f.contacts?(t.moveHandler&&(a=f.asArray()[0],u=t.moveHandler({eventSource:t,pointerType:a.type,position:d(a.currentPos,t.element),buttons:f.buttons,isTouchEvent:"touch"===a.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),!1===u&&e.cancelEvent(i)),t.dragHandler&&(a=f.asArray()[0],l=a.currentPos.minus(a.lastPos),u=t.dragHandler({eventSource:t,pointerType:a.type,position:d(a.currentPos,t.element),buttons:f.buttons,delta:l,speed:a.speed,direction:a.direction,shift:i.shiftKey,isTouchEvent:"touch"===a.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),!1===u&&e.cancelEvent(i))):2===f.contacts&&(t.moveHandler&&(c=f.asArray(),u=t.moveHandler({eventSource:t,pointerType:c[0].type,position:d(p(c[0].currentPos,c[1].currentPos),t.element),buttons:f.buttons,isTouchEvent:"touch"===c[0].type,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),!1===u&&e.cancelEvent(i)),t.pinchHandler&&"touch"===r[0].type&&(l=h.pinchGPoints[0].currentPos.distanceTo(h.pinchGPoints[1].currentPos),l!=h.currentPinchDist&&(h.lastPinchDist=h.currentPinchDist,h.currentPinchDist=l,h.lastPinchCenter=h.currentPinchCenter,h.currentPinchCenter=p(h.pinchGPoints[0].currentPos,h.pinchGPoints[1].currentPos),u=t.pinchHandler({eventSource:t,pointerType:"touch",gesturePoints:h.pinchGPoints,lastCenter:d(h.lastPinchCenter,t.element),center:d(h.currentPinchCenter,t.element),lastDistance:h.lastPinchDist,distance:h.currentPinchDist,shift:i.shiftKey,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),!1===u&&e.cancelEvent(i))))}function pe(e,t,n){he(e,t,n,0),le(e,t,n)}function fe(e,t,n){e.stopHandler&&e.stopHandler({eventSource:e,pointerType:n,position:h(t,e.element),buttons:e.getActivePointersListByType(n).buttons,isTouchEvent:"touch"===n,originalEvent:t,preventDefaultAction:!1,userData:e.userData})}e.MouseTracker=function(i){t.push(this);var r=arguments;e.isPlainObject(i)||(i={element:r[0],clickTimeThreshold:r[1],clickDistThreshold:r[2]}),this.hash=Math.random(),this.element=e.getElement(i.element),this.clickTimeThreshold=i.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=i.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=i.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=i.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=i.userData||null,this.stopDelay=i.stopDelay||50,this.enterHandler=i.enterHandler||null,this.exitHandler=i.exitHandler||null,this.pressHandler=i.pressHandler||null,this.nonPrimaryPressHandler=i.nonPrimaryPressHandler||null,this.releaseHandler=i.releaseHandler||null,this.nonPrimaryReleaseHandler=i.nonPrimaryReleaseHandler||null,this.moveHandler=i.moveHandler||null,this.scrollHandler=i.scrollHandler||null,this.clickHandler=i.clickHandler||null,this.dblClickHandler=i.dblClickHandler||null,this.dragHandler=i.dragHandler||null,this.dragEndHandler=i.dragEndHandler||null,this.pinchHandler=i.pinchHandler||null,this.stopHandler=i.stopHandler||null,this.keyDownHandler=i.keyDownHandler||null,this.keyUpHandler=i.keyUpHandler||null,this.keyHandler=i.keyHandler||null,this.focusHandler=i.focusHandler||null,this.blurHandler=i.blurHandler||null;var s=this;n[this.hash]={click:function(e){f(s,e)},dblclick:function(e){m(s,e)},keydown:function(e){g(s,e)},keyup:function(e){v(s,e)},keypress:function(e){y(s,e)},focus:function(e){T(s,e)},blur:function(e){E(s,e)},wheel:function(e){_(s,e)},mousewheel:function(e){b(s,e)},DOMMouseScroll:function(e){b(s,e)},MozMousePixelScroll:function(e){b(s,e)},mouseenter:function(e){A(s,e)},mouseleave:function(e){I(s,e)},mouseover:function(e){C(s,e)},mouseout:function(e){N(s,e)},mousedown:function(e){R(s,e)},mouseup:function(e){D(s,e)},mouseupcaptured:function(e){P(s,e)},mousemove:function(e){M(s,e)},mousemovecaptured:function(e){B(s,e)},touchstart:function(e){U(s,e)},touchend:function(e){q(s,e)},touchendcaptured:function(e){G(s,e)},touchmove:function(e){z(s,e)},touchmovecaptured:function(e){j(s,e)},touchcancel:function(e){W(s,e)},gesturestart:function(e){Y(s,e)},gesturechange:function(e){X(s,e)},pointerover:function(e){K(s,e)},MSPointerOver:function(e){K(s,e)},pointerout:function(e){Q(s,e)},MSPointerOut:function(e){Q(s,e)},pointerdown:function(e){Z(s,e)},MSPointerDown:function(e){Z(s,e)},pointerup:function(e){J(s,e)},MSPointerUp:function(e){J(s,e)},pointermove:function(e){ne(s,e)},MSPointerMove:function(e){ne(s,e)},pointercancel:function(e){se(s,e)},MSPointerCancel:function(e){se(s,e)},pointerupcaptured:function(e){ee(s,e)},pointermovecaptured:function(e){ie(s,e)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},i.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){var e;for(s(this),this.element=null,e=0;e<t.length;e++)if(t[e]===this){t.splice(e,1);break}n[this.hash]=null,delete n[this.hash]},isTracking:function(){return n[this.hash].tracking},setTracking:function(e){return e?r(this):s(this),this},getActivePointersListsExceptType:function(e){for(var t=n[this.hash],i=[],r=0;r<t.activePointersLists.length;++r)t.activePointersLists[r].type!==e&&i.push(t.activePointersLists[r]);return i},getActivePointersListByType:function(t){var i,r,s=n[this.hash],o=s.activePointersLists.length;for(i=0;i<o;i++)if(s.activePointersLists[i].type===t)return s.activePointersLists[i];return r=new e.MouseTracker.GesturePointList(t),s.activePointersLists.push(r),r},getActivePointerCount:function(){var e,t=n[this.hash],i=t.activePointersLists.length,r=0;for(e=0;e<i;e++)r+=t.activePointersLists[e].getLength();return r},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},e.MouseTracker.resetAllMouseTrackers=function(){for(var e=0;e<t.length;e++)t[e].isTracking()&&(t[e].setTracking(!1),t[e].setTracking(!0))},e.MouseTracker.gesturePointVelocityTracker=function(){var t=[],n=0,i=0,r=function(e,t){return e.hash.toString()+t.type+t.id.toString()},s=function(){var n,r,s,o,a,c,l=t.length,u=e.now();for(o=u-i,i=u,n=0;n<l;n++)r=t[n],s=r.gPoint,s.direction=Math.atan2(s.currentPos.y-r.lastPos.y,s.currentPos.x-r.lastPos.x),a=r.lastPos.distanceTo(s.currentPos),r.lastPos=s.currentPos,c=1e3*a/(o+1),s.speed=.75*c+.25*s.speed},o=function(o,a){var c=r(o,a);t.push({guid:c,gPoint:a,lastPos:a.currentPos}),1===t.length&&(i=e.now(),n=window.setInterval(s,50))},a=function(e,i){var s,o=r(e,i),a=t.length;for(s=0;s<a;s++)if(t[s].guid===o){t.splice(s,1),a--,0===a&&window.clearInterval(n);break}};return{addPoint:o,removePoint:a}}(),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName=e.Browser.vendor==e.BROWSERS.IE&&e.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.MouseTracker.supportsMouseCapture=function(){var t=document.createElement("div");return e.isFunction(t.setCapture)&&e.isFunction(t.releaseCapture)}(),e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",e.MouseTracker.wheelEventName],"DOMMouseScroll"==e.MouseTracker.wheelEventName&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||e.Browser.vendor!==e.BROWSERS.IE)?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?e.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:e.MouseTracker.maxTouchPoints=0,e.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),e.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?e.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:e.MouseTracker.maxTouchPoints=0,e.MouseTracker.haveMouseEnter=!1):(e.MouseTracker.havePointerEvents=!1,e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?(e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),e.MouseTracker.haveMouseEnter=!0):(e.MouseTracker.subscribeEvents.push("mouseover","mouseout"),e.MouseTracker.haveMouseEnter=!1),e.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.maxTouchPoints=10),e.MouseTracker.GesturePointList=function(e){this._gPoints=[],this.type=e,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(e){return this._gPoints.push(e)},removeById:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].id===e){this._gPoints.splice(t,1);break}return this._gPoints.length},getByIndex:function(e){return e<this._gPoints.length?this._gPoints[e]:null},getById:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].id===e)return this._gPoints[t];return null},getPrimary:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].isPrimary)return this._gPoints[t];return null},addContact:function(){++this.contacts,this.contacts>1&&("mouse"===this.type||"pen"===this.type)&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};var me=function(){try{return window.self!==window.top}catch(e){return!0}}();function ge(e){try{return e.addEventListener&&e.removeEventListener}catch(t){return!1}}}(OpenSeadragon),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(t,n,i){var r=t.parentNode;"number"===typeof n&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer="undefined"===typeof n.attachToViewer||n.attachToViewer,this.autoFade="undefined"===typeof n.autoFade||n.autoFade,this.element=t,this.anchor=n.anchor,this.container=i,this.anchor==e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof n.top?n.top+"px":n.top,this.wrapper.style.left="number"==typeof n.left?n.left+"px":n.left,this.wrapper.style.height="number"==typeof n.height?n.height+"px":n.height,this.wrapper.style.width="number"==typeof n.width?n.width+"px":n.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),n.attachToViewer?this.anchor==e.ControlAnchor.TOP_RIGHT||this.anchor==e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):r.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(t){this.wrapper.style.display=t?this.anchor==e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(t){this.element[e.SIGNAL]&&e.Browser.vendor==e.BROWSERS.IE?e.setElementOpacity(this.element,t,!0):e.setElementOpacity(this.wrapper,t,!0)}}}(OpenSeadragon),function(e){function t(e,t){var n,i=e.controls;for(n=i.length-1;n>=0;n--)if(i[n].element==t)return n;return-1}e.ControlDock=function(t){var n,i,r=["topleft","topright","bottomright","bottomleft"];for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(1e6*Math.random()),container:e.makeNeutralElement("div"),controls:[]},t),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),i=0;i<r.length;i++)n=r[i],this.controls[n]=e.makeNeutralElement("div"),this.controls[n].style.position="absolute",n.match("left")&&(this.controls[n].style.left="0px"),n.match("right")&&(this.controls[n].style.right="0px"),n.match("top")&&(this.controls[n].style.top="0px"),n.match("bottom")&&(this.controls[n].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(n,i){n=e.getElement(n);var r=null;if(!(t(this,n)>=0)){switch(i.anchor){case e.ControlAnchor.TOP_RIGHT:r=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:r=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:r=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:r=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.ABSOLUTE:r=this.container,n.style.margin="0px",n.style.padding="0px";break;default:case e.ControlAnchor.NONE:r=this.container,n.style.margin="0px",n.style.padding="0px";break}this.controls.push(new e.Control(n,i,r)),n.style.display="inline-block"}},removeControl:function(n){n=e.getElement(n);var i=t(this,n);return i>=0&&(this.controls[i].destroy(),this.controls.splice(i,1)),this},clearControls:function(){while(this.controls.length>0)this.controls.pop().destroy();return this},areControlsEnabled:function(){var e;for(e=this.controls.length-1;e>=0;e--)if(this.controls[e].isVisible())return!0;return!1},setControlsEnabled:function(e){var t;for(t=this.controls.length-1;t>=0;t--)this.controls[t].setVisible(e);return this}}}(OpenSeadragon),function(e){e.Placement=e.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(e){var t={},n=1;function i(t){return t=e.getElement(t),new e.Point(0===t.clientWidth?1:t.clientWidth,0===t.clientHeight?1:t.clientHeight)}function r(t,n,i,r,s){var o=t;if("string"==e.type(n))if(n.match(/^\s*<.*>\s*$/))n=e.parseXml(n);else if(n.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var a=e.parseJSON(n);n=a}catch(l){}function c(e,t){e.ready?r(e):(e.addHandler("ready",(function(){r(e)})),e.addHandler("open-failed",(function(e){s({message:e.message,source:t})})))}setTimeout((function(){if("string"==e.type(n))n=new e.TileSource({url:n,crossOriginPolicy:void 0!==i.crossOriginPolicy?i.crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,ajaxHeaders:t.ajaxHeaders,useCanvas:t.useCanvas,success:function(e){r(e.tileSource)}}),n.addHandler("open-failed",(function(e){s(e)}));else if(e.isPlainObject(n)||n.nodeType)if(void 0!==n.crossOriginPolicy||void 0===i.crossOriginPolicy&&void 0===t.crossOriginPolicy||(n.crossOriginPolicy=void 0!==i.crossOriginPolicy?i.crossOriginPolicy:t.crossOriginPolicy),void 0===n.ajaxWithCredentials&&(n.ajaxWithCredentials=t.ajaxWithCredentials),void 0===n.useCanvas&&(n.useCanvas=t.useCanvas),e.isFunction(n.getTileUrl)){var a=new e.TileSource(n);a.getTileUrl=n.getTileUrl,r(a)}else{var l=e.TileSource.determineType(o,n);if(!l)return void s({message:"Unable to load TileSource",source:n});var u=l.prototype.configure.apply(o,[n]);c(new l(u),n)}else c(n,n)}))}function s(t,n){if(n instanceof e.Overlay)return n;var i=null;if(n.element)i=e.getElement(n.element);else{var r=n.id?n.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());i=e.getElement(n.id),i||(i=document.createElement("a"),i.href="#/overlay/"+r),i.id=r,e.addClass(i,n.className?n.className:"openseadragon-overlay")}var s=n.location,o=n.width,a=n.height;if(!s){var c=n.x,l=n.y;if(void 0!==n.px){var u=t.viewport.imageToViewportRectangle(new e.Rect(n.px,n.py,o||0,a||0));c=u.x,l=u.y,o=void 0!==o?u.width:void 0,a=void 0!==a?u.height:void 0}s=new e.Point(c,l)}var h=n.placement;return h&&"string"===e.type(h)&&(h=e.Placement[n.placement.toUpperCase()]),new e.Overlay({element:i,location:s,placement:h,onDraw:n.onDraw,checkResize:n.checkResize,width:o,height:a,rotationMode:n.rotationMode})}function o(e,t){var n;for(n=e.length-1;n>=0;n--)if(e[n].element===t)return n;return-1}function a(t,n){return e.requestAnimationFrame((function(){n(t)}))}function c(t){e.requestAnimationFrame((function(){u(t)}))}function l(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=e.now()+t.controlsFadeDelay,window.setTimeout((function(){c(t)}),t.controlsFadeDelay))}function u(t){var n,i,r,s;if(t.controlsShouldFade){for(n=e.now(),i=n-t.controlsFadeBeginTime,r=1-i/t.controlsFadeLength,r=Math.min(1,r),r=Math.max(0,r),s=t.controls.length-1;s>=0;s--)t.controls[s].autoFade&&t.controls[s].setOpacity(r);r>0&&c(t)}}function h(e){var t;for(e.controlsShouldFade=!1,t=e.controls.length-1;t>=0;t--)e.controls[t].setOpacity(1)}function d(){h(this)}function p(){l(this)}function f(t){var n={originalEvent:t.originalEvent,preventDefaultAction:t.preventDefaultAction,preventVerticalPan:t.preventVerticalPan,preventHorizontalPan:t.preventHorizontalPan};if(this.raiseEvent("canvas-key",n),n.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 38:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 40:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 37:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;case 39:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;default:return!0}}function m(t){var n={originalEvent:t.originalEvent,preventDefaultAction:t.preventDefaultAction,preventVerticalPan:t.preventVerticalPan,preventHorizontalPan:t.preventHorizontalPan};if(this.raiseEvent("canvas-key",n),n.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints()),!1;case 115:case 83:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints()),!1;case 97:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints()),!1;case 100:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints()),!1;case 114:return this.viewport.flipped?this.viewport.setRotation(e.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(e.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 82:return this.viewport.flipped?this.viewport.setRotation(e.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(e.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 102:return this.viewport.toggleFlip(),!1;default:return!0}}function g(e){var t,n=document.activeElement==this.canvas;n||this.canvas.focus(),this.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x);var i={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.raiseEvent("canvas-click",i),!i.preventDefaultAction&&this.viewport&&e.quick&&(t=this.gestureSettingsByDeviceType(e.pointerType),t.clickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints()))}function v(e){var t,n={tracker:e.eventSource,position:e.position,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.raiseEvent("canvas-double-click",n),!n.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType),t.dblClickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints()))}function y(e){var t,n={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};if(this.raiseEvent("canvas-drag",n),!n.preventDefaultAction&&this.viewport){if(t=this.gestureSettingsByDeviceType(e.pointerType),this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewport.flipped&&(e.delta.x=-e.delta.x),this.constrainDuringPan){var i=this.viewport.deltaPointsFromPixels(e.delta.negate());this.viewport.centerSpringX.target.value+=i.x,this.viewport.centerSpringY.target.value+=i.y;var r=this.viewport.getBounds(),s=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=i.x,this.viewport.centerSpringY.target.value-=i.y,r.x!=s.x&&(e.delta.x=0),r.y!=s.y&&(e.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta.negate()),t.flickEnabled&&!this.constrainDuringPan)}}function T(t){if(!t.preventDefaultAction&&this.viewport){var n=this.gestureSettingsByDeviceType(t.pointerType);if(n.flickEnabled&&t.speed>=n.flickMinSpeed){var i=0;this.panHorizontal&&(i=n.flickMomentum*t.speed*Math.cos(t.direction));var r=0;this.panVertical&&(r=n.flickMomentum*t.speed*Math.sin(t.direction));var s=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),o=this.viewport.pointFromPixel(new e.Point(s.x-i,s.y-r));this.viewport.panTo(o,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:t.eventSource,position:t.position,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent})}function E(e){this.raiseEvent("canvas-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function _(t){window.location!=window.parent.location&&e.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,buttons:t.buttons,pointers:t.pointers,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function b(e){this.raiseEvent("canvas-press",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function w(e){this.raiseEvent("canvas-release",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function S(e){this.raiseEvent("canvas-nonprimary-press",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function A(e){this.raiseEvent("canvas-nonprimary-release",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function C(e){var t,n,i,r;if(!e.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType),t.pinchToZoom&&(n=this.viewport.pointFromPixel(e.center,!0),i=this.viewport.pointFromPixel(e.lastCenter,!0),r=i.minus(n),this.panHorizontal||(r.x=0),this.panVertical||(r.y=0),this.viewport.zoomBy(e.distance/e.lastDistance,n,!0),t.zoomToRefPoint&&this.viewport.panBy(r,!0),this.viewport.applyConstraints()),t.pinchRotate)){var s=Math.atan2(e.gesturePoints[0].currentPos.y-e.gesturePoints[1].currentPos.y,e.gesturePoints[0].currentPos.x-e.gesturePoints[1].currentPos.x),o=Math.atan2(e.gesturePoints[0].lastPos.y-e.gesturePoints[1].lastPos.y,e.gesturePoints[0].lastPos.x-e.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(s-o)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:e.eventSource,gesturePoints:e.gesturePoints,lastCenter:e.lastCenter,center:e.center,lastDistance:e.lastDistance,distance:e.distance,shift:e.shift,originalEvent:e.originalEvent}),!1}function x(t){var n,i,r,s;if(r=e.now(),s=r-this._lastScrollTime,s>this.minScrollDeltaTime){if(this._lastScrollTime=r,this.viewport.flipped&&(t.position.x=this.viewport.getContainerSize().x-t.position.x),!t.preventDefaultAction&&this.viewport&&(n=this.gestureSettingsByDeviceType(t.pointerType),n.scrollToZoom&&(i=Math.pow(this.zoomPerScroll,t.scroll),this.viewport.zoomBy(i,n.zoomToRefPoint?this.viewport.pointFromPixel(t.position,!0):null),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent}),n&&n.scrollToZoom)return!1}else if(n=this.gestureSettingsByDeviceType(t.pointerType),n&&n.scrollToZoom)return!1}function I(e){t[this.hash].mouseInside=!0,h(this),this.raiseEvent("container-enter",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function N(e){e.pointers<1&&(t[this.hash].mouseInside=!1,t[this.hash].animating||l(this)),this.raiseEvent("container-exit",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function k(e){O(e),e.isOpen()?e._updateRequestId=a(e,k):e._updateRequestId=!1}function O(e){if(!e._opening){if(e.autoResize){var n=i(e.container),r=t[e.hash].prevContainerSize;if(!n.equals(r)){var s=e.viewport;if(e.preserveImageSizeOnResize){var o=r.x/n.x,a=s.getZoom()*o,c=s.getCenter();s.resize(n,!1),s.zoomTo(a,null,!0),s.panTo(c,!0)}else{var u=s.getBounds();s.resize(n,!0),s.fitBoundsWithConstraints(u,!0)}t[e.hash].prevContainerSize=n,t[e.hash].forceRedraw=!0}}var d=e.viewport.update(),p=e.world.update()||d;d&&e.raiseEvent("viewport-change"),e.referenceStrip&&(p=e.referenceStrip.update(e.viewport)||p),!t[e.hash].animating&&p&&(e.raiseEvent("animation-start"),h(e)),(p||t[e.hash].forceRedraw||e.world.needsDraw())&&(R(e),e._drawOverlays(),e.navigator&&e.navigator.update(e.viewport),t[e.hash].forceRedraw=!1,p&&e.raiseEvent("animation")),t[e.hash].animating&&!p&&(e.raiseEvent("animation-finish"),t[e.hash].mouseInside||l(e)),t[e.hash].animating=p}}function R(e){e.imageLoader.clear(),e.drawer.clear(),e.world.draw(),e.raiseEvent("update-viewport",{})}function D(e,t){return e?e+t:t}function P(){t[this.hash].lastZoomTime=e.now(),t[this.hash].zoomFactor=this.zoomPerSecond,t[this.hash].zooming=!0,B(this)}function L(){t[this.hash].lastZoomTime=e.now(),t[this.hash].zoomFactor=1/this.zoomPerSecond,t[this.hash].zooming=!0,B(this)}function M(){t[this.hash].zooming=!1}function B(t){e.requestAnimationFrame(e.delegate(t,F))}function F(){var n,i,r;t[this.hash].zooming&&this.viewport&&(n=e.now(),i=n-t[this.hash].lastZoomTime,r=Math.pow(t[this.hash].zoomFactor,i/1e3),this.viewport.zoomBy(r),this.viewport.applyConstraints(),t[this.hash].lastZoomTime=n,B(this))}function H(){this.viewport&&(t[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function U(){this.viewport&&(t[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function q(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function G(){this.viewport&&this.viewport.goHome()}function $(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function z(){if(this.viewport){var t=this.viewport.getRotation();t=this.viewport.flipped?e.positiveModulo(t+this.rotationIncrement,360):e.positiveModulo(t-this.rotationIncrement,360),this.viewport.setRotation(t)}}function j(){if(this.viewport){var t=this.viewport.getRotation();t=this.viewport.flipped?e.positiveModulo(t-this.rotationIncrement,360):e.positiveModulo(t+this.rotationIncrement,360),this.viewport.setRotation(t)}}function V(){this.viewport.toggleFlip()}function W(){var e=this._sequenceIndex-1;this.navPrevNextWrap&&e<0&&(e+=this.tileSources.length),this.goToPage(e)}function Y(){var e=this._sequenceIndex+1;this.navPrevNextWrap&&e>=this.tileSources.length&&(e=0),this.goToPage(e)}e.Viewer=function(r){var s,o=arguments,c=this;if(e.isPlainObject(r)||(r={id:o[0],xmlPath:o.length>1?o[1]:void 0,prefixUrl:o.length>2?o[2]:void 0,controls:o.length>3?o[3]:void 0,overlays:o.length>4?o[4]:void 0}),r.config&&(e.extend(!0,r,r.config),delete r.config),e.extend(!0,this,{id:r.id,hash:r.hash||n++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},e.DEFAULT_SETTINGS,r),"undefined"===typeof this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for("undefined"!==typeof t[this.hash]&&e.console.warn("Hash "+this.hash+" has already been used."),t[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",(function(t){var n=e.getString("Errors.OpenFailed",t.eventSource,t.message);c._showMessage(n)})),e.ControlDock.call(this,r),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(e){e.width="100%",e.height="100%",e.overflow="hidden",e.position="absolute",e.top="0px",e.left="0px"}(this.canvas.style),e.setElementTouchActionNone(this.canvas),""!==r.tabIndex&&(this.canvas.tabIndex=void 0===r.tabIndex?0:r.tabIndex),this.container.className="openseadragon-container",function(e){e.width="100%",e.height="100%",e.position="relative",e.overflow="hidden",e.left="0px",e.top="0px",e.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:e.delegate(this,f),keyHandler:e.delegate(this,m),clickHandler:e.delegate(this,g),dblClickHandler:e.delegate(this,v),dragHandler:e.delegate(this,y),dragEndHandler:e.delegate(this,T),enterHandler:e.delegate(this,E),exitHandler:e.delegate(this,_),pressHandler:e.delegate(this,b),releaseHandler:e.delegate(this,w),nonPrimaryPressHandler:e.delegate(this,S),nonPrimaryReleaseHandler:e.delegate(this,A),scrollHandler:e.delegate(this,x),pinchHandler:e.delegate(this,C)}),this.outerTracker=new e.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,I),exitHandler:e.delegate(this,N)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),t[this.hash].prevContainerSize=i(this.container),this.world=new e.World({viewer:this}),this.world.addHandler("add-item",(function(e){c.source=c.world.getItemAt(0).source,t[c.hash].forceRedraw=!0,c._updateRequestId||(c._updateRequestId=a(c,k))})),this.world.addHandler("remove-item",(function(e){c.world.getItemCount()?c.source=c.world.getItemAt(0).source:c.source=null,t[c.hash].forceRedraw=!0})),this.world.addHandler("metrics-change",(function(e){c.viewport&&c.viewport._setContentBounds(c.world.getHomeBounds(),c.world.getContentFactor())})),this.world.addHandler("item-index-change",(function(e){c.source=c.world.getItemAt(0).source})),this.viewport=new e.Viewport({containerSize:t[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:r.timeout}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new e.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(s=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(s,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(s=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(s,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new e.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),s=0;s<this.customControls.length;s++)this.addControl(this.customControls[s].id,{anchor:this.customControls[s].anchor});e.requestAnimationFrame((function(){l(c)})),void 0===this.imageSmoothingEnabled||this.imageSmoothingEnabled||this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled)},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(t){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(t)},openTileSource:function(t){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(t)},open:function(t,n){var i=this;if(this.close(),t){if(this.sequenceMode&&e.isArray(t))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),"undefined"==typeof n||isNaN(n)||(this.initialPage=n),this.tileSources=t,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),void this._updateSequenceButtons(this._sequenceIndex);if(e.isArray(t)||(t=[t]),t.length){this._opening=!0;for(var r,o=t.length,a=0,c=0,l=function(){if(a+c===o)if(a){!i._firstOpen&&i.preserveViewport||(i.viewport.goHome(!0),i.viewport.update()),i._firstOpen=!1;var e=t[0];if(e.tileSource&&(e=e.tileSource),i.overlays&&!i.preserveOverlays)for(var n=0;n<i.overlays.length;n++)i.currentOverlays[n]=s(i,i.overlays[n]);i._drawOverlays(),i._opening=!1,i.raiseEvent("open",{source:e})}else i._opening=!1,i.raiseEvent("open-failed",r)},u=function(t){e.isPlainObject(t)&&t.tileSource||(t={tileSource:t}),void 0!==t.index&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete t.index),void 0===t.collectionImmediately&&(t.collectionImmediately=!0);var n=t.success;t.success=function(e){if(a++,t.tileSource.overlays)for(var r=0;r<t.tileSource.overlays.length;r++)i.addOverlay(t.tileSource.overlays[r]);n&&n(e),l()};var s=t.error;t.error=function(e){c++,r||(r=e),s&&s(e),l()},i.addTiledImage(t)},h=0;h<t.length;h++)u(t[h]);return this}}},close:function(){return t[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),t[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(t[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)while(this.element.firstChild)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),t[this.hash]=null,delete t[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(e){return this.innerTracker.setTracking(e),this.outerTracker.setTracking(e),this.raiseEvent("mouse-enabled",{enabled:e}),this},areControlsEnabled:function(){var e,t=this.controls.length;for(e=0;e<this.controls.length;e++)t=t&&this.controls[e].isVisible();return t},setControlsEnabled:function(e){return e?h(this):l(this),this.raiseEvent("controls-enabled",{enabled:e}),this},setDebugMode:function(e){for(var t=0;t<this.world.getItemCount();t++)this.world.getItemAt(t).debugMode=e;this.debugMode=e,this.forceRedraw()},isFullPage:function(){return t[this.hash].fullPage},setFullPage:function(n){var i,r,s=document.body,o=s.style,a=document.documentElement.style,c=this;if(n==this.isFullPage())return this;var l={fullPage:n,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",l),l.preventDefaultAction)return this;if(n){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=o.margin,this.docMargin=a.margin,o.margin="0",a.margin="0",this.bodyPadding=o.padding,this.docPadding=a.padding,o.padding="0",a.padding="0",this.bodyWidth=o.width,this.docWidth=a.width,o.width="100%",a.width="100%",this.bodyHeight=o.height,this.docHeight=a.height,o.height="100%",a.height="100%",this.previousBody=[],t[this.hash].prevElementParent=this.element.parentNode,t[this.hash].prevNextSibling=this.element.nextSibling,t[this.hash].prevElementWidth=this.element.style.width,t[this.hash].prevElementHeight=this.element.style.height,i=s.childNodes.length,r=0;r<i;r++)this.previousBody.push(s.childNodes[0]),s.removeChild(s.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,s.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),s.appendChild(this.element),this.element.style.height=e.getWindowSize().y+"px",this.element.style.width=e.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),t[this.hash].fullPage=!0,e.delegate(this,I)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,o.margin=this.bodyMargin,a.margin=this.docMargin,o.padding=this.bodyPadding,a.padding=this.docPadding,o.width=this.bodyWidth,a.width=this.docWidth,o.height=this.bodyHeight,a.height=this.docHeight,s.removeChild(this.element),i=this.previousBody.length,r=0;r<i;r++)s.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),t[this.hash].prevElementParent.insertBefore(this.element,t[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(s.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=t[this.hash].prevElementWidth,this.element.style.height=t[this.hash].prevElementHeight;var u=0,h=function(){e.setPageScroll(c.pageScroll);var t=e.getPageScroll();u++,u<10&&(t.x!==c.pageScroll.x||t.y!==c.pageScroll.y)&&e.requestAnimationFrame(h)};e.requestAnimationFrame(h),t[this.hash].fullPage=!1,e.delegate(this,N)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:n}),this},setFullScreen:function(t){var n=this;if(!e.supportsFullScreen)return this.setFullPage(t);if(e.isFullScreen()===t)return this;var i={fullScreen:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",i),i.preventDefaultAction)return this;if(t){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var r=function(){var t=e.isFullScreen();t||(e.removeEvent(document,e.fullScreenEventName,r),e.removeEvent(document,e.fullScreenErrorEventName,r),n.setFullPage(!1),n.isFullPage()&&(n.element.style.width=n.fullPageStyleWidth,n.element.style.height=n.fullPageStyleHeight)),n.navigator&&n.viewport&&setTimeout((function(){n.navigator.update(n.viewport)})),n.raiseEvent("full-screen",{fullScreen:t})};e.addEvent(document,e.fullScreenEventName,r),e.addEvent(document,e.fullScreenErrorEventName,r),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(e){return this.container.style.visibility=e?"":"hidden",this.raiseEvent("visible",{visible:e}),this},addTiledImage:function(t){e.console.assert(t,"[Viewer.addTiledImage] options is required"),e.console.assert(t.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!t.replace||t.index>-1&&t.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var n=this;t.replace&&(t.replaceItem=n.world.getItemAt(t.index)),this._hideMessage(),void 0===t.placeholderFillStyle&&(t.placeholderFillStyle=this.placeholderFillStyle),void 0===t.opacity&&(t.opacity=this.opacity),void 0===t.preload&&(t.preload=this.preload),void 0===t.compositeOperation&&(t.compositeOperation=this.compositeOperation),void 0===t.crossOriginPolicy&&(t.crossOriginPolicy=void 0!==t.tileSource.crossOriginPolicy?t.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===t.ajaxWithCredentials&&(t.ajaxWithCredentials=this.ajaxWithCredentials),void 0===t.loadTilesWithAjax&&(t.loadTilesWithAjax=this.loadTilesWithAjax),void 0===t.ajaxHeaders||null===t.ajaxHeaders?t.ajaxHeaders=this.ajaxHeaders:e.isPlainObject(t.ajaxHeaders)&&e.isPlainObject(this.ajaxHeaders)&&(t.ajaxHeaders=e.extend({},this.ajaxHeaders,t.ajaxHeaders));var i={options:t};function s(e){for(var r=0;r<n._loadQueue.length;r++)if(n._loadQueue[r]===i){n._loadQueue.splice(r,1);break}0===n._loadQueue.length&&o(i),n.raiseEvent("add-item-failed",e),t.error&&t.error(e)}function o(e){n.collectionMode&&(n.world.arrange({immediately:e.options.collectionImmediately,rows:n.collectionRows,columns:n.collectionColumns,layout:n.collectionLayout,tileSize:n.collectionTileSize,tileMargin:n.collectionTileMargin}),n.world.setAutoRefigureSizes(!0))}function a(){var t,i,r;while(n._loadQueue.length){if(t=n._loadQueue[0],!t.tileSource)break;if(n._loadQueue.splice(0,1),t.options.replace){var s=n.world.getIndexOfItem(t.options.replaceItem);-1!=s&&(t.options.index=s),n.world.removeItem(t.options.replaceItem)}i=new e.TiledImage({viewer:n,source:t.tileSource,viewport:n.viewport,drawer:n.drawer,tileCache:n.tileCache,imageLoader:n.imageLoader,x:t.options.x,y:t.options.y,width:t.options.width,height:t.options.height,fitBounds:t.options.fitBounds,fitBoundsPlacement:t.options.fitBoundsPlacement,clip:t.options.clip,placeholderFillStyle:t.options.placeholderFillStyle,opacity:t.options.opacity,preload:t.options.preload,degrees:t.options.degrees,compositeOperation:t.options.compositeOperation,springStiffness:n.springStiffness,animationTime:n.animationTime,minZoomImageRatio:n.minZoomImageRatio,wrapHorizontal:n.wrapHorizontal,wrapVertical:n.wrapVertical,immediateRender:n.immediateRender,blendTime:n.blendTime,alwaysBlend:n.alwaysBlend,minPixelRatio:n.minPixelRatio,smoothTileEdgesMinZoom:n.smoothTileEdgesMinZoom,iOSDevice:n.iOSDevice,crossOriginPolicy:t.options.crossOriginPolicy,ajaxWithCredentials:t.options.ajaxWithCredentials,loadTilesWithAjax:t.options.loadTilesWithAjax,ajaxHeaders:t.options.ajaxHeaders,debugMode:n.debugMode}),n.collectionMode&&n.world.setAutoRefigureSizes(!1),n.world.addItem(i,{index:t.options.index}),0===n._loadQueue.length&&o(t),1!==n.world.getItemCount()||n.preserveViewport||n.viewport.goHome(!0),n.navigator&&(r=e.extend({},t.options,{replace:!1,originalTiledImage:i,tileSource:t.tileSource}),n.navigator.addTiledImage(r)),t.options.success&&t.options.success({item:i})}}e.isArray(t.tileSource)?setTimeout((function(){s({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:t.tileSource,options:t})})):(this._loadQueue.push(i),r(this,t.tileSource,t,(function(e){i.tileSource=e,a()}),(function(e){e.options=t,s(e),a()})))},addSimpleImage:function(t){e.console.assert(t,"[Viewer.addSimpleImage] options is required"),e.console.assert(t.url,"[Viewer.addSimpleImage] options.url is required");var n=e.extend({},t,{tileSource:{type:"image",url:t.url}});delete n.url,this.addTiledImage(n)},addLayer:function(t){var n=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var i=e.extend({},t,{success:function(e){n.raiseEvent("add-layer",{options:t,drawer:e.item})},error:function(e){n.raiseEvent("add-layer-failed",e)}});return this.addTiledImage(i),this},getLayerAtLevel:function(t){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(t)},getLevelOfLayer:function(t){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(t)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(t,n){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(t,n)},removeLayer:function(t){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(t)},forceRedraw:function(){return t[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var t=e.delegate(this,d),n=e.delegate(this,p),i=e.delegate(this,Y),r=e.delegate(this,W),s=this.navImages,o=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(o=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:D(this.prefixUrl,s.previous.REST),srcGroup:D(this.prefixUrl,s.previous.GROUP),srcHover:D(this.prefixUrl,s.previous.HOVER),srcDown:D(this.prefixUrl,s.previous.DOWN),onRelease:r,onFocus:t,onBlur:n}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:D(this.prefixUrl,s.next.REST),srcGroup:D(this.prefixUrl,s.next.GROUP),srcHover:D(this.prefixUrl,s.next.HOVER),srcDown:D(this.prefixUrl,s.next.DOWN),onRelease:i,onFocus:t,onBlur:n}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),o&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var t=e.delegate(this,P),n=e.delegate(this,M),i=e.delegate(this,H),r=e.delegate(this,L),s=e.delegate(this,U),o=e.delegate(this,G),a=e.delegate(this,$),c=e.delegate(this,z),l=e.delegate(this,j),u=e.delegate(this,V),h=e.delegate(this,d),f=e.delegate(this,p),m=this.navImages,g=[],v=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(v=!1),this.showZoomControl&&(g.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:D(this.prefixUrl,m.zoomIn.REST),srcGroup:D(this.prefixUrl,m.zoomIn.GROUP),srcHover:D(this.prefixUrl,m.zoomIn.HOVER),srcDown:D(this.prefixUrl,m.zoomIn.DOWN),onPress:t,onRelease:n,onClick:i,onEnter:t,onExit:n,onFocus:h,onBlur:f})),g.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:D(this.prefixUrl,m.zoomOut.REST),srcGroup:D(this.prefixUrl,m.zoomOut.GROUP),srcHover:D(this.prefixUrl,m.zoomOut.HOVER),srcDown:D(this.prefixUrl,m.zoomOut.DOWN),onPress:r,onRelease:n,onClick:s,onEnter:r,onExit:n,onFocus:h,onBlur:f}))),this.showHomeControl&&g.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:D(this.prefixUrl,m.home.REST),srcGroup:D(this.prefixUrl,m.home.GROUP),srcHover:D(this.prefixUrl,m.home.HOVER),srcDown:D(this.prefixUrl,m.home.DOWN),onRelease:o,onFocus:h,onBlur:f})),this.showFullPageControl&&g.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:D(this.prefixUrl,m.fullpage.REST),srcGroup:D(this.prefixUrl,m.fullpage.GROUP),srcHover:D(this.prefixUrl,m.fullpage.HOVER),srcDown:D(this.prefixUrl,m.fullpage.DOWN),onRelease:a,onFocus:h,onBlur:f})),this.showRotationControl&&(g.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:D(this.prefixUrl,m.rotateleft.REST),srcGroup:D(this.prefixUrl,m.rotateleft.GROUP),srcHover:D(this.prefixUrl,m.rotateleft.HOVER),srcDown:D(this.prefixUrl,m.rotateleft.DOWN),onRelease:c,onFocus:h,onBlur:f})),g.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:D(this.prefixUrl,m.rotateright.REST),srcGroup:D(this.prefixUrl,m.rotateright.GROUP),srcHover:D(this.prefixUrl,m.rotateright.HOVER),srcDown:D(this.prefixUrl,m.rotateright.DOWN),onRelease:l,onFocus:h,onBlur:f}))),this.showFlipControl&&g.push(this.flipButton=new e.Button({element:this.flipButton?e.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Flip"),srcRest:D(this.prefixUrl,m.flip.REST),srcGroup:D(this.prefixUrl,m.flip.GROUP),srcHover:D(this.prefixUrl,m.flip.HOVER),srcDown:D(this.prefixUrl,m.flip.DOWN),onRelease:u,onFocus:h,onBlur:f})),v&&(this.buttons=new e.ButtonGroup({buttons:g,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",e.delegate(this,q)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(e){return this.tileSources&&e>=0&&e<this.tileSources.length&&(this._sequenceIndex=e,this._updateSequenceButtons(e),this.open(this.tileSources[e]),this.referenceStrip&&this.referenceStrip.setFocus(e),this.raiseEvent("page",{page:e})),this},addOverlay:function(t,n,i,r){var a;if(a=e.isPlainObject(t)?t:{element:t,location:n,placement:i,onDraw:r},t=e.getElement(a.element),o(this.currentOverlays,t)>=0)return this;var c=s(this,a);return this.currentOverlays.push(c),c.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:t,location:a.location,placement:a.placement}),this},updateOverlay:function(n,i,r){var s;return n=e.getElement(n),s=o(this.currentOverlays,n),s>=0&&(this.currentOverlays[s].update(i,r),t[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:n,location:i,placement:r})),this},removeOverlay:function(n){var i;return n=e.getElement(n),i=o(this.currentOverlays,n),i>=0&&(this.currentOverlays[i].destroy(),this.currentOverlays.splice(i,1),t[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:n})),this},clearOverlays:function(){while(this.currentOverlays.length>0)this.currentOverlays.pop().destroy();return t[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(t){var n;return t=e.getElement(t),n=o(this.currentOverlays,t),n>=0?this.currentOverlays[n]:null},_updateSequenceButtons:function(e){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==e?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(e>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(t){this._hideMessage();var n=e.makeNeutralElement("div");n.appendChild(document.createTextNode(t)),this.messageDiv=e.makeCenteredNode(n),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var e=this.messageDiv;e&&(e.parentNode.removeChild(e),delete this.messageDiv)},gestureSettingsByDeviceType:function(e){switch(e){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var e,t=this.currentOverlays.length;for(e=0;e<t;e++)this.currentOverlays[e].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}})}(OpenSeadragon),function(e){function t(e){var t={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};if(this.viewer.raiseEvent("navigator-click",t),!t.preventDefaultAction&&e.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x);var n=this.viewport.pointFromPixel(e.position);this.panVertical?this.panHorizontal||(n.x=this.viewer.viewport.getCenter(!0).x):n.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(n),this.viewer.viewport.applyConstraints()}}function n(e){var t={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.viewer.raiseEvent("navigator-drag",t),!t.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewer.viewport.flipped&&(e.delta.x=-e.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function i(e){e.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function r(e){return this.viewer.raiseEvent("navigator-scroll",{tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent}),!1}function s(e,t){o(e,"rotate("+t+"deg)")}function o(e,t){e.style.webkitTransform=t,e.style.mozTransform=t,e.style.msTransform=t,e.style.oTransform=t,e.style.transform=t}e.Navigator=function(o){var a,c,l=o.viewer,u=this;function h(e){s(u.displayRegionContainer,e),s(u.displayRegion,-e),u.viewport.setRotation(e)}if(o.id?(this.element=document.getElementById(o.id),o.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(o.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),o.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:o.autoFade},o.position&&("BOTTOM_RIGHT"==o.position?o.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"==o.position?o.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"==o.position?o.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:"TOP_LEFT"==o.position?o.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:"ABSOLUTE"==o.position&&(o.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,o.controlOptions.top=o.top,o.controlOptions.left=o.left,o.controlOptions.height=o.height,o.controlOptions.width=o.width))),this.element.id=o.id,this.element.className+=" navigator",o=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},o,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:o.autoResize,minZoomImageRatio:1,background:o.background,opacity:o.opacity,borderColor:o.borderColor,displayRegionColor:o.displayRegionColor}),o.minPixelRatio=this.minPixelRatio=l.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),o.controlOptions.anchor!=e.ControlAnchor.NONE&&function(e,t){e.margin="0px",e.border=t+"px solid "+o.borderColor,e.padding="0px",e.background=o.background,e.opacity=o.opacity,e.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(e,t){e.position="relative",e.top="0px",e.left="0px",e.fontSize="0px",e.overflow="hidden",e.border=t+"px solid "+o.displayRegionColor,e.margin="0px",e.padding="0px",e.background="transparent",e["float"]="left",e.cssFloat="left",e.styleFloat="left",e.zIndex=999999999,e.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",l.addControl(this.element,o.controlOptions),this._resizeWithViewer=o.controlOptions.anchor!=e.ControlAnchor.ABSOLUTE&&o.controlOptions.anchor!=e.ControlAnchor.NONE,o.width&&o.height?(this.setWidth(o.width),this.setHeight(o.height)):this._resizeWithViewer&&(a=e.getElementSize(l.element),this.element.style.height=Math.round(a.y*o.sizeRatio)+"px",this.element.style.width=Math.round(a.x*o.sizeRatio)+"px",this.oldViewerSize=a,c=e.getElementSize(this.element),this.elementArea=c.x*c.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[o]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),o.navigatorRotate){var d=o.viewer.viewport?o.viewer.viewport.getRotation():o.viewer.degrees||0;h(d),o.viewer.addHandler("rotate",(function(e){h(e.degrees)}))}this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({element:this.element,dragHandler:e.delegate(this,n),clickHandler:e.delegate(this,t),releaseHandler:e.delegate(this,i),scrollHandler:e.delegate(this,r)}),this.addHandler("reset-size",(function(){u.viewport&&u.viewport.goHome(!0)})),l.world.addHandler("item-index-change",(function(e){window.setTimeout((function(){var t=u.world.getItemAt(e.previousIndex);u.world.setItemIndex(t,e.newIndex)}),1)})),l.world.addHandler("remove-item",(function(e){var t=e.item,n=u._getMatchingItem(t);n&&u.world.removeItem(n)})),this.update(l.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var t=new e.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);t.equals(this.oldContainerSize)||(this.viewport.resize(t,!0),this.viewport.goHome(!0),this.oldContainerSize=t,this.drawer.clear(),this.world.draw())}},setWidth:function(e){this.width=e,this.element.style.width="number"==typeof e?e+"px":e,this._resizeWithViewer=!1},setHeight:function(e){this.height=e,this.element.style.height="number"==typeof e?e+"px":e,this._resizeWithViewer=!1},setFlip:function(e){return this.viewport.setFlip(e),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(e){o(this.displayRegion,e),o(this.canvas,e),o(this.element,e)},update:function(t){var n,i,r,s,o,a;if(n=e.getElementSize(this.viewer.element),this._resizeWithViewer&&n.x&&n.y&&!n.equals(this.oldViewerSize)&&(this.oldViewerSize=n,this.maintainSizeRatio||!this.elementArea?(i=n.x*this.sizeRatio,r=n.y*this.sizeRatio):(i=Math.sqrt(this.elementArea*(n.x/n.y)),r=this.elementArea/i),this.element.style.width=Math.round(i)+"px",this.element.style.height=Math.round(r)+"px",this.elementArea||(this.elementArea=i*r),this.updateSize()),t&&this.viewport){s=t.getBoundsNoRotate(!0),o=this.viewport.pixelFromPointNoRotate(s.getTopLeft(),!1),a=this.viewport.pixelFromPointNoRotate(s.getBottomRight(),!1).minus(this.totalBorderWidths);var c=this.displayRegion.style;c.display=this.world.getItemCount()?"block":"none",c.top=Math.round(o.y)+"px",c.left=Math.round(o.x)+"px";var l=Math.abs(o.x-a.x),u=Math.abs(o.y-a.y);c.width=Math.round(Math.max(l,0))+"px",c.height=Math.round(Math.max(u,0))+"px"}},addTiledImage:function(t){var n=this,i=t.originalTiledImage;delete t.original;var r=e.extend({},t,{success:function(e){var t=e.item;function r(){n._matchBounds(t,i)}function s(){n._matchOpacity(t,i)}function o(){n._matchCompositeOperation(t,i)}t._originalForNavigator=i,n._matchBounds(t,i,!0),i.addHandler("bounds-change",r),i.addHandler("clip-change",r),i.addHandler("opacity-change",s),i.addHandler("composite-operation-change",o)}});return e.Viewer.prototype.addTiledImage.apply(this,[r])},_getMatchingItem:function(e){for(var t,n=this.world.getItemCount(),i=0;i<n;i++)if(t=this.world.getItemAt(i),t._originalForNavigator===e)return t;return null},_matchBounds:function(e,t,n){var i=t.getBoundsNoRotate();e.setPosition(i.getTopLeft(),n),e.setWidth(i.width,n),e.setRotation(t.getRotation(),n),e.setClip(t.getClip())},_matchOpacity:function(e,t){e.setOpacity(t.opacity)},_matchCompositeOperation:function(e,t){e.setCompositeOperation(t.compositeOperation)}})}(OpenSeadragon),function(e){var t={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};e.extend(e,{getString:function(n){var i,r=n.split("."),s=null,o=arguments,a=t;for(i=0;i<r.length-1;i++)a=a[r[i]]||{};return s=a[r[i]],"string"!=typeof s&&(e.console.log("Untranslated source string:",n),s=""),s.replace(/\{\d+\}/g,(function(e){var t=parseInt(e.match(/\d+/),10)+1;return t<o.length?o[t]:""}))},setString:function(e,n){var i,r=e.split("."),s=t;for(i=0;i<r.length-1;i++)s[r[i]]||(s[r[i]]={}),s=s[r[i]];s[r[i]]=n}})}(OpenSeadragon),function(e){e.Point=function(e,t){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(t){return new e.Point(this.x+t.x,this.y+t.y)},minus:function(t){return new e.Point(this.x-t.x,this.y-t.y)},times:function(t){return new e.Point(this.x*t,this.y*t)},divide:function(t){return new e.Point(this.x/t,this.y/t)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},squaredDistanceTo:function(e){return Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2)},apply:function(t){return new e.Point(t(this.x),t(this.y))},equals:function(t){return t instanceof e.Point&&this.x===t.x&&this.y===t.y},rotate:function(t,n){var i,r;if(n=n||new e.Point(0,0),t%90===0){var s=e.positiveModulo(t,360);switch(s){case 0:i=1,r=0;break;case 90:i=0,r=1;break;case 180:i=-1,r=0;break;case 270:i=0,r=-1;break}}else{var o=t*Math.PI/180;i=Math.cos(o),r=Math.sin(o)}var a=i*(this.x-n.x)-r*(this.y-n.y)+n.x,c=r*(this.x-n.x)+i*(this.y-n.y)+n.y;return new e.Point(a,c)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(OpenSeadragon),function(e){function t(t){var n,i,r=t.responseText,s=t.status;if(!t)throw new Error(e.getString("Errors.Security"));if(200!==t.status&&0!==t.status)throw s=t.status,n=404==s?"Not Found":t.statusText,new Error(e.getString("Errors.Status",s,n));if(r.match(/\s*<.*/))try{i=t.responseXML&&t.responseXML.documentElement?t.responseXML:e.parseXml(r)}catch(o){i=t.responseText}else if(r.match(/\s*[\{\[].*/))try{i=e.parseJSON(r)}catch(o){i=r}else i=r;return i}e.TileSource=function(t,n,i,r,s,o){var a,c,l=this,u=arguments;if(a=e.isPlainObject(t)?t:{width:u[0],height:u[1],tileSize:u[2],tileOverlap:u[3],minLevel:u[4],maxLevel:u[5]},e.EventSource.call(this),e.extend(!0,this,a),!this.success)for(c=0;c<arguments.length;c++)if(e.isFunction(arguments[c])){this.success=arguments[c];break}this.success&&this.addHandler("ready",(function(e){l.success(e)})),"string"==e.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=a.width&&a.height?a.width/a.height:1,this.dimensions=new e.Point(a.width,a.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=a.tileOverlap?a.tileOverlap:0,this.minLevel=a.minLevel?a.minLevel:0,this.maxLevel=void 0!==a.maxLevel&&null!==a.maxLevel?a.maxLevel:a.width&&a.height?Math.ceil(Math.log(Math.max(a.width,a.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(t){return e.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(e){return this._tileWidth?this._tileWidth:this.getTileSize(e)},getTileHeight:function(e){return this._tileHeight?this._tileHeight:this.getTileSize(e)},getLevelScale:function(e){var t,n={};for(t=0;t<=this.maxLevel;t++)n[t]=1/Math.pow(2,this.maxLevel-t);return this.getLevelScale=function(e){return n[e]},this.getLevelScale(e)},getNumTiles:function(t){var n=this.getLevelScale(t),i=Math.ceil(n*this.dimensions.x/this.getTileWidth(t)),r=Math.ceil(n*this.dimensions.y/this.getTileHeight(t));return new e.Point(i,r)},getPixelRatio:function(t){var n=this.dimensions.times(this.getLevelScale(t)),i=1/n.x,r=1/n.y;return new e.Point(i,r)},getClosestLevel:function(){var e,t;for(e=this.minLevel+1;e<=this.maxLevel;e++)if(t=this.getNumTiles(e),t.x>1||t.y>1)break;return e-1},getTileAtPoint:function(t,n){var i=n.x>=0&&n.x<=1&&n.y>=0&&n.y<=1/this.aspectRatio;e.console.assert(i,"[TileSource.getTileAtPoint] must be called with a valid point.");var r=this.dimensions.x*this.getLevelScale(t),s=n.x*r,o=n.y*r,a=Math.floor(s/this.getTileWidth(t)),c=Math.floor(o/this.getTileHeight(t));n.x>=1&&(a=this.getNumTiles(t).x-1);var l=1e-15;return n.y>=1/this.aspectRatio-l&&(c=this.getNumTiles(t).y-1),new e.Point(a,c)},getTileBounds:function(t,n,i,r){var s=this.dimensions.times(this.getLevelScale(t)),o=this.getTileWidth(t),a=this.getTileHeight(t),c=0===n?0:o*n-this.tileOverlap,l=0===i?0:a*i-this.tileOverlap,u=o+(0===n?1:2)*this.tileOverlap,h=a+(0===i?1:2)*this.tileOverlap,d=1/s.x;return u=Math.min(u,s.x-c),h=Math.min(h,s.y-l),r?new e.Rect(0,0,u,h):new e.Rect(c*d,l*d,u*d,h*d)},getImageInfo:function(n){var i,r,s,o,a,c,l,u=this;n&&(a=n.split("/"),c=a[a.length-1],l=c.lastIndexOf("."),l>-1&&(a[a.length-1]=c.slice(0,l))),r=function(t){"string"===typeof t&&(t=e.parseXml(t));var i=e.TileSource.determineType(u,t,n);i?(o=i.prototype.configure.apply(u,[t,n]),void 0===o.ajaxWithCredentials&&(o.ajaxWithCredentials=u.ajaxWithCredentials),s=new i(o),u.ready=!0,u.raiseEvent("ready",{tileSource:s})):u.raiseEvent("open-failed",{message:"Unable to load TileSource",source:n})},n.match(/\.js$/)?(i=n.split("/").pop().replace(".js",""),e.jsonp({url:n,async:!1,callbackName:i,callback:r})):e.makeAjaxRequest({url:n,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(e){var n=t(e);r(n)},error:function(e,t){var i;try{i="HTTP "+e.status+" attempting to load TileSource"}catch(s){var r;r="undefined"!=typeof t&&t.toString?t.toString():"Unknown error",i=r+" attempting to load TileSource"}u.raiseEvent("open-failed",{message:i,source:n})}})},supports:function(e,t){return!1},configure:function(e,t){throw new Error("Method not implemented.")},getTileUrl:function(e,t,n){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(e,t,n){return{}},tileExists:function(e,t,n){var i=this.getNumTiles(e);return e>=this.minLevel&&e<=this.maxLevel&&t>=0&&n>=0&&t<i.x&&n<i.y}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype),e.TileSource.determineType=function(t,n,i){var r;for(r in OpenSeadragon)if(r.match(/.+TileSource$/)&&e.isFunction(OpenSeadragon[r])&&e.isFunction(OpenSeadragon[r].prototype.supports)&&OpenSeadragon[r].prototype.supports.call(t,n,i))return OpenSeadragon[r];e.console.error("No TileSource was able to open %s %s",i,n)}}(OpenSeadragon),function(e){function t(t,i){if(!i||!i.documentElement)throw new Error(e.getString("Errors.Xml"));var r,s,o,a,c,l=i.documentElement,u=l.localName||l.tagName,h=i.documentElement.namespaceURI,d=null,p=[];if("Image"==u)try{if(a=l.getElementsByTagName("Size")[0],void 0===a&&(a=l.getElementsByTagNameNS(h,"Size")[0]),d={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:l.getAttribute("Url"),Format:l.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(l.getAttribute("Overlap"),10),TileSize:parseInt(l.getAttribute("TileSize"),10),Size:{Height:parseInt(a.getAttribute("Height"),10),Width:parseInt(a.getAttribute("Width"),10)}}},!e.imageFormatSupported(d.Image.Format))throw new Error(e.getString("Errors.ImageFormat",d.Image.Format.toUpperCase()));for(r=l.getElementsByTagName("DisplayRect"),void 0===r&&(r=l.getElementsByTagNameNS(h,"DisplayRect")[0]),c=0;c<r.length;c++)s=r[c],o=s.getElementsByTagName("Rect")[0],void 0===o&&(o=s.getElementsByTagNameNS(h,"Rect")[0]),p.push({Rect:{X:parseInt(o.getAttribute("X"),10),Y:parseInt(o.getAttribute("Y"),10),Width:parseInt(o.getAttribute("Width"),10),Height:parseInt(o.getAttribute("Height"),10),MinLevel:parseInt(s.getAttribute("MinLevel"),10),MaxLevel:parseInt(s.getAttribute("MaxLevel"),10)}});return p.length&&(d.Image.DisplayRect=p),n(t,d)}catch(g){throw g instanceof Error?g:new Error(e.getString("Errors.Dzi"))}else{if("Collection"==u)throw new Error(e.getString("Errors.Dzc"));if("Error"==u){var f=l.getElementsByTagName("Message")[0],m=f.firstChild.nodeValue;throw new Error(m)}}throw new Error(e.getString("Errors.Dzi"))}function n(t,n){var i,r,s=n.Image,o=s.Url,a=s.Format,c=s.Size,l=s.DisplayRect||[],u=parseInt(c.Width,10),h=parseInt(c.Height,10),d=parseInt(s.TileSize,10),p=parseInt(s.Overlap,10),f=[];for(r=0;r<l.length;r++)i=l[r].Rect,f.push(new e.DisplayRect(parseInt(i.X,10),parseInt(i.Y,10),parseInt(i.Width,10),parseInt(i.Height,10),parseInt(i.MinLevel,10),parseInt(i.MaxLevel,10)));return e.extend(!0,{width:u,height:h,tileSize:d,tileOverlap:p,minLevel:null,maxLevel:null,tilesUrl:o,fileFormat:a,displayRects:f},n)}e.DziTileSource=function(t,n,i,r,s,o,a,c,l){var u,h,d,p;if(p=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=p.tilesUrl,this.fileFormat=p.fileFormat,this.displayRects=p.displayRects,this.displayRects)for(u=this.displayRects.length-1;u>=0;u--)for(h=this.displayRects[u],d=h.minLevel;d<=h.maxLevel;d++)this._levelRects[d]||(this._levelRects[d]=[]),this._levelRects[d].push(h);e.TileSource.apply(this,[p])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){var n;return e.Image?n=e.Image.xmlns:e.documentElement&&("Image"!=e.documentElement.localName&&"Image"!=e.documentElement.tagName||(n=e.documentElement.namespaceURI)),n=(n||"").toLowerCase(),-1!==n.indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==n.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(i,r){var s;return s=e.isPlainObject(i)?n(this,i):t(this,i),r&&!s.tilesUrl&&(s.tilesUrl=r.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),-1!=r.search(/\.(dzi|xml|js)\?/)?s.queryParams=r.match(/\?.*/):s.queryParams=""),s},getTileUrl:function(e,t,n){return[this.tilesUrl,e,"/",t,"_",n,".",this.fileFormat,this.queryParams].join("")},tileExists:function(e,t,n){var i,r,s,o,a,c,l,u=this._levelRects[e];if(this.minLevel&&e<this.minLevel||this.maxLevel&&e>this.maxLevel)return!1;if(!u||!u.length)return!0;for(l=u.length-1;l>=0;l--)if(i=u[l],!(e<i.minLevel||e>i.maxLevel)&&(r=this.getLevelScale(e),s=i.x*r,o=i.y*r,a=s+i.width*r,c=o+i.height*r,s=Math.floor(s/this._tileWidth),o=Math.floor(o/this._tileWidth),a=Math.ceil(a/this._tileWidth),c=Math.ceil(c/this._tileWidth),s<=t&&t<a&&o<=n&&n<c))return!0;return!1}})}(OpenSeadragon),function(e){function t(e){var t=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],n=Array.isArray(e.profile)?e.profile[0]:e.profile,i=-1!==t.indexOf(n),r=!1;return 2===e.version&&e.profile.length>1&&e.profile[1].supports&&(r=-1!==e.profile[1].supports.indexOf("sizeByW")),3===e.version&&e.extraFeatures&&(r=-1!==e.extraFeatures.indexOf("sizeByWh")),!i||r}function n(e){for(var t=[],n=0;n<e.sizes.length;n++)t.push({url:e["@id"]+"/full/"+e.sizes[n].width+","+(3===e.version?e.sizes[n].height:"")+"/0/default."+e.tileFormat,width:e.sizes[n].width,height:e.sizes[n].height});return t.sort((function(e,t){return e.width-t.width}))}function i(t){if(!t||!t.documentElement)throw new Error(e.getString("Errors.Xml"));var n=t.documentElement,i=n.tagName,s=null;if("info"==i)try{return s={},r(n,s),s}catch(o){throw o instanceof Error?o:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}function r(t,n,i){var s,o;if(3==t.nodeType&&i)o=t.nodeValue.trim(),o.match(/^\d*$/)&&(o=Number(o)),n[i]?(e.isArray(n[i])||(n[i]=[n[i]]),n[i].push(o)):n[i]=o;else if(1==t.nodeType)for(s=0;s<t.childNodes.length;s++)r(t.childNodes[s],n,t.nodeName)}e.IIIFTileSource=function(i){if(e.extend(!0,this,i),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(i.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=i.version,this.tile_width&&this.tile_height)i.tileWidth=this.tile_width,i.tileHeight=this.tile_height;else if(this.tile_width)i.tileSize=this.tile_width;else if(this.tile_height)i.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)i.tileWidth=this.tiles[0].width,i.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var r=0;r<this.tiles.length;r++)for(var s=0;s<this.tiles[r].scaleFactors.length;s++){var o=this.tiles[r].scaleFactors[s];this.scale_factors.push(o),i.tileSizePerScaleFactor[o]={width:this.tiles[r].width,height:this.tiles[r].height||this.tiles[r].width}}}else if(t(i)){for(var a=Math.min(this.height,this.width),c=[256,512,1024],l=[],u=0;u<c.length;u++)c[u]<=a&&l.push(c[u]);l.length>0?i.tileSize=Math.max.apply(null,l):i.tileSize=a}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,i.levels=n(this),e.extend(!0,i,{width:i.levels[i.levels.length-1].width,height:i.levels[i.levels.length-1].height,tileSize:Math.max(i.height,i.width),tileOverlap:0,minLevel:0,maxLevel:i.levels.length-1}),this.levels=i.levels):e.console.error("Nothing in the info.json to construct image pyramids from");if(!i.maxLevel&&!this.emulateLegacyImagePyramid)if(this.scale_factors){var h=Math.max.apply(null,this.scale_factors);i.maxLevel=Math.round(Math.log(h)*Math.LOG2E)}else i.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));e.TileSource.apply(this,[i])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return!(!e.protocol||"http://iiif.io/api/image"!=e.protocol)||(!(!e["@context"]||"http://library.stanford.edu/iiif/image-api/1.1/context.json"!=e["@context"]&&"http://iiif.io/api/image/1/context.json"!=e["@context"])||(!(!e.profile||0!==e.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html"))||(!!(e.identifier&&e.width&&e.height)||!(!e.documentElement||"info"!=e.documentElement.tagName||"http://library.stanford.edu/iiif/image-api/ns/"!=e.documentElement.namespaceURI))))},configure:function(t,n){if(e.isPlainObject(t)){if(t["@context"]){var r=t["@context"];if(Array.isArray(r))for(var s=0;s<r.length;s++)if("string"===typeof r[s]&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(r[s])||"http://library.stanford.edu/iiif/image-api/1.1/context.json"===r[s])){r=r[s];break}switch(r){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":t.version=1;break;case"http://iiif.io/api/image/2/context.json":t.version=2;break;case"http://iiif.io/api/image/3/context.json":t.version=3;break;default:e.console.error("Data has a @context property which contains no known IIIF context URI.")}}else t["@context"]="http://iiif.io/api/image/1.0/context.json",t["@id"]=n.replace("/info.json",""),t.version=1;if(!t["@id"]&&t["id"]&&(t["@id"]=t["id"]),t.preferredFormats)for(var o=0;o<t.preferredFormats.length;o++)if(OpenSeadragon.imageFormatSupported(t.preferredFormats[o])){t.tileFormat=t.preferredFormats[o];break}return t}var a=i(t);return a["@context"]="http://iiif.io/api/image/1.0/context.json",a["@id"]=n.replace("/info.xml",""),a.version=1,a},getTileWidth:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,t);var n=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].width:this._tileWidth},getTileHeight:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,t);var n=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].height:this._tileHeight},getLevelScale:function(t){if(this.emulateLegacyImagePyramid){var n=NaN;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(n=this.levels[t].width/this.levels[this.maxLevel].width),n}return e.TileSource.prototype.getLevelScale.call(this,t)},getNumTiles:function(t){if(this.emulateLegacyImagePyramid){var n=this.getLevelScale(t);return n?new e.Point(1,1):new e.Point(0,0)}return e.TileSource.prototype.getNumTiles.call(this,t)},getTileAtPoint:function(t,n){return this.emulateLegacyImagePyramid?new e.Point(0,0):e.TileSource.prototype.getTileAtPoint.call(this,t,n)},getTileUrl:function(e,t,n){if(this.emulateLegacyImagePyramid){var i=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].url),i}var r,s,o,a,c,l,u,h,d,p,f,m,g,v,y="0",T=Math.pow(.5,this.maxLevel-e),E=Math.ceil(this.width*T),_=Math.ceil(this.height*T);return r=this.getTileWidth(e),s=this.getTileHeight(e),o=Math.ceil(r/T),a=Math.ceil(s/T),g=1===this.version?"native."+this.tileFormat:"default."+this.tileFormat,E<r&&_<s?(p=2===this.version&&E===this.width||3===this.version&&E===this.width&&_===this.height?"max":3===this.version?E+","+_:E+",",c="full"):(l=t*o,u=n*a,h=Math.min(o,this.width-l),d=Math.min(a,this.height-u),c=0===t&&0===n&&h===this.width&&d===this.height?"full":[l,u,h,d].join(","),f=Math.ceil(h*T),m=Math.ceil(d*T),p=2===this.version&&f===this.width||3===this.version&&f===this.width&&m===this.height?"max":3===this.version?f+","+m:f+","),v=[this["@id"],c,p,y,g].join("/"),v},__testonly__:{canBeTiled:t,constructLevels:n}})}(OpenSeadragon),function(e){e.OsmTileSource=function(t,n,i,r,s){var o;o=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},o.width&&o.height||(o.width=65572864,o.height=65572864),o.tileSize||(o.tileSize=256,o.tileOverlap=0),o.tilesUrl||(o.tilesUrl="http://tile.openstreetmap.org/"),o.minLevel=8,e.TileSource.apply(this,[o])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"openstreetmaps"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){return this.tilesUrl+(e-8)+"/"+t+"/"+n+".png"}})}(OpenSeadragon),function(e){e.TmsTileSource=function(t,n,i,r,s){var o;o=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var a,c=256*Math.ceil(o.width/256),l=256*Math.ceil(o.height/256);a=c>l?c/256:l/256,o.maxLevel=Math.ceil(Math.log(a)/Math.log(2))-1,o.tileSize=256,o.width=c,o.height=l,e.TileSource.apply(this,[o])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"tiledmapservice"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){var i=this.getNumTiles(e).y-1;return this.tilesUrl+e+"/"+t+"/"+(i-n)+".png"}})}(OpenSeadragon),function(e){e.ZoomifyTileSource=function(e){e.tileSize=256;var t={x:e.width,y:e.height};e.imageSizes=[{x:e.width,y:e.height}],e.gridSize=[this._getGridSize(e.width,e.height,e.tileSize)];while(parseInt(t.x,10)>e.tileSize||parseInt(t.y,10)>e.tileSize)t.x=Math.floor(t.x/2),t.y=Math.floor(t.y/2),e.imageSizes.push({x:t.x,y:t.y}),e.gridSize.push(this._getGridSize(t.x,t.y,e.tileSize));e.imageSizes.reverse(),e.gridSize.reverse(),e.minLevel=0,e.maxLevel=e.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[e])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(e,t,n){return{x:Math.ceil(e/n),y:Math.ceil(t/n)}},_calculateAbsoluteTileNumber:function(e,t,n){for(var i=0,r={},s=0;s<e;s++)r=this.gridSize[s],i+=r.x*r.y;return r=this.gridSize[e],i+=r.x*n+t,i},supports:function(e,t){return e.type&&"zoomifytileservice"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){var i=0,r=this._calculateAbsoluteTileNumber(e,t,n);return i=Math.floor(r/256),this.tilesUrl+"TileGroup"+i+"/"+e+"-"+t+"-"+n+".jpg"}})}(OpenSeadragon),function(e){function t(t){var n,i,r=[];for(i=0;i<t.length;i++)n=t[i],n.height&&n.width&&n.url?r.push({url:n.url,width:Number(n.width),height:Number(n.height)}):e.console.error("Unsupported image format: %s",n.url?n.url:"<no URL>");return r.sort((function(e,t){return e.height-t.height}))}function n(t,n){if(!n||!n.documentElement)throw new Error(e.getString("Errors.Xml"));var r,s,o=n.documentElement,a=o.tagName,c=null,l=[];if("image"==a)try{for(c={type:o.getAttribute("type"),levels:[]},l=o.getElementsByTagName("level"),s=0;s<l.length;s++)r=l[s],c.levels.push({url:r.getAttribute("url"),width:parseInt(r.getAttribute("width"),10),height:parseInt(r.getAttribute("height"),10)});return i(t,c)}catch(u){throw u instanceof Error?u:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==a)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"==a)throw new Error("Error: "+n)}throw new Error("Unknown element "+a)}function i(e,t){return t.levels}e.LegacyTileSource=function(n){var i,r,s;e.isArray(n)&&(i={type:"legacy-image-pyramid",levels:n}),i.levels=t(i.levels),i.levels.length>0?(r=i.levels[i.levels.length-1].width,s=i.levels[i.levels.length-1].height):(r=0,s=0,e.console.error("No supported image formats found")),e.extend(!0,i,{width:r,height:s,tileSize:Math.max(s,r),tileOverlap:0,minLevel:0,maxLevel:i.levels.length>0?i.levels.length-1:0}),e.TileSource.apply(this,[i]),this.levels=i.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"legacy-image-pyramid"==e.type||e.documentElement&&"legacy-image-pyramid"==e.documentElement.getAttribute("type")},configure:function(t,r){var s;return s=e.isPlainObject(t)?i(this,t):n(this,t),s},getLevelScale:function(e){var t=NaN;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){var n=this.getLevelScale(t);return n?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,n){var i=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].url),i}})}(OpenSeadragon),function(e){e.ImageTileSource=function(t){t=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},t),e.TileSource.apply(this,[t])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"image"===e.type},configure:function(e,t){return e},getImageInfo:function(t){var n=this._image=new Image,i=this;this.crossOriginPolicy&&(n.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(n.useCredentials=this.ajaxWithCredentials),e.addEvent(n,"load",(function(){i.width=Object.prototype.hasOwnProperty.call(n,"naturalWidth")?n.naturalWidth:n.width,i.height=Object.prototype.hasOwnProperty.call(n,"naturalHeight")?n.naturalHeight:n.height,i.aspectRatio=i.width/i.height,i.dimensions=new e.Point(i.width,i.height),i._tileWidth=i.width,i._tileHeight=i.height,i.tileOverlap=0,i.minLevel=0,i.levels=i._buildLevels(),i.maxLevel=i.levels.length-1,i.ready=!0,i.raiseEvent("ready",{tileSource:i})})),e.addEvent(n,"error",(function(){i.raiseEvent("open-failed",{message:"Error loading image at "+t,source:t})})),n.src=t},getLevelScale:function(e){var t=NaN;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){var n=this.getLevelScale(t);return n?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,n){var i=null;return e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].url),i},getContext2D:function(e,t,n){var i=null;return e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].context2D),i},_buildLevels:function(){var t=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!e.supportsCanvas||!this.useCanvas)return delete this._image,t;var n=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,i=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,r=document.createElement("canvas"),s=r.getContext("2d");if(r.width=n,r.height=i,s.drawImage(this._image,0,0,n,i),t[0].context2D=s,delete this._image,e.isCanvasTainted(r))return t;while(n>=2&&i>=2){n=Math.floor(n/2),i=Math.floor(i/2);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=n,o.height=i,a.drawImage(r,0,0,n,i),t.splice(0,0,{context2D:a,width:n,height:i}),r=o,s=a}return t}})}(OpenSeadragon),function(e){e.TileSourceCollection=function(t,n,i,r){e.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(e){function t(t){e.requestAnimationFrame((function(){n(t)}))}function n(n){var i,r,s;n.shouldFade&&(i=e.now(),r=i-n.fadeBeginTime,s=1-r/n.fadeLength,s=Math.min(1,s),s=Math.max(0,s),n.imgGroup&&e.setElementOpacity(n.imgGroup,s,!0),s>0&&t(n))}function i(n){n.shouldFade=!0,n.fadeBeginTime=e.now()+n.fadeDelay,window.setTimeout((function(){t(n)}),n.fadeDelay)}function r(t){t.shouldFade=!1,t.imgGroup&&e.setElementOpacity(t.imgGroup,1,!0)}function s(t,n){t.element.disabled||(n>=e.ButtonState.GROUP&&t.currentState==e.ButtonState.REST&&(r(t),t.currentState=e.ButtonState.GROUP),n>=e.ButtonState.HOVER&&t.currentState==e.ButtonState.GROUP&&(t.imgHover&&(t.imgHover.style.visibility=""),t.currentState=e.ButtonState.HOVER),n>=e.ButtonState.DOWN&&t.currentState==e.ButtonState.HOVER&&(t.imgDown&&(t.imgDown.style.visibility=""),t.currentState=e.ButtonState.DOWN))}function o(t,n){t.element.disabled||(n<=e.ButtonState.HOVER&&t.currentState==e.ButtonState.DOWN&&(t.imgDown&&(t.imgDown.style.visibility="hidden"),t.currentState=e.ButtonState.HOVER),n<=e.ButtonState.GROUP&&t.currentState==e.ButtonState.HOVER&&(t.imgHover&&(t.imgHover.style.visibility="hidden"),t.currentState=e.ButtonState.GROUP),n<=e.ButtonState.REST&&t.currentState==e.ButtonState.GROUP&&(i(t),t.currentState=e.ButtonState.REST))}e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(t){var n=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},t),this.element=t.element||e.makeNeutralElement("div"),t.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",e.Browser.vendor==e.BROWSERS.FIREFOX&&e.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(t){t.insideElementPressed?(s(n,e.ButtonState.DOWN),n.raiseEvent("enter",{originalEvent:t.originalEvent})):t.buttonDownAny||s(n,e.ButtonState.HOVER)},focusHandler:function(e){this.enterHandler(e),n.raiseEvent("focus",{originalEvent:e.originalEvent})},exitHandler:function(t){o(n,e.ButtonState.GROUP),t.insideElementPressed&&n.raiseEvent("exit",{originalEvent:t.originalEvent})},blurHandler:function(e){this.exitHandler(e),n.raiseEvent("blur",{originalEvent:e.originalEvent})},pressHandler:function(t){s(n,e.ButtonState.DOWN),n.raiseEvent("press",{originalEvent:t.originalEvent})},releaseHandler:function(t){t.insideElementPressed&&t.insideElementReleased?(o(n,e.ButtonState.HOVER),n.raiseEvent("release",{originalEvent:t.originalEvent})):t.insideElementPressed?o(n,e.ButtonState.GROUP):s(n,e.ButtonState.HOVER)},clickHandler:function(e){e.quick&&n.raiseEvent("click",{originalEvent:e.originalEvent})},keyHandler:function(e){return 13!==e.keyCode||(n.raiseEvent("click",{originalEvent:e.originalEvent}),n.raiseEvent("release",{originalEvent:e.originalEvent}),!1)}}),o(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){s(this,e.ButtonState.GROUP)},notifyGroupExit:function(){o(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),function(e){e.ButtonGroup=function(t){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},t);var n,i=this.buttons.concat([]),r=this;if(this.element=t.element||e.makeNeutralElement("div"),!t.group)for(this.element.style.display="inline-block",n=0;n<i.length;n++)this.element.appendChild(i[n].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){var t;for(t=0;t<r.buttons.length;t++)r.buttons[t].notifyGroupEnter()},exitHandler:function(e){var t;if(!e.insideElementPressed)for(t=0;t<r.buttons.length;t++)r.buttons[t].notifyGroupExit()}})},e.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(e){e.Rect=function(t,n,i,r,s){var o,a;this.x="number"===typeof t?t:0,this.y="number"===typeof n?n:0,this.width="number"===typeof i?i:0,this.height="number"===typeof r?r:0,this.degrees="number"===typeof s?s:0,this.degrees=e.positiveModulo(this.degrees,360),this.degrees>=270?(o=this.getTopRight(),this.x=o.x,this.y=o.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=270):this.degrees>=180?(o=this.getBottomRight(),this.x=o.x,this.y=o.y,this.degrees-=180):this.degrees>=90&&(o=this.getBottomLeft(),this.x=o.x,this.y=o.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=90)},e.Rect.fromSummits=function(t,n,i){var r=t.distanceTo(n),s=t.distanceTo(i),o=n.minus(t),a=Math.atan(o.y/o.x);return o.x<0?a+=Math.PI:o.y<0&&(a+=2*Math.PI),new e.Rect(t.x,t.y,r,s,a/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(t){return t instanceof e.Rect&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height&&this.degrees===t.degrees},times:function(t){return new e.Rect(this.x*t,this.y*t,this.width*t,this.height*t,this.degrees)},translate:function(t){return new e.Rect(this.x+t.x,this.y+t.y,this.width,this.height,this.degrees)},union:function(t){var n=this.getBoundingBox(),i=t.getBoundingBox(),r=Math.min(n.x,i.x),s=Math.min(n.y,i.y),o=Math.max(n.x+n.width,i.x+i.width),a=Math.max(n.y+n.height,i.y+i.height);return new e.Rect(r,s,o-r,a-s)},intersection:function(t){var n=1e-10,i=[],r=this.getTopLeft();t.containsPoint(r,n)&&i.push(r);var s=this.getTopRight();t.containsPoint(s,n)&&i.push(s);var o=this.getBottomLeft();t.containsPoint(o,n)&&i.push(o);var a=this.getBottomRight();t.containsPoint(a,n)&&i.push(a);var c=t.getTopLeft();this.containsPoint(c,n)&&i.push(c);var l=t.getTopRight();this.containsPoint(l,n)&&i.push(l);var u=t.getBottomLeft();this.containsPoint(u,n)&&i.push(u);var h=t.getBottomRight();this.containsPoint(h,n)&&i.push(h);for(var d=this._getSegments(),p=t._getSegments(),f=0;f<d.length;f++)for(var m=d[f],g=0;g<p.length;g++){var v=p[g],y=T(m[0],m[1],v[0],v[1]);y&&i.push(y)}function T(t,i,r,s){var o=i.minus(t),a=s.minus(r),c=-a.x*o.y+o.x*a.y;if(0===c)return null;var l=(o.x*(t.y-r.y)-o.y*(t.x-r.x))/c,u=(a.x*(t.y-r.y)-a.y*(t.x-r.x))/c;return-n<=l&&l<=1-n&&-n<=u&&u<=1-n?new e.Point(t.x+u*o.x,t.y+u*o.y):null}if(0===i.length)return null;for(var E=i[0].x,_=i[0].x,b=i[0].y,w=i[0].y,S=1;S<i.length;S++){var A=i[S];A.x<E&&(E=A.x),A.x>_&&(_=A.x),A.y<b&&(b=A.y),A.y>w&&(w=A.y)}return new e.Rect(E,b,_-E,w-b)},_getSegments:function(){var e=this.getTopLeft(),t=this.getTopRight(),n=this.getBottomLeft(),i=this.getBottomRight();return[[e,t],[t,i],[i,n],[n,e]]},rotate:function(t,n){if(t=e.positiveModulo(t,360),0===t)return this.clone();n=n||this.getCenter();var i=this.getTopLeft().rotate(t,n),r=this.getTopRight().rotate(t,n),s=r.minus(i);s=s.apply((function(e){var t=1e-15;return Math.abs(e)<t?0:e}));var o=Math.atan(s.y/s.x);return s.x<0?o+=Math.PI:s.y<0&&(o+=2*Math.PI),new e.Rect(i.x,i.y,this.width,this.height,o/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var t=this.getTopLeft(),n=this.getTopRight(),i=this.getBottomLeft(),r=this.getBottomRight(),s=Math.min(t.x,n.x,i.x,r.x),o=Math.max(t.x,n.x,i.x,r.x),a=Math.min(t.y,n.y,i.y,r.y),c=Math.max(t.y,n.y,i.y,r.y);return new e.Rect(s,a,o-s,c-a)},getIntegerBoundingBox:function(){var t=this.getBoundingBox(),n=Math.floor(t.x),i=Math.floor(t.y),r=Math.ceil(t.width+t.x-n),s=Math.ceil(t.height+t.y-i);return new e.Rect(n,i,r,s)},containsPoint:function(e,t){t=t||0;var n=this.getTopLeft(),i=this.getTopRight(),r=this.getBottomLeft(),s=i.minus(n),o=r.minus(n);return(e.x-n.x)*s.x+(e.y-n.y)*s.y>=-t&&(e.x-i.x)*s.x+(e.y-i.y)*s.y<=t&&(e.x-n.x)*o.x+(e.y-n.y)*o.y>=-t&&(e.x-r.x)*o.x+(e.y-r.y)*o.y<=t},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(OpenSeadragon),function(e){var t={};function n(t){var n=Number(this.element.style.marginLeft.replace("px","")),i=Number(this.element.style.marginTop.replace("px","")),s=Number(this.element.style.width.replace("px","")),o=Number(this.element.style.height.replace("px","")),a=e.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?-t.delta.x>0?n>-(s-a.x)&&(this.element.style.marginLeft=n+2*t.delta.x+"px",r(this,a.x,n+2*t.delta.x)):-t.delta.x<0&&n<0&&(this.element.style.marginLeft=n+2*t.delta.x+"px",r(this,a.x,n+2*t.delta.x)):-t.delta.y>0?i>-(o-a.y)&&(this.element.style.marginTop=i+2*t.delta.y+"px",r(this,a.y,i+2*t.delta.y)):-t.delta.y<0&&i<0&&(this.element.style.marginTop=i+2*t.delta.y+"px",r(this,a.y,i+2*t.delta.y))),!1}function i(t){var n=Number(this.element.style.marginLeft.replace("px","")),i=Number(this.element.style.marginTop.replace("px","")),s=Number(this.element.style.width.replace("px","")),o=Number(this.element.style.height.replace("px","")),a=e.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?t.scroll>0?n>-(s-a.x)&&(this.element.style.marginLeft=n-60*t.scroll+"px",r(this,a.x,n-60*t.scroll)):t.scroll<0&&n<0&&(this.element.style.marginLeft=n-60*t.scroll+"px",r(this,a.x,n-60*t.scroll)):t.scroll<0?i>a.y-o&&(this.element.style.marginTop=i+60*t.scroll+"px",r(this,a.y,i+60*t.scroll)):t.scroll>0&&i<0&&(this.element.style.marginTop=i+60*t.scroll+"px",r(this,a.y,i+60*t.scroll))),!1}function r(t,n,i){var r,s,o,a,c,l,u;for(r="horizontal"==t.scroll?t.panelWidth:t.panelHeight,s=Math.ceil(n/r)+5,o=Math.ceil((Math.abs(i)+n)/r)+1,s=o-s,s=s<0?0:s,l=s;l<o&&l<t.panels.length;l++)if(u=t.panels[l],!u.activePanel){var h,d=t.viewer.tileSources[l];h=d.referenceStripThumbnailUrl?{type:"image",url:d.referenceStripThumbnailUrl}:d,a=new e.Viewer({id:u.id,tileSources:[h],element:u,navigatorSizeRatio:t.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:t.viewer.loadTilesWithAjax,ajaxHeaders:t.viewer.ajaxHeaders,useCanvas:t.useCanvas}),a.displayRegion=e.makeNeutralElement("div"),a.displayRegion.id=u.id+"-displayregion",a.displayRegion.className="displayregion",c=a.displayRegion.style,c.position="relative",c.top="0px",c.left="0px",c.fontSize="0px",c.overflow="hidden",c.float="left",c.cssFloat="left",c.styleFloat="left",c.zIndex=999999999,c.cursor="default",c.width=t.panelWidth-4+"px",c.height=t.panelHeight-4+"px",a.displayRegion.innerTracker=new e.MouseTracker({element:a.displayRegion,startDisabled:!0}),u.getElementsByTagName("div")[0].appendChild(a.displayRegion),t.miniViewers[u.id]=a,u.activePanel=!0}}function s(e){var t=e.eventSource.element;return"horizontal"==this.scroll?t.style.marginBottom="0px":t.style.marginLeft="0px",!1}function o(t){var n=t.eventSource.element;return"horizontal"==this.scroll?n.style.marginBottom="-"+e.getElementSize(n).y/2+"px":n.style.marginLeft="-"+e.getElementSize(n).x/2+"px",!1}function a(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 38:return i.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:return i.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 37:return i.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return i.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}function c(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 61:return i.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return i.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return i.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:return i.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 97:return i.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return i.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}e.ReferenceStrip=function(l){var u,h,d,p=this,f=l.viewer,m=e.getElementSize(f.element);for(l.id||(l.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=l.id,this.element.className="referencestrip"),l=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},l,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),e.extend(this,l),t[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,h=this.element.style,h.marginTop="0px",h.marginRight="0px",h.marginBottom="0px",h.marginLeft="0px",h.left="0px",h.bottom="0px",h.border="0px",h.background="#000",h.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=f,this.innerTracker=new e.MouseTracker({element:this.element,dragHandler:e.delegate(this,n),scrollHandler:e.delegate(this,i),enterHandler:e.delegate(this,s),exitHandler:e.delegate(this,o),keyDownHandler:e.delegate(this,a),keyHandler:e.delegate(this,c)}),l.width&&l.height?(this.element.style.width=l.width+"px",this.element.style.height=l.height+"px",f.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):"horizontal"==l.scroll?(this.element.style.width=m.x*l.sizeRatio*f.tileSources.length+12*f.tileSources.length+"px",this.element.style.height=m.y*l.sizeRatio+"px",f.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=m.y*l.sizeRatio*f.tileSources.length+12*f.tileSources.length+"px",this.element.style.width=m.x*l.sizeRatio+"px",f.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=m.x*this.sizeRatio+8,this.panelHeight=m.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},d=0;d<f.tileSources.length;d++)u=e.makeNeutralElement("div"),u.id=this.element.id+"-"+d,u.style.width=p.panelWidth+"px",u.style.height=p.panelHeight+"px",u.style.display="inline",u.style.float="left",u.style.cssFloat="left",u.style.styleFloat="left",u.style.padding="2px",e.setElementTouchActionNone(u),u.innerTracker=new e.MouseTracker({element:u,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(t){t.eventSource.dragging=e.now()},releaseHandler:function(t){var n=t.eventSource,i=n.element.id,r=Number(i.split("-")[2]),s=e.now();t.insideElementPressed&&t.insideElementReleased&&n.dragging&&s-n.dragging<n.clickTimeThreshold&&(n.dragging=null,f.goToPage(r))}}),this.element.appendChild(u),u.activePanel=!1,this.panels.push(u);r(this,"vertical"==this.scroll?m.y:m.x,0),this.setFocus(0)},e.extend(e.ReferenceStrip.prototype,e.EventSource.prototype,e.Viewer.prototype,{setFocus:function(t){var n,i=this.element.querySelector("#"+this.element.id+"-"+t),o=e.getElementSize(this.viewer.canvas),a=Number(this.element.style.width.replace("px","")),c=Number(this.element.style.height.replace("px","")),l=-Number(this.element.style.marginLeft.replace("px","")),u=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==i&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=i,this.currentSelected.style.background="#999","horizontal"==this.scroll?(n=Number(t)*(this.panelWidth+3),n>l+o.x-this.panelWidth?(n=Math.min(n,a-o.x),this.element.style.marginLeft=-n+"px",r(this,o.x,-n)):n<l&&(n=Math.max(0,n-o.x/2),this.element.style.marginLeft=-n+"px",r(this,o.x,-n))):(n=Number(t)*(this.panelHeight+3),n>u+o.y-this.panelHeight?(n=Math.min(n,c-o.y),this.element.style.marginTop=-n+"px",r(this,o.y,-n)):n<u&&(n=Math.max(0,n-o.y/2),this.element.style.marginTop=-n+"px",r(this,o.y,-n))),this.currentPage=t,s.call(this,{eventSource:this.innerTracker}))},update:function(){return!!t[this.id].animating&&(e.console.log("image reference strip update"),!0)},destroy:function(){if(this.miniViewers)for(var e in this.miniViewers)this.miniViewers[e].destroy();this.element&&this.element.parentNode.removeChild(this.element)}})}(OpenSeadragon),function(e){e.DisplayRect=function(t,n,i,r,s,o){e.Rect.apply(this,[t,n,i,r]),this.minLevel=s,this.maxLevel=o},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(OpenSeadragon),function(e){function t(e,t){return(1-Math.exp(e*-t))/(1-Math.exp(-e))}e.Spring=function(t){var n=arguments;"object"!=typeof t&&(t={initial:n.length&&"number"==typeof n[0]?n[0]:void 0,springStiffness:n.length>1?n[1].springStiffness:5,animationTime:n.length>1?n[1].animationTime:1.5}),e.console.assert("number"===typeof t.springStiffness&&0!==t.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert("number"===typeof t.animationTime&&t.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),t.exponential&&(this._exponential=!0,delete t.exponential),e.extend(!0,this,t),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=t,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(t){this.start.value+=t,this.target.value+=t,this._exponential&&(e.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(t){this._exponential=t,this._exponential&&(e.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){var n,i;this.current.time=e.now(),this._exponential?(n=this.start._logValue,i=this.target._logValue):(n=this.start.value,i=this.target.value);var r=this.current.time>=this.target.time?i:n+(i-n)*t(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),s=this.current.value;return this._exponential?this.current.value=Math.exp(r):this.current.value=r,s!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(OpenSeadragon),function(e){function t(t){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null},t),this.image=null}function n(e,t,n){var i;e.jobsInProgress--,(!e.jobLimit||e.jobsInProgress<e.jobLimit)&&e.jobQueue.length>0&&(i=e.jobQueue.shift(),i.start(),e.jobsInProgress++),n(t.image,t.errorMsg,t.request)}t.prototype={errorMsg:null,start:function(){var t=this,n=this.abort;this.image=new Image,this.image.onload=function(){t.finish(!0)},this.image.onabort=this.image.onerror=function(){t.errorMsg="Image load aborted",t.finish(!1)},this.jobId=window.setTimeout((function(){t.errorMsg="Image load exceeded timeout ("+t.timeout+" ms)",t.finish(!1)}),this.timeout),this.loadWithAjax?(this.request=e.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(e){var n;try{n=new window.Blob([e.response])}catch(o){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===o.name&&i){var r=new i;r.append(e.response),n=r.getBlob()}}0===n.size&&(t.errorMsg="Empty image response.",t.finish(!1));var s=(window.URL||window.webkitURL).createObjectURL(n);t.image.src=s},error:function(e){t.errorMsg="Image load aborted - XHR error",t.finish(!1)}}),this.abort=function(){t.request.abort(),"function"===typeof n&&n()}):(!1!==this.crossOriginPolicy&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(e){this.image.onload=this.image.onerror=this.image.onabort=null,e||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(t){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},t)},e.ImageLoader.prototype={addJob:function(e){var i=this,r=function(t){n(i,t,e.callback)},s={src:e.src,loadWithAjax:e.loadWithAjax,ajaxHeaders:e.loadWithAjax?e.ajaxHeaders:null,crossOriginPolicy:e.crossOriginPolicy,ajaxWithCredentials:e.ajaxWithCredentials,callback:r,abort:e.abort,timeout:this.timeout},o=new t(s);!this.jobLimit||this.jobsInProgress<this.jobLimit?(o.start(),this.jobsInProgress++):this.jobQueue.push(o)},clear:function(){for(var e=0;e<this.jobQueue.length;e++){var t=this.jobQueue[e];"function"===typeof t.abort&&t.abort()}this.jobQueue=[]}}}(OpenSeadragon),function(e){e.Tile=function(e,t,n,i,r,s,o,a,c,l){this.level=e,this.x=t,this.y=n,this.bounds=i,this.sourceBounds=l,this.exists=r,this.url=s,this.context2D=o,this.loadWithAjax=a,this.ajaxHeaders=c,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(t){this.cacheImageRecord?this.loaded?(this.element||(this.element=e.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=t&&t.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",e.setElementOpacity(this.element,this.opacity)):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):e.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(t,n,i,r){var s,o,a,c=this.position.times(e.pixelDensityRatio),l=this.size.times(e.pixelDensityRatio);this.context2D||this.cacheImageRecord?(s=this.context2D||this.cacheImageRecord.getRenderedContext(),this.loaded&&s?(t.save(),t.globalAlpha=this.opacity,"number"===typeof i&&1!==i&&(c=c.times(i),l=l.times(i)),r instanceof e.Point&&(c=c.plus(r)),1===t.globalAlpha&&this._hasTransparencyChannel()&&t.clearRect(c.x,c.y,l.x,l.y),n({context:t,tile:this,rendered:s}),this.sourceBounds?(o=Math.min(this.sourceBounds.width,s.canvas.width),a=Math.min(this.sourceBounds.height,s.canvas.height)):(o=s.canvas.width,a=s.canvas.height),t.drawImage(s.canvas,0,0,o,a,c.x,c.y,l.x,l.y),t.restore()):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):e.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var t;if(this.cacheImageRecord)t=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;t=this.context2D}return t.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(t,n,i){var r=Math.max(1,Math.ceil((i.x-n.x)/2)),s=Math.max(1,Math.ceil((i.y-n.y)/2));return new e.Point(r,s).minus(this.position.times(e.pixelDensityRatio).times(t||1).apply((function(e){return e%1})))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(t,n,i){var r;r=e.isPlainObject(t)?t:{element:t,location:n,placement:i},this.element=r.element,this.style=r.element.style,this._init(r)},e.Overlay.prototype={_init:function(t){this.location=t.location,this.placement=void 0===t.placement?e.Placement.TOP_LEFT:t.placement,this.onDraw=t.onDraw,this.checkResize=void 0===t.checkResize||t.checkResize,this.width=void 0===t.width?null:t.width,this.height=void 0===t.height?null:t.height,this.rotationMode=t.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(t,n){var i=e.Placement.properties[this.placement];i&&(i.isHorizontallyCentered?t.x-=n.x/2:i.isRight&&(t.x-=n.x),i.isVerticallyCentered?t.y-=n.y/2:i.isBottom&&(t.y-=n.y))},destroy:function(){var t=this.element,n=this.style;t.parentNode&&(t.parentNode.removeChild(t),t.prevElementParent&&(n.display="none",document.body.appendChild(t))),this.onDraw=null,n.top="",n.left="",n.position="",null!==this.width&&(n.width=""),null!==this.height&&(n.height="");var i=e.getCssPropertyWithVendorPrefix("transformOrigin"),r=e.getCssPropertyWithVendorPrefix("transform");i&&r&&(n[i]="",n[r]="")},drawHTML:function(t,n){var i=this.element;i.parentNode!==t&&(i.prevElementParent=i.parentNode,i.prevNextSibling=i.nextSibling,t.appendChild(i),this.style.position="absolute",this.size=e.getElementSize(i));var r=this._getOverlayPositionAndSize(n),s=r.position,o=this.size=r.size,a=r.rotate;if(this.onDraw)this.onDraw(s,o,this.element);else{var c=this.style;c.left=s.x+"px",c.top=s.y+"px",null!==this.width&&(c.width=o.x+"px"),null!==this.height&&(c.height=o.y+"px");var l=e.getCssPropertyWithVendorPrefix("transformOrigin"),u=e.getCssPropertyWithVendorPrefix("transform");l&&u&&(a?(c[l]=this._getTransformOrigin(),c[u]="rotate("+a+"deg)"):(c[l]="",c[u]="")),"none"!==c.display&&(c.display="block")}},_getOverlayPositionAndSize:function(t){var n=t.pixelFromPoint(this.location,!0),i=this._getSizeInPixels(t);this.adjust(n,i);var r=0;if(t.degrees&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var s=new e.Rect(n.x,n.y,i.x,i.y),o=this._getBoundingBox(s,t.degrees);n=o.getTopLeft(),i=o.getSize()}else r=t.degrees;return{position:n,size:i,rotate:r}},_getSizeInPixels:function(t){var n=this.size.x,i=this.size.y;if(null!==this.width||null!==this.height){var r=t.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);null!==this.width&&(n=r.x),null!==this.height&&(i=r.y)}if(this.checkResize&&(null===this.width||null===this.height)){var s=this.size=e.getElementSize(this.element);null===this.width&&(n=s.x),null===this.height&&(i=s.y)}return new e.Point(n,i)},_getBoundingBox:function(e,t){var n=this._getPlacementPoint(e);return e.rotate(t,n).getBoundingBox()},_getPlacementPoint:function(t){var n=new e.Point(t.x,t.y),i=e.Placement.properties[this.placement];return i&&(i.isHorizontallyCentered?n.x+=t.width/2:i.isRight&&(n.x+=t.width),i.isVerticallyCentered?n.y+=t.height/2:i.isBottom&&(n.y+=t.height)),n},_getTransformOrigin:function(){var t="",n=e.Placement.properties[this.placement];return n?(n.isLeft?t="left":n.isRight&&(t="right"),n.isTop?t+=" top":n.isBottom&&(t+=" bottom"),t):t},update:function(t,n){var i=e.isPlainObject(t)?t:{location:t,placement:n};this._init({location:i.location||this.location,placement:void 0!==i.placement?i.placement:this.placement,onDraw:i.onDraw||this.onDraw,checkResize:i.checkResize||this.checkResize,width:void 0!==i.width?i.width:this.width,height:void 0!==i.height?i.height:this.height,rotationMode:i.rotationMode||this.rotationMode})},getBounds:function(t){e.console.assert(t,"A viewport must now be passed to Overlay.getBounds.");var n=this.width,i=this.height;if(null===n||null===i){var r=t.deltaPointsFromPixelsNoRotate(this.size,!0);null===n&&(n=r.x),null===i&&(i=r.y)}var s=this.location.clone();return this.adjust(s,new e.Point(n,i)),this._adjustBoundsForRotation(t,new e.Rect(s.x,s.y,n,i))},_adjustBoundsForRotation:function(t,n){if(!t||0===t.degrees||this.rotationMode===e.OverlayRotationMode.EXACT)return n;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(null===this.width||null===this.height)return n;var i=this._getOverlayPositionAndSize(t);return t.viewerElementToViewportRectangle(new e.Rect(i.position.x,i.position.y,i.size.x,i.size.y))}return n.rotate(-t.degrees,this._getPlacementPoint(n))}}}(OpenSeadragon),function(e){e.Drawer=function(t){e.console.assert(t.viewer,"[Drawer] options.viewer is required");var n=arguments;if(e.isPlainObject(t)||(t={source:n[0],viewport:n[1],element:n[2]}),e.console.assert(t.viewport,"[Drawer] options.viewport is required"),e.console.assert(t.element,"[Drawer] options.element is required"),t.source&&e.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=t.viewer,this.viewport=t.viewport,this.debugGridColor="string"===typeof t.debugGridColor?[t.debugGridColor]:t.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,t.opacity&&e.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=e.supportsCanvas&&(!this.viewer||this.viewer.useCanvas),this.container=e.getElement(t.element),this.canvas=e.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var i=this._calculateCanvasSize();this.canvas.width=i.x,this.canvas.height=i.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",e.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},e.Drawer.prototype={addOverlay:function(t,n,i,r){return e.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(t,n,i,r),this},updateOverlay:function(t,n,i){return e.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(t,n,i),this},removeOverlay:function(t){return e.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(t),this},clearOverlays:function(){return e.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(t){var n=this.viewport.pixelFromPointNoRotate(t,!0);return new e.Point(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio)},clipWithPolygons:function(e,t){if(this.useCanvas){var n=this._getContext(t);n.beginPath(),e.forEach((function(e){e.forEach((function(e,t){n[0===t?"moveTo":"lineTo"](e.x,e.y)}))})),n.clip()}},setOpacity:function(t){e.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var n=this.viewer.world,i=0;i<n.getItemCount();i++)n.getItemAt(i).setOpacity(t);return this},getOpacity:function(){e.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var t=this.viewer.world,n=0,i=0;i<t.getItemCount();i++){var r=t.getItemAt(i).getOpacity();r>n&&(n=r)}return n},needsUpdate:function(){return e.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return e.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return e.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return e.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var e=this._calculateCanvasSize();if((this.canvas.width!=e.x||this.canvas.height!=e.y)&&(this.canvas.width=e.x,this.canvas.height=e.y,this._updateImageSmoothingEnabled(this.context),null!==this.sketchCanvas)){var t=this._calculateSketchCanvasSize();this.sketchCanvas.width=t.x,this.sketchCanvas.height=t.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(e,t){if(this.useCanvas){var n=this._getContext(e);if(t)n.clearRect(t.x,t.y,t.width,t.height);else{var i=n.canvas;n.clearRect(0,0,i.width,i.height)}}},viewportToDrawerRectangle:function(t){var n=this.viewport.pixelFromPointNoRotate(t.getTopLeft(),!0),i=this.viewport.deltaPixelsFromPointsNoRotate(t.getSize(),!0);return new e.Rect(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio,i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio)},drawTile:function(t,n,i,r,s){if(e.console.assert(t,"[Drawer.drawTile] tile is required"),e.console.assert(n,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var o=this._getContext(i);r=r||1,t.drawCanvas(o,n,r,s)}else t.drawHTML(this.canvas)},_getContext:function(e){var t=this.context;if(e){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var n=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=n.x,this.sketchCanvas.height=n.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var i=this;this.viewer.addHandler("rotate",(function e(){if(0!==i.viewport.getRotation()){i.viewer.removeHandler("rotate",e);var t=i._calculateSketchCanvasSize();i.sketchCanvas.width=t.x,i.sketchCanvas.height=t.y}}))}this._updateImageSmoothingEnabled(this.sketchContext)}t=this.sketchContext}return t},saveContext:function(e){this.useCanvas&&this._getContext(e).save()},restoreContext:function(e){this.useCanvas&&this._getContext(e).restore()},setClip:function(e,t){if(this.useCanvas){var n=this._getContext(t);n.beginPath(),n.rect(e.x,e.y,e.width,e.height),n.clip()}},drawRectangle:function(e,t,n){if(this.useCanvas){var i=this._getContext(n);i.save(),i.fillStyle=t,i.fillRect(e.x,e.y,e.width,e.height),i.restore()}},blendSketch:function(t,n,i,r){var s=t;if(e.isPlainObject(s)||(s={opacity:t,scale:n,translate:i,compositeOperation:r}),this.useCanvas&&this.sketchCanvas){t=s.opacity,r=s.compositeOperation;var o=s.bounds;if(this.context.save(),this.context.globalAlpha=t,r&&(this.context.globalCompositeOperation=r),o)o.x<0&&(o.width+=o.x,o.x=0),o.x+o.width>this.canvas.width&&(o.width=this.canvas.width-o.x),o.y<0&&(o.height+=o.y,o.y=0),o.y+o.height>this.canvas.height&&(o.height=this.canvas.height-o.y),this.context.drawImage(this.sketchCanvas,o.x,o.y,o.width,o.height,o.x,o.y,o.width,o.height);else{n=s.scale||1,i=s.translate;var a=i instanceof e.Point?i:new e.Point(0,0),c=0,l=0;if(i){var u=this.sketchCanvas.width-this.canvas.width,h=this.sketchCanvas.height-this.canvas.height;c=Math.round(u/2),l=Math.round(h/2)}this.context.drawImage(this.sketchCanvas,a.x-c*n,a.y-l*n,(this.canvas.width+2*c)*n,(this.canvas.height+2*l)*n,-c,-l,this.canvas.width+2*c,this.canvas.height+2*l)}this.context.restore()}},drawDebugInfo:function(t,n,i,r){if(this.useCanvas){var s=this.viewer.world.getIndexOfItem(r)%this.debugGridColor.length,o=this.context;o.save(),o.lineWidth=2*e.pixelDensityRatio,o.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",o.strokeStyle=this.debugGridColor[s],o.fillStyle=this.debugGridColor[s],0!==this.viewport.degrees&&this._offsetForRotation({degrees:this.viewport.degrees}),r.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:r.getRotation(!0),point:r.viewport.pixelFromPointNoRotate(r._getRotationPoint(!0),!0)}),0===r.viewport.degrees&&r.getRotation(!0)%360===0&&r._drawer.viewer.viewport.getFlip()&&r._drawer._flip(),o.strokeRect(t.position.x*e.pixelDensityRatio,t.position.y*e.pixelDensityRatio,t.size.x*e.pixelDensityRatio,t.size.y*e.pixelDensityRatio);var a=(t.position.x+t.size.x/2)*e.pixelDensityRatio,c=(t.position.y+t.size.y/2)*e.pixelDensityRatio;o.translate(a,c),o.rotate(Math.PI/180*-this.viewport.degrees),o.translate(-a,-c),0===t.x&&0===t.y&&(o.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*e.pixelDensityRatio,(t.position.y-30)*e.pixelDensityRatio),o.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*e.pixelDensityRatio,(t.position.y-20)*e.pixelDensityRatio)),o.fillText("Level: "+t.level,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+20)*e.pixelDensityRatio),o.fillText("Column: "+t.x,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+30)*e.pixelDensityRatio),o.fillText("Row: "+t.y,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+40)*e.pixelDensityRatio),o.fillText("Order: "+i+" of "+n,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+50)*e.pixelDensityRatio),o.fillText("Size: "+t.size.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+60)*e.pixelDensityRatio),o.fillText("Position: "+t.position.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+70)*e.pixelDensityRatio),0!==this.viewport.degrees&&this._restoreRotationChanges(),r.getRotation(!0)%360!==0&&this._restoreRotationChanges(),0===r.viewport.degrees&&r.getRotation(!0)%360===0&&r._drawer.viewer.viewport.getFlip()&&r._drawer._flip(),o.restore()}},debugRect:function(t){if(this.useCanvas){var n=this.context;n.save(),n.lineWidth=2*e.pixelDensityRatio,n.strokeStyle=this.debugGridColor[0],n.fillStyle=this.debugGridColor[0],n.strokeRect(t.x*e.pixelDensityRatio,t.y*e.pixelDensityRatio,t.width*e.pixelDensityRatio,t.height*e.pixelDensityRatio),n.restore()}},setImageSmoothingEnabled:function(e){this.useCanvas&&(this._imageSmoothingEnabled=e,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(e){e.msImageSmoothingEnabled=this._imageSmoothingEnabled,e.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(t){var n=this._getContext(t).canvas;return new e.Point(n.width,n.height)},getCanvasCenter:function(){return new e.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(t){var n=t.point?t.point.times(e.pixelDensityRatio):this.getCanvasCenter(),i=this._getContext(t.useSketch);i.save(),i.translate(n.x,n.y),this.viewer.viewport.flipped?(i.rotate(Math.PI/180*-t.degrees),i.scale(-1,1)):i.rotate(Math.PI/180*t.degrees),i.translate(-n.x,-n.y)},_flip:function(t){t=t||{};var n=t.point?t.point.times(e.pixelDensityRatio):this.getCanvasCenter(),i=this._getContext(t.useSketch);i.translate(n.x,0),i.scale(-1,1),i.translate(-n.x,0)},_restoreRotationChanges:function(e){var t=this._getContext(e);t.restore()},_calculateCanvasSize:function(){var t=e.pixelDensityRatio,n=this.viewport.getContainerSize();return{x:Math.round(n.x*t),y:Math.round(n.y*t)}},_calculateSketchCanvasSize:function(){var e=this._calculateCanvasSize();if(0===this.viewport.getRotation())return e;var t=Math.ceil(Math.sqrt(e.x*e.x+e.y*e.y));return{x:t,y:t}}}}(OpenSeadragon),function(e){e.Viewport=function(t){var n=arguments;n.length&&n[0]instanceof e.Point&&(t={containerSize:n[0],contentSize:n[1],config:n[2]}),t.config&&(e.extend(!0,t,t.config),delete t.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t.margins||{}),delete t.margins,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,degrees:e.DEFAULT_SETTINGS.degrees,flipped:e.DEFAULT_SETTINGS.flipped,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer},t),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={resetContentSize:function(t){return e.console.assert(t,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(t instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(t.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(t.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,t.y/t.x),t.x),this},setHomeBounds:function(t,n){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(t,n)},_setContentBounds:function(t,n){e.console.assert(t,"[Viewport._setContentBounds] bounds is required"),e.console.assert(t instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(t.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(t.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=t.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(n),this._contentBounds=t.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(n),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:n,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var e,t=this._contentAspectRatio/this.getAspectRatio();return e=this.homeFillsViewer?t>=1?t:1:t>=1?1:t,e/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var t=this._contentBounds.getCenter(),n=1/this.getHomeZoom(),i=n/this.getAspectRatio();return new e.Rect(t.x-n/2,t.y-i/2,n,i)},goHome:function(e){return this.viewer&&this.viewer.raiseEvent("home",{immediately:e}),this.fitBounds(this.getHomeBounds(),e)},getMinZoom:function(){var e=this.getHomeZoom(),t=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*e;return t},getMaxZoom:function(){var e=this.maxZoomLevel;return e||(e=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,e/=this._contentBounds.width),Math.max(e,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(t){e.console.assert("object"===e.type(t),"[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(-this.getRotation())},getBoundsNoRotate:function(t){var n=this.getCenter(t),i=1/this.getZoom(t),r=i/this.getAspectRatio();return new e.Rect(n.x-i/2,n.y-r/2,i,r)},getBoundsWithMargins:function(e){return this.getBoundsNoRotateWithMargins(e).rotate(-this.getRotation(),this.getCenter(e))},getBoundsNoRotateWithMargins:function(e){var t=this.getBoundsNoRotate(e),n=this._containerInnerSize.x*this.getZoom(e);return t.x-=this._margins.left/n,t.y-=this._margins.top/n,t.width+=(this._margins.left+this._margins.right)/n,t.height+=(this._margins.top+this._margins.bottom)/n,t},getCenter:function(t){var n,i,r,s,o,a,c,l,u=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),h=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return t?u:this.zoomPoint?(n=this.pixelFromPoint(this.zoomPoint,!0),i=this.getZoom(),r=1/i,s=r/this.getAspectRatio(),o=new e.Rect(u.x-r/2,u.y-s/2,r,s),a=this._pixelFromPoint(this.zoomPoint,o),c=a.minus(n),l=c.divide(this._containerInnerSize.x*i),h.plus(l)):h},getZoom:function(e){return e?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(e){return Math.max(Math.min(e,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(t){var n=new e.Rect(t.x,t.y,t.width,t.height);if(this.wrapHorizontal);else{var i=this.visibilityRatio*n.width,r=n.x+n.width,s=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,o=this._contentBoundsNoRotate.x-r+i,a=s-n.x-i;i>this._contentBoundsNoRotate.width?n.x+=(o+a)/2:a<0?n.x+=a:o>0&&(n.x+=o)}if(this.wrapVertical);else{var c=this.visibilityRatio*n.height,l=n.y+n.height,u=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,h=this._contentBoundsNoRotate.y-l+c,d=u-n.y-c;c>this._contentBoundsNoRotate.height?n.y+=(h+d)/2:d<0?n.y+=d:h>0&&(n.y+=h)}return n},_raiseConstraintsEvent:function(e){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:e})},applyConstraints:function(e){var t=this.getZoom(),n=this._applyZoomConstraints(t);t!==n&&this.zoomTo(n,this.zoomPoint,e);var i=this.getBoundsNoRotate(),r=this._applyBoundaryConstraints(i);return this._raiseConstraintsEvent(e),(i.x!==r.x||i.y!==r.y||e)&&this.fitBounds(r.rotate(-this.getRotation()),e),this},ensureVisible:function(e){return this.applyConstraints(e)},_fitBounds:function(t,n){n=n||{};var i=n.immediately||!1,r=n.constraints||!1,s=this.getAspectRatio(),o=t.getCenter(),a=new e.Rect(t.x,t.y,t.width,t.height,t.degrees+this.getRotation()).getBoundingBox();a.getAspectRatio()>=s?a.height=a.width/s:a.width=a.height*s,a.x=o.x-a.width/2,a.y=o.y-a.height/2;var c=1/a.width;if(r){var l=a.getAspectRatio(),u=this._applyZoomConstraints(c);c!==u&&(c=u,a.width=1/c,a.x=o.x-a.width/2,a.height=a.width/l,a.y=o.y-a.height/2),a=this._applyBoundaryConstraints(a),o=a.getCenter(),this._raiseConstraintsEvent(i)}if(i)return this.panTo(o,!0),this.zoomTo(c,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var h=this.getBounds(),d=this.getZoom();if(0===d||Math.abs(c/d-1)<1e-8)return this.zoomTo(c,!0),this.panTo(o,i);a=a.rotate(-this.getRotation());var p=a.getTopLeft().times(c).minus(h.getTopLeft().times(d)).divide(c-d);return this.zoomTo(c,p,i)},fitBounds:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!1})},fitBoundsWithConstraints:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!0})},fitVertically:function(t){var n=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(n,t)},fitHorizontally:function(t){var n=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(n,t)},getConstrainedBounds:function(e){var t,n;return t=this.getBounds(e),n=this._applyBoundaryConstraints(t),n},panBy:function(t,n){var i=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(i.plus(t),n)},panTo:function(e,t){return t?(this.centerSpringX.resetTo(e.x),this.centerSpringY.resetTo(e.y)):(this.centerSpringX.springTo(e.x),this.centerSpringY.springTo(e.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:e,immediately:t}),this},zoomBy:function(e,t,n){return this.zoomTo(this.zoomSpring.target.value*e,t,n)},zoomTo:function(t,n,i){var r=this;return this.zoomPoint=n instanceof e.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,i?this._adjustCenterSpringsForZoomPoint((function(){r.zoomSpring.resetTo(t)})):this.zoomSpring.springTo(t),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:t,refPoint:n,immediately:i}),this},setRotation:function(t){return this.viewer&&this.viewer.drawer.canRotate()?(this.degrees=e.positiveModulo(t,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:t}),this):this},getRotation:function(){return this.degrees},resize:function(e,t){var n,i=this.getBoundsNoRotate(),r=i;return this.containerSize.x=e.x,this.containerSize.y=e.y,this._updateContainerInnerSize(),t&&(n=e.x/this.containerSize.x,r.width=i.width*n,r.height=r.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:t}),this.fitBounds(r,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var e=this;this._adjustCenterSpringsForZoomPoint((function(){e.zoomSpring.update()})),this.centerSpringX.update(),this.centerSpringY.update();var t=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,t},_adjustCenterSpringsForZoomPoint:function(e){if(this.zoomPoint){var t=this.pixelFromPoint(this.zoomPoint,!0);e();var n=this.pixelFromPoint(this.zoomPoint,!0),i=n.minus(t),r=this.deltaPointsFromPixels(i,!0);this.centerSpringX.shiftBy(r.x),this.centerSpringY.shiftBy(r.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else e()},deltaPixelsFromPointsNoRotate:function(e,t){return e.times(this._containerInnerSize.x*this.getZoom(t))},deltaPixelsFromPoints:function(e,t){return this.deltaPixelsFromPointsNoRotate(e.rotate(this.getRotation()),t)},deltaPointsFromPixelsNoRotate:function(e,t){return e.divide(this._containerInnerSize.x*this.getZoom(t))},deltaPointsFromPixels:function(e,t){return this.deltaPointsFromPixelsNoRotate(e,t).rotate(-this.getRotation())},pixelFromPointNoRotate:function(e,t){return this._pixelFromPointNoRotate(e,this.getBoundsNoRotate(t))},pixelFromPoint:function(e,t){return this._pixelFromPoint(e,this.getBoundsNoRotate(t))},_pixelFromPointNoRotate:function(t,n){return t.minus(n.getTopLeft()).times(this._containerInnerSize.x/n.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(e,t){return this._pixelFromPointNoRotate(e.rotate(this.getRotation(),this.getCenter(!0)),t)},pointFromPixelNoRotate:function(t,n){var i=this.getBoundsNoRotate(n);return t.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/i.width).plus(i.getTopLeft())},pointFromPixel:function(e,t){return this.pointFromPixelNoRotate(e,t).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(t,n){var i=this._contentBoundsNoRotate.width;return new e.Point(t*this._contentSizeNoRotate.x/i,n*this._contentSizeNoRotate.x/i)},viewportToImageCoordinates:function(t,n){if(t instanceof e.Point)return this.viewportToImageCoordinates(t.x,t.y);if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===i){var r=this.viewer.world.getItemAt(0);return r.viewportToImageCoordinates(t,n,!0)}}return this._viewportToImageDelta(t-this._contentBoundsNoRotate.x,n-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(t,n){var i=this._contentBoundsNoRotate.width;return new e.Point(t/this._contentSizeNoRotate.x*i,n/this._contentSizeNoRotate.x*i)},imageToViewportCoordinates:function(t,n){if(t instanceof e.Point)return this.imageToViewportCoordinates(t.x,t.y);if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===i){var r=this.viewer.world.getItemAt(0);return r.imageToViewportCoordinates(t,n,!0)}}var s=this._imageToViewportDelta(t,n);return s.x+=this._contentBoundsNoRotate.x,s.y+=this._contentBoundsNoRotate.y,s},imageToViewportRectangle:function(t,n,i,r){var s=t;if(s instanceof e.Rect||(s=new e.Rect(t,n,i,r)),this.viewer){var o=this.viewer.world.getItemCount();if(o>1)e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===o){var a=this.viewer.world.getItemAt(0);return a.imageToViewportRectangle(t,n,i,r,!0)}}var c=this.imageToViewportCoordinates(s.x,s.y),l=this._imageToViewportDelta(s.width,s.height);return new e.Rect(c.x,c.y,l.x,l.y,s.degrees)},viewportToImageRectangle:function(t,n,i,r){var s=t;if(s instanceof e.Rect||(s=new e.Rect(t,n,i,r)),this.viewer){var o=this.viewer.world.getItemCount();if(o>1)e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===o){var a=this.viewer.world.getItemAt(0);return a.viewportToImageRectangle(t,n,i,r,!0)}}var c=this.viewportToImageCoordinates(s.x,s.y),l=this._viewportToImageDelta(s.width,s.height);return new e.Rect(c.x,c.y,l.x,l.y,s.degrees)},viewerElementToImageCoordinates:function(e){var t=this.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.pixelFromPoint(t,!0)},windowToImageCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var n=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(n)},imageToWindowCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var n=this.imageToViewerElementCoordinates(t);return n.plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(e){return this.pointFromPixel(e,!0)},viewportToViewerElementCoordinates:function(e){return this.pixelFromPoint(e,!0)},viewerElementToViewportRectangle:function(t){return e.Rect.fromSummits(this.pointFromPixel(t.getTopLeft(),!0),this.pointFromPixel(t.getTopRight(),!0),this.pointFromPixel(t.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(t){return e.Rect.fromSummits(this.pixelFromPoint(t.getTopLeft(),!0),this.pixelFromPoint(t.getTopRight(),!0),this.pixelFromPoint(t.getBottomLeft(),!0))},windowToViewportCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var n=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(n)},viewportToWindowCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var n=this.viewportToViewerElementCoordinates(t);return n.plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(t){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===n){var i=this.viewer.world.getItemAt(0);return i.viewportToImageZoom(t)}}var r=this._contentSizeNoRotate.x,s=this._containerInnerSize.x,o=this._contentBoundsNoRotate.width,a=s/r*o;return t*a},imageToViewportZoom:function(t){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===n){var i=this.viewer.world.getItemAt(0);return i.imageToViewportZoom(t)}}var r=this._contentSizeNoRotate.x,s=this._containerInnerSize.x,o=this._contentBoundsNoRotate.width,a=r/s/o;return t*a},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(e){return this.flipped===e||(this.flipped=e,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:e})),this}}}(OpenSeadragon),function(e){function t(e,t,i,r,s,o,a,c,l){var u=a.getBoundingBox().getTopLeft(),h=a.getBoundingBox().getBottomRight();e.viewer&&e.viewer.raiseEvent("update-level",{tiledImage:e,havedrawn:t,level:r,opacity:s,visibility:o,drawArea:a,topleft:u,bottomright:h,currenttime:c,best:l}),d(e.coverage,r),d(e.loadingCoverage,r);for(var p=e._getCornerTiles(r,u,h),f=p.topLeft,m=p.bottomRight,g=e.source.getNumTiles(r),v=e.viewport.pixelFromPoint(e.viewport.getCenter()),y=f.x;y<=m.x;y++)for(var T=f.y;T<=m.y;T++){if(!e.wrapHorizontal&&!e.wrapVertical){var E=e.source.getTileBounds(r,y,T);if(null===a.intersection(E))continue}l=n(e,i,t,y,T,r,s,o,v,g,c,l)}return l}function n(e,t,n,r,s,l,d,f,m,g,v,y){var T=i(r,s,l,e,e.source,e.tilesMatrix,v,g,e._worldWidthCurrent,e._worldHeightCurrent),E=n;e.viewer&&e.viewer.raiseEvent("update-tile",{tiledImage:e,tile:T}),h(e.coverage,l,r,s,!1);var _=T.loaded||T.loading||u(e.loadingCoverage,l,r,s);if(h(e.loadingCoverage,l,r,s,_),!T.exists)return y;if(t&&!E&&(u(e.coverage,l,r,s)?h(e.coverage,l,r,s,!0):E=!0),!E)return y;if(a(T,e.source.tileOverlap,e.viewport,m,f,e),!T.loaded)if(T.context2D)o(e,T);else{var b=e._tileCache.getImageRecord(T.cacheKey);if(b){var w=b.getImage();o(e,T,w)}}if(T.loaded){var S=c(e,T,r,s,l,d,v);S&&(e._needsDraw=!0)}else T.loading?e._tilesLoading++:_||(y=p(y,T));return y}function i(t,n,i,r,s,o,a,c,l,u){var h,d,p,f,m,g,v,y,T;return o[i]||(o[i]={}),o[i][t]||(o[i][t]={}),o[i][t][n]||(h=(c.x+t%c.x)%c.x,d=(c.y+n%c.y)%c.y,p=s.getTileBounds(i,h,d),f=s.getTileBounds(i,h,d,!0),m=s.tileExists(i,h,d),g=s.getTileUrl(i,h,d),r.loadTilesWithAjax?(v=s.getTileAjaxHeaders(i,h,d),e.isPlainObject(r.ajaxHeaders)&&(v=e.extend({},r.ajaxHeaders,v))):v=null,y=s.getContext2D?s.getContext2D(i,h,d):void 0,p.x+=(t-h)/c.x,p.y+=u/l*((n-d)/c.y),T=new e.Tile(i,t,n,p,m,g,y,r.loadTilesWithAjax,v,f),h===c.x-1&&(T.isRightMost=!0),d===c.y-1&&(T.isBottomMost=!0),o[i][t][n]=T),T=o[i][t][n],T.lastTouchTime=a,T}function r(e,t,n){t.loading=!0,e._imageLoader.addJob({src:t.url,loadWithAjax:t.loadWithAjax,ajaxHeaders:t.ajaxHeaders,crossOriginPolicy:e.crossOriginPolicy,ajaxWithCredentials:e.ajaxWithCredentials,callback:function(i,r,o){s(e,t,n,i,r,o)},abort:function(){t.loading=!1}})}function s(t,n,i,r,s,a){if(!r)return e.console.log("Tile %s failed to load: %s - error: %s",n,n.url,s),t.viewer.raiseEvent("tile-load-failed",{tile:n,tiledImage:t,time:i,message:s,tileRequest:a}),n.loading=!1,void(n.exists=!1);if(i<t.lastResetTime)return e.console.log("Ignoring tile %s loaded before reset: %s",n,n.url),void(n.loading=!1);var c=function(){var e=t.source.getClosestLevel();o(t,n,r,e,a)};t._midDraw?window.setTimeout(c,1):c()}function o(e,t,n,i,r){var s=0;function o(){return s++,a}function a(){s--,0===s&&(t.loading=!1,t.loaded=!0,t.context2D||e._tileCache.cacheTile({image:n,tile:t,cutoff:i,tiledImage:e}),e._needsDraw=!0)}e.viewer.raiseEvent("tile-loaded",{tile:t,tiledImage:e,tileRequest:r,image:n,getCompletionCallback:o}),o()()}function a(t,n,i,r,s,o){var a=t.bounds.getTopLeft();a.x*=o._scaleSpring.current.value,a.y*=o._scaleSpring.current.value,a.x+=o._xSpring.current.value,a.y+=o._ySpring.current.value;var c=t.bounds.getSize();c.x*=o._scaleSpring.current.value,c.y*=o._scaleSpring.current.value;var l=i.pixelFromPointNoRotate(a,!0),u=i.pixelFromPointNoRotate(a,!1),h=i.deltaPixelsFromPointsNoRotate(c,!0),d=i.deltaPixelsFromPointsNoRotate(c,!1),p=u.plus(d.divide(2)),f=r.squaredDistanceTo(p);n||(h=h.plus(new e.Point(1,1))),t.isRightMost&&o.wrapHorizontal&&(h.x+=.75),t.isBottomMost&&o.wrapVertical&&(h.y+=.75),t.position=l,t.size=h,t.squaredDistance=f,t.visibility=s}function c(e,t,n,i,r,s,o){var a,c,l=1e3*e.blendTime;if(t.blendStart||(t.blendStart=o),a=o-t.blendStart,c=l?Math.min(1,a/l):1,e.alwaysBlend&&(c*=s),t.opacity=c,e.lastDrawn.push(t),1===c)h(e.coverage,r,n,i,!0),e._hasOpaqueTile=!0;else if(a<l)return!0;return!1}function l(e,t,n,i){var r,s,o,a;if(!e[t])return!1;if(void 0===n||void 0===i){for(o in r=e[t],r)if(Object.prototype.hasOwnProperty.call(r,o))for(a in s=r[o],s)if(Object.prototype.hasOwnProperty.call(s,a)&&!s[a])return!1;return!0}return void 0===e[t][n]||void 0===e[t][n][i]||!0===e[t][n][i]}function u(e,t,n,i){return void 0===n||void 0===i?l(e,t+1):l(e,t+1,2*n,2*i)&&l(e,t+1,2*n,2*i+1)&&l(e,t+1,2*n+1,2*i)&&l(e,t+1,2*n+1,2*i+1)}function h(t,n,i,r,s){t[n]?(t[n][i]||(t[n][i]={}),t[n][i][r]=s):e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",n)}function d(e,t){e[t]={}}function p(e,t){return e?t.visibility>e.visibility||t.visibility==e.visibility&&t.squaredDistance<e.squaredDistance?t:e:t}function f(t,n){if(0!==t.opacity&&(0!==n.length||t.placeholderFillStyle)){var i,r,s,o=n[0];o&&(i=t.opacity<1||t.compositeOperation&&"source-over"!==t.compositeOperation||!t._isBottomItem()&&o._hasTransparencyChannel());var a,c=t.viewport.getZoom(!0),l=t.viewportToImageZoom(c);n.length>1&&l>t.smoothTileEdgesMinZoom&&!t.iOSDevice&&t.getRotation(!0)%360===0&&e.supportsCanvas&&(i=!0,r=o.getScaleForEdgeSmoothing(),s=o.getTranslationForEdgeSmoothing(r,t._drawer.getCanvasSize(!1),t._drawer.getCanvasSize(!0))),i&&(r||(a=t.viewport.viewportToViewerElementRectangle(t.getClippedBounds(!0)).getIntegerBoundingBox(),t._drawer.viewer.viewport.getFlip()&&(0===t.viewport.degrees&&t.getRotation(!0)%360===0||(a.x=t._drawer.viewer.container.clientWidth-(a.x+a.width))),a=a.times(e.pixelDensityRatio)),t._drawer._clear(!0,a)),r||(0!==t.viewport.degrees&&t._drawer._offsetForRotation({degrees:t.viewport.degrees,useSketch:i}),t.getRotation(!0)%360!==0&&t._drawer._offsetForRotation({degrees:t.getRotation(!0),point:t.viewport.pixelFromPointNoRotate(t._getRotationPoint(!0),!0),useSketch:i}),0===t.viewport.degrees&&t.getRotation(!0)%360===0&&t._drawer.viewer.viewport.getFlip()&&t._drawer._flip());var u=!1;if(t._clip){t._drawer.saveContext(i);var h=t.imageToViewportRectangle(t._clip,!0);h=h.rotate(-t.getRotation(!0),t._getRotationPoint(!0));var d=t._drawer.viewportToDrawerRectangle(h);r&&(d=d.times(r)),s&&(d=d.translate(s)),t._drawer.setClip(d,i),u=!0}if(t._croppingPolygons){t._drawer.saveContext(i);try{var p=t._croppingPolygons.map((function(e){return e.map((function(e){var n=t.imageToViewportCoordinates(e.x,e.y,!0).rotate(-t.getRotation(!0),t._getRotationPoint(!0)),i=t._drawer.viewportCoordToDrawerCoord(n);return r&&(i=i.times(r)),i}))}));t._drawer.clipWithPolygons(p,i)}catch(y){e.console.error(y)}u=!0}if(t.placeholderFillStyle&&!1===t._hasOpaqueTile){var f=t._drawer.viewportToDrawerRectangle(t.getBounds(!0));r&&(f=f.times(r)),s&&(f=f.translate(s));var g=null;g="function"===typeof t.placeholderFillStyle?t.placeholderFillStyle(t,t._drawer.context):t.placeholderFillStyle,t._drawer.drawRectangle(f,g,i)}for(var v=n.length-1;v>=0;v--)o=n[v],t._drawer.drawTile(o,t._drawingHandler,i,r,s),o.beingDrawn=!0,t.viewer&&t.viewer.raiseEvent("tile-drawn",{tiledImage:t,tile:o});u&&t._drawer.restoreContext(i),r||(t.getRotation(!0)%360!==0&&t._drawer._restoreRotationChanges(i),0!==t.viewport.degrees&&t._drawer._restoreRotationChanges(i)),i&&(r&&(0!==t.viewport.degrees&&t._drawer._offsetForRotation({degrees:t.viewport.degrees,useSketch:!1}),t.getRotation(!0)%360!==0&&t._drawer._offsetForRotation({degrees:t.getRotation(!0),point:t.viewport.pixelFromPointNoRotate(t._getRotationPoint(!0),!0),useSketch:!1})),t._drawer.blendSketch({opacity:t.opacity,scale:r,translate:s,compositeOperation:t.compositeOperation,bounds:a}),r&&(t.getRotation(!0)%360!==0&&t._drawer._restoreRotationChanges(!1),0!==t.viewport.degrees&&t._drawer._restoreRotationChanges(!1))),r||0===t.viewport.degrees&&t.getRotation(!0)%360===0&&t._drawer.viewer.viewport.getFlip()&&t._drawer._flip(),m(t,n)}}function m(t,n){if(t.debugMode)for(var i=n.length-1;i>=0;i--){var r=n[i];try{t._drawer.drawDebugInfo(r,n.length,i,t)}catch(s){e.console.error(s)}}}e.TiledImage=function(t){var n=this;e.console.assert(t.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(t.drawer,"[TiledImage] options.drawer is required"),e.console.assert(t.viewer,"[TiledImage] options.viewer is required"),e.console.assert(t.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(t.source,"[TiledImage] options.source is required"),e.console.assert(!t.clip||t.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=t.tileCache,delete t.tileCache,this._drawer=t.drawer,delete t.drawer,this._imageLoader=t.imageLoader,delete t.imageLoader,t.clip instanceof e.Rect&&(this._clip=t.clip.clone()),delete t.clip;var i=t.x||0;delete t.x;var r=t.y||0;delete t.y,this.normHeight=t.source.dimensions.y/t.source.dimensions.x,this.contentAspectX=t.source.dimensions.x/t.source.dimensions.y;var s=1;t.width?(s=t.width,delete t.width,t.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete t.height)):t.height&&(s=t.height/this.normHeight,delete t.height);var o=t.fitBounds;delete t.fitBounds;var a=t.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete t.fitBoundsPlacement;var c=t.degrees||0;delete t.degrees,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation},t),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:i,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:s,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:c,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),o&&this.fitBounds(o,a,!0),this._drawingHandler=function(t){n.viewer.raiseEvent("tile-drawing",e.extend({tiledImage:n},t))}},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(e){e!==this._fullyLoaded&&(this._fullyLoaded=e,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(){var e=this._xSpring.update(),t=this._ySpring.update(),n=this._scaleSpring.update(),i=this._degreesSpring.update();return!!(e||t||n||i)&&(this._updateForScale(),this._needsDraw=!0,!0)},draw:function(){0!==this.opacity||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(this.getRotation(e),this._getRotationPoint(e))},getBoundsNoRotate:function(t){return t?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(t){var n=this.getBoundsNoRotate(t);if(this._clip){var i=t?this._worldWidthCurrent:this._worldWidthTarget,r=i/this.source.dimensions.x,s=this._clip.times(r);n=new e.Rect(n.x+s.x,n.y+s.y,s.width,s.height)}return n.rotate(this.getRotation(t),this._getRotationPoint(t))},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(t,n,i){var r=i?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t*(this.source.dimensions.x/r),n*(this.source.dimensions.y*this.contentAspectX/r))},viewportToImageCoordinates:function(t,n,i){var r;return t instanceof e.Point?(i=n,r=t):r=new e.Point(t,n),r=r.rotate(-this.getRotation(i),this._getRotationPoint(i)),i?this._viewportToImageDelta(r.x-this._xSpring.current.value,r.y-this._ySpring.current.value):this._viewportToImageDelta(r.x-this._xSpring.target.value,r.y-this._ySpring.target.value)},_imageToViewportDelta:function(t,n,i){var r=i?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t/this.source.dimensions.x*r,n/this.source.dimensions.y/this.contentAspectX*r)},imageToViewportCoordinates:function(t,n,i){t instanceof e.Point&&(i=n,n=t.y,t=t.x);var r=this._imageToViewportDelta(t,n);return i?(r.x+=this._xSpring.current.value,r.y+=this._ySpring.current.value):(r.x+=this._xSpring.target.value,r.y+=this._ySpring.target.value),r.rotate(this.getRotation(i),this._getRotationPoint(i))},imageToViewportRectangle:function(t,n,i,r,s){var o=t;o instanceof e.Rect?s=n:o=new e.Rect(t,n,i,r);var a=this.imageToViewportCoordinates(o.getTopLeft(),s),c=this._imageToViewportDelta(o.width,o.height,s);return new e.Rect(a.x,a.y,c.x,c.y,o.degrees+this.getRotation(s))},viewportToImageRectangle:function(t,n,i,r,s){var o=t;t instanceof e.Rect?s=n:o=new e.Rect(t,n,i,r);var a=this.viewportToImageCoordinates(o.getTopLeft(),s),c=this._viewportToImageDelta(o.width,o.height,s);return new e.Rect(a.x,a.y,c.x,c.y,o.degrees-this.getRotation(s))},viewerElementToImageCoordinates:function(e){var t=this.viewport.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.viewport.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){var t=e.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(t)},imageToWindowCoordinates:function(e){var t=this.imageToViewerElementCoordinates(e);return t.plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(t){var n=this._scaleSpring.current.value;return t=t.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((t.x-this._xSpring.current.value)/n,(t.y-this._ySpring.current.value)/n,t.width/n,t.height/n,t.degrees)},viewportToImageZoom:function(e){var t=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return t*e},imageToViewportZoom:function(e){var t=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return e/t},setPosition:function(e,t){var n=this._xSpring.target.value===e.x&&this._ySpring.target.value===e.y;if(t){if(n&&this._xSpring.current.value===e.x&&this._ySpring.current.value===e.y)return;this._xSpring.resetTo(e.x),this._ySpring.resetTo(e.y),this._needsDraw=!0}else{if(n)return;this._xSpring.springTo(e.x),this._ySpring.springTo(e.y),this._needsDraw=!0}n||this._raiseBoundsChange()},setWidth:function(e,t){this._setScale(e,t)},setHeight:function(e,t){this._setScale(e/this.normHeight,t)},setCroppingPolygons:function(t){var n=function(t){return t instanceof e.Point||"number"===typeof t.x&&"number"===typeof t.y},i=function(e){return e.map((function(e){try{if(n(e))return{x:e.x,y:e.y};throw new Error}catch(t){throw new Error("A Provided cropping polygon point is not supported")}}))};try{if(!e.isArray(t))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=t.map((function(e){return i(e)}))}catch(r){e.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),e.console.error(r),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(t,n,i){n=n||e.Placement.CENTER;var r=e.Placement.properties[n],s=this.contentAspectX,o=0,a=0,c=1,l=1;if(this._clip&&(s=this._clip.getAspectRatio(),c=this._clip.width/this.source.dimensions.x,l=this._clip.height/this.source.dimensions.y,t.getAspectRatio()>s?(o=this._clip.x/this._clip.height*t.height,a=this._clip.y/this._clip.height*t.height):(o=this._clip.x/this._clip.width*t.width,a=this._clip.y/this._clip.width*t.width)),t.getAspectRatio()>s){var u=t.height/l,h=0;r.isHorizontallyCentered?h=(t.width-t.height*s)/2:r.isRight&&(h=t.width-t.height*s),this.setPosition(new e.Point(t.x-o+h,t.y-a),i),this.setHeight(u,i)}else{var d=t.width/c,p=0;r.isVerticallyCentered?p=(t.height-t.width/s)/2:r.isBottom&&(p=t.height-t.width/s),this.setPosition(new e.Point(t.x-o,t.y-a+p),i),this.setWidth(d,i)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(t){e.console.assert(!t||t instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),t instanceof e.Rect?this._clip=t.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(e){e!==this.opacity&&(this.opacity=e,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(e){this._preload=!!e,this._needsDraw=!0},getRotation:function(e){return e?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(e,t){this._degreesSpring.target.value===e&&this._degreesSpring.isAtTargetValue()||(t?this._degreesSpring.resetTo(e):this._degreesSpring.springTo(e),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(e){return this.getBoundsNoRotate(e).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(e){e!==this.compositeOperation&&(this.compositeOperation=e,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(e,t){var n=this._scaleSpring.target.value===e;if(t){if(n&&this._scaleSpring.current.value===e)return;this._scaleSpring.resetTo(e),this._updateForScale(),this._needsDraw=!0}else{if(n)return;this._scaleSpring.springTo(e),this._updateForScale(),this._needsDraw=!0}n||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var e=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),t=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,n=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(t/this.minPixelRatio)/Math.log(2))));return n=Math.max(n,this.source.minLevel||0),e=Math.min(e,n),{lowestLevel:e,highestLevel:n}},_updateViewport:function(){this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};while(this.lastDrawn.length>0){var n=this.lastDrawn.pop();n.beingDrawn=!1}var i=this.viewport,s=this._viewportToTiledImageRectangle(i.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var o=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(s=s.intersection(o),null===s)return}for(var a=this._getLevelsInterval(),c=a.lowestLevel,u=a.highestLevel,h=null,d=!1,p=e.now(),m=u;m>=c;m--){var g=!1,v=i.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(m),!0).x*this._scaleSpring.current.value;if(m===c||!d&&v>=this.minPixelRatio)g=!0,d=!0;else if(!d)continue;var y=i.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(m),!1).x*this._scaleSpring.current.value,T=i.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,E=this.immediateRender?1:T,_=Math.min(1,(v-.5)/.5),b=E/Math.abs(E-y);if(h=t(this,d,g,m,_,b,s,p,h),l(this.coverage,m))break}f(this,this.lastDrawn),h&&!h.context2D?(r(this,h,p),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(0===this._tilesLoading)},_getCornerTiles:function(t,n,i){var r,s,o,a;this.wrapHorizontal?(r=e.positiveModulo(n.x,1),s=e.positiveModulo(i.x,1)):(r=Math.max(0,n.x),s=Math.min(1,i.x));var c=1/this.source.aspectRatio;this.wrapVertical?(o=e.positiveModulo(n.y,c),a=e.positiveModulo(i.y,c)):(o=Math.max(0,n.y),a=Math.min(c,i.y));var l=this.source.getTileAtPoint(t,new e.Point(r,o)),u=this.source.getTileAtPoint(t,new e.Point(s,a)),h=this.source.getNumTiles(t);return this.wrapHorizontal&&(l.x+=h.x*Math.floor(n.x),u.x+=h.x*Math.floor(i.x)),this.wrapVertical&&(l.y+=h.y*Math.floor(n.y/c),u.y+=h.y*Math.floor(i.y/c)),{topLeft:l,bottomRight:u}}})}(OpenSeadragon),function(e){var t=function(t){e.console.assert(t,"[TileCache.cacheTile] options is required"),e.console.assert(t.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(t.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=t.tile,this.tiledImage=t.tiledImage},n=function(t){e.console.assert(t,"[ImageRecord] options is required"),e.console.assert(t.image,"[ImageRecord] options.image is required"),this._image=t.image,this._tiles=[]};n.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var e=document.createElement("canvas");e.width=this._image.width,e.height=this._image.height,this._renderedContext=e.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(t){e.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=t},addTile:function(t){e.console.assert(t,"[ImageRecord.addTile] tile is required"),this._tiles.push(t)},removeTile:function(t){for(var n=0;n<this._tiles.length;n++)if(this._tiles[n]===t)return void this._tiles.splice(n,1);e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",t)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(t){t=t||{},this._maxImageCacheCount=t.maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(i){e.console.assert(i,"[TileCache.cacheTile] options is required"),e.console.assert(i.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(i.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(i.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var r=i.cutoff||0,s=this._tilesLoaded.length,o=this._imagesLoaded[i.tile.cacheKey];if(o||(e.console.assert(i.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),o=this._imagesLoaded[i.tile.cacheKey]=new n({image:i.image}),this._imagesLoadedCount++),o.addTile(i.tile),i.tile.cacheImageRecord=o,this._imagesLoadedCount>this._maxImageCacheCount){for(var a,c,l,u,h,d,p=null,f=-1,m=null,g=this._tilesLoaded.length-1;g>=0;g--)d=this._tilesLoaded[g],a=d.tile,a.level<=r||a.beingDrawn||(p?(u=a.lastTouchTime,c=p.lastTouchTime,h=a.level,l=p.level,(u<c||u==c&&h>l)&&(p=a,f=g,m=d)):(p=a,f=g,m=d));p&&f>=0&&(this._unloadTile(m),s=f)}this._tilesLoaded[s]=new t({tile:i.tile,tiledImage:i.tiledImage})},clearTilesFor:function(t){var n;e.console.assert(t,"[TileCache.clearTilesFor] tiledImage is required");for(var i=0;i<this._tilesLoaded.length;++i)n=this._tilesLoaded[i],n.tiledImage===t&&(this._unloadTile(n),this._tilesLoaded.splice(i,1),i--)},getImageRecord:function(t){return e.console.assert(t,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[t]},_unloadTile:function(t){e.console.assert(t,"[TileCache._unloadTile] tileRecord is required");var n=t.tile,i=t.tiledImage;n.unload(),n.cacheImageRecord=null;var r=this._imagesLoaded[n.cacheKey];r.removeTile(n),r.getTileCount()||(r.destroy(),delete this._imagesLoaded[n.cacheKey],this._imagesLoadedCount--),i.viewer.raiseEvent("tile-unloaded",{tile:n,tiledImage:i})}}}(OpenSeadragon),function(e){e.World=function(t){var n=this;e.console.assert(t.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=t.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(e){n._autoRefigureSizes?n._figureSizes():n._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(t,n){if(e.console.assert(t,"[World.addItem] item is required"),e.console.assert(t instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),n=n||{},void 0!==n.index){var i=Math.max(0,Math.min(this._items.length,n.index));this._items.splice(i,0,t)}else this._items.push(t);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,t.addHandler("bounds-change",this._delegatedFigureSizes),t.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:t})},getItemAt:function(t){return e.console.assert(void 0!==t,"[World.getItemAt] index is required"),this._items[t]},getIndexOfItem:function(t){return e.console.assert(t,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,t)},getItemCount:function(){return this._items.length},setItemIndex:function(t,n){e.console.assert(t,"[World.setItemIndex] item is required"),e.console.assert(void 0!==n,"[World.setItemIndex] index is required");var i=this.getIndexOfItem(t);if(n>=this._items.length)throw new Error("Index bigger than number of layers.");n!==i&&-1!==i&&(this._items.splice(i,1),this._items.splice(n,0,t),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:t,previousIndex:i,newIndex:n}))},removeItem:function(t){e.console.assert(t,"[World.removeItem] item is required");var n=e.indexOf(this._items,t);-1!==n&&(t.removeHandler("bounds-change",this._delegatedFigureSizes),t.removeHandler("clip-change",this._delegatedFigureSizes),t.destroy(),this._items.splice(n,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(t))},removeAll:function(){var e,t;for(this.viewer._cancelPendingImages(),t=0;t<this._items.length;t++)e=this._items[t],e.removeHandler("bounds-change",this._delegatedFigureSizes),e.removeHandler("clip-change",this._delegatedFigureSizes),e.destroy();var n=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,t=0;t<n.length;t++)e=n[t],this._raiseRemoveItem(e)},resetItems:function(){for(var e=0;e<this._items.length;e++)this._items[e].reset()},update:function(){for(var e=!1,t=0;t<this._items.length;t++)e=this._items[t].update()||e;return e},draw:function(){for(var e=0;e<this._items.length;e++)this._items[e].draw();this._needsDraw=!1},needsDraw:function(){for(var e=0;e<this._items.length;e++)if(this._items[e].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(e){this._autoRefigureSizes=e,e&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(t){t=t||{};var n,i=t.immediately||!1,r=t.layout||e.DEFAULT_SETTINGS.collectionLayout,s=t.rows||e.DEFAULT_SETTINGS.collectionRows,o=t.columns||e.DEFAULT_SETTINGS.collectionColumns,a=t.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,c=t.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin,l=a+c;n=!t.rows&&o?o:Math.ceil(this._items.length/s);var u,h,d,p,f,m=0,g=0;this.setAutoRefigureSizes(!1);for(var v=0;v<this._items.length;v++)v&&v%n===0&&("horizontal"===r?(g+=l,m=0):(m+=l,g=0)),u=this._items[v],h=u.getBounds(),d=h.width>h.height?a:a*(h.width/h.height),p=d*(h.height/h.width),f=new e.Point(m+(a-d)/2,g+(a-p)/2),u.setPosition(f,i),u.setWidth(d,i),"horizontal"===r?m+=l:g+=l;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var t=this._homeBounds?this._homeBounds.clone():null,n=this._contentSize?this._contentSize.clone():null,i=this._contentFactor||0;if(this._items.length){var r=this._items[0],s=r.getBounds();this._contentFactor=r.getContentSize().x/s.width;for(var o=r.getClippedBounds().getBoundingBox(),a=o.x,c=o.y,l=o.x+o.width,u=o.y+o.height,h=1;h<this._items.length;h++)r=this._items[h],s=r.getBounds(),this._contentFactor=Math.max(this._contentFactor,r.getContentSize().x/s.width),o=r.getClippedBounds().getBoundingBox(),a=Math.min(a,o.x),c=Math.min(c,o.y),l=Math.max(l,o.x+o.width),u=Math.max(u,o.y+o.height);this._homeBounds=new e.Rect(a,c,l-a,u-c),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;this._contentFactor===i&&this._homeBounds.equals(t)&&this._contentSize.equals(n)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(e){this.raiseEvent("remove-item",{item:e})}})}(OpenSeadragon)},5074:function(e,t,n){var i=n(852)("socket.io-parser"),r=n(5971),s=n(2225),o=n(4634),a=n(8247);function c(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=p;var l=t.ERROR+'"encode error"';function u(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var r=h(e.data);if(!1===r)return l;n+=r}return i("encoded %j as %s",e,n),n}function h(e){try{return JSON.stringify(e)}catch(t){return!1}}function d(e,t){function n(e){var n=s.deconstructPacket(e),i=u(n.packet),r=n.buffers;r.unshift(i),t(r)}s.removeBlobs(e,n)}function p(){this.reconstructor=null}function f(e,t){switch(e){case 0:return"object"===typeof t;case 1:return void 0===t;case 4:return"string"===typeof t||"object"===typeof t;case 2:case 5:return o(t)&&("string"===typeof t[0]||"number"===typeof t[0]);case 3:case 6:return o(t)}}function m(e){var n=0,r={type:Number(e.charAt(0))};if(null==t.types[r.type])return y("unknown packet type "+r.type);if(t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type){var s=n+1;while("-"!==e.charAt(++n)&&n!=e.length);var o=e.substring(s,n);if(o!=Number(o)||"-"!==e.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===e.charAt(n+1)){s=n+1;while(++n){var a=e.charAt(n);if(","===a)break;if(n===e.length)break}r.nsp=e.substring(s,n)}else r.nsp="/";var c=e.charAt(n+1);if(""!==c&&Number(c)==c){s=n+1;while(++n){a=e.charAt(n);if(null==a||Number(a)!=a){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){var l=g(e.substr(n));if(!f(r.type,l))throw new Error("invalid payload");r.data=l}return i("decoded %s as %j",e,r),r}function g(e){try{return JSON.parse(e)}catch(t){return!1}}function v(e){this.reconPack=e,this.buffers=[]}function y(e){return{type:t.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,n){if(i("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)d(e,n);else{var r=u(e);n([r])}},r(p.prototype),p.prototype.add=function(e){var n;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=m(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new v(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n)}else{if(!a(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,this.emit("decoded",n))}},p.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},v.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=s.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},v.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},5089:function(e){"use strict";var t,n=t={_regexEscape:/([\.\*\+\^\$\[\]\\\(\)\|\{\}\,\-\:\?])/g,_regexParseLocale:/^([a-zA-Z]*)([_\-a-zA-Z]*)$/,_escapeRegExpPattern:function(e){return"string"!==typeof e?e:e.replace(t._regexEscape,"\\$1")},_toLowerCase:function(e,t){return"string"!==typeof e?t&&e:e.toLowerCase()},_toUpperCase:function(e,t){return"string"!==typeof e?t&&e:e.toUpperCase()},_trim:function(e,n,i){var r,s=[],o=function(e){s.push("^"+e+"+|"+e+"+$")};if("boolean"===typeof n&&(i=n,n=null),"string"!==typeof e)return i&&e;if(Array.isArray(n)&&n.map((function(e){var n=t._escapeRegExpPattern(e);o(n)})),"string"===typeof n){var a=t._escapeRegExpPattern(n);o(a)}n||o("\\s");var c="("+s.join("|")+")";r=new RegExp(c,"g");while(e.match(r))e=e.replace(r,"");return e},_parseLocale:function(e){var n,i,r,s=t._regexParseLocale.exec(e);if(e&&s)return s[2]=t._trim(s[2],["-","_"]),i=t._toLowerCase(s[1]),r=t._toUpperCase(s[2])||r,n={lang:i,countryCode:r},n},isRtlLang:function(e){var n=t._parseLocale(e);if(n)return t._BIDI_RTL_LANGS.indexOf(n.lang)>=0},getLangDir:function(e){return t.isRtlLang(e)?"rtl":"ltr"}};Object.defineProperty(t,"_BIDI_RTL_LANGS",{value:["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","prs","ps","sd","ug","ur","yi"],writable:!1,enumerable:!0,configurable:!1}),e.exports=n},5660:function(){},5911:function(e,t,n){var i=n(2672),r=n(9140),s=n(3401),o=n(2370),a=n(2121),c=n(6617)("engine.io-client:polling");e.exports=u;var l=function(){var e=n(2934),t=new e({xdomain:!1});return null!=t.responseType}();function u(e){var t=e&&e.forceBase64;l&&!t||(this.supportsBinary=!1),i.call(this,e)}o(u,i),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(e){var t=this;function n(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(c("we are currently polling - waiting to pause"),i++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--i||n()}))),this.writable||(c("we are currently writing - waiting to pause"),i++,this.once("drain",(function(){c("pre-pause writing complete"),--i||n()})))}else n()},u.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(e){var t=this;c("polling got data %s",e);var n=function(e,n,i){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)};s.decodePayload(e,this.socket.binaryType,n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},u.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};s.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,n)}))},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=r.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e);var i=-1!==this.hostname.indexOf(":");return t+"://"+(i?"["+this.hostname+"]":this.hostname)+n+this.path+e}},5971:function(e){function t(e){if(e)return n(e)}function n(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if(n=i[r],n===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){n=n.slice(0);i=0;for(var r=n.length;i<r;++i)n[i].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},6617:function(e,t,n){function i(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type)||("undefined"===typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function r(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var r=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(s=r))})),e.splice(s,0,i)}}function s(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}}function a(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",BASE_URL:"/"}.DEBUG),e}function c(){try{return window.localStorage}catch(e){}}t=e.exports=n(9110),t.log=s,t.formatArgs=r,t.save=o,t.load=a,t.useColors=i,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(a())},6855:function(e,t,n){var i,r,s=n(2672),o=n(3401),a=n(9140),c=n(2370),l=n(2121),u=n(6617)("engine.io-client:websocket");if("undefined"!==typeof WebSocket?i=WebSocket:"undefined"!==typeof self&&(i=self.WebSocket||self.MozWebSocket),"undefined"===typeof window)try{r=n(5660)}catch(p){}var h=i||r;function d(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=i&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(h=r),s.call(this,e)}e.exports=d,c(d,s),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new h(e,t):new h(e):new h(e,t,n)}catch(i){return this.emit("error",i)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},d.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},d.prototype.write=function(e){var t=this;this.writable=!1;for(var n=e.length,i=0,r=n;i<r;i++)(function(e){o.encodePacket(e,t.supportsBinary,(function(i){if(!t.usingBrowserWebSocket){var r={};if(e.options&&(r.compress=e.options.compress),t.perMessageDeflate){var o="string"===typeof i?Buffer.byteLength(i):i.length;o<t.perMessageDeflate.threshold&&(r.compress=!1)}}try{t.usingBrowserWebSocket?t.ws.send(i):t.ws.send(i,r)}catch(p){u("websocket closed before onclose event")}--n||s()}))})(e[i]);function s(){t.emit("flush"),setTimeout((function(){t.writable=!0,t.emit("drain")}),0)}},d.prototype.onClose=function(){s.prototype.onClose.call(this)},d.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()},d.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),e=a.encode(e),e.length&&(e="?"+e);var i=-1!==this.hostname.indexOf(":");return t+"://"+(i?"["+this.hostname+"]":this.hostname)+n+this.path+e},d.prototype.check=function(){return!!h&&!("__initialize"in h&&this.name===d.prototype.name)}},6938:function(e){var t=[].indexOf;e.exports=function(e,n){if(t)return e.indexOf(n);for(var i=0;i<e.length;++i)if(e[i]===n)return i;return-1}},7292:function(e,t,n){var i=n(8520),r=n(5971),s=n(6617)("engine.io-client:socket"),o=n(6938),a=n(3401),c=n(4258),l=n(9140);function u(e,t){if(!(this instanceof u))return new u(e,t);t=t||{},e&&"object"===typeof e&&(t=e,e=null),e?(e=c(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=c(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"===typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||void 0,this.key=t.key||void 0,this.passphrase=t.passphrase||void 0,this.cert=t.cert||void 0,this.ca=t.ca||void 0,this.ciphers=t.ciphers||void 0,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"===typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function h(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}e.exports=u,u.priorWebsocketSuccess=!1,r(u.prototype),u.protocol=a.protocol,u.Socket=u,u.Transport=n(2672),u.transports=n(8520),u.parser=n(3401),u.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=h(this.query);t.EIO=a.protocol,t.transport=e;var n=this.transportOptions[e]||{};this.id&&(t.sid=this.id);var r=new i[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative});return r},u.prototype.open=function(){var e;if(this.rememberUpgrade&&u.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},u.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},u.prototype.probe=function(e){s('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,i=this;function r(){if(i.onlyBinaryUpgrades){var r=!this.supportsBinary&&i.transport.supportsBinary;n=n||r}n||(s('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(r){if(!n)if("pong"===r.type&&"probe"===r.data){if(s('probe transport "%s" pong',e),i.upgrading=!0,i.emit("upgrading",t),!t)return;u.priorWebsocketSuccess="websocket"===t.name,s('pausing current transport "%s"',i.transport.name),i.transport.pause((function(){n||"closed"!==i.readyState&&(s("changing transport and sending upgrade packet"),d(),i.setTransport(t),t.send([{type:"upgrade"}]),i.emit("upgrade",t),t=null,i.upgrading=!1,i.flush())}))}else{s('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=t.name,i.emit("upgradeError",o)}})))}function o(){n||(n=!0,d(),t.close(),t=null)}function a(n){var r=new Error("probe error: "+n);r.transport=t.name,o(),s('probe transport "%s" failed because of error: %s',e,n),i.emit("upgradeError",r)}function c(){a("transport closed")}function l(){a("socket closed")}function h(e){t&&e.name!==t.name&&(s('"%s" works - aborting "%s"',e.name,t.name),o())}function d(){t.removeListener("open",r),t.removeListener("error",a),t.removeListener("close",c),i.removeListener("close",l),i.removeListener("upgrading",h)}u.priorWebsocketSuccess=!1,t.once("open",r),t.once("error",a),t.once("close",c),this.once("close",l),this.once("upgrading",h),t.open()},u.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",u.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},u.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data);break}else s('packet received with socket readyState "%s"',this.readyState)},u.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},u.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},u.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},u.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},u.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},u.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},u.prototype.write=u.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},u.prototype.sendPacket=function(e,t,n,i){if("function"===typeof t&&(i=t,t=void 0),"function"===typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var r={type:e,data:t,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}},u.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?i():t()})):this.upgrading?i():t()}function t(){e.onClose("forced close"),s("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function i(){e.once("upgrade",n),e.once("upgradeError",n)}return this},u.prototype.onError=function(e){s("socket error %j",e),u.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},u.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){s('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},u.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;n<i;n++)~o(this.transports,e[n])&&t.push(e[n]);return t}},7316:function(){
/*! (c) Andrea Giammarchi @webreflection ISC */
(function(){"use strict";var e=function(e,t){var n=function(e){for(var t=0,n=e.length;t<n;t++)i(e[t])},i=function(e){var t=e.target,n=e.attributeName,i=e.oldValue;t.attributeChangedCallback(n,i,t.getAttribute(n))};return function(r,s){var o=r.constructor.observedAttributes;return o&&e(s).then((function(){new t(n).observe(r,{attributes:!0,attributeOldValue:!0,attributeFilter:o});for(var e=0,s=o.length;e<s;e++)r.hasAttribute(o[e])&&i({target:r,attributeName:o[e],oldValue:null})})),r}};function t(e,t){if(e){if("string"===typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function i(e,n){var i="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=t(e))||n&&e&&"number"===typeof e.length){i&&(e=i);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(c)throw o}}}}
/*! (c) Andrea Giammarchi - ISC */var r=!0,s=!1,o="querySelectorAll",a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:MutationObserver,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["*"],c=function t(n,s,a,c,l,u){var h,d=i(n);try{for(d.s();!(h=d.n()).done;){var p=h.value;(u||o in p)&&(l?a.has(p)||(a.add(p),c["delete"](p),e(p,l)):c.has(p)||(c.add(p),a["delete"](p),e(p,l)),u||t(p[o](s),s,a,c,l,r))}}catch(f){d.e(f)}finally{d.f()}},l=new n((function(e){if(a.length){var t,n=a.join(","),o=new Set,l=new Set,u=i(e);try{for(u.s();!(t=u.n()).done;){var h=t.value,d=h.addedNodes,p=h.removedNodes;c(p,n,o,l,s,s),c(d,n,o,l,r,s)}}catch(f){u.e(f)}finally{u.f()}}})),u=l.observe;return(l.observe=function(e){return u.call(l,e,{subtree:r,childList:r})})(t),l},c="querySelectorAll",l=self,u=l.document,h=l.Element,d=l.MutationObserver,p=l.Set,f=l.WeakMap,m=function(e){return c in e},g=[].filter,v=function(e){var t=new f,n=function(e){for(var n=0,i=e.length;n<i;n++)t["delete"](e[n])},i=function(){for(var e=y.takeRecords(),t=0,n=e.length;t<n;t++)o(g.call(e[t].removedNodes,m),!1),o(g.call(e[t].addedNodes,m),!0)},r=function(e){return e.matches||e.webkitMatchesSelector||e.msMatchesSelector},s=function(n,i){var s;if(i)for(var o,a=r(n),c=0,u=l.length;c<u;c++)a.call(n,o=l[c])&&(t.has(n)||t.set(n,new p),s=t.get(n),s.has(o)||(s.add(o),e.handle(n,i,o)));else t.has(n)&&(s=t.get(n),t["delete"](n),s.forEach((function(t){e.handle(n,i,t)})))},o=function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0,i=e.length;n<i;n++)s(e[n],t)},l=e.query,v=e.root||u,y=a(s,v,d,l),T=h.prototype.attachShadow;return T&&(h.prototype.attachShadow=function(e){var t=T.call(this,e);return y.observe(t),t}),l.length&&o(v[c](l)),{drop:n,flush:i,observer:y,parse:o}},y=self,T=y.document,E=y.Map,_=y.MutationObserver,b=y.Object,w=y.Set,S=y.WeakMap,A=y.Element,C=y.HTMLElement,x=y.Node,I=y.Error,N=y.TypeError,k=y.Reflect,O=b.defineProperty,R=b.keys,D=b.getOwnPropertyNames,P=b.setPrototypeOf,L=!self.customElements,M=function(e){for(var t=R(e),n=[],i=new w,r=t.length,s=0;s<r;s++){n[s]=e[t[s]];try{delete e[t[s]]}catch(o){i.add(s)}}return function(){for(var s=0;s<r;s++)i.has(s)||(e[t[s]]=n[s])}};if(L){var B=function(){var e=this.constructor;if(!H.has(e))throw new N("Illegal constructor");var t=H.get(e);if(W)return X(W,t);var n=F.call(T,t);return X(P(n,e.prototype),t)},F=T.createElement,H=new E,U=new E,q=new E,G=new E,$=[],z=function(e,t,n){var i=q.get(n);if(t&&!i.isPrototypeOf(e)){var r=M(e);W=P(e,i);try{new i.constructor}finally{W=null,r()}}var s="".concat(t?"":"dis","connectedCallback");s in i&&e[s]()},j=v({query:$,handle:z}),V=j.parse,W=null,Y=function(e){if(!U.has(e)){var t,n=new Promise((function(e){t=e}));U.set(e,{$:n,_:t})}return U.get(e).$},X=e(Y,_);self.customElements={define:function(e,t){if(G.has(e))throw new I('the name "'.concat(e,'" has already been used with this registry'));H.set(t,e),q.set(e,t.prototype),G.set(e,t),$.push(e),Y(e).then((function(){V(T.querySelectorAll(e))})),U.get(e)._(t)},get:function(e){return G.get(e)},whenDefined:Y},O(B.prototype=C.prototype,"constructor",{value:B}),self.HTMLElement=B,T.createElement=function(e,t){var n=t&&t.is,i=n?G.get(n):G.get(e);return i?new i:F.call(T,e)},"isConnected"in x.prototype||O(x.prototype,"isConnected",{configurable:!0,get:function(){return!(this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}else if(L=!self.customElements.get("extends-br"),L)try{var K=function e(){return self.Reflect.construct(HTMLBRElement,[],e)};K.prototype=HTMLLIElement.prototype;var Q="extends-br";self.customElements.define("extends-br",K,{extends:"br"}),L=T.createElement("br",{is:Q}).outerHTML.indexOf(Q)<0;var Z=self.customElements,J=Z.get,ee=Z.whenDefined;self.customElements.whenDefined=function(e){var t=this;return ee.call(this,e).then((function(n){return n||J.call(t,e)}))}}catch(xe){}if(L){var te=function(e){var t=le.get(e);Ee(t.querySelectorAll(this),e.isConnected)},ne=self.customElements,ie=T.createElement,re=ne.define,se=ne.get,oe=ne.upgrade,ae=k||{construct:function(e){return e.call(this)}},ce=ae.construct,le=new S,ue=new w,he=new E,de=new E,pe=new E,fe=new E,me=[],ge=[],ve=function(e){return fe.get(e)||se.call(ne,e)},ye=function(e,t,n){var i=pe.get(n);if(t&&!i.isPrototypeOf(e)){var r=M(e);Ce=P(e,i);try{new i.constructor}finally{Ce=null,r()}}var s="".concat(t?"":"dis","connectedCallback");s in i&&e[s]()},Te=v({query:ge,handle:ye}),Ee=Te.parse,_e=v({query:me,handle:function(e,t){le.has(e)&&(t?ue.add(e):ue["delete"](e),ge.length&&te.call(ge,e))}}),be=_e.parse,we=A.prototype.attachShadow;we&&(A.prototype.attachShadow=function(e){var t=we.call(this,e);return le.set(this,t),t});var Se=function(e){if(!de.has(e)){var t,n=new Promise((function(e){t=e}));de.set(e,{$:n,_:t})}return de.get(e).$},Ae=e(Se,_),Ce=null;D(self).filter((function(e){return/^HTML.*Element$/.test(e)})).forEach((function(e){var t=self[e];function n(){var e=this.constructor;if(!he.has(e))throw new N("Illegal constructor");var n=he.get(e),i=n.is,r=n.tag;if(i){if(Ce)return Ae(Ce,i);var s=ie.call(T,r);return s.setAttribute("is",i),Ae(P(s,e.prototype),i)}return ce.call(this,t,[],e)}O(n.prototype=t.prototype,"constructor",{value:n}),O(self,e,{value:n})})),T.createElement=function(e,t){var n=t&&t.is;if(n){var i=fe.get(n);if(i&&he.get(i).tag===e)return new i}var r=ie.call(T,e);return n&&r.setAttribute("is",n),r},ne.get=ve,ne.whenDefined=Se,ne.upgrade=function(e){var t=e.getAttribute("is");if(t){var n=fe.get(t);if(n)return void Ae(P(e,n.prototype),t)}oe.call(ne,e)},ne.define=function(e,t,n){if(ve(e))throw new I("'".concat(e,"' has already been defined as a custom element"));var i,r=n&&n["extends"];he.set(t,r?{is:e,tag:r}:{is:"",tag:e}),r?(i="".concat(r,'[is="').concat(e,'"]'),pe.set(i,t.prototype),fe.set(e,t),ge.push(i)):(re.apply(ne,arguments),me.push(i=e)),Se(e).then((function(){r?(Ee(T.querySelectorAll(i)),ue.forEach(te,[i])):be(T.querySelectorAll(i))})),de.get(e)._(t)}}})()},7698:function(e,t,n){var i=n(9331),r=n(5074),s=n(9725),o=n(9368)("socket.io-client");e.exports=t=c;var a=t.managers={};function c(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};var n,r=i(e),c=r.source,l=r.id,u=r.path,h=a[l]&&u in a[l].nsps,d=t.forceNew||t["force new connection"]||!1===t.multiplex||h;return d?(o("ignoring socket cache for %s",c),n=s(c,t)):(a[l]||(o("new io instance for %s",c),a[l]=s(c,t)),n=a[l]),r.query&&!t.query&&(t.query=r.query),n.socket(r.path,t)}t.protocol=r.protocol,t.connect=c,t.Manager=n(9725),t.Socket=n(7773)},7773:function(e,t,n){var i=n(5074),r=n(5971),s=n(8104),o=n(4745),a=n(8144),c=n(9368)("socket.io-client:socket"),l=n(9140),u=n(8839);e.exports=p;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=r.prototype.emit;function p(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}r(p.prototype),p.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[o(e,"open",a(this,"onopen")),o(e,"packet",a(this,"onpacket")),o(e,"close",a(this,"onclose"))]}},p.prototype.open=p.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},p.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},p.prototype.emit=function(e){if(h.hasOwnProperty(e))return d.apply(this,arguments),this;var t=s(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:u(t))?i.BINARY_EVENT:i.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"===typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},p.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},p.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"===typeof this.query?l.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:i.CONNECT,query:e})}else this.packet({type:i.CONNECT})},p.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},p.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===i.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(e);break;case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:this.onack(e);break;case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data);break}},p.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},p.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=s(arguments);c("sending ack %j",r),t.packet({type:u(r)?i.BINARY_ACK:i.ACK,id:e,data:r})}}},p.prototype.onack=function(e){var t=this.acks[e.id];"function"===typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emit("connect")},p.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},p.prototype.compress=function(e){return this.flags.compress=e,this},p.prototype.binary=function(e){return this.flags.binary=e,this}},8104:function(e){function t(e,t){var n=[];t=t||0;for(var i=t||0;i<e.length;i++)n[i-t]=e[i];return n}e.exports=t},8144:function(e){var t=[].slice;e.exports=function(e,n){if("string"==typeof n&&(n=e[n]),"function"!=typeof n)throw new Error("bind() requires a function");var i=t.call(arguments,2);return function(){return n.apply(e,i.concat(t.call(arguments)))}}},8247:function(e){e.exports=r;var t="function"===typeof Buffer&&"function"===typeof Buffer.isBuffer,n="function"===typeof ArrayBuffer,i=function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer};function r(e){return t&&Buffer.isBuffer(e)||n&&(e instanceof ArrayBuffer||i(e))}},8383:function(e){try{e.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},8395:function(e,t,n){"use strict";var i=n(5089);e.exports={isRtlLang:i.isRtlLang,getLangDir:i.getLangDir}},8520:function(e,t,n){var i=n(2934),r=n(9332),s=n(2252),o=n(6855);function a(e){var t,n=!1,o=!1,a=!1!==e.jsonp;if("undefined"!==typeof location){var c="https:"===location.protocol,l=location.port;l||(l=c?443:80),n=e.hostname!==location.hostname||l!==e.port,o=e.secure!==c}if(e.xdomain=n,e.xscheme=o,t=new i(e),"open"in t&&!e.forceJSONP)return new r(e);if(!a)throw new Error("JSONP disabled");return new s(e)}t.polling=a,t.websocket=o},8758:function(e){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var t,n,i,r=String.fromCharCode;function s(e){var t,n,i=[],r=0,s=e.length;while(r<s)t=e.charCodeAt(r++),t>=55296&&t<=56319&&r<s?(n=e.charCodeAt(r++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--)):i.push(t);return i}function o(e){var t,n=e.length,i=-1,s="";while(++i<n)t=e[i],t>65535&&(t-=65536,s+=r(t>>>10&1023|55296),t=56320|1023&t),s+=r(t);return s}function a(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(e,t){return r(e>>t&63|128)}function l(e,t){if(0==(4294967168&e))return r(e);var n="";return 0==(4294965248&e)?n=r(e>>6&31|192):0==(4294901760&e)?(a(e,t)||(e=65533),n=r(e>>12&15|224),n+=c(e,6)):0==(4292870144&e)&&(n=r(e>>18&7|240),n+=c(e,12),n+=c(e,6)),n+=r(63&e|128),n}function u(e,t){t=t||{};var n,i=!1!==t.strict,r=s(e),o=r.length,a=-1,c="";while(++a<o)n=r[a],c+=l(n,i);return c}function h(){if(i>=n)throw Error("Invalid byte index");var e=255&t[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(e){var r,s,o,c,l;if(i>n)throw Error("Invalid byte index");if(i==n)return!1;if(r=255&t[i],i++,0==(128&r))return r;if(192==(224&r)){if(s=h(),l=(31&r)<<6|s,l>=128)return l;throw Error("Invalid continuation byte")}if(224==(240&r)){if(s=h(),o=h(),l=(15&r)<<12|s<<6|o,l>=2048)return a(l,e)?l:65533;throw Error("Invalid continuation byte")}if(240==(248&r)&&(s=h(),o=h(),c=h(),l=(7&r)<<18|s<<12|o<<6|c,l>=65536&&l<=1114111))return l;throw Error("Invalid UTF-8 detected")}function p(e,r){r=r||{};var a=!1!==r.strict;t=s(e),n=t.length,i=0;var c,l=[];while(!1!==(c=d(a)))l.push(c);return o(l)}e.exports={version:"2.1.2",encode:u,decode:p}},8839:function(e,t,n){var i=n(4634),r=Object.prototype.toString,s="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===r.call(Blob),o="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===r.call(File);function a(e){if(!e||"object"!==typeof e)return!1;if(i(e)){for(var t=0,n=e.length;t<n;t++)if(a(e[t]))return!0;return!1}if("function"===typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e)||"function"===typeof ArrayBuffer&&e instanceof ArrayBuffer||s&&e instanceof Blob||o&&e instanceof File)return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return a(e.toJSON(),!0);for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&a(e[r]))return!0;return!1}e.exports=a},9110:function(e,t,n){function i(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,s=i-(n||i);e.diff=s,e.prev=n,e.curr=i,n=i;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=t.coerce(o[0]),"string"!==typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;c++;var r=t.formatters[i];if("function"===typeof r){var s=o[c];n=r.call(e,s),o.splice(c,1),c--}return n})),t.formatArgs.call(e,o);var l=r.log||t.log||console.log.bind(console);l.apply(e,o)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=i(e),r.destroy=s,"function"===typeof t.init&&t.init(r),t.instances.push(r),r}function s(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function o(e){var n;t.save(e),t.names=[],t.skips=[];var i=("string"===typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&(e=i[n].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var s=t.instances[n];s.enabled=t.enabled(s.namespace)}}function a(){t.enable("")}function c(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=r.debug=r["default"]=r,t.coerce=l,t.disable=a,t.enable=o,t.enabled=c,t.humanize=n(3097),t.instances=[],t.names=[],t.skips=[],t.formatters={}},9140:function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,r=n.length;i<r;i++){var s=n[i].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}},9331:function(e,t,n){var i=n(4258),r=n(9368)("socket.io-client:url");function s(e,t){var n=e;t=t||"undefined"!==typeof location&&location,null==e&&(e=t.protocol+"//"+t.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(r("protocol-less url %s",e),e="undefined"!==typeof t?t.protocol+"//"+e:"https://"+e),r("parse %s",e),n=i(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var s=-1!==n.host.indexOf(":"),o=s?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(t&&t.port===n.port?"":":"+n.port),n}e.exports=s},9332:function(e,t,n){var i=n(2934),r=n(5911),s=n(5971),o=n(2370),a=n(6617)("engine.io-client:polling-xhr"),c=n(104);function l(){}function u(e){if(r.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!==typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function h(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=u,e.exports.Request=h,o(u,r),u.prototype.supportsBinary=!0,u.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new h(e)},u.prototype.doWrite=function(e,t){var n="string"!==typeof e&&void 0!==e,i=this.request({method:"POST",data:e,isBinary:n}),r=this;i.on("success",t),i.on("error",(function(e){r.onError("xhr post error",e)})),this.sendXhr=i},u.prototype.doPoll=function(){a("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},s(h.prototype),h.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new i(e),n=this;try{a("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.extraHeaders[r])}catch(s){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}try{t.setRequestHeader("Accept","*/*")}catch(s){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(s){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"===typeof t.status?t.status:0)}),0))},a("xhr data %s",this.data),t.send(this.data)}catch(s){return void setTimeout((function(){n.onError(s)}),0)}"undefined"!==typeof document&&(this.index=h.requestsCount++,h.requests[this.index]=this)},h.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},h.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},h.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},h.prototype.cleanup=function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete h.requests[this.index],this.xhr=null}},h.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(n){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},h.prototype.hasXDR=function(){return"undefined"!==typeof XDomainRequest&&!this.xs&&this.enablesXDR},h.prototype.abort=function(){this.cleanup()},h.requestsCount=0,h.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",p);else if("function"===typeof addEventListener){var d="onpagehide"in c?"pagehide":"unload";addEventListener(d,p,!1)}function p(){for(var e in h.requests)h.requests.hasOwnProperty(e)&&h.requests[e].abort()}},9368:function(e,t,n){function i(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type)||("undefined"===typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function r(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var r=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(s=r))})),e.splice(s,0,i)}}function s(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}}function a(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",BASE_URL:"/"}.DEBUG),e}function c(){try{return window.localStorage}catch(e){}}t=e.exports=n(9939),t.log=s,t.formatArgs=r,t.save=o,t.load=a,t.useColors=i,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(a())},9725:function(e,t,n){var i=n(3357),r=n(7773),s=n(5971),o=n(5074),a=n(4745),c=n(8144),l=n(9368)("socket.io-client:manager"),u=n(6938),h=n(3059),d=Object.prototype.hasOwnProperty;function p(e,t){if(!(this instanceof p))return new p(e,t);e&&"object"===typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||o;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=p,p.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)d.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},p.prototype.updateSocketIds=function(){for(var e in this.nsps)d.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},p.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},s(p.prototype),p.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},p.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},p.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},p.prototype.open=p.prototype.connect=function(e,t){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var s=a(n,"open",(function(){r.onopen(),e&&e()})),o=a(n,"error",(function(t){if(l("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;l("connect attempt will timeout after %d",c),0===c&&s.destroy();var u=setTimeout((function(){l("connect attempt timed out after %d",c),s.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(s),this.subs.push(o),this},p.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",c(this,"ondata"))),this.subs.push(a(e,"ping",c(this,"onping"))),this.subs.push(a(e,"pong",c(this,"onpong"))),this.subs.push(a(e,"error",c(this,"onerror"))),this.subs.push(a(e,"close",c(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",c(this,"ondecoded")))},p.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},p.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},p.prototype.ondata=function(e){this.decoder.add(e)},p.prototype.ondecoded=function(e){this.emit("packet",e)},p.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},p.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new r(this,e,t),this.nsps[e]=n;var i=this;n.on("connecting",s),n.on("connect",(function(){n.id=i.generateId(e)})),this.autoConnect&&s()}function s(){~u(i.connecting,n)||i.connecting.push(n)}return n},p.prototype.destroy=function(e){var t=u(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},p.prototype.packet=function(e){l("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var i=0;i<n.length;i++)t.engine.write(n[i],e.options);t.encoding=!1,t.processPacketQueue()})))},p.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},p.prototype.cleanup=function(){l("cleanup");for(var e=this.subs.length,t=0;t<e;t++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(e){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();l("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(l("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(l("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(l("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},p.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},9939:function(e,t,n){function i(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,s=i-(n||i);e.diff=s,e.prev=n,e.curr=i,n=i;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=t.coerce(o[0]),"string"!==typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;c++;var r=t.formatters[i];if("function"===typeof r){var s=o[c];n=r.call(e,s),o.splice(c,1),c--}return n})),t.formatArgs.call(e,o);var l=r.log||t.log||console.log.bind(console);l.apply(e,o)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=i(e),r.destroy=s,"function"===typeof t.init&&t.init(r),t.instances.push(r),r}function s(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function o(e){var n;t.save(e),t.names=[],t.skips=[];var i=("string"===typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&(e=i[n].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var s=t.instances[n];s.enabled=t.enabled(s.namespace)}}function a(){t.enable("")}function c(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=r.debug=r["default"]=r,t.coerce=l,t.disable=a,t.enable=o,t.enabled=c,t.humanize=n(2902),t.instances=[],t.names=[],t.skips=[],t.formatters={}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}!function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}();var __webpack_exports__={};!function(){"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{hasBrowserEnv:function(){return gl},hasStandardBrowserEnv:function(){return yl},hasStandardBrowserWebWorkerEnv:function(){return Tl},navigator:function(){return vl},origin:function(){return El}});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{DocumentPosition:function(){return rp},append:function(){return Fd},appendChild:function(){return Bd},compareDocumentPosition:function(){return sp},existsOne:function(){return jd},filter:function(){return qd},find:function(){return Gd},findAll:function(){return Vd},findOne:function(){return zd},findOneChild:function(){return $d},getAttributeValue:function(){return kd},getChildren:function(){return xd},getElementById:function(){return Jd},getElements:function(){return Zd},getElementsByClassName:function(){return tp},getElementsByTagName:function(){return ep},getElementsByTagType:function(){return np},getFeed:function(){return ap},getInnerHTML:function(){return wd},getName:function(){return Rd},getOuterHTML:function(){return bd},getParent:function(){return Id},getSiblings:function(){return Nd},getText:function(){return Sd},hasAttrib:function(){return Od},hasChildren:function(){return xh},innerText:function(){return Cd},isCDATA:function(){return bh},isComment:function(){return Sh},isDocument:function(){return Ch},isTag:function(){return _h},isText:function(){return wh},nextElementSibling:function(){return Dd},prepend:function(){return Ud},prependChild:function(){return Hd},prevElementSibling:function(){return Pd},removeElement:function(){return Ld},removeSubsets:function(){return ip},replaceElement:function(){return Md},testElement:function(){return Qd},textContent:function(){return Ad},uniqueSort:function(){return op}});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{contains:function(){return Sp},html:function(){return Tp},merge:function(){return Ap},parseHTML:function(){return bp},root:function(){return wp},text:function(){return _p},xml:function(){return Ep}});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{addClass:function(){return ef},attr:function(){return Gp},data:function(){return Yp},hasClass:function(){return Jp},prop:function(){return jp},removeAttr:function(){return Zp},removeClass:function(){return tf},toggleClass:function(){return nf},val:function(){return Xp}});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{add:function(){return fg},addBack:function(){return mg},children:function(){return Km},closest:function(){return Gm},contents:function(){return Qm},each:function(){return Zm},end:function(){return pg},eq:function(){return cg},filter:function(){return tg},filterArray:function(){return ng},find:function(){return Dm},first:function(){return og},get:function(){return lg},has:function(){return sg},index:function(){return hg},is:function(){return ig},last:function(){return ag},map:function(){return Jm},next:function(){return $m},nextAll:function(){return zm},nextUntil:function(){return jm},not:function(){return rg},parent:function(){return Hm},parents:function(){return Um},parentsUntil:function(){return qm},prev:function(){return Vm},prevAll:function(){return Wm},prevUntil:function(){return Ym},siblings:function(){return Xm},slice:function(){return dg},toArray:function(){return ug}});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{_makeDomArray:function(){return yg},after:function(){return kg},append:function(){return wg},appendTo:function(){return _g},before:function(){return Rg},clone:function(){return Ug},empty:function(){return Mg},html:function(){return Bg},insertAfter:function(){return Og},insertBefore:function(){return Dg},prepend:function(){return Sg},prependTo:function(){return bg},remove:function(){return Pg},replaceWith:function(){return Lg},text:function(){return Hg},toString:function(){return Fg},unwrap:function(){return Ig},wrap:function(){return Cg},wrapAll:function(){return Ng},wrapInner:function(){return xg}});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{css:function(){return qg}});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{serialize:function(){return Xg},serializeArray:function(){return Kg}});__webpack_require__(7316);var c=Object.freeze({}),l=Array.isArray;function u(e){return void 0===e||null===e}function h(e){return void 0!==e&&null!==e}function d(e){return!0===e}function p(e){return!1===e}function f(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function m(e){return"function"===typeof e}function g(e){return null!==e&&"object"===typeof e}var v=Object.prototype.toString;function y(e){return"[object Object]"===v.call(e)}function T(e){return"[object RegExp]"===v.call(e)}function E(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function _(e){return h(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function b(e){return null==e?"":Array.isArray(e)||y(e)&&e.toString===v?JSON.stringify(e,w,2):String(e)}function w(e,t){return t&&t.__v_isRef?t.value:t}function S(e){var t=parseFloat(e);return isNaN(t)?e:t}function A(e,t){for(var n=Object.create(null),i=e.split(","),r=0;r<i.length;r++)n[i[r]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}A("slot,component",!0);var C=A("key,ref,slot,slot-scope,is");function x(e,t){var n=e.length;if(n){if(t===e[n-1])return void(e.length=n-1);var i=e.indexOf(t);if(i>-1)return e.splice(i,1)}}var I=Object.prototype.hasOwnProperty;function N(e,t){return I.call(e,t)}function k(e){var t=Object.create(null);return function(n){var i=t[n];return i||(t[n]=e(n))}}var O=/-(\w)/g,R=k((function(e){return e.replace(O,(function(e,t){return t?t.toUpperCase():""}))})),D=k((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),P=/\B([A-Z])/g,M=k((function(e){return e.replace(P,"-$1").toLowerCase()}));function B(e,t){function n(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function F(e,t){return e.bind(t)}var H=Function.prototype.bind?F:B;function U(e,t){t=t||0;var n=e.length-t,i=new Array(n);while(n--)i[n]=e[n+t];return i}function q(e,t){for(var n in t)e[n]=t[n];return e}function G(e){for(var t={},n=0;n<e.length;n++)e[n]&&q(t,e[n]);return t}function $(e,t,n){}var z=function(e,t,n){return!1},j=function(e){return e};function V(e,t){if(e===t)return!0;var n=g(e),i=g(t);if(!n||!i)return!n&&!i&&String(e)===String(t);try{var r=Array.isArray(e),s=Array.isArray(t);if(r&&s)return e.length===t.length&&e.every((function(e,n){return V(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(r||s)return!1;var o=Object.keys(e),a=Object.keys(t);return o.length===a.length&&o.every((function(n){return V(e[n],t[n])}))}catch(c){return!1}}function W(e,t){for(var n=0;n<e.length;n++)if(V(e[n],t))return n;return-1}function Y(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}function X(e,t){return e===t?0===e&&1/e!==1/t:e===e||t===t}var K="data-server-rendered",Q=["component","directive","filter"],Z=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],J={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:z,isReservedAttr:z,isUnknownElement:z,getTagNamespace:$,parsePlatformTagName:j,mustUseProp:z,async:!0,_lifecycleHooks:Z},ee=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function te(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function ne(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var ie=new RegExp("[^".concat(ee.source,".$_\\d]"));function re(e){if(!ie.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var se="__proto__"in{},oe="undefined"!==typeof window,ae=oe&&window.navigator.userAgent.toLowerCase(),ce=ae&&/msie|trident/.test(ae),le=ae&&ae.indexOf("msie 9.0")>0,ue=ae&&ae.indexOf("edge/")>0;ae&&ae.indexOf("android");var he=ae&&/iphone|ipad|ipod|ios/.test(ae);ae&&/chrome\/\d+/.test(ae),ae&&/phantomjs/.test(ae);var de,pe=ae&&ae.match(/firefox\/(\d+)/),fe={}.watch,me=!1;if(oe)try{var ge={};Object.defineProperty(ge,"passive",{get:function(){me=!0}}),window.addEventListener("test-passive",null,ge)}catch(lS){}var ve=function(){return void 0===de&&(de=!oe&&"undefined"!==typeof __webpack_require__.g&&(__webpack_require__.g["process"]&&"server"===__webpack_require__.g["process"].env.VUE_ENV)),de},ye=oe&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function Te(e){return"function"===typeof e&&/native code/.test(e.toString())}var Ee,_e="undefined"!==typeof Symbol&&Te(Symbol)&&"undefined"!==typeof Reflect&&Te(Reflect.ownKeys);Ee="undefined"!==typeof Set&&Te(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var be=null;function we(e){void 0===e&&(e=null),e||be&&be._scope.off(),be=e,e&&e._scope.on()}var Se=function(){function e(e,t,n,i,r,s,o,a){this.tag=e,this.data=t,this.children=n,this.text=i,this.elm=r,this.ns=void 0,this.context=s,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(e.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),e}(),Ae=function(e){void 0===e&&(e="");var t=new Se;return t.text=e,t.isComment=!0,t};function Ce(e){return new Se(void 0,void 0,void 0,String(e))}function xe(e){var t=new Se(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}"function"===typeof SuppressedError&&SuppressedError;var Ie=0,Ne=[],ke=function(){for(var e=0;e<Ne.length;e++){var t=Ne[e];t.subs=t.subs.filter((function(e){return e})),t._pending=!1}Ne.length=0},Oe=function(){function e(){this._pending=!1,this.id=Ie++,this.subs=[]}return e.prototype.addSub=function(e){this.subs.push(e)},e.prototype.removeSub=function(e){this.subs[this.subs.indexOf(e)]=null,this._pending||(this._pending=!0,Ne.push(this))},e.prototype.depend=function(t){e.target&&e.target.addDep(this)},e.prototype.notify=function(e){var t=this.subs.filter((function(e){return e}));for(var n=0,i=t.length;n<i;n++){var r=t[n];0,r.update()}},e}();Oe.target=null;var Re=[];function De(e){Re.push(e),Oe.target=e}function Pe(){Re.pop(),Oe.target=Re[Re.length-1]}var Le=Array.prototype,Me=Object.create(Le),Be=["push","pop","shift","unshift","splice","sort","reverse"];Be.forEach((function(e){var t=Le[e];ne(Me,e,(function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r,s=t.apply(this,n),o=this.__ob__;switch(e){case"push":case"unshift":r=n;break;case"splice":r=n.slice(2);break}return r&&o.observeArray(r),o.dep.notify(),s}))}));var Fe=Object.getOwnPropertyNames(Me),He={},Ue=!0;function qe(e){Ue=e}var Ge={notify:$,depend:$,addSub:$,removeSub:$},$e=function(){function e(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),this.value=e,this.shallow=t,this.mock=n,this.dep=n?Ge:new Oe,this.vmCount=0,ne(e,"__ob__",this),l(e)){if(!n)if(se)e.__proto__=Me;else for(var i=0,r=Fe.length;i<r;i++){var s=Fe[i];ne(e,s,Me[s])}t||this.observeArray(e)}else{var o=Object.keys(e);for(i=0;i<o.length;i++){s=o[i];je(e,s,He,void 0,t,n)}}}return e.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)ze(e[t],!1,this.mock)},e}();function ze(e,t,n){return e&&N(e,"__ob__")&&e.__ob__ instanceof $e?e.__ob__:!Ue||!n&&ve()||!l(e)&&!y(e)||!Object.isExtensible(e)||e.__v_skip||Ze(e)||e instanceof Se?void 0:new $e(e,t,n)}function je(e,t,n,i,r,s,o){void 0===o&&(o=!1);var a=new Oe,c=Object.getOwnPropertyDescriptor(e,t);if(!c||!1!==c.configurable){var u=c&&c.get,h=c&&c.set;u&&!h||n!==He&&2!==arguments.length||(n=e[t]);var d=r?n&&n.__ob__:ze(n,!1,s);return Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=u?u.call(e):n;return Oe.target&&(a.depend(),d&&(d.dep.depend(),l(t)&&Ye(t))),Ze(t)&&!r?t.value:t},set:function(t){var i=u?u.call(e):n;if(X(i,t)){if(h)h.call(e,t);else{if(u)return;if(!r&&Ze(i)&&!Ze(t))return void(i.value=t);n=t}d=r?t&&t.__ob__:ze(t,!1,s),a.notify()}}}),a}}function Ve(e,t,n){if(!Qe(e)){var i=e.__ob__;return l(e)&&E(t)?(e.length=Math.max(e.length,t),e.splice(t,1,n),i&&!i.shallow&&i.mock&&ze(n,!1,!0),n):t in e&&!(t in Object.prototype)?(e[t]=n,n):e._isVue||i&&i.vmCount?n:i?(je(i.value,t,n,void 0,i.shallow,i.mock),i.dep.notify(),n):(e[t]=n,n)}}function We(e,t){if(l(e)&&E(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||Qe(e)||N(e,t)&&(delete e[t],n&&n.dep.notify())}}function Ye(e){for(var t=void 0,n=0,i=e.length;n<i;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),l(t)&&Ye(t)}function Xe(e){return Ke(e,!0),ne(e,"__v_isShallow",!0),e}function Ke(e,t){if(!Qe(e)){ze(e,t,ve());0}}function Qe(e){return!(!e||!e.__v_isReadonly)}function Ze(e){return!(!e||!0!==e.__v_isRef)}function Je(e,t,n){Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){var e=t[n];if(Ze(e))return e.value;var i=e&&e.__ob__;return i&&i.dep.depend(),e},set:function(e){var i=t[n];Ze(i)&&!Ze(e)?i.value=e:t[n]=e}})}var et="watcher";"".concat(et," callback"),"".concat(et," getter"),"".concat(et," cleanup");var tt;var nt=function(){function e(e){void 0===e&&(e=!1),this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=tt,!e&&tt&&(this.index=(tt.scopes||(tt.scopes=[])).push(this)-1)}return e.prototype.run=function(e){if(this.active){var t=tt;try{return tt=this,e()}finally{tt=t}}else 0},e.prototype.on=function(){tt=this},e.prototype.off=function(){tt=this.parent},e.prototype.stop=function(e){if(this.active){var t=void 0,n=void 0;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].teardown();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){var i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this.active=!1}},e}();function it(e,t){void 0===t&&(t=tt),t&&t.active&&t.effects.push(e)}function rt(){return tt}function st(e){var t=e._provided,n=e.$parent&&e.$parent._provided;return n===t?e._provided=Object.create(n):t}var ot=k((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var i="!"===e.charAt(0);return e=i?e.slice(1):e,{name:e,once:n,capture:i,passive:t}}));function at(e,t){function n(){var e=n.fns;if(!l(e))return rn(e,null,arguments,t,"v-on handler");for(var i=e.slice(),r=0;r<i.length;r++)rn(i[r],null,arguments,t,"v-on handler")}return n.fns=e,n}function ct(e,t,n,i,r,s){var o,a,c,l;for(o in e)a=e[o],c=t[o],l=ot(o),u(a)||(u(c)?(u(a.fns)&&(a=e[o]=at(a,s)),d(l.once)&&(a=e[o]=r(l.name,a,l.capture)),n(l.name,a,l.capture,l.passive,l.params)):a!==c&&(c.fns=a,e[o]=c));for(o in t)u(e[o])&&(l=ot(o),i(l.name,t[o],l.capture))}function lt(e,t,n){var i;e instanceof Se&&(e=e.data.hook||(e.data.hook={}));var r=e[t];function s(){n.apply(this,arguments),x(i.fns,s)}u(r)?i=at([s]):h(r.fns)&&d(r.merged)?(i=r,i.fns.push(s)):i=at([r,s]),i.merged=!0,e[t]=i}function ut(e,t,n){var i=t.options.props;if(!u(i)){var r={},s=e.attrs,o=e.props;if(h(s)||h(o))for(var a in i){var c=M(a);ht(r,o,a,c,!0)||ht(r,s,a,c,!1)}return r}}function ht(e,t,n,i,r){if(h(t)){if(N(t,n))return e[n]=t[n],r||delete t[n],!0;if(N(t,i))return e[n]=t[i],r||delete t[i],!0}return!1}function dt(e){for(var t=0;t<e.length;t++)if(l(e[t]))return Array.prototype.concat.apply([],e);return e}function pt(e){return f(e)?[Ce(e)]:l(e)?mt(e):void 0}function ft(e){return h(e)&&h(e.text)&&p(e.isComment)}function mt(e,t){var n,i,r,s,o=[];for(n=0;n<e.length;n++)i=e[n],u(i)||"boolean"===typeof i||(r=o.length-1,s=o[r],l(i)?i.length>0&&(i=mt(i,"".concat(t||"","_").concat(n)),ft(i[0])&&ft(s)&&(o[r]=Ce(s.text+i[0].text),i.shift()),o.push.apply(o,i)):f(i)?ft(s)?o[r]=Ce(s.text+i):""!==i&&o.push(Ce(i)):ft(i)&&ft(s)?o[r]=Ce(s.text+i.text):(d(e._isVList)&&h(i.tag)&&u(i.key)&&h(t)&&(i.key="__vlist".concat(t,"_").concat(n,"__")),o.push(i)));return o}function gt(e,t){var n,i,r,s,o=null;if(l(e)||"string"===typeof e)for(o=new Array(e.length),n=0,i=e.length;n<i;n++)o[n]=t(e[n],n);else if("number"===typeof e)for(o=new Array(e),n=0;n<e;n++)o[n]=t(n+1,n);else if(g(e))if(_e&&e[Symbol.iterator]){o=[];var a=e[Symbol.iterator](),c=a.next();while(!c.done)o.push(t(c.value,o.length)),c=a.next()}else for(r=Object.keys(e),o=new Array(r.length),n=0,i=r.length;n<i;n++)s=r[n],o[n]=t(e[s],s,n);return h(o)||(o=[]),o._isVList=!0,o}function vt(e,t,n,i){var r,s=this.$scopedSlots[e];s?(n=n||{},i&&(n=q(q({},i),n)),r=s(n)||(m(t)?t():t)):r=this.$slots[e]||(m(t)?t():t);var o=n&&n.slot;return o?this.$createElement("template",{slot:o},r):r}function yt(e){return Oi(this.$options,"filters",e,!0)||j}function Tt(e,t){return l(e)?-1===e.indexOf(t):e!==t}function Et(e,t,n,i,r){var s=J.keyCodes[t]||n;return r&&i&&!J.keyCodes[t]?Tt(r,i):s?Tt(s,e):i?M(i)!==t:void 0===e}function _t(e,t,n,i,r){if(n)if(g(n)){l(n)&&(n=G(n));var s=void 0,o=function(o){if("class"===o||"style"===o||C(o))s=e;else{var a=e.attrs&&e.attrs.type;s=i||J.mustUseProp(t,a,o)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=R(o),l=M(o);if(!(c in s)&&!(l in s)&&(s[o]=n[o],r)){var u=e.on||(e.on={});u["update:".concat(o)]=function(e){n[o]=e}}};for(var a in n)o(a)}else;return e}function bt(e,t){var n=this._staticTrees||(this._staticTrees=[]),i=n[e];return i&&!t||(i=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,this._c,this),St(i,"__static__".concat(e),!1)),i}function wt(e,t,n){return St(e,"__once__".concat(t).concat(n?"_".concat(n):""),!0),e}function St(e,t,n){if(l(e))for(var i=0;i<e.length;i++)e[i]&&"string"!==typeof e[i]&&At(e[i],"".concat(t,"_").concat(i),n);else At(e,t,n)}function At(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Ct(e,t){if(t)if(y(t)){var n=e.on=e.on?q({},e.on):{};for(var i in t){var r=n[i],s=t[i];n[i]=r?[].concat(r,s):s}}else;return e}function xt(e,t,n,i){t=t||{$stable:!n};for(var r=0;r<e.length;r++){var s=e[r];l(s)?xt(s,t,n):s&&(s.proxy&&(s.fn.proxy=!0),t[s.key]=s.fn)}return i&&(t.$key=i),t}function It(e,t){for(var n=0;n<t.length;n+=2){var i=t[n];"string"===typeof i&&i&&(e[t[n]]=t[n+1])}return e}function Nt(e,t){return"string"===typeof e?t+e:e}function kt(e){e._o=wt,e._n=S,e._s=b,e._l=gt,e._t=vt,e._q=V,e._i=W,e._m=bt,e._f=yt,e._k=Et,e._b=_t,e._v=Ce,e._e=Ae,e._u=xt,e._g=Ct,e._d=It,e._p=Nt}function Ot(e,t){if(!e||!e.length)return{};for(var n={},i=0,r=e.length;i<r;i++){var s=e[i],o=s.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,s.context!==t&&s.fnContext!==t||!o||null==o.slot)(n.default||(n.default=[])).push(s);else{var a=o.slot,c=n[a]||(n[a]=[]);"template"===s.tag?c.push.apply(c,s.children||[]):c.push(s)}}for(var l in n)n[l].every(Rt)&&delete n[l];return n}function Rt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Dt(e){return e.isComment&&e.asyncFactory}function Pt(e,t,n,i){var r,s=Object.keys(n).length>0,o=t?!!t.$stable:!s,a=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(o&&i&&i!==c&&a===i.$key&&!s&&!i.$hasNormal)return i;for(var l in r={},t)t[l]&&"$"!==l[0]&&(r[l]=Lt(e,n,l,t[l]))}else r={};for(var u in n)u in r||(r[u]=Mt(n,u));return t&&Object.isExtensible(t)&&(t._normalized=r),ne(r,"$stable",o),ne(r,"$key",a),ne(r,"$hasNormal",s),r}function Lt(e,t,n,i){var r=function(){var t=be;we(e);var n=arguments.length?i.apply(null,arguments):i({});n=n&&"object"===typeof n&&!l(n)?[n]:pt(n);var r=n&&n[0];return we(t),n&&(!r||1===n.length&&r.isComment&&!Dt(r))?void 0:n};return i.proxy&&Object.defineProperty(t,n,{get:r,enumerable:!0,configurable:!0}),r}function Mt(e,t){return function(){return e[t]}}function Bt(e){var t=e.$options,n=t.setup;if(n){var i=e._setupContext=Ft(e);we(e),De();var r=rn(n,null,[e._props||Xe({}),i],e,"setup");if(Pe(),we(),m(r))t.render=r;else if(g(r))if(e._setupState=r,r.__sfc){var s=e._setupProxy={};for(var o in r)"__sfc"!==o&&Je(s,r,o)}else for(var o in r)te(o)||Je(e,r,o);else 0}}function Ft(e){return{get attrs(){if(!e._attrsProxy){var t=e._attrsProxy={};ne(t,"_v_attr_proxy",!0),Ht(t,e.$attrs,c,e,"$attrs")}return e._attrsProxy},get listeners(){if(!e._listenersProxy){var t=e._listenersProxy={};Ht(t,e.$listeners,c,e,"$listeners")}return e._listenersProxy},get slots(){return qt(e)},emit:H(e.$emit,e),expose:function(t){t&&Object.keys(t).forEach((function(n){return Je(e,t,n)}))}}}function Ht(e,t,n,i,r){var s=!1;for(var o in t)o in e?t[o]!==n[o]&&(s=!0):(s=!0,Ut(e,o,i,r));for(var o in e)o in t||(s=!0,delete e[o]);return s}function Ut(e,t,n,i){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return n[i][t]}})}function qt(e){return e._slotsProxy||Gt(e._slotsProxy={},e.$scopedSlots),e._slotsProxy}function Gt(e,t){for(var n in t)e[n]=t[n];for(var n in e)n in t||delete e[n]}function $t(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,i=n&&n.context;e.$slots=Ot(t._renderChildren,i),e.$scopedSlots=n?Pt(e.$parent,n.data.scopedSlots,e.$slots):c,e._c=function(t,n,i,r){return Zt(e,t,n,i,r,!1)},e.$createElement=function(t,n,i,r){return Zt(e,t,n,i,r,!0)};var r=n&&n.data;je(e,"$attrs",r&&r.attrs||c,null,!0),je(e,"$listeners",t._parentListeners||c,null,!0)}var zt=null;function jt(e){kt(e.prototype),e.prototype.$nextTick=function(e){return gn(e,this)},e.prototype._render=function(){var e=this,t=e.$options,n=t.render,i=t._parentVnode;i&&e._isMounted&&(e.$scopedSlots=Pt(e.$parent,i.data.scopedSlots,e.$slots,e.$scopedSlots),e._slotsProxy&&Gt(e._slotsProxy,e.$scopedSlots)),e.$vnode=i;var r,s=be,o=zt;try{we(e),zt=e,r=n.call(e._renderProxy,e.$createElement)}catch(lS){nn(lS,e,"render"),r=e._vnode}finally{zt=o,we(s)}return l(r)&&1===r.length&&(r=r[0]),r instanceof Se||(r=Ae()),r.parent=i,r}}function Vt(e,t){return(e.__esModule||_e&&"Module"===e[Symbol.toStringTag])&&(e=e.default),g(e)?t.extend(e):e}function Wt(e,t,n,i,r){var s=Ae();return s.asyncFactory=e,s.asyncMeta={data:t,context:n,children:i,tag:r},s}function Yt(e,t){if(d(e.error)&&h(e.errorComp))return e.errorComp;if(h(e.resolved))return e.resolved;var n=zt;if(n&&h(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),d(e.loading)&&h(e.loadingComp))return e.loadingComp;if(n&&!h(e.owners)){var i=e.owners=[n],r=!0,s=null,o=null;n.$on("hook:destroyed",(function(){return x(i,n)}));var a=function(e){for(var t=0,n=i.length;t<n;t++)i[t].$forceUpdate();e&&(i.length=0,null!==s&&(clearTimeout(s),s=null),null!==o&&(clearTimeout(o),o=null))},c=Y((function(n){e.resolved=Vt(n,t),r?i.length=0:a(!0)})),l=Y((function(t){h(e.errorComp)&&(e.error=!0,a(!0))})),p=e(c,l);return g(p)&&(_(p)?u(e.resolved)&&p.then(c,l):_(p.component)&&(p.component.then(c,l),h(p.error)&&(e.errorComp=Vt(p.error,t)),h(p.loading)&&(e.loadingComp=Vt(p.loading,t),0===p.delay?e.loading=!0:s=setTimeout((function(){s=null,u(e.resolved)&&u(e.error)&&(e.loading=!0,a(!1))}),p.delay||200)),h(p.timeout)&&(o=setTimeout((function(){o=null,u(e.resolved)&&l(null)}),p.timeout)))),r=!1,e.loading?e.loadingComp:e.resolved}}function Xt(e){if(l(e))for(var t=0;t<e.length;t++){var n=e[t];if(h(n)&&(h(n.componentOptions)||Dt(n)))return n}}var Kt=1,Qt=2;function Zt(e,t,n,i,r,s){return(l(n)||f(n))&&(r=i,i=n,n=void 0),d(s)&&(r=Qt),Jt(e,t,n,i,r)}function Jt(e,t,n,i,r){if(h(n)&&h(n.__ob__))return Ae();if(h(n)&&h(n.is)&&(t=n.is),!t)return Ae();var s,o;if(l(i)&&m(i[0])&&(n=n||{},n.scopedSlots={default:i[0]},i.length=0),r===Qt?i=pt(i):r===Kt&&(i=dt(i)),"string"===typeof t){var a=void 0;o=e.$vnode&&e.$vnode.ns||J.getTagNamespace(t),s=J.isReservedTag(t)?new Se(J.parsePlatformTagName(t),n,i,void 0,void 0,e):n&&n.pre||!h(a=Oi(e.$options,"components",t))?new Se(t,n,i,void 0,void 0,e):fi(a,n,e,i,t)}else s=fi(t,n,e,i);return l(s)?s:h(s)?(h(o)&&en(s,o),h(n)&&tn(n),s):Ae()}function en(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),h(e.children))for(var i=0,r=e.children.length;i<r;i++){var s=e.children[i];h(s.tag)&&(u(s.ns)||d(n)&&"svg"!==s.tag)&&en(s,t,n)}}function tn(e){g(e.style)&&_n(e.style),g(e.class)&&_n(e.class)}function nn(e,t,n){De();try{if(t){var i=t;while(i=i.$parent){var r=i.$options.errorCaptured;if(r)for(var s=0;s<r.length;s++)try{var o=!1===r[s].call(i,e,t,n);if(o)return}catch(lS){sn(lS,i,"errorCaptured hook")}}}sn(e,t,n)}finally{Pe()}}function rn(e,t,n,i,r){var s;try{s=n?e.apply(t,n):e.call(t),s&&!s._isVue&&_(s)&&!s._handled&&(s.catch((function(e){return nn(e,i,r+" (Promise/async)")})),s._handled=!0)}catch(lS){nn(lS,i,r)}return s}function sn(e,t,n){if(J.errorHandler)try{return J.errorHandler.call(null,e,t,n)}catch(lS){lS!==e&&on(lS,null,"config.errorHandler")}on(e,t,n)}function on(e,t,n){if(!oe||"undefined"===typeof console)throw e;console.error(e)}var an,cn=!1,ln=[],un=!1;function hn(){un=!1;var e=ln.slice(0);ln.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&Te(Promise)){var dn=Promise.resolve();an=function(){dn.then(hn),he&&setTimeout($)},cn=!0}else if(ce||"undefined"===typeof MutationObserver||!Te(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())an="undefined"!==typeof setImmediate&&Te(setImmediate)?function(){setImmediate(hn)}:function(){setTimeout(hn,0)};else{var pn=1,fn=new MutationObserver(hn),mn=document.createTextNode(String(pn));fn.observe(mn,{characterData:!0}),an=function(){pn=(pn+1)%2,mn.data=String(pn)},cn=!0}function gn(e,t){var n;if(ln.push((function(){if(e)try{e.call(t)}catch(lS){nn(lS,t,"nextTick")}else n&&n(t)})),un||(un=!0,an()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){n=e}))}function vn(e){return function(t,n){if(void 0===n&&(n=be),n)return yn(n,e,t)}}function yn(e,t,n){var i=e.$options;i[t]=wi(i[t],n)}vn("beforeMount"),vn("mounted"),vn("beforeUpdate"),vn("updated"),vn("beforeDestroy"),vn("destroyed"),vn("activated"),vn("deactivated"),vn("serverPrefetch"),vn("renderTracked"),vn("renderTriggered"),vn("errorCaptured");var Tn="2.7.16";var En=new Ee;function _n(e){return bn(e,En),En.clear(),e}function bn(e,t){var n,i,r=l(e);if(!(!r&&!g(e)||e.__v_skip||Object.isFrozen(e)||e instanceof Se)){if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(r){n=e.length;while(n--)bn(e[n],t)}else if(Ze(e))bn(e.value,t);else{i=Object.keys(e),n=i.length;while(n--)bn(e[i[n]],t)}}}var wn,Sn=0,An=function(){function e(e,t,n,i,r){it(this,tt&&!tt._vm?tt:e?e._scope:void 0),(this.vm=e)&&r&&(e._watcher=this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++Sn,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new Ee,this.newDepIds=new Ee,this.expression="",m(t)?this.getter=t:(this.getter=re(t),this.getter||(this.getter=$)),this.value=this.lazy?void 0:this.get()}return e.prototype.get=function(){var e;De(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(lS){if(!this.user)throw lS;nn(lS,t,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&_n(e),Pe(),this.cleanupDeps()}return e},e.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},e.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},e.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():ii(this)},e.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||g(e)||this.deep){var t=this.value;if(this.value=e,this.user){var n='callback for watcher "'.concat(this.expression,'"');rn(this.cb,this.vm,[e,t],this.vm,n)}else this.cb.call(this.vm,e,t)}}},e.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},e.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},e.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&x(this.vm._scope.effects,this),this.active){var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},e}();function Cn(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&kn(e,t)}function xn(e,t){wn.$on(e,t)}function In(e,t){wn.$off(e,t)}function Nn(e,t){var n=wn;return function i(){var r=t.apply(null,arguments);null!==r&&n.$off(e,i)}}function kn(e,t,n){wn=e,ct(t,n||{},xn,In,Nn,e),wn=void 0}function On(e){var t=/^hook:/;e.prototype.$on=function(e,n){var i=this;if(l(e))for(var r=0,s=e.length;r<s;r++)i.$on(e[r],n);else(i._events[e]||(i._events[e]=[])).push(n),t.test(e)&&(i._hasHookEvent=!0);return i},e.prototype.$once=function(e,t){var n=this;function i(){n.$off(e,i),t.apply(n,arguments)}return i.fn=t,n.$on(e,i),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(l(e)){for(var i=0,r=e.length;i<r;i++)n.$off(e[i],t);return n}var s,o=n._events[e];if(!o)return n;if(!t)return n._events[e]=null,n;var a=o.length;while(a--)if(s=o[a],s===t||s.fn===t){o.splice(a,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?U(n):n;for(var i=U(arguments,1),r='event handler for "'.concat(e,'"'),s=0,o=n.length;s<o;s++)rn(n[s],t,i,t,r)}return t}}var Rn=null;function Dn(e){var t=Rn;return Rn=e,function(){Rn=t}}function Pn(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._provided=n?n._provided:Object.create(null),e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Ln(e){e.prototype._update=function(e,t){var n=this,i=n.$el,r=n._vnode,s=Dn(n);n._vnode=e,n.$el=r?n.__patch__(r,e):n.__patch__(n.$el,e,t,!1),s(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n);var o=n;while(o&&o.$vnode&&o.$parent&&o.$vnode===o.$parent._vnode)o.$parent.$el=o.$el,o=o.$parent},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){qn(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||x(t.$children,e),e._scope.stop(),e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),qn(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Mn(e,t,n){var i;e.$el=t,e.$options.render||(e.$options.render=Ae),qn(e,"beforeMount"),i=function(){e._update(e._render(),n)};var r={before:function(){e._isMounted&&!e._isDestroyed&&qn(e,"beforeUpdate")}};new An(e,i,$,r,!0),n=!1;var s=e._preWatchers;if(s)for(var o=0;o<s.length;o++)s[o].run();return null==e.$vnode&&(e._isMounted=!0,qn(e,"mounted")),e}function Bn(e,t,n,i,r){var s=i.data.scopedSlots,o=e.$scopedSlots,a=!!(s&&!s.$stable||o!==c&&!o.$stable||s&&e.$scopedSlots.$key!==s.$key||!s&&e.$scopedSlots.$key),l=!!(r||e.$options._renderChildren||a),u=e.$vnode;e.$options._parentVnode=i,e.$vnode=i,e._vnode&&(e._vnode.parent=i),e.$options._renderChildren=r;var h=i.data.attrs||c;e._attrsProxy&&Ht(e._attrsProxy,h,u.data&&u.data.attrs||c,e,"$attrs")&&(l=!0),e.$attrs=h,n=n||c;var d=e.$options._parentListeners;if(e._listenersProxy&&Ht(e._listenersProxy,n,d||c,e,"$listeners"),e.$listeners=e.$options._parentListeners=n,kn(e,n,d),t&&e.$options.props){qe(!1);for(var p=e._props,f=e.$options._propKeys||[],m=0;m<f.length;m++){var g=f[m],v=e.$options.props;p[g]=Ri(g,v,t,e)}qe(!0),e.$options.propsData=t}l&&(e.$slots=Ot(r,i.context),e.$forceUpdate())}function Fn(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function Hn(e,t){if(t){if(e._directInactive=!1,Fn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Hn(e.$children[n]);qn(e,"activated")}}function Un(e,t){if((!t||(e._directInactive=!0,!Fn(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Un(e.$children[n]);qn(e,"deactivated")}}function qn(e,t,n,i){void 0===i&&(i=!0),De();var r=be,s=rt();i&&we(e);var o=e.$options[t],a="".concat(t," hook");if(o)for(var c=0,l=o.length;c<l;c++)rn(o[c],e,n||null,e,a);e._hasHookEvent&&e.$emit("hook:"+t),i&&(we(r),s&&s.on()),Pe()}var Gn=[],$n=[],zn={},jn=!1,Vn=!1,Wn=0;function Yn(){Wn=Gn.length=$n.length=0,zn={},jn=Vn=!1}var Xn=0,Kn=Date.now;if(oe&&!ce){var Qn=window.performance;Qn&&"function"===typeof Qn.now&&Kn()>document.createEvent("Event").timeStamp&&(Kn=function(){return Qn.now()})}var Zn=function(e,t){if(e.post){if(!t.post)return 1}else if(t.post)return-1;return e.id-t.id};function Jn(){var e,t;for(Xn=Kn(),Vn=!0,Gn.sort(Zn),Wn=0;Wn<Gn.length;Wn++)e=Gn[Wn],e.before&&e.before(),t=e.id,zn[t]=null,e.run();var n=$n.slice(),i=Gn.slice();Yn(),ni(n),ei(i),ke(),ye&&J.devtools&&ye.emit("flush")}function ei(e){var t=e.length;while(t--){var n=e[t],i=n.vm;i&&i._watcher===n&&i._isMounted&&!i._isDestroyed&&qn(i,"updated")}}function ti(e){e._inactive=!1,$n.push(e)}function ni(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Hn(e[t],!0)}function ii(e){var t=e.id;if(null==zn[t]&&(e!==Oe.target||!e.noRecurse)){if(zn[t]=!0,Vn){var n=Gn.length-1;while(n>Wn&&Gn[n].id>e.id)n--;Gn.splice(n+1,0,e)}else Gn.push(e);jn||(jn=!0,gn(Jn))}}function ri(e){var t=e.$options.provide;if(t){var n=m(t)?t.call(e):t;if(!g(n))return;for(var i=st(e),r=_e?Reflect.ownKeys(n):Object.keys(n),s=0;s<r.length;s++){var o=r[s];Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(n,o))}}}function si(e){var t=oi(e.$options.inject,e);t&&(qe(!1),Object.keys(t).forEach((function(n){je(e,n,t[n])})),qe(!0))}function oi(e,t){if(e){for(var n=Object.create(null),i=_e?Reflect.ownKeys(e):Object.keys(e),r=0;r<i.length;r++){var s=i[r];if("__ob__"!==s){var o=e[s].from;if(o in t._provided)n[s]=t._provided[o];else if("default"in e[s]){var a=e[s].default;n[s]=m(a)?a.call(t):a}else 0}}return n}}function ai(e,t,n,i,r){var s,o=this,a=r.options;N(i,"_uid")?(s=Object.create(i),s._original=i):(s=i,i=i._original);var u=d(a._compiled),h=!u;this.data=e,this.props=t,this.children=n,this.parent=i,this.listeners=e.on||c,this.injections=oi(a.inject,i),this.slots=function(){return o.$slots||Pt(i,e.scopedSlots,o.$slots=Ot(n,i)),o.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Pt(i,e.scopedSlots,this.slots())}}),u&&(this.$options=a,this.$slots=this.slots(),this.$scopedSlots=Pt(i,e.scopedSlots,this.$slots)),a._scopeId?this._c=function(e,t,n,r){var o=Zt(s,e,t,n,r,h);return o&&!l(o)&&(o.fnScopeId=a._scopeId,o.fnContext=i),o}:this._c=function(e,t,n,i){return Zt(s,e,t,n,i,h)}}function ci(e,t,n,i,r){var s=e.options,o={},a=s.props;if(h(a))for(var u in a)o[u]=Ri(u,a,t||c);else h(n.attrs)&&ui(o,n.attrs),h(n.props)&&ui(o,n.props);var d=new ai(n,o,r,i,e),p=s.render.call(null,d._c,d);if(p instanceof Se)return li(p,n,d.parent,s,d);if(l(p)){for(var f=pt(p)||[],m=new Array(f.length),g=0;g<f.length;g++)m[g]=li(f[g],n,d.parent,s,d);return m}}function li(e,t,n,i,r){var s=xe(e);return s.fnContext=n,s.fnOptions=i,t.slot&&((s.data||(s.data={})).slot=t.slot),s}function ui(e,t){for(var n in t)e[R(n)]=t[n]}function hi(e){return e.name||e.__name||e._componentTag}kt(ai.prototype);var di={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;di.prepatch(n,n)}else{var i=e.componentInstance=mi(e,Rn);i.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,i=t.componentInstance=e.componentInstance;Bn(i,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,qn(n,"mounted")),e.data.keepAlive&&(t._isMounted?ti(n):Hn(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Un(t,!0):t.$destroy())}},pi=Object.keys(di);function fi(e,t,n,i,r){if(!u(e)){var s=n.$options._base;if(g(e)&&(e=s.extend(e)),"function"===typeof e){var o;if(u(e.cid)&&(o=e,e=Yt(o,s),void 0===e))return Wt(o,t,n,i,r);t=t||{},nr(e),h(t.model)&&yi(e.options,t);var a=ut(t,e,r);if(d(e.options.functional))return ci(e,a,t,n,i);var c=t.on;if(t.on=t.nativeOn,d(e.options.abstract)){var l=t.slot;t={},l&&(t.slot=l)}gi(t);var p=hi(e.options)||r,f=new Se("vue-component-".concat(e.cid).concat(p?"-".concat(p):""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:a,listeners:c,tag:r,children:i},o);return f}}}function mi(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},i=e.data.inlineTemplate;return h(i)&&(n.render=i.render,n.staticRenderFns=i.staticRenderFns),new e.componentOptions.Ctor(n)}function gi(e){for(var t=e.hook||(e.hook={}),n=0;n<pi.length;n++){var i=pi[n],r=t[i],s=di[i];r===s||r&&r._merged||(t[i]=r?vi(s,r):s)}}function vi(e,t){var n=function(n,i){e(n,i),t(n,i)};return n._merged=!0,n}function yi(e,t){var n=e.model&&e.model.prop||"value",i=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var r=t.on||(t.on={}),s=r[i],o=t.model.callback;h(s)?(l(s)?-1===s.indexOf(o):s!==o)&&(r[i]=[o].concat(s)):r[i]=o}var Ti=$,Ei=J.optionMergeStrategies;function _i(e,t,n){if(void 0===n&&(n=!0),!t)return e;for(var i,r,s,o=_e?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)i=o[a],"__ob__"!==i&&(r=e[i],s=t[i],n&&N(e,i)?r!==s&&y(r)&&y(s)&&_i(r,s):Ve(e,i,s));return e}function bi(e,t,n){return n?function(){var i=m(t)?t.call(n,n):t,r=m(e)?e.call(n,n):e;return i?_i(i,r):r}:t?e?function(){return _i(m(t)?t.call(this,this):t,m(e)?e.call(this,this):e)}:t:e}function wi(e,t){var n=t?e?e.concat(t):l(t)?t:[t]:e;return n?Si(n):n}function Si(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function Ai(e,t,n,i){var r=Object.create(e||null);return t?q(r,t):r}Ei.data=function(e,t,n){return n?bi(e,t,n):t&&"function"!==typeof t?e:bi(e,t)},Z.forEach((function(e){Ei[e]=wi})),Q.forEach((function(e){Ei[e+"s"]=Ai})),Ei.watch=function(e,t,n,i){if(e===fe&&(e=void 0),t===fe&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var r={};for(var s in q(r,e),t){var o=r[s],a=t[s];o&&!l(o)&&(o=[o]),r[s]=o?o.concat(a):l(a)?a:[a]}return r},Ei.props=Ei.methods=Ei.inject=Ei.computed=function(e,t,n,i){if(!e)return t;var r=Object.create(null);return q(r,e),t&&q(r,t),r},Ei.provide=function(e,t){return e?function(){var n=Object.create(null);return _i(n,m(e)?e.call(this):e),t&&_i(n,m(t)?t.call(this):t,!1),n}:t};var Ci=function(e,t){return void 0===t?e:t};function xi(e,t){var n=e.props;if(n){var i,r,s,o={};if(l(n)){i=n.length;while(i--)r=n[i],"string"===typeof r&&(s=R(r),o[s]={type:null})}else if(y(n))for(var a in n)r=n[a],s=R(a),o[s]=y(r)?r:{type:r};else 0;e.props=o}}function Ii(e,t){var n=e.inject;if(n){var i=e.inject={};if(l(n))for(var r=0;r<n.length;r++)i[n[r]]={from:n[r]};else if(y(n))for(var s in n){var o=n[s];i[s]=y(o)?q({from:s},o):{from:o}}else 0}}function Ni(e){var t=e.directives;if(t)for(var n in t){var i=t[n];m(i)&&(t[n]={bind:i,update:i})}}function ki(e,t,n){if(m(t)&&(t=t.options),xi(t,n),Ii(t,n),Ni(t),!t._base&&(t.extends&&(e=ki(e,t.extends,n)),t.mixins))for(var i=0,r=t.mixins.length;i<r;i++)e=ki(e,t.mixins[i],n);var s,o={};for(s in e)a(s);for(s in t)N(e,s)||a(s);function a(i){var r=Ei[i]||Ci;o[i]=r(e[i],t[i],n,i)}return o}function Oi(e,t,n,i){if("string"===typeof n){var r=e[t];if(N(r,n))return r[n];var s=R(n);if(N(r,s))return r[s];var o=D(s);if(N(r,o))return r[o];var a=r[n]||r[s]||r[o];return a}}function Ri(e,t,n,i){var r=t[e],s=!N(n,e),o=n[e],a=Bi(Boolean,r.type);if(a>-1)if(s&&!N(r,"default"))o=!1;else if(""===o||o===M(e)){var c=Bi(String,r.type);(c<0||a<c)&&(o=!0)}if(void 0===o){o=Di(i,r,e);var l=Ue;qe(!0),ze(o),qe(l)}return o}function Di(e,t,n){if(N(t,"default")){var i=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:m(i)&&"Function"!==Li(t.type)?i.call(e):i}}var Pi=/^\s*function (\w+)/;function Li(e){var t=e&&e.toString().match(Pi);return t?t[1]:""}function Mi(e,t){return Li(e)===Li(t)}function Bi(e,t){if(!l(t))return Mi(t,e)?0:-1;for(var n=0,i=t.length;n<i;n++)if(Mi(t[n],e))return n;return-1}var Fi={enumerable:!0,configurable:!0,get:$,set:$};function Hi(e,t,n){Fi.get=function(){return this[t][n]},Fi.set=function(e){this[t][n]=e},Object.defineProperty(e,n,Fi)}function Ui(e){var t=e.$options;if(t.props&&qi(e,t.props),Bt(e),t.methods&&Xi(e,t.methods),t.data)Gi(e);else{var n=ze(e._data={});n&&n.vmCount++}t.computed&&ji(e,t.computed),t.watch&&t.watch!==fe&&Ki(e,t.watch)}function qi(e,t){var n=e.$options.propsData||{},i=e._props=Xe({}),r=e.$options._propKeys=[],s=!e.$parent;s||qe(!1);var o=function(s){r.push(s);var o=Ri(s,t,n,e);je(i,s,o,void 0,!0),s in e||Hi(e,"_props",s)};for(var a in t)o(a);qe(!0)}function Gi(e){var t=e.$options.data;t=e._data=m(t)?$i(t,e):t||{},y(t)||(t={});var n=Object.keys(t),i=e.$options.props,r=(e.$options.methods,n.length);while(r--){var s=n[r];0,i&&N(i,s)||te(s)||Hi(e,"_data",s)}var o=ze(t);o&&o.vmCount++}function $i(e,t){De();try{return e.call(t,t)}catch(lS){return nn(lS,t,"data()"),{}}finally{Pe()}}var zi={lazy:!0};function ji(e,t){var n=e._computedWatchers=Object.create(null),i=ve();for(var r in t){var s=t[r],o=m(s)?s:s.get;0,i||(n[r]=new An(e,o||$,$,zi)),r in e||Vi(e,r,s)}}function Vi(e,t,n){var i=!ve();m(n)?(Fi.get=i?Wi(t):Yi(n),Fi.set=$):(Fi.get=n.get?i&&!1!==n.cache?Wi(t):Yi(n.get):$,Fi.set=n.set||$),Object.defineProperty(e,t,Fi)}function Wi(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),Oe.target&&t.depend(),t.value}}function Yi(e){return function(){return e.call(this,this)}}function Xi(e,t){e.$options.props;for(var n in t)e[n]="function"!==typeof t[n]?$:H(t[n],e)}function Ki(e,t){for(var n in t){var i=t[n];if(l(i))for(var r=0;r<i.length;r++)Qi(e,n,i[r]);else Qi(e,n,i)}}function Qi(e,t,n,i){return y(n)&&(i=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,i)}function Zi(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Ve,e.prototype.$delete=We,e.prototype.$watch=function(e,t,n){var i=this;if(y(t))return Qi(i,e,t,n);n=n||{},n.user=!0;var r=new An(i,e,t,n);if(n.immediate){var s='callback for immediate watcher "'.concat(r.expression,'"');De(),rn(t,i,[r.value],i,s),Pe()}return function(){r.teardown()}}}var Ji=0;function er(e){e.prototype._init=function(e){var t=this;t._uid=Ji++,t._isVue=!0,t.__v_skip=!0,t._scope=new nt(!0),t._scope.parent=void 0,t._scope._vm=!0,e&&e._isComponent?tr(t,e):t.$options=ki(nr(t.constructor),e||{},t),t._renderProxy=t,t._self=t,Pn(t),Cn(t),$t(t),qn(t,"beforeCreate",void 0,!1),si(t),Ui(t),ri(t),qn(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function tr(e,t){var n=e.$options=Object.create(e.constructor.options),i=t._parentVnode;n.parent=t.parent,n._parentVnode=i;var r=i.componentOptions;n.propsData=r.propsData,n._parentListeners=r.listeners,n._renderChildren=r.children,n._componentTag=r.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function nr(e){var t=e.options;if(e.super){var n=nr(e.super),i=e.superOptions;if(n!==i){e.superOptions=n;var r=ir(e);r&&q(e.extendOptions,r),t=e.options=ki(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function ir(e){var t,n=e.options,i=e.sealedOptions;for(var r in n)n[r]!==i[r]&&(t||(t={}),t[r]=n[r]);return t}function rr(e){this._init(e)}function sr(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=U(arguments,1);return n.unshift(this),m(e.install)?e.install.apply(e,n):m(e)&&e.apply(null,n),t.push(e),this}}function or(e){e.mixin=function(e){return this.options=ki(this.options,e),this}}function ar(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,i=n.cid,r=e._Ctor||(e._Ctor={});if(r[i])return r[i];var s=hi(e)||hi(n.options);var o=function(e){this._init(e)};return o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.cid=t++,o.options=ki(n.options,e),o["super"]=n,o.options.props&&cr(o),o.options.computed&&lr(o),o.extend=n.extend,o.mixin=n.mixin,o.use=n.use,Q.forEach((function(e){o[e]=n[e]})),s&&(o.options.components[s]=o),o.superOptions=n.options,o.extendOptions=e,o.sealedOptions=q({},o.options),r[i]=o,o}}function cr(e){var t=e.options.props;for(var n in t)Hi(e.prototype,"_props",n)}function lr(e){var t=e.options.computed;for(var n in t)Vi(e.prototype,n,t[n])}function ur(e){Q.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&y(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&m(n)&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}function hr(e){return e&&(hi(e.Ctor.options)||e.tag)}function dr(e,t){return l(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!T(e)&&e.test(t)}function pr(e,t){var n=e.cache,i=e.keys,r=e._vnode,s=e.$vnode;for(var o in n){var a=n[o];if(a){var c=a.name;c&&!t(c)&&fr(n,o,i,r)}}s.componentOptions.children=void 0}function fr(e,t,n,i){var r=e[t];!r||i&&r.tag===i.tag||r.componentInstance.$destroy(),e[t]=null,x(n,t)}er(rr),Zi(rr),On(rr),Ln(rr),jt(rr);var mr=[String,RegExp,Array],gr={name:"keep-alive",abstract:!0,props:{include:mr,exclude:mr,max:[String,Number]},methods:{cacheVNode:function(){var e=this,t=e.cache,n=e.keys,i=e.vnodeToCache,r=e.keyToCache;if(i){var s=i.tag,o=i.componentInstance,a=i.componentOptions;t[r]={name:hr(a),tag:s,componentInstance:o},n.push(r),this.max&&n.length>parseInt(this.max)&&fr(t,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)fr(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(t){pr(e,(function(e){return dr(t,e)}))})),this.$watch("exclude",(function(t){pr(e,(function(e){return!dr(t,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=Xt(e),n=t&&t.componentOptions;if(n){var i=hr(n),r=this,s=r.include,o=r.exclude;if(s&&(!i||!dr(s,i))||o&&i&&dr(o,i))return t;var a=this,c=a.cache,l=a.keys,u=null==t.key?n.Ctor.cid+(n.tag?"::".concat(n.tag):""):t.key;c[u]?(t.componentInstance=c[u].componentInstance,x(l,u),l.push(u)):(this.vnodeToCache=t,this.keyToCache=u),t.data.keepAlive=!0}return t||e&&e[0]}},vr={KeepAlive:gr};function yr(e){var t={get:function(){return J}};Object.defineProperty(e,"config",t),e.util={warn:Ti,extend:q,mergeOptions:ki,defineReactive:je},e.set=Ve,e.delete=We,e.nextTick=gn,e.observable=function(e){return ze(e),e},e.options=Object.create(null),Q.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,q(e.options.components,vr),sr(e),or(e),ar(e),ur(e)}yr(rr),Object.defineProperty(rr.prototype,"$isServer",{get:ve}),Object.defineProperty(rr.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(rr,"FunctionalRenderContext",{value:ai}),rr.version=Tn;var Tr=A("style,class"),Er=A("input,textarea,option,select,progress"),_r=function(e,t,n){return"value"===n&&Er(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},br=A("contenteditable,draggable,spellcheck"),wr=A("events,caret,typing,plaintext-only"),Sr=function(e,t){return Nr(t)||"false"===t?"false":"contenteditable"===e&&wr(t)?t:"true"},Ar=A("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Cr="http://www.w3.org/1999/xlink",xr=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Ir=function(e){return xr(e)?e.slice(6,e.length):""},Nr=function(e){return null==e||!1===e};function kr(e){var t=e.data,n=e,i=e;while(h(i.componentInstance))i=i.componentInstance._vnode,i&&i.data&&(t=Or(i.data,t));while(h(n=n.parent))n&&n.data&&(t=Or(t,n.data));return Rr(t.staticClass,t.class)}function Or(e,t){return{staticClass:Dr(e.staticClass,t.staticClass),class:h(e.class)?[e.class,t.class]:t.class}}function Rr(e,t){return h(e)||h(t)?Dr(e,Pr(t)):""}function Dr(e,t){return e?t?e+" "+t:e:t||""}function Pr(e){return Array.isArray(e)?Lr(e):g(e)?Mr(e):"string"===typeof e?e:""}function Lr(e){for(var t,n="",i=0,r=e.length;i<r;i++)h(t=Pr(e[i]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function Mr(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var Br={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Fr=A("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Hr=A("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Ur=function(e){return Fr(e)||Hr(e)};function qr(e){return Hr(e)?"svg":"math"===e?"math":void 0}var Gr=Object.create(null);function $r(e){if(!oe)return!0;if(Ur(e))return!1;if(e=e.toLowerCase(),null!=Gr[e])return Gr[e];var t=document.createElement(e);return e.indexOf("-")>-1?Gr[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Gr[e]=/HTMLUnknownElement/.test(t.toString())}var zr=A("text,number,password,search,email,tel,url");function jr(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function Vr(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function Wr(e,t){return document.createElementNS(Br[e],t)}function Yr(e){return document.createTextNode(e)}function Xr(e){return document.createComment(e)}function Kr(e,t,n){e.insertBefore(t,n)}function Qr(e,t){e.removeChild(t)}function Zr(e,t){e.appendChild(t)}function Jr(e){return e.parentNode}function es(e){return e.nextSibling}function ts(e){return e.tagName}function ns(e,t){e.textContent=t}function is(e,t){e.setAttribute(t,"")}var rs=Object.freeze({__proto__:null,createElement:Vr,createElementNS:Wr,createTextNode:Yr,createComment:Xr,insertBefore:Kr,removeChild:Qr,appendChild:Zr,parentNode:Jr,nextSibling:es,tagName:ts,setTextContent:ns,setStyleScope:is}),ss={create:function(e,t){os(t)},update:function(e,t){e.data.ref!==t.data.ref&&(os(e,!0),os(t))},destroy:function(e){os(e,!0)}};function os(e,t){var n=e.data.ref;if(h(n)){var i=e.context,r=e.componentInstance||e.elm,s=t?null:r,o=t?void 0:r;if(m(n))rn(n,i,[s],i,"template ref function");else{var a=e.data.refInFor,c="string"===typeof n||"number"===typeof n,u=Ze(n),d=i.$refs;if(c||u)if(a){var p=c?d[n]:n.value;t?l(p)&&x(p,r):l(p)?p.includes(r)||p.push(r):c?(d[n]=[r],as(i,n,d[n])):n.value=[r]}else if(c){if(t&&d[n]!==r)return;d[n]=o,as(i,n,s)}else if(u){if(t&&n.value!==r)return;n.value=s}else 0}}}function as(e,t,n){var i=e._setupState;i&&N(i,t)&&(Ze(i[t])?i[t].value=n:i[t]=n)}var cs=new Se("",{},[]),ls=["create","activate","update","remove","destroy"];function us(e,t){return e.key===t.key&&e.asyncFactory===t.asyncFactory&&(e.tag===t.tag&&e.isComment===t.isComment&&h(e.data)===h(t.data)&&hs(e,t)||d(e.isAsyncPlaceholder)&&u(t.asyncFactory.error))}function hs(e,t){if("input"!==e.tag)return!0;var n,i=h(n=e.data)&&h(n=n.attrs)&&n.type,r=h(n=t.data)&&h(n=n.attrs)&&n.type;return i===r||zr(i)&&zr(r)}function ds(e,t,n){var i,r,s={};for(i=t;i<=n;++i)r=e[i].key,h(r)&&(s[r]=i);return s}function ps(e){var t,n,i={},r=e.modules,s=e.nodeOps;for(t=0;t<ls.length;++t)for(i[ls[t]]=[],n=0;n<r.length;++n)h(r[n][ls[t]])&&i[ls[t]].push(r[n][ls[t]]);function o(e){return new Se(s.tagName(e).toLowerCase(),{},[],void 0,e)}function a(e,t){function n(){0===--n.listeners&&c(e)}return n.listeners=t,n}function c(e){var t=s.parentNode(e);h(t)&&s.removeChild(t,e)}function p(e,t,n,i,r,o,a){if(h(e.elm)&&h(o)&&(e=o[a]=xe(e)),e.isRootInsert=!r,!m(e,t,n,i)){var c=e.data,l=e.children,u=e.tag;h(u)?(e.elm=e.ns?s.createElementNS(e.ns,u):s.createElement(u,e),b(e),T(e,l,t),h(c)&&_(e,t),y(n,e.elm,i)):d(e.isComment)?(e.elm=s.createComment(e.text),y(n,e.elm,i)):(e.elm=s.createTextNode(e.text),y(n,e.elm,i))}}function m(e,t,n,i){var r=e.data;if(h(r)){var s=h(e.componentInstance)&&r.keepAlive;if(h(r=r.hook)&&h(r=r.init)&&r(e,!1),h(e.componentInstance))return g(e,t),y(n,e.elm,i),d(s)&&v(e,t,n,i),!0}}function g(e,t){h(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,E(e)?(_(e,t),b(e)):(os(e),t.push(e))}function v(e,t,n,r){var s,o=e;while(o.componentInstance)if(o=o.componentInstance._vnode,h(s=o.data)&&h(s=s.transition)){for(s=0;s<i.activate.length;++s)i.activate[s](cs,o);t.push(o);break}y(n,e.elm,r)}function y(e,t,n){h(e)&&(h(n)?s.parentNode(n)===e&&s.insertBefore(e,t,n):s.appendChild(e,t))}function T(e,t,n){if(l(t)){0;for(var i=0;i<t.length;++i)p(t[i],n,e.elm,null,!0,t,i)}else f(e.text)&&s.appendChild(e.elm,s.createTextNode(String(e.text)))}function E(e){while(e.componentInstance)e=e.componentInstance._vnode;return h(e.tag)}function _(e,n){for(var r=0;r<i.create.length;++r)i.create[r](cs,e);t=e.data.hook,h(t)&&(h(t.create)&&t.create(cs,e),h(t.insert)&&n.push(e))}function b(e){var t;if(h(t=e.fnScopeId))s.setStyleScope(e.elm,t);else{var n=e;while(n)h(t=n.context)&&h(t=t.$options._scopeId)&&s.setStyleScope(e.elm,t),n=n.parent}h(t=Rn)&&t!==e.context&&t!==e.fnContext&&h(t=t.$options._scopeId)&&s.setStyleScope(e.elm,t)}function w(e,t,n,i,r,s){for(;i<=r;++i)p(n[i],s,e,t,!1,n,i)}function S(e){var t,n,r=e.data;if(h(r))for(h(t=r.hook)&&h(t=t.destroy)&&t(e),t=0;t<i.destroy.length;++t)i.destroy[t](e);if(h(t=e.children))for(n=0;n<e.children.length;++n)S(e.children[n])}function C(e,t,n){for(;t<=n;++t){var i=e[t];h(i)&&(h(i.tag)?(x(i),S(i)):c(i.elm))}}function x(e,t){if(h(t)||h(e.data)){var n,r=i.remove.length+1;for(h(t)?t.listeners+=r:t=a(e.elm,r),h(n=e.componentInstance)&&h(n=n._vnode)&&h(n.data)&&x(n,t),n=0;n<i.remove.length;++n)i.remove[n](e,t);h(n=e.data.hook)&&h(n=n.remove)?n(e,t):t()}else c(e.elm)}function I(e,t,n,i,r){var o,a,c,l,d=0,f=0,m=t.length-1,g=t[0],v=t[m],y=n.length-1,T=n[0],E=n[y],_=!r;while(d<=m&&f<=y)u(g)?g=t[++d]:u(v)?v=t[--m]:us(g,T)?(k(g,T,i,n,f),g=t[++d],T=n[++f]):us(v,E)?(k(v,E,i,n,y),v=t[--m],E=n[--y]):us(g,E)?(k(g,E,i,n,y),_&&s.insertBefore(e,g.elm,s.nextSibling(v.elm)),g=t[++d],E=n[--y]):us(v,T)?(k(v,T,i,n,f),_&&s.insertBefore(e,v.elm,g.elm),v=t[--m],T=n[++f]):(u(o)&&(o=ds(t,d,m)),a=h(T.key)?o[T.key]:N(T,t,d,m),u(a)?p(T,i,e,g.elm,!1,n,f):(c=t[a],us(c,T)?(k(c,T,i,n,f),t[a]=void 0,_&&s.insertBefore(e,c.elm,g.elm)):p(T,i,e,g.elm,!1,n,f)),T=n[++f]);d>m?(l=u(n[y+1])?null:n[y+1].elm,w(e,l,n,f,y,i)):f>y&&C(t,d,m)}function N(e,t,n,i){for(var r=n;r<i;r++){var s=t[r];if(h(s)&&us(e,s))return r}}function k(e,t,n,r,o,a){if(e!==t){h(t.elm)&&h(r)&&(t=r[o]=xe(t));var c=t.elm=e.elm;if(d(e.isAsyncPlaceholder))h(t.asyncFactory.resolved)?D(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(d(t.isStatic)&&d(e.isStatic)&&t.key===e.key&&(d(t.isCloned)||d(t.isOnce)))t.componentInstance=e.componentInstance;else{var l,p=t.data;h(p)&&h(l=p.hook)&&h(l=l.prepatch)&&l(e,t);var f=e.children,m=t.children;if(h(p)&&E(t)){for(l=0;l<i.update.length;++l)i.update[l](e,t);h(l=p.hook)&&h(l=l.update)&&l(e,t)}u(t.text)?h(f)&&h(m)?f!==m&&I(c,f,m,n,a):h(m)?(h(e.text)&&s.setTextContent(c,""),w(c,null,m,0,m.length-1,n)):h(f)?C(f,0,f.length-1):h(e.text)&&s.setTextContent(c,""):e.text!==t.text&&s.setTextContent(c,t.text),h(p)&&h(l=p.hook)&&h(l=l.postpatch)&&l(e,t)}}}function O(e,t,n){if(d(n)&&h(e.parent))e.parent.data.pendingInsert=t;else for(var i=0;i<t.length;++i)t[i].data.hook.insert(t[i])}var R=A("attrs,class,staticClass,staticStyle,key");function D(e,t,n,i){var r,s=t.tag,o=t.data,a=t.children;if(i=i||o&&o.pre,t.elm=e,d(t.isComment)&&h(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(h(o)&&(h(r=o.hook)&&h(r=r.init)&&r(t,!0),h(r=t.componentInstance)))return g(t,n),!0;if(h(s)){if(h(a))if(e.hasChildNodes())if(h(r=o)&&h(r=r.domProps)&&h(r=r.innerHTML)){if(r!==e.innerHTML)return!1}else{for(var c=!0,l=e.firstChild,u=0;u<a.length;u++){if(!l||!D(l,a[u],n,i)){c=!1;break}l=l.nextSibling}if(!c||l)return!1}else T(t,a,n);if(h(o)){var p=!1;for(var f in o)if(!R(f)){p=!0,_(t,n);break}!p&&o["class"]&&_n(o["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,r){if(!u(t)){var a=!1,c=[];if(u(e))a=!0,p(t,c);else{var l=h(e.nodeType);if(!l&&us(e,t))k(e,t,c,null,null,r);else{if(l){if(1===e.nodeType&&e.hasAttribute(K)&&(e.removeAttribute(K),n=!0),d(n)&&D(e,t,c))return O(t,c,!0),e;e=o(e)}var f=e.elm,m=s.parentNode(f);if(p(t,c,f._leaveCb?null:m,s.nextSibling(f)),h(t.parent)){var g=t.parent,v=E(t);while(g){for(var y=0;y<i.destroy.length;++y)i.destroy[y](g);if(g.elm=t.elm,v){for(var T=0;T<i.create.length;++T)i.create[T](cs,g);var _=g.data.hook.insert;if(_.merged)for(var b=_.fns.slice(1),w=0;w<b.length;w++)b[w]()}else os(g);g=g.parent}}h(m)?C([e],0,0):h(e.tag)&&S(e)}}return O(t,c,a),t.elm}h(e)&&S(e)}}var fs={create:ms,update:ms,destroy:function(e){ms(e,cs)}};function ms(e,t){(e.data.directives||t.data.directives)&&gs(e,t)}function gs(e,t){var n,i,r,s=e===cs,o=t===cs,a=ys(e.data.directives,e.context),c=ys(t.data.directives,t.context),l=[],u=[];for(n in c)i=a[n],r=c[n],i?(r.oldValue=i.value,r.oldArg=i.arg,Es(r,"update",t,e),r.def&&r.def.componentUpdated&&u.push(r)):(Es(r,"bind",t,e),r.def&&r.def.inserted&&l.push(r));if(l.length){var h=function(){for(var n=0;n<l.length;n++)Es(l[n],"inserted",t,e)};s?lt(t,"insert",h):h()}if(u.length&&lt(t,"postpatch",(function(){for(var n=0;n<u.length;n++)Es(u[n],"componentUpdated",t,e)})),!s)for(n in a)c[n]||Es(a[n],"unbind",e,e,o)}var vs=Object.create(null);function ys(e,t){var n,i,r=Object.create(null);if(!e)return r;for(n=0;n<e.length;n++){if(i=e[n],i.modifiers||(i.modifiers=vs),r[Ts(i)]=i,t._setupState&&t._setupState.__sfc){var s=i.def||Oi(t,"_setupState","v-"+i.name);i.def="function"===typeof s?{bind:s,update:s}:s}i.def=i.def||Oi(t.$options,"directives",i.name,!0)}return r}function Ts(e){return e.rawName||"".concat(e.name,".").concat(Object.keys(e.modifiers||{}).join("."))}function Es(e,t,n,i,r){var s=e.def&&e.def[t];if(s)try{s(n.elm,e,n,i,r)}catch(lS){nn(lS,n.context,"directive ".concat(e.name," ").concat(t," hook"))}}var _s=[ss,fs];function bs(e,t){var n=t.componentOptions;if((!h(n)||!1!==n.Ctor.options.inheritAttrs)&&(!u(e.data.attrs)||!u(t.data.attrs))){var i,r,s,o=t.elm,a=e.data.attrs||{},c=t.data.attrs||{};for(i in(h(c.__ob__)||d(c._v_attr_proxy))&&(c=t.data.attrs=q({},c)),c)r=c[i],s=a[i],s!==r&&ws(o,i,r,t.data.pre);for(i in(ce||ue)&&c.value!==a.value&&ws(o,"value",c.value),a)u(c[i])&&(xr(i)?o.removeAttributeNS(Cr,Ir(i)):br(i)||o.removeAttribute(i))}}function ws(e,t,n,i){i||e.tagName.indexOf("-")>-1?Ss(e,t,n):Ar(t)?Nr(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):br(t)?e.setAttribute(t,Sr(t,n)):xr(t)?Nr(n)?e.removeAttributeNS(Cr,Ir(t)):e.setAttributeNS(Cr,t,n):Ss(e,t,n)}function Ss(e,t,n){if(Nr(n))e.removeAttribute(t);else{if(ce&&!le&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var i=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",i)};e.addEventListener("input",i),e.__ieph=!0}e.setAttribute(t,n)}}var As={create:bs,update:bs};function Cs(e,t){var n=t.elm,i=t.data,r=e.data;if(!(u(i.staticClass)&&u(i.class)&&(u(r)||u(r.staticClass)&&u(r.class)))){var s=kr(t),o=n._transitionClasses;h(o)&&(s=Dr(s,Pr(o))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var xs,Is={create:Cs,update:Cs},Ns="__r",ks="__c";function Os(e){if(h(e[Ns])){var t=ce?"change":"input";e[t]=[].concat(e[Ns],e[t]||[]),delete e[Ns]}h(e[ks])&&(e.change=[].concat(e[ks],e.change||[]),delete e[ks])}function Rs(e,t,n){var i=xs;return function r(){var s=t.apply(null,arguments);null!==s&&Ls(e,r,n,i)}}var Ds=cn&&!(pe&&Number(pe[1])<=53);function Ps(e,t,n,i){if(Ds){var r=Xn,s=t;t=s._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=r||e.timeStamp<=0||e.target.ownerDocument!==document)return s.apply(this,arguments)}}xs.addEventListener(e,t,me?{capture:n,passive:i}:n)}function Ls(e,t,n,i){(i||xs).removeEventListener(e,t._wrapper||t,n)}function Ms(e,t){if(!u(e.data.on)||!u(t.data.on)){var n=t.data.on||{},i=e.data.on||{};xs=t.elm||e.elm,Os(n),ct(n,i,Ps,Ls,Rs,t.context),xs=void 0}}var Bs,Fs={create:Ms,update:Ms,destroy:function(e){return Ms(e,cs)}};function Hs(e,t){if(!u(e.data.domProps)||!u(t.data.domProps)){var n,i,r=t.elm,s=e.data.domProps||{},o=t.data.domProps||{};for(n in(h(o.__ob__)||d(o._v_attr_proxy))&&(o=t.data.domProps=q({},o)),s)n in o||(r[n]="");for(n in o){if(i=o[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),i===s[n])continue;1===r.childNodes.length&&r.removeChild(r.childNodes[0])}if("value"===n&&"PROGRESS"!==r.tagName){r._value=i;var a=u(i)?"":String(i);Us(r,a)&&(r.value=a)}else if("innerHTML"===n&&Hr(r.tagName)&&u(r.innerHTML)){Bs=Bs||document.createElement("div"),Bs.innerHTML="<svg>".concat(i,"</svg>");var c=Bs.firstChild;while(r.firstChild)r.removeChild(r.firstChild);while(c.firstChild)r.appendChild(c.firstChild)}else if(i!==s[n])try{r[n]=i}catch(lS){}}}}function Us(e,t){return!e.composing&&("OPTION"===e.tagName||qs(e,t)||Gs(e,t))}function qs(e,t){var n=!0;try{n=document.activeElement!==e}catch(lS){}return n&&e.value!==t}function Gs(e,t){var n=e.value,i=e._vModifiers;if(h(i)){if(i.number)return S(n)!==S(t);if(i.trim)return n.trim()!==t.trim()}return n!==t}var $s={create:Hs,update:Hs},zs=k((function(e){var t={},n=/;(?![^(]*\))/g,i=/:(.+)/;return e.split(n).forEach((function(e){if(e){var n=e.split(i);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function js(e){var t=Vs(e.style);return e.staticStyle?q(e.staticStyle,t):t}function Vs(e){return Array.isArray(e)?G(e):"string"===typeof e?zs(e):e}function Ws(e,t){var n,i={};if(t){var r=e;while(r.componentInstance)r=r.componentInstance._vnode,r&&r.data&&(n=js(r.data))&&q(i,n)}(n=js(e.data))&&q(i,n);var s=e;while(s=s.parent)s.data&&(n=js(s.data))&&q(i,n);return i}var Ys,Xs=/^--/,Ks=/\s*!important$/,Qs=function(e,t,n){if(Xs.test(t))e.style.setProperty(t,n);else if(Ks.test(n))e.style.setProperty(M(t),n.replace(Ks,""),"important");else{var i=Js(t);if(Array.isArray(n))for(var r=0,s=n.length;r<s;r++)e.style[i]=n[r];else e.style[i]=n}},Zs=["Webkit","Moz","ms"],Js=k((function(e){if(Ys=Ys||document.createElement("div").style,e=R(e),"filter"!==e&&e in Ys)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<Zs.length;n++){var i=Zs[n]+t;if(i in Ys)return i}}));function eo(e,t){var n=t.data,i=e.data;if(!(u(n.staticStyle)&&u(n.style)&&u(i.staticStyle)&&u(i.style))){var r,s,o=t.elm,a=i.staticStyle,c=i.normalizedStyle||i.style||{},l=a||c,d=Vs(t.data.style)||{};t.data.normalizedStyle=h(d.__ob__)?q({},d):d;var p=Ws(t,!0);for(s in l)u(p[s])&&Qs(o,s,"");for(s in p)r=p[s],Qs(o,s,null==r?"":r)}}var to={create:eo,update:eo},no=/\s+/;function io(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(no).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" ".concat(e.getAttribute("class")||""," ");n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function ro(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(no).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" ".concat(e.getAttribute("class")||""," "),i=" "+t+" ";while(n.indexOf(i)>=0)n=n.replace(i," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function so(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&q(t,oo(e.name||"v")),q(t,e),t}return"string"===typeof e?oo(e):void 0}}var oo=k((function(e){return{enterClass:"".concat(e,"-enter"),enterToClass:"".concat(e,"-enter-to"),enterActiveClass:"".concat(e,"-enter-active"),leaveClass:"".concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-to"),leaveActiveClass:"".concat(e,"-leave-active")}})),ao=oe&&!le,co="transition",lo="animation",uo="transition",ho="transitionend",po="animation",fo="animationend";ao&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(uo="WebkitTransition",ho="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(po="WebkitAnimation",fo="webkitAnimationEnd"));var mo=oe?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function go(e){mo((function(){mo(e)}))}function vo(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),io(e,t))}function yo(e,t){e._transitionClasses&&x(e._transitionClasses,t),ro(e,t)}function To(e,t,n){var i=_o(e,t),r=i.type,s=i.timeout,o=i.propCount;if(!r)return n();var a=r===co?ho:fo,c=0,l=function(){e.removeEventListener(a,u),n()},u=function(t){t.target===e&&++c>=o&&l()};setTimeout((function(){c<o&&l()}),s+1),e.addEventListener(a,u)}var Eo=/\b(transform|all)(,|$)/;function _o(e,t){var n,i=window.getComputedStyle(e),r=(i[uo+"Delay"]||"").split(", "),s=(i[uo+"Duration"]||"").split(", "),o=bo(r,s),a=(i[po+"Delay"]||"").split(", "),c=(i[po+"Duration"]||"").split(", "),l=bo(a,c),u=0,h=0;t===co?o>0&&(n=co,u=o,h=s.length):t===lo?l>0&&(n=lo,u=l,h=c.length):(u=Math.max(o,l),n=u>0?o>l?co:lo:null,h=n?n===co?s.length:c.length:0);var d=n===co&&Eo.test(i[uo+"Property"]);return{type:n,timeout:u,propCount:h,hasTransform:d}}function bo(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return wo(t)+wo(e[n])})))}function wo(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function So(e,t){var n=e.elm;h(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var i=so(e.data.transition);if(!u(i)&&!h(n._enterCb)&&1===n.nodeType){var r=i.css,s=i.type,o=i.enterClass,a=i.enterToClass,c=i.enterActiveClass,l=i.appearClass,d=i.appearToClass,p=i.appearActiveClass,f=i.beforeEnter,v=i.enter,y=i.afterEnter,T=i.enterCancelled,E=i.beforeAppear,_=i.appear,b=i.afterAppear,w=i.appearCancelled,A=i.duration,C=Rn,x=Rn.$vnode;while(x&&x.parent)C=x.context,x=x.parent;var I=!C._isMounted||!e.isRootInsert;if(!I||_||""===_){var N=I&&l?l:o,k=I&&p?p:c,O=I&&d?d:a,R=I&&E||f,D=I&&m(_)?_:v,P=I&&b||y,L=I&&w||T,M=S(g(A)?A.enter:A);0;var B=!1!==r&&!le,F=xo(D),H=n._enterCb=Y((function(){B&&(yo(n,O),yo(n,k)),H.cancelled?(B&&yo(n,N),L&&L(n)):P&&P(n),n._enterCb=null}));e.data.show||lt(e,"insert",(function(){var t=n.parentNode,i=t&&t._pending&&t._pending[e.key];i&&i.tag===e.tag&&i.elm._leaveCb&&i.elm._leaveCb(),D&&D(n,H)})),R&&R(n),B&&(vo(n,N),vo(n,k),go((function(){yo(n,N),H.cancelled||(vo(n,O),F||(Co(M)?setTimeout(H,M):To(n,s,H)))}))),e.data.show&&(t&&t(),D&&D(n,H)),B||F||H()}}}function Ao(e,t){var n=e.elm;h(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var i=so(e.data.transition);if(u(i)||1!==n.nodeType)return t();if(!h(n._leaveCb)){var r=i.css,s=i.type,o=i.leaveClass,a=i.leaveToClass,c=i.leaveActiveClass,l=i.beforeLeave,d=i.leave,p=i.afterLeave,f=i.leaveCancelled,m=i.delayLeave,v=i.duration,y=!1!==r&&!le,T=xo(d),E=S(g(v)?v.leave:v);0;var _=n._leaveCb=Y((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),y&&(yo(n,a),yo(n,c)),_.cancelled?(y&&yo(n,o),f&&f(n)):(t(),p&&p(n)),n._leaveCb=null}));m?m(b):b()}function b(){_.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),l&&l(n),y&&(vo(n,o),vo(n,c),go((function(){yo(n,o),_.cancelled||(vo(n,a),T||(Co(E)?setTimeout(_,E):To(n,s,_)))}))),d&&d(n,_),y||T||_())}}function Co(e){return"number"===typeof e&&!isNaN(e)}function xo(e){if(u(e))return!1;var t=e.fns;return h(t)?xo(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Io(e,t){!0!==t.data.show&&So(t)}var No=oe?{create:Io,activate:Io,remove:function(e,t){!0!==e.data.show?Ao(e,t):t()}}:{},ko=[As,Is,Fs,$s,to,No],Oo=ko.concat(_s),Ro=ps({nodeOps:rs,modules:Oo});le&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&Uo(e,"input")}));var Do={inserted:function(e,t,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?lt(n,"postpatch",(function(){Do.componentUpdated(e,t,n)})):Po(e,t,n.context),e._vOptions=[].map.call(e.options,Bo)):("textarea"===n.tag||zr(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",Fo),e.addEventListener("compositionend",Ho),e.addEventListener("change",Ho),le&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Po(e,t,n.context);var i=e._vOptions,r=e._vOptions=[].map.call(e.options,Bo);if(r.some((function(e,t){return!V(e,i[t])}))){var s=e.multiple?t.value.some((function(e){return Mo(e,r)})):t.value!==t.oldValue&&Mo(t.value,r);s&&Uo(e,"change")}}}};function Po(e,t,n){Lo(e,t,n),(ce||ue)&&setTimeout((function(){Lo(e,t,n)}),0)}function Lo(e,t,n){var i=t.value,r=e.multiple;if(!r||Array.isArray(i)){for(var s,o,a=0,c=e.options.length;a<c;a++)if(o=e.options[a],r)s=W(i,Bo(o))>-1,o.selected!==s&&(o.selected=s);else if(V(Bo(o),i))return void(e.selectedIndex!==a&&(e.selectedIndex=a));r||(e.selectedIndex=-1)}}function Mo(e,t){return t.every((function(t){return!V(t,e)}))}function Bo(e){return"_value"in e?e._value:e.value}function Fo(e){e.target.composing=!0}function Ho(e){e.target.composing&&(e.target.composing=!1,Uo(e.target,"input"))}function Uo(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function qo(e){return!e.componentInstance||e.data&&e.data.transition?e:qo(e.componentInstance._vnode)}var Go={bind:function(e,t,n){var i=t.value;n=qo(n);var r=n.data&&n.data.transition,s=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;i&&r?(n.data.show=!0,So(n,(function(){e.style.display=s}))):e.style.display=i?s:"none"},update:function(e,t,n){var i=t.value,r=t.oldValue;if(!i!==!r){n=qo(n);var s=n.data&&n.data.transition;s?(n.data.show=!0,i?So(n,(function(){e.style.display=e.__vOriginalDisplay})):Ao(n,(function(){e.style.display="none"}))):e.style.display=i?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,i,r){r||(e.style.display=e.__vOriginalDisplay)}},$o={model:Do,show:Go},zo={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function jo(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?jo(Xt(t.children)):e}function Vo(e){var t={},n=e.$options;for(var i in n.propsData)t[i]=e[i];var r=n._parentListeners;for(var i in r)t[R(i)]=r[i];return t}function Wo(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function Yo(e){while(e=e.parent)if(e.data.transition)return!0}function Xo(e,t){return t.key===e.key&&t.tag===e.tag}var Ko=function(e){return e.tag||Dt(e)},Qo=function(e){return"show"===e.name},Zo={name:"transition",props:zo,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(Ko),n.length)){0;var i=this.mode;0;var r=n[0];if(Yo(this.$vnode))return r;var s=jo(r);if(!s)return r;if(this._leaving)return Wo(e,r);var o="__transition-".concat(this._uid,"-");s.key=null==s.key?s.isComment?o+"comment":o+s.tag:f(s.key)?0===String(s.key).indexOf(o)?s.key:o+s.key:s.key;var a=(s.data||(s.data={})).transition=Vo(this),c=this._vnode,l=jo(c);if(s.data.directives&&s.data.directives.some(Qo)&&(s.data.show=!0),l&&l.data&&!Xo(s,l)&&!Dt(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var u=l.data.transition=q({},a);if("out-in"===i)return this._leaving=!0,lt(u,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),Wo(e,r);if("in-out"===i){if(Dt(s))return c;var h,d=function(){h()};lt(a,"afterEnter",d),lt(a,"enterCancelled",d),lt(u,"delayLeave",(function(e){h=e}))}}return r}}},Jo=q({tag:String,moveClass:String},zo);delete Jo.mode;var ea={props:Jo,beforeMount:function(){var e=this,t=this._update;this._update=function(n,i){var r=Dn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,r(),t.call(e,n,i)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,r=this.$slots.default||[],s=this.children=[],o=Vo(this),a=0;a<r.length;a++){var c=r[a];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))s.push(c),n[c.key]=c,(c.data||(c.data={})).transition=o;else;}if(i){var l=[],u=[];for(a=0;a<i.length;a++){c=i[a];c.data.transition=o,c.data.pos=c.elm.getBoundingClientRect(),n[c.key]?l.push(c):u.push(c)}this.kept=e(t,null,l),this.removed=u}return e(t,null,s)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(ta),e.forEach(na),e.forEach(ia),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,i=n.style;vo(n,t),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(ho,n._moveCb=function e(i){i&&i.target!==n||i&&!/transform$/.test(i.propertyName)||(n.removeEventListener(ho,e),n._moveCb=null,yo(n,t))})}})))},methods:{hasMove:function(e,t){if(!ao)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){ro(n,e)})),io(n,t),n.style.display="none",this.$el.appendChild(n);var i=_o(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}};function ta(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function na(e){e.data.newPos=e.elm.getBoundingClientRect()}function ia(e){var t=e.data.pos,n=e.data.newPos,i=t.left-n.left,r=t.top-n.top;if(i||r){e.data.moved=!0;var s=e.elm.style;s.transform=s.WebkitTransform="translate(".concat(i,"px,").concat(r,"px)"),s.transitionDuration="0s"}}var ra={Transition:Zo,TransitionGroup:ea};function sa(e,t){return e.__proto__=t,e}rr.config.mustUseProp=_r,rr.config.isReservedTag=Ur,rr.config.isReservedAttr=Tr,rr.config.getTagNamespace=qr,rr.config.isUnknownElement=$r,q(rr.options.directives,$o),q(rr.options.components,ra),rr.prototype.__patch__=oe?Ro:$,rr.prototype.$mount=function(e,t){return e=e&&oe?jr(e):void 0,Mn(this,e,t)},oe&&setTimeout((function(){J.devtools&&ye&&ye.emit("init",rr)}),0),
/**
  * vue-custom-element v3.3.0
  * (c) 2021 Karol Fabjaczuk
  * @license MIT
  */
Object.setPrototypeOf=Object.setPrototypeOf||sa;sa.bind(Object);function oa(){return"undefined"!==typeof Symbol&&"undefined"!==typeof Reflect&&"undefined"!==typeof Proxy&&!Object.isSealed(Proxy)}var aa=oa(),ca=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function la(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ua(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function ha(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function da(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}function pa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"!==typeof customElements){if(aa){var n=function(e){function n(e){var t;la(this,n);var i=ua(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),s=e?HTMLElement.call(e):i;return r.call(s),t=s,ua(i,t)}return ha(n,e),ca(n,null,[{key:"observedAttributes",get:function(){return t.observedAttributes||[]}}]),n}(da);return n.prototype.connectedCallback=s,n.prototype.disconnectedCallback=o,n.prototype.attributeChangedCallback=a,c(e,n),n}var i=function(e){var t=e?HTMLElement.call(e):this;return r.call(t),t};return i.observedAttributes=t.observedAttributes||[],i.prototype=Object.create(HTMLElement.prototype,{constructor:{configurable:!0,writable:!0,value:i}}),i.prototype.connectedCallback=s,i.prototype.disconnectedCallback=o,i.prototype.attributeChangedCallback=a,c(e,i),i}function r(){!0===t.shadow&&HTMLElement.prototype.attachShadow&&this.attachShadow({mode:"open"}),"function"===typeof t.constructorCallback&&t.constructorCallback.call(this)}function s(){"function"===typeof t.connectedCallback&&t.connectedCallback.call(this)}function o(){"function"===typeof t.disconnectedCallback&&t.disconnectedCallback.call(this)}function a(e,n,i){"function"===typeof t.attributeChangedCallback&&t.attributeChangedCallback.call(this,e,n,i)}function c(e,t){var n=customElements.get(e);return"undefined"!==typeof n?n:customElements.define(e,t)}}Object.setPrototypeOf(da.prototype,HTMLElement.prototype),Object.setPrototypeOf(da,HTMLElement);var fa=/-(\w)/g,ma=function(e){return e.replace(fa,(function(e,t){return t?t.toUpperCase():""}))},ga=/([^-])([A-Z])/g,va=function(e){return e.replace(ga,"$1-$2").replace(ga,"$1-$2").toLowerCase()};function ya(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.length-t,i=new Array(n);while(n--)i[n]=e[n+t];return i}var Ta="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Ea(e,t){if(null===e||void 0===e)return t!==Boolean&&void 0;var n=e,i=["true","false"].indexOf(e)>-1,r=parseFloat(n,10),s=!isNaN(r)&&isFinite(n)&&"string"===typeof n&&!n.match(/^0+[^.]\d*$/g);return t&&t!==Boolean&&("undefined"===typeof n?"undefined":Ta(n))!==t?n=t(e):i||t===Boolean?n=""===n||("true"===n||!0===n):s&&(n=r),n}function _a(e,t){if(e&&e.length)e.forEach((function(e){var n=ma(e);-1===t.camelCase.indexOf(n)&&t.camelCase.push(n)}));else if(e&&"object"===("undefined"===typeof e?"undefined":Ta(e)))for(var n in e){var i=ma(n);-1===t.camelCase.indexOf(i)&&t.camelCase.push(i),e[i]&&e[i].type&&(t.types[n]=[].concat(e[i].type)[0])}}function ba(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={camelCase:[],hyphenate:[],types:{}};if(e.mixins&&e.mixins.forEach((function(e){_a(e.props,t)})),e.extends&&e.extends.props){var n=e.extends.props;_a(n,t)}return _a(e.props,t),t.camelCase.forEach((function(e){t.hyphenate.push(va(e))})),t}function wa(e,t){t.camelCase.forEach((function(n,i){Object.defineProperty(e,n,{get:function(){return this.__vue_custom_element__[n]},set:function(e){if("object"!==("undefined"===typeof e?"undefined":Ta(e))&&"function"!==typeof e||!this.__vue_custom_element__){var n=t.types[t.camelCase[i]];this.setAttribute(t.hyphenate[i],Ea(e,n))}else{var r=t.camelCase[i];this.__vue_custom_element__[r]=e}}})}))}function Sa(e,t,n){var i=t.propsData||{};return n.hyphenate.forEach((function(t,r){var s=n.camelCase[r],o=e.attributes[t]||e[s],a=null;n.types[s]&&(a=n.types[s]),o instanceof Attr?i[s]=Ea(o.value,a):"undefined"!==typeof o&&(i[s]=o)})),i}function Aa(e){var t={};return ya(e.attributes).forEach((function(e){t["vue-slot"===e.nodeName?"slot":e.nodeName]=e.nodeValue})),t}function Ca(e){if(e.childNodes.length)return e.childNodes;if(e.content&&e.content.childNodes&&e.content.childNodes.length)return e.content.childNodes;var t=document.createElement("div");return t.innerHTML=e.innerHTML,t.childNodes}function xa(e,t,n){var i=Ca(t),r=ya(i).map((function(t){return"#text"===t.nodeName?t.nodeValue:e(t.tagName,{attrs:Aa(t),domProps:{innerHTML:t.innerHTML}})}));return n.slot=t.id,e("template",n,r)}function Ia(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=[];return ya(e).forEach((function(e){if("#text"===e.nodeName)e.nodeValue.trim()&&n.push(t("span",e.nodeValue));else if("#comment"!==e.nodeName){var i=Aa(e),r={attrs:i,domProps:{innerHTML:""===e.innerHTML?e.innerText:e.innerHTML}};i.slot&&(r.slot=i.slot,i.slot=void 0);var s="TEMPLATE"===e.tagName?xa(t,e,r):t(e.tagName,r);n.push(s)}})),n}function Na(e,t){var n={bubbles:!1,cancelable:!1,detail:t},i=void 0;return"function"===typeof window.CustomEvent?i=new CustomEvent(e,n):(i=document.createEvent("CustomEvent"),i.initCustomEvent(e,n.bubbles,n.cancelable,n.detail)),i}function ka(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var s=Na(t,[].concat(i));e.dispatchEvent(s)}function Oa(e,t,n,i,r){if(e.__vue_custom_element__)return Promise.resolve(e);var s=t.util.extend({},n),o=Sa(e,s,i),a=t.version&&parseInt(t.version.split(".")[0],10)||0;function c(){this.$emit=function(){for(var t,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];ka.apply(void 0,[e].concat(i)),this.__proto__&&(t=this.__proto__.$emit).call.apply(t,[this].concat(i))}}if(s.beforeCreate=[].concat(s.beforeCreate||[],c),s._compiled){var l={},u=s._Ctor;u&&(l=Object.keys(u).map((function(e){return u[e]}))[0].options),l.beforeCreate=s.beforeCreate}var h=void 0;if(a>=2){var d=e.cloneNode(!0).childNodes;h={propsData:o,props:i.camelCase,computed:{reactiveProps:function(){var e=this,t={};return i.camelCase.forEach((function(n){"undefined"!==typeof e[n]&&(t[n]=e[n])})),t}},render:function(e){var t={props:this.reactiveProps};return e(s,t,Ia(d,e))}}}else if(1===a)h=s,h.propsData=o;else{h=s;var p={};Object.keys(o).forEach((function(e){p[e]={default:o[e]}})),h.props=p}var f=a>=2?"<div></div>":("<div>"+e.innerHTML+"</div>").replace(/vue-slot=/g,"slot=");if(r.shadow&&e.shadowRoot?(e.shadowRoot.innerHTML=f,h.el=e.shadowRoot.children[0]):(e.innerHTML=f,h.el=e.children[0]),r.shadow&&r.shadowCss&&e.shadowRoot){var m=document.createElement("style");m.type="text/css",m.appendChild(document.createTextNode(r.shadowCss)),e.shadowRoot.appendChild(m)}return wa(e,i),"function"===typeof r.beforeCreateVueInstance&&(h=r.beforeCreateVueInstance(h)||h),Promise.resolve(h).then((function(n){return e.__vue_custom_element__=new t(n),e.__vue_custom_element_props__=i,e.getVueInstance=function(){var t=e.__vue_custom_element__;return t.$children.length?t.$children[0]:t},e.removeAttribute("vce-cloak"),e.setAttribute("vce-ready",""),ka(e,"vce-ready"),e}))}function Ra(e){e.customElement=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="function"===typeof n,s=r&&{props:i.props||[]},o=ba(r?s:n),a=pa(t,{constructorCallback:function(){"function"===typeof i.constructorCallback&&i.constructorCallback.call(this)},connectedCallback:function(){var s=this,a=r&&n(),c=a&&a.then&&"function"===typeof a.then;if("function"===typeof i.connectedCallback&&i.connectedCallback.call(this),r&&!c)throw new Error("Async component "+t+" do not returns Promise");this.__detached__||(c?a.then((function(t){var n=ba(t);Oa(s,e,t,n,i).then((function(){"function"===typeof i.vueInstanceCreatedCallback&&i.vueInstanceCreatedCallback.call(s)}))})):Oa(this,e,n,o,i).then((function(){"function"===typeof i.vueInstanceCreatedCallback&&i.vueInstanceCreatedCallback.call(s)}))),this.__detached__=!1},disconnectedCallback:function(){var e=this;this.__detached__=!0,"function"===typeof i.disconnectedCallback&&i.disconnectedCallback.call(this),null!==i.destroyTimeout&&setTimeout((function(){e.__detached__&&e.__vue_custom_element__&&(e.__detached__=!1,e.__vue_custom_element__.$destroy(!0),delete e.__vue_custom_element__,delete e.__vue_custom_element_props__)}),i.destroyTimeout||3e3)},attributeChangedCallback:function(e,t,n){if(this.__vue_custom_element__&&"undefined"!==typeof n){var r=ma(e);"function"===typeof i.attributeChangedCallback&&i.attributeChangedCallback.call(this,e,t,n);var s=this.__vue_custom_element_props__.types[r];this.__vue_custom_element__[r]=Ea(n,s)}},observedAttributes:o.hyphenate,shadow:!!i.shadow&&!!HTMLElement.prototype.attachShadow});return a}}"undefined"!==typeof window&&window.Vue&&(window.Vue.use(Ra),Ra.installed&&(Ra.installed=!1));var Da=Ra,Pa=function(){var e=this,t=e._self._c;return t("div",{staticClass:"annonaview",class:[e.settings.fullpage||e.fullscreen?"fullpage":"storyboard_viewer"],attrs:{id:"storyboard_viewer"}},[t("div",{class:[e.settings.annoview&&0!=e.shown?"sidebyside"==e.settings.annoview||"scrollview"==e.settings.annoview?"sidebyside":"collapse":"defaultview"],staticStyle:{position:"relative"}},[t("div",{key:e.compkey,class:[e.settings.fullpage||e.fullscreen?"seadragonboxfull":"seadragonbox",e.settings.toolbarposition&&!e.$parent.multi?e.settings.toolbarposition+"_menu_container":"default_menu_container"],staticStyle:{position:"relative"},attrs:{id:e.seadragonid}},[e.$parent.multi?e._e():t("toolbar"),e.rendered?t("div",{staticStyle:{position:"relative",top:"50%","text-align":"center"},domProps:{innerHTML:e._s(e.rendered)}}):e._e(),"sidebyside"!=e.settings.annoview&&"scrollview"!=e.settings.annoview?t("annotationbox"):e._e()],1),"sidebyside"==e.settings.annoview||"scrollview"==e.settings.annoview?t("annotationbox"):e._e()],1)])},La=[];function Ma(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ba}=Object.prototype,{getPrototypeOf:Fa}=Object,{iterator:Ha,toStringTag:Ua}=Symbol,qa=(e=>t=>{const n=Ba.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ga=e=>(e=e.toLowerCase(),t=>qa(t)===e),$a=e=>t=>typeof t===e,{isArray:za}=Array,ja=$a("undefined");function Va(e){return null!==e&&!ja(e)&&null!==e.constructor&&!ja(e.constructor)&&Ka(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Wa=Ga("ArrayBuffer");function Ya(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Wa(e.buffer),t}const Xa=$a("string"),Ka=$a("function"),Qa=$a("number"),Za=e=>null!==e&&"object"===typeof e,Ja=e=>!0===e||!1===e,ec=e=>{if("object"!==qa(e))return!1;const t=Fa(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Ua in e)&&!(Ha in e)},tc=e=>{if(!Za(e)||Va(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(lS){return!1}},nc=Ga("Date"),ic=Ga("File"),rc=Ga("Blob"),sc=Ga("FileList"),oc=e=>Za(e)&&Ka(e.pipe),ac=e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Ka(e.append)&&("formdata"===(t=qa(e))||"object"===t&&Ka(e.toString)&&"[object FormData]"===e.toString()))},cc=Ga("URLSearchParams"),[lc,uc,hc,dc]=["ReadableStream","Request","Response","Headers"].map(Ga),pc=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fc(e,t,{allOwnKeys:n=!1}={}){if(null===e||"undefined"===typeof e)return;let i,r;if("object"!==typeof e&&(e=[e]),za(e))for(i=0,r=e.length;i<r;i++)t.call(null,e[i],i,e);else{if(Va(e))return;const r=n?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(i=0;i<s;i++)o=r[i],t.call(null,e[o],o,e)}}function mc(e,t){if(Va(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i,r=n.length;while(r-- >0)if(i=n[r],t===i.toLowerCase())return i;return null}const gc=(()=>"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global)(),vc=e=>!ja(e)&&e!==gc;function yc(){const{caseless:e}=vc(this)&&this||{},t={},n=(n,i)=>{const r=e&&mc(t,i)||i;ec(t[r])&&ec(n)?t[r]=yc(t[r],n):ec(n)?t[r]=yc({},n):za(n)?t[r]=n.slice():t[r]=n};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&fc(arguments[i],n);return t}const Tc=(e,t,n,{allOwnKeys:i}={})=>(fc(t,((t,i)=>{n&&Ka(t)?e[i]=Ma(t,n):e[i]=t}),{allOwnKeys:i}),e),Ec=e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),_c=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},bc=(e,t,n,i)=>{let r,s,o;const a={};if(t=t||{},null==e)return t;do{r=Object.getOwnPropertyNames(e),s=r.length;while(s-- >0)o=r[s],i&&!i(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&Fa(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},wc=(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},Sc=e=>{if(!e)return null;if(za(e))return e;let t=e.length;if(!Qa(t))return null;const n=new Array(t);while(t-- >0)n[t]=e[t];return n},Ac=(e=>t=>e&&t instanceof e)("undefined"!==typeof Uint8Array&&Fa(Uint8Array)),Cc=(e,t)=>{const n=e&&e[Ha],i=n.call(e);let r;while((r=i.next())&&!r.done){const n=r.value;t.call(e,n[0],n[1])}},xc=(e,t)=>{let n;const i=[];while(null!==(n=e.exec(t)))i.push(n);return i},Ic=Ga("HTMLFormElement"),Nc=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),kc=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Oc=Ga("RegExp"),Rc=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};fc(n,((n,r)=>{let s;!1!==(s=t(n,r,e))&&(i[r]=s||n)})),Object.defineProperties(e,i)},Dc=e=>{Rc(e,((t,n)=>{if(Ka(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];Ka(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},Pc=(e,t)=>{const n={},i=e=>{e.forEach((e=>{n[e]=!0}))};return za(e)?i(e):i(String(e).split(t)),n},Lc=()=>{},Mc=(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t;function Bc(e){return!!(e&&Ka(e.append)&&"FormData"===e[Ua]&&e[Ha])}const Fc=e=>{const t=new Array(10),n=(e,i)=>{if(Za(e)){if(t.indexOf(e)>=0)return;if(Va(e))return e;if(!("toJSON"in e)){t[i]=e;const r=za(e)?[]:{};return fc(e,((e,t)=>{const s=n(e,i+1);!ja(s)&&(r[t]=s)})),t[i]=void 0,r}}return e};return n(e,0)},Hc=Ga("AsyncFunction"),Uc=e=>e&&(Za(e)||Ka(e))&&Ka(e.then)&&Ka(e.catch),qc=((e,t)=>e?setImmediate:t?((e,t)=>(gc.addEventListener("message",(({source:n,data:i})=>{n===gc&&i===e&&t.length&&t.shift()()}),!1),n=>{t.push(n),gc.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))("function"===typeof setImmediate,Ka(gc.postMessage)),Gc="undefined"!==typeof queueMicrotask?queueMicrotask.bind(gc):"undefined"!==typeof process&&process.nextTick||qc,$c=e=>null!=e&&Ka(e[Ha]);var zc={isArray:za,isArrayBuffer:Wa,isBuffer:Va,isFormData:ac,isArrayBufferView:Ya,isString:Xa,isNumber:Qa,isBoolean:Ja,isObject:Za,isPlainObject:ec,isEmptyObject:tc,isReadableStream:lc,isRequest:uc,isResponse:hc,isHeaders:dc,isUndefined:ja,isDate:nc,isFile:ic,isBlob:rc,isRegExp:Oc,isFunction:Ka,isStream:oc,isURLSearchParams:cc,isTypedArray:Ac,isFileList:sc,forEach:fc,merge:yc,extend:Tc,trim:pc,stripBOM:Ec,inherits:_c,toFlatObject:bc,kindOf:qa,kindOfTest:Ga,endsWith:wc,toArray:Sc,forEachEntry:Cc,matchAll:xc,isHTMLForm:Ic,hasOwnProperty:kc,hasOwnProp:kc,reduceDescriptors:Rc,freezeMethods:Dc,toObjectSet:Pc,toCamelCase:Nc,noop:Lc,toFiniteNumber:Mc,findKey:mc,global:gc,isContextDefined:vc,isSpecCompliantForm:Bc,toJSONObject:Fc,isAsyncFn:Hc,isThenable:Uc,setImmediate:qc,asap:Gc,isIterable:$c};function jc(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}zc.inherits(jc,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:zc.toJSONObject(this.config),code:this.code,status:this.status}}});const Vc=jc.prototype,Wc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Wc[e]={value:e}})),Object.defineProperties(jc,Wc),Object.defineProperty(Vc,"isAxiosError",{value:!0}),jc.from=(e,t,n,i,r,s)=>{const o=Object.create(Vc);return zc.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),jc.call(o,e.message,t,n,i,r),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};var Yc=jc,Xc=null;function Kc(e){return zc.isPlainObject(e)||zc.isArray(e)}function Qc(e){return zc.endsWith(e,"[]")?e.slice(0,-2):e}function Zc(e,t,n){return e?e.concat(t).map((function(e,t){return e=Qc(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}function Jc(e){return zc.isArray(e)&&!e.some(Kc)}const el=zc.toFlatObject(zc,{},null,(function(e){return/^is[A-Z]/.test(e)}));function tl(e,t,n){if(!zc.isObject(e))throw new TypeError("target must be an object");t=t||new(Xc||FormData),n=zc.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!zc.isUndefined(t[e])}));const i=n.metaTokens,r=n.visitor||u,s=n.dots,o=n.indexes,a=n.Blob||"undefined"!==typeof Blob&&Blob,c=a&&zc.isSpecCompliantForm(t);if(!zc.isFunction(r))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(zc.isDate(e))return e.toISOString();if(zc.isBoolean(e))return e.toString();if(!c&&zc.isBlob(e))throw new Yc("Blob is not supported. Use a Buffer instead.");return zc.isArrayBuffer(e)||zc.isTypedArray(e)?c&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,r){let a=e;if(e&&!r&&"object"===typeof e)if(zc.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(zc.isArray(e)&&Jc(e)||(zc.isFileList(e)||zc.endsWith(n,"[]"))&&(a=zc.toArray(e)))return n=Qc(n),a.forEach((function(e,i){!zc.isUndefined(e)&&null!==e&&t.append(!0===o?Zc([n],i,s):null===o?n:n+"[]",l(e))})),!1;return!!Kc(e)||(t.append(Zc(r,n,s),l(e)),!1)}const h=[],d=Object.assign(el,{defaultVisitor:u,convertValue:l,isVisitable:Kc});function p(e,n){if(!zc.isUndefined(e)){if(-1!==h.indexOf(e))throw Error("Circular reference detected in "+n.join("."));h.push(e),zc.forEach(e,(function(e,i){const s=!(zc.isUndefined(e)||null===e)&&r.call(t,e,zc.isString(i)?i.trim():i,n,d);!0===s&&p(e,n?n.concat(i):[i])})),h.pop()}}if(!zc.isObject(e))throw new TypeError("data must be an object");return p(e),t}var nl=tl;function il(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function rl(e,t){this._pairs=[],e&&nl(e,this,t)}const sl=rl.prototype;sl.append=function(e,t){this._pairs.push([e,t])},sl.toString=function(e){const t=e?function(t){return e.call(this,t,il)}:il;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var ol=rl;function al(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cl(e,t,n){if(!t)return e;const i=n&&n.encode||al;zc.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(s=r?r(t,n):zc.isURLSearchParams(t)?t.toString():new ol(t,n).toString(i),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}class ll{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){zc.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}var ul=ll,hl={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dl="undefined"!==typeof URLSearchParams?URLSearchParams:ol,pl="undefined"!==typeof FormData?FormData:null,fl="undefined"!==typeof Blob?Blob:null,ml={isBrowser:!0,classes:{URLSearchParams:dl,FormData:pl,Blob:fl},protocols:["http","https","file","blob","url","data"]};const gl="undefined"!==typeof window&&"undefined"!==typeof document,vl="object"===typeof navigator&&navigator||void 0,yl=gl&&(!vl||["ReactNative","NativeScript","NS"].indexOf(vl.product)<0),Tl=(()=>"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts)(),El=gl&&window.location.href||"http://localhost";var _l={...e,...ml};function bl(e,t){return nl(e,new _l.classes.URLSearchParams,{visitor:function(e,t,n,i){return _l.isNode&&zc.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function wl(e){return zc.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}function Sl(e){const t={},n=Object.keys(e);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],t[s]=e[s];return t}function Al(e){function t(e,n,i,r){let s=e[r++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=r>=e.length;if(s=!s&&zc.isArray(i)?i.length:s,a)return zc.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!o;i[s]&&zc.isObject(i[s])||(i[s]=[]);const c=t(e,n,i[s],r);return c&&zc.isArray(i[s])&&(i[s]=Sl(i[s])),!o}if(zc.isFormData(e)&&zc.isFunction(e.entries)){const n={};return zc.forEachEntry(e,((e,i)=>{t(wl(e),i,n,0)})),n}return null}var Cl=Al;function xl(e,t,n){if(zc.isString(e))try{return(t||JSON.parse)(e),zc.trim(e)}catch(lS){if("SyntaxError"!==lS.name)throw lS}return(n||JSON.stringify)(e)}const Il={transitional:hl,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=zc.isObject(e);r&&zc.isHTMLForm(e)&&(e=new FormData(e));const s=zc.isFormData(e);if(s)return i?JSON.stringify(Cl(e)):e;if(zc.isArrayBuffer(e)||zc.isBuffer(e)||zc.isStream(e)||zc.isFile(e)||zc.isBlob(e)||zc.isReadableStream(e))return e;if(zc.isArrayBufferView(e))return e.buffer;if(zc.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return bl(e,this.formSerializer).toString();if((o=zc.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return nl(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),xl(e)):e}],transformResponse:[function(e){const t=this.transitional||Il.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(zc.isResponse(e)||zc.isReadableStream(e))return e;if(e&&zc.isString(e)&&(n&&!this.responseType||i)){const n=t&&t.silentJSONParsing,r=!n&&i;try{return JSON.parse(e)}catch(lS){if(r){if("SyntaxError"===lS.name)throw Yc.from(lS,Yc.ERR_BAD_RESPONSE,this,null,this.response);throw lS}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_l.classes.FormData,Blob:_l.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};zc.forEach(["delete","get","head","post","put","patch"],(e=>{Il.headers[e]={}}));var Nl=Il;const kl=zc.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Ol=e=>{const t={};let n,i,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),i=e.substring(r+1).trim(),!n||t[n]&&kl[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)})),t};const Rl=Symbol("internals");function Dl(e){return e&&String(e).trim().toLowerCase()}function Pl(e){return!1===e||null==e?e:zc.isArray(e)?e.map(Pl):String(e)}function Ll(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;while(i=n.exec(e))t[i[1]]=i[2];return t}const Ml=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Bl(e,t,n,i,r){return zc.isFunction(i)?i.call(this,t,n):(r&&(t=n),zc.isString(t)?zc.isString(i)?-1!==t.indexOf(i):zc.isRegExp(i)?i.test(t):void 0:void 0)}function Fl(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}function Hl(e,t){const n=zc.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+n,{value:function(e,n,r){return this[i].call(this,t,e,n,r)},configurable:!0})}))}class Ul{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(e,t,n){const r=Dl(t);if(!r)throw new Error("header name must be a non-empty string");const s=zc.findKey(i,r);(!s||void 0===i[s]||!0===n||void 0===n&&!1!==i[s])&&(i[s||t]=Pl(e))}const s=(e,t)=>zc.forEach(e,((e,n)=>r(e,n,t)));if(zc.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(zc.isString(e)&&(e=e.trim())&&!Ml(e))s(Ol(e),t);else if(zc.isObject(e)&&zc.isIterable(e)){let n,i,r={};for(const t of e){if(!zc.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[i=t[0]]=(n=r[i])?zc.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}s(r,t)}else null!=e&&r(t,e,n);return this}get(e,t){if(e=Dl(e),e){const n=zc.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return Ll(e);if(zc.isFunction(t))return t.call(this,e,n);if(zc.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Dl(e),e){const n=zc.findKey(this,e);return!(!n||void 0===this[n]||t&&!Bl(this,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function r(e){if(e=Dl(e),e){const r=zc.findKey(n,e);!r||t&&!Bl(n,n[r],r,t)||(delete n[r],i=!0)}}return zc.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;while(n--){const r=t[n];e&&!Bl(this,this[r],r,e,!0)||(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return zc.forEach(this,((i,r)=>{const s=zc.findKey(n,r);if(s)return t[s]=Pl(i),void delete t[r];const o=e?Fl(r):String(r).trim();o!==r&&delete t[r],t[o]=Pl(i),n[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return zc.forEach(this,((n,i)=>{null!=n&&!1!==n&&(t[i]=e&&zc.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=this[Rl]=this[Rl]={accessors:{}},n=t.accessors,i=this.prototype;function r(e){const t=Dl(e);n[t]||(Hl(i,e),n[t]=!0)}return zc.isArray(e)?e.forEach(r):r(e),this}}Ul.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),zc.reduceDescriptors(Ul.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),zc.freezeMethods(Ul);var ql=Ul;function Gl(e,t){const n=this||Nl,i=t||n,r=ql.from(i.headers);let s=i.data;return zc.forEach(e,(function(e){s=e.call(n,s,r.normalize(),t?t.status:void 0)})),r.normalize(),s}function $l(e){return!(!e||!e.__CANCEL__)}function zl(e,t,n){Yc.call(this,null==e?"canceled":e,Yc.ERR_CANCELED,t,n),this.name="CanceledError"}zc.inherits(zl,Yc,{__CANCEL__:!0});var jl=zl;function Vl(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new Yc("Request failed with status code "+n.status,[Yc.ERR_BAD_REQUEST,Yc.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}function Wl(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Yl(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=i[o];r||(r=c),n[s]=a,i[s]=c;let u=o,h=0;while(u!==s)h+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-r<t)return;const d=l&&c-l;return d?Math.round(1e3*h/d):void 0}}var Xl=Yl;function Kl(e,t){let n,i,r=0,s=1e3/t;const o=(t,s=Date.now())=>{r=s,n=null,i&&(clearTimeout(i),i=null),e(...t)},a=(...e)=>{const t=Date.now(),a=t-r;a>=s?o(e,t):(n=e,i||(i=setTimeout((()=>{i=null,o(n)}),s-a)))},c=()=>n&&o(n);return[a,c]}var Ql=Kl;const Zl=(e,t,n=3)=>{let i=0;const r=Xl(50,250);return Ql((n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-i,c=r(a),l=s<=o;i=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&l?(o-s)/c:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0};e(u)}),n)},Jl=(e,t)=>{const n=null!=e;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},eu=e=>(...t)=>zc.asap((()=>e(...t)));var tu=_l.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,_l.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(_l.origin),_l.navigator&&/(msie|trident)/i.test(_l.navigator.userAgent)):()=>!0,nu=_l.hasStandardBrowserEnv?{write(e,t,n,i,r,s){const o=[e+"="+encodeURIComponent(t)];zc.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),zc.isString(i)&&o.push("path="+i),zc.isString(r)&&o.push("domain="+r),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function iu(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ru(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function su(e,t,n){let i=!iu(t);return e&&(i||0==n)?ru(e,t):t}const ou=e=>e instanceof ql?{...e}:e;function au(e,t){t=t||{};const n={};function i(e,t,n,i){return zc.isPlainObject(e)&&zc.isPlainObject(t)?zc.merge.call({caseless:i},e,t):zc.isPlainObject(t)?zc.merge({},t):zc.isArray(t)?t.slice():t}function r(e,t,n,r){return zc.isUndefined(t)?zc.isUndefined(e)?void 0:i(void 0,e,n,r):i(e,t,n,r)}function s(e,t){if(!zc.isUndefined(t))return i(void 0,t)}function o(e,t){return zc.isUndefined(t)?zc.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function a(n,r,s){return s in t?i(n,r):s in e?i(void 0,n):void 0}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,n)=>r(ou(e),ou(t),n,!0)};return zc.forEach(Object.keys({...e,...t}),(function(i){const s=c[i]||r,o=s(e[i],t[i],i);zc.isUndefined(o)&&s!==a||(n[i]=o)})),n}var cu=e=>{const t=au({},e);let n,{data:i,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:c}=t;if(t.headers=a=ql.from(a),t.url=cl(su(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),zc.isFormData(i))if(_l.hasStandardBrowserEnv||_l.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(_l.hasStandardBrowserEnv&&(r&&zc.isFunction(r)&&(r=r(t)),r||!1!==r&&tu(t.url))){const e=s&&o&&nu.read(o);e&&a.set(s,e)}return t};const lu="undefined"!==typeof XMLHttpRequest;var uu=lu&&function(e){return new Promise((function(t,n){const i=cu(e);let r=i.data;const s=ql.from(i.headers).normalize();let o,a,c,l,u,{responseType:h,onUploadProgress:d,onDownloadProgress:p}=i;function f(){l&&l(),u&&u(),i.cancelToken&&i.cancelToken.unsubscribe(o),i.signal&&i.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const i=ql.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),r=h&&"text"!==h&&"json"!==h?m.response:m.responseText,s={data:r,status:m.status,statusText:m.statusText,headers:i,config:e,request:m};Vl((function(e){t(e),f()}),(function(e){n(e),f()}),s),m=null}m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Yc("Request aborted",Yc.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Yc("Network Error",Yc.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const r=i.transitional||hl;i.timeoutErrorMessage&&(t=i.timeoutErrorMessage),n(new Yc(t,r.clarifyTimeoutError?Yc.ETIMEDOUT:Yc.ECONNABORTED,e,m)),m=null},void 0===r&&s.setContentType(null),"setRequestHeader"in m&&zc.forEach(s.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),zc.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),h&&"json"!==h&&(m.responseType=i.responseType),p&&([c,u]=Zl(p,!0),m.addEventListener("progress",c)),d&&m.upload&&([a,l]=Zl(d),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",l)),(i.cancelToken||i.signal)&&(o=t=>{m&&(n(!t||t.type?new jl(null,e,m):t),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(o),i.signal&&(i.signal.aborted?o():i.signal.addEventListener("abort",o)));const v=Wl(i.url);v&&-1===_l.protocols.indexOf(v)?n(new Yc("Unsupported protocol "+v+":",Yc.ERR_BAD_REQUEST,e)):m.send(r||null)}))};const hu=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,i=new AbortController;const r=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;i.abort(t instanceof Yc?t:new jl(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{s=null,r(new Yc(`timeout ${t} of ms exceeded`,Yc.ETIMEDOUT))}),t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)})),e=null)};e.forEach((e=>e.addEventListener("abort",r)));const{signal:a}=i;return a.unsubscribe=()=>zc.asap(o),a}};var du=hu;const pu=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let i,r=0;while(r<n)i=r+t,yield e.slice(r,i),r=i},fu=async function*(e,t){for await(const n of mu(e))yield*pu(n,t)},mu=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},gu=(e,t,n,i)=>{const r=fu(e,t);let s,o=0,a=e=>{s||(s=!0,i&&i(e))};return new ReadableStream({async pull(e){try{const{done:t,value:i}=await r.next();if(t)return a(),void e.close();let s=i.byteLength;if(n){let e=o+=s;n(e)}e.enqueue(new Uint8Array(i))}catch(t){throw a(t),t}},cancel(e){return a(e),r.return()}},{highWaterMark:2})},vu="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,yu=vu&&"function"===typeof ReadableStream,Tu=vu&&("function"===typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Eu=(e,...t)=>{try{return!!e(...t)}catch(lS){return!1}},_u=yu&&Eu((()=>{let e=!1;const t=new Request(_l.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),bu=65536,wu=yu&&Eu((()=>zc.isReadableStream(new Response("").body))),Su={stream:wu&&(e=>e.body)};vu&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach((t=>{!Su[t]&&(Su[t]=zc.isFunction(e[t])?e=>e[t]():(e,n)=>{throw new Yc(`Response type '${t}' is not supported`,Yc.ERR_NOT_SUPPORT,n)})}))})(new Response);const Au=async e=>{if(null==e)return 0;if(zc.isBlob(e))return e.size;if(zc.isSpecCompliantForm(e)){const t=new Request(_l.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return zc.isArrayBufferView(e)||zc.isArrayBuffer(e)?e.byteLength:(zc.isURLSearchParams(e)&&(e+=""),zc.isString(e)?(await Tu(e)).byteLength:void 0)},Cu=async(e,t)=>{const n=zc.toFiniteNumber(e.getContentLength());return null==n?Au(t):n};var xu=vu&&(async e=>{let{url:t,method:n,data:i,signal:r,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:h="same-origin",fetchOptions:d}=cu(e);l=l?(l+"").toLowerCase():"text";let p,f=du([r,s&&s.toAbortSignal()],o);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(c&&_u&&"get"!==n&&"head"!==n&&0!==(g=await Cu(u,i))){let e,n=new Request(t,{method:"POST",body:i,duplex:"half"});if(zc.isFormData(i)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Jl(g,Zl(eu(c)));i=gu(n.body,bu,e,t)}}zc.isString(h)||(h=h?"include":"omit");const r="credentials"in Request.prototype;p=new Request(t,{...d,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",credentials:r?h:void 0});let s=await fetch(p,d);const o=wu&&("stream"===l||"response"===l);if(wu&&(a||o&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=zc.toFiniteNumber(s.headers.get("content-length")),[n,i]=a&&Jl(t,Zl(eu(a),!0))||[];s=new Response(gu(s.body,bu,n,(()=>{i&&i(),m&&m()})),e)}l=l||"text";let v=await Su[zc.findKey(Su,l)||"text"](s,e);return!o&&m&&m(),await new Promise(((t,n)=>{Vl(t,n,{data:v,headers:ql.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:p})}))}catch(v){if(m&&m(),v&&"TypeError"===v.name&&/Load failed|fetch/i.test(v.message))throw Object.assign(new Yc("Network Error",Yc.ERR_NETWORK,e,p),{cause:v.cause||v});throw Yc.from(v,v&&v.code,e,p)}});const Iu={http:Xc,xhr:uu,fetch:xu};zc.forEach(Iu,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(lS){}Object.defineProperty(e,"adapterName",{value:t})}}));const Nu=e=>`- ${e}`,ku=e=>zc.isFunction(e)||null===e||!1===e;var Ou={getAdapter:e=>{e=zc.isArray(e)?e:[e];const{length:t}=e;let n,i;const r={};for(let s=0;s<t;s++){let t;if(n=e[s],i=n,!ku(n)&&(i=Iu[(t=String(n)).toLowerCase()],void 0===i))throw new Yc(`Unknown adapter '${t}'`);if(i)break;r[t||"#"+s]=i}if(!i){const e=Object.entries(r).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let n=t?e.length>1?"since :\n"+e.map(Nu).join("\n"):" "+Nu(e[0]):"as no adapter specified";throw new Yc("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i},adapters:Iu};function Ru(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new jl(null,e)}function Du(e){Ru(e),e.headers=ql.from(e.headers),e.data=Gl.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);const t=Ou.getAdapter(e.adapter||Nl.adapter);return t(e).then((function(t){return Ru(e),t.data=Gl.call(e,e.transformResponse,t),t.headers=ql.from(t.headers),t}),(function(t){return $l(t)||(Ru(e),t&&t.response&&(t.response.data=Gl.call(e,e.transformResponse,t.response),t.response.headers=ql.from(t.response.headers))),Promise.reject(t)}))}const Pu="1.11.0",Lu={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Lu[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Mu={};function Bu(e,t,n){if("object"!==typeof e)throw new Yc("options must be an object",Yc.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;while(r-- >0){const s=i[r],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new Yc("option "+s+" must be "+n,Yc.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Yc("Unknown option "+s,Yc.ERR_BAD_OPTION)}}Lu.transitional=function(e,t,n){function i(e,t){return"[Axios v"+Pu+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,s)=>{if(!1===e)throw new Yc(i(r," has been removed"+(t?" in "+t:"")),Yc.ERR_DEPRECATED);return t&&!Mu[r]&&(Mu[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},Lu.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};var Fu={assertOptions:Bu,validators:Lu};const Hu=Fu.validators;class Uu{constructor(e){this.defaults=e||{},this.interceptors={request:new ul,response:new ul}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(lS){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{},t.url=e):t=e||{},t=au(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;void 0!==n&&Fu.assertOptions(n,{silentJSONParsing:Hu.transitional(Hu.boolean),forcedJSONParsing:Hu.transitional(Hu.boolean),clarifyTimeoutError:Hu.transitional(Hu.boolean)},!1),null!=i&&(zc.isFunction(i)?t.paramsSerializer={serialize:i}:Fu.assertOptions(i,{encode:Hu.function,serialize:Hu.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Fu.assertOptions(t,{baseUrl:Hu.spelling("baseURL"),withXsrfToken:Hu.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=r&&zc.merge(r.common,r[t.method]);r&&zc.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=ql.concat(s,r);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,h=0;if(!a){const e=[Du.bind(this),void 0];e.unshift(...o),e.push(...c),u=e.length,l=Promise.resolve(t);while(h<u)l=l.then(e[h++],e[h++]);return l}u=o.length;let d=t;h=0;while(h<u){const e=o[h++],t=o[h++];try{d=e(d)}catch(p){t.call(this,p);break}}try{l=Du.call(this,d)}catch(p){return Promise.reject(p)}h=0,u=c.length;while(h<u)l=l.then(c[h++],c[h++]);return l}getUri(e){e=au(this.defaults,e);const t=su(e.baseURL,e.url,e.allowAbsoluteUrls);return cl(t,e.params,e.paramsSerializer)}}zc.forEach(["delete","get","head","options"],(function(e){Uu.prototype[e]=function(t,n){return this.request(au(n||{},{method:e,url:t,data:(n||{}).data}))}})),zc.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,r){return this.request(au(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Uu.prototype[e]=t(),Uu.prototype[e+"Form"]=t(!0)}));var qu=Uu;class Gu{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;while(t-- >0)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e,i,r){n.reason||(n.reason=new jl(e,i,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Gu((function(t){e=t}));return{token:t,cancel:e}}}var $u=Gu;function zu(e){return function(t){return e.apply(null,t)}}function ju(e){return zc.isObject(e)&&!0===e.isAxiosError}const Vu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Vu).forEach((([e,t])=>{Vu[t]=e}));var Wu=Vu;function Yu(e){const t=new qu(e),n=Ma(qu.prototype.request,t);return zc.extend(n,qu.prototype,t,{allOwnKeys:!0}),zc.extend(n,t,null,{allOwnKeys:!0}),n.create=function(t){return Yu(au(e,t))},n}const Xu=Yu(Nl);Xu.Axios=qu,Xu.CanceledError=jl,Xu.CancelToken=$u,Xu.isCancel=$l,Xu.VERSION=Pu,Xu.toFormData=nl,Xu.AxiosError=Yc,Xu.Cancel=Xu.CanceledError,Xu.all=function(e){return Promise.all(e)},Xu.spread=zu,Xu.isAxiosError=ju,Xu.mergeConfig=au,Xu.AxiosHeaders=ql,Xu.formToJSON=e=>Cl(zc.isHTMLForm(e)?new FormData(e):e),Xu.getAdapter=Ou.getAdapter,Xu.HttpStatusCode=Wu,Xu.default=Xu;var Ku=Xu;const Qu={xml:!1,decodeEntities:!0};var Zu=Qu;const Ju={_useHtmlParser2:!0,xmlMode:!0};function eh(e){return(null===e||void 0===e?void 0:e.xml)?"boolean"===typeof e.xml?Ju:{...Ju,...e.xml}:null!==e&&void 0!==e?e:void 0}var th;function nh(e){return e.type===th.Tag||e.type===th.Script||e.type===th.Style}(function(e){e["Root"]="root",e["Text"]="text",e["Directive"]="directive",e["Comment"]="comment",e["Script"]="script",e["Style"]="style",e["Tag"]="tag",e["CDATA"]="cdata",e["Doctype"]="doctype"})(th||(th={}));const ih=th.Root,rh=th.Text,sh=th.Directive,oh=th.Comment,ah=th.Script,ch=th.Style,lh=th.Tag,uh=th.CDATA,hh=th.Doctype;class dh{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return Ih(this,e)}}class ph extends dh{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}}class fh extends ph{constructor(){super(...arguments),this.type=th.Text}get nodeType(){return 3}}class mh extends ph{constructor(){super(...arguments),this.type=th.Comment}get nodeType(){return 8}}class gh extends ph{constructor(e,t){super(t),this.name=e,this.type=th.Directive}get nodeType(){return 1}}class vh extends dh{constructor(e){super(),this.children=e}get firstChild(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}}class yh extends vh{constructor(){super(...arguments),this.type=th.CDATA}get nodeType(){return 4}}class Th extends vh{constructor(){super(...arguments),this.type=th.Root}get nodeType(){return 9}}class Eh extends vh{constructor(e,t,n=[],i=("script"===e?th.Script:"style"===e?th.Style:th.Tag)){super(n),this.name=e,this.attribs=t,this.type=i}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map((e=>{var t,n;return{name:e,value:this.attribs[e],namespace:null===(t=this["x-attribsNamespace"])||void 0===t?void 0:t[e],prefix:null===(n=this["x-attribsPrefix"])||void 0===n?void 0:n[e]}}))}}function _h(e){return nh(e)}function bh(e){return e.type===th.CDATA}function wh(e){return e.type===th.Text}function Sh(e){return e.type===th.Comment}function Ah(e){return e.type===th.Directive}function Ch(e){return e.type===th.Root}function xh(e){return Object.prototype.hasOwnProperty.call(e,"children")}function Ih(e,t=!1){let n;if(wh(e))n=new fh(e.data);else if(Sh(e))n=new mh(e.data);else if(_h(e)){const i=t?Nh(e.children):[],r=new Eh(e.name,{...e.attribs},i);i.forEach((e=>e.parent=r)),null!=e.namespace&&(r.namespace=e.namespace),e["x-attribsNamespace"]&&(r["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(r["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=r}else if(bh(e)){const i=t?Nh(e.children):[],r=new yh(i);i.forEach((e=>e.parent=r)),n=r}else if(Ch(e)){const i=t?Nh(e.children):[],r=new Th(i);i.forEach((e=>e.parent=r)),e["x-mode"]&&(r["x-mode"]=e["x-mode"]),n=r}else{if(!Ah(e))throw new Error(`Not implemented yet: ${e.type}`);{const t=new gh(e.name,e.data);null!=e["x-name"]&&(t["x-name"]=e["x-name"],t["x-publicId"]=e["x-publicId"],t["x-systemId"]=e["x-systemId"]),n=t}}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function Nh(e){const t=e.map((e=>Ih(e,!0)));for(let n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}const kh={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class Oh{constructor(e,t,n){this.dom=[],this.root=new Th(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"===typeof t&&(n=t,t=kh),"object"===typeof e&&(t=e,e=void 0),this.callback=null!==e&&void 0!==e?e:null,this.options=null!==t&&void 0!==t?t:kh,this.elementCB=null!==n&&void 0!==n?n:null}onparserinit(e){this.parser=e}onreset(){this.dom=[],this.root=new Th(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(e){this.handleCallback(e)}onclosetag(){this.lastNode=null;const e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)}onopentag(e,t){const n=this.options.xmlMode?th.Tag:void 0,i=new Eh(e,t,void 0,n);this.addNode(i),this.tagStack.push(i)}ontext(e){const{lastNode:t}=this;if(t&&t.type===th.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{const t=new fh(e);this.addNode(t),this.lastNode=t}}oncomment(e){if(this.lastNode&&this.lastNode.type===th.Comment)return void(this.lastNode.data+=e);const t=new mh(e);this.addNode(t),this.lastNode=t}oncommentend(){this.lastNode=null}oncdatastart(){const e=new fh(""),t=new yh([e]);this.addNode(t),e.parent=t,this.lastNode=e}oncdataend(){this.lastNode=null}onprocessinginstruction(e,t){const n=new gh(e,t);this.addNode(n)}handleCallback(e){if("function"===typeof this.callback)this.callback(e,this.dom);else if(e)throw e}addNode(e){const t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null}}var Rh,Dh=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map((e=>e.charCodeAt(0)))),Ph=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map((e=>e.charCodeAt(0))));const Lh=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Mh=null!==(Rh=String.fromCodePoint)&&void 0!==Rh?Rh:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e),t};function Bh(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=Lh.get(e))&&void 0!==t?t:e}var Fh;(function(e){e[e["NUM"]=35]="NUM",e[e["SEMI"]=59]="SEMI",e[e["EQUALS"]=61]="EQUALS",e[e["ZERO"]=48]="ZERO",e[e["NINE"]=57]="NINE",e[e["LOWER_A"]=97]="LOWER_A",e[e["LOWER_F"]=102]="LOWER_F",e[e["LOWER_X"]=120]="LOWER_X",e[e["LOWER_Z"]=122]="LOWER_Z",e[e["UPPER_A"]=65]="UPPER_A",e[e["UPPER_F"]=70]="UPPER_F",e[e["UPPER_Z"]=90]="UPPER_Z"})(Fh||(Fh={}));const Hh=32;var Uh,qh,Gh;function $h(e){return e>=Fh.ZERO&&e<=Fh.NINE}function zh(e){return e>=Fh.UPPER_A&&e<=Fh.UPPER_F||e>=Fh.LOWER_A&&e<=Fh.LOWER_F}function jh(e){return e>=Fh.UPPER_A&&e<=Fh.UPPER_Z||e>=Fh.LOWER_A&&e<=Fh.LOWER_Z||$h(e)}function Vh(e){return e===Fh.EQUALS||jh(e)}(function(e){e[e["VALUE_LENGTH"]=49152]="VALUE_LENGTH",e[e["BRANCH_LENGTH"]=16256]="BRANCH_LENGTH",e[e["JUMP_TABLE"]=127]="JUMP_TABLE"})(Uh||(Uh={})),function(e){e[e["EntityStart"]=0]="EntityStart",e[e["NumericStart"]=1]="NumericStart",e[e["NumericDecimal"]=2]="NumericDecimal",e[e["NumericHex"]=3]="NumericHex",e[e["NamedEntity"]=4]="NamedEntity"}(qh||(qh={})),function(e){e[e["Legacy"]=0]="Legacy",e[e["Strict"]=1]="Strict",e[e["Attribute"]=2]="Attribute"}(Gh||(Gh={}));class Wh{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=qh.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Gh.Strict}startEntity(e){this.decodeMode=e,this.state=qh.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case qh.EntityStart:return e.charCodeAt(t)===Fh.NUM?(this.state=qh.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=qh.NamedEntity,this.stateNamedEntity(e,t));case qh.NumericStart:return this.stateNumericStart(e,t);case qh.NumericDecimal:return this.stateNumericDecimal(e,t);case qh.NumericHex:return this.stateNumericHex(e,t);case qh.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|Hh)===Fh.LOWER_X?(this.state=qh.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=qh.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,i){if(t!==n){const r=n-t;this.result=this.result*Math.pow(i,r)+parseInt(e.substr(t,r),i),this.consumed+=r}}stateNumericHex(e,t){const n=t;while(t<e.length){const i=e.charCodeAt(t);if(!$h(i)&&!zh(i))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(i,3);t+=1}return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){const n=t;while(t<e.length){const i=e.charCodeAt(t);if(!$h(i))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(i,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Fh.SEMI)this.consumed+=1;else if(this.decodeMode===Gh.Strict)return 0;return this.emitCodePoint(Bh(this.result),this.consumed),this.errors&&(e!==Fh.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:n}=this;let i=n[this.treeIndex],r=(i&Uh.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const s=e.charCodeAt(t);if(this.treeIndex=Xh(n,i,this.treeIndex+Math.max(1,r),s),this.treeIndex<0)return 0===this.result||this.decodeMode===Gh.Attribute&&(0===r||Vh(s))?0:this.emitNotTerminatedNamedEntity();if(i=n[this.treeIndex],r=(i&Uh.VALUE_LENGTH)>>14,0!==r){if(s===Fh.SEMI)return this.emitNamedEntityData(this.treeIndex,r,this.consumed+this.excess);this.decodeMode!==Gh.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:n}=this,i=(n[t]&Uh.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){const{decodeTree:i}=this;return this.emitCodePoint(1===t?i[e]&~Uh.VALUE_LENGTH:i[e+1],n),3===t&&this.emitCodePoint(i[e+2],n),n}end(){var e;switch(this.state){case qh.NamedEntity:return 0===this.result||this.decodeMode===Gh.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case qh.NumericDecimal:return this.emitNumericEntity(0,2);case qh.NumericHex:return this.emitNumericEntity(0,3);case qh.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case qh.EntityStart:return 0}}}function Yh(e){let t="";const n=new Wh(e,(e=>t+=Mh(e)));return function(e,i){let r=0,s=0;while((s=e.indexOf("&",s))>=0){t+=e.slice(r,s),n.startEntity(i);const o=n.write(e,s+1);if(o<0){r=s+n.end();break}r=s+o,s=0===o?r+1:r}const o=t+e.slice(r);return t="",o}}function Xh(e,t,n,i){const r=(t&Uh.BRANCH_LENGTH)>>7,s=t&Uh.JUMP_TABLE;if(0===r)return 0!==s&&i===s?n:-1;if(s){const t=i-s;return t<0||t>=r?-1:e[n+t]-1}let o=n,a=o+r-1;while(o<=a){const t=o+a>>>1,n=e[t];if(n<i)o=t+1;else{if(!(n>i))return e[t+r];a=t-1}}return-1}Yh(Dh),Yh(Ph);function Kh(e){for(let t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}new Map(Kh([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(Kh([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(Kh([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(Kh([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));const Qh=/["&'<>$\x80-\uFFFF]/g,Zh=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),Jh=null!=String.prototype.codePointAt?(e,t)=>e.codePointAt(t):(e,t)=>55296===(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t);function ed(e){let t,n="",i=0;while(null!==(t=Qh.exec(e))){const r=t.index,s=e.charCodeAt(r),o=Zh.get(s);void 0!==o?(n+=e.substring(i,r)+o,i=r+1):(n+=`${e.substring(i,r)}&#x${Jh(e,r).toString(16)};`,i=Qh.lastIndex+=Number(55296===(64512&s)))}return n+e.substr(i)}function td(e,t){return function(n){let i,r=0,s="";while(i=e.exec(n))r!==i.index&&(s+=n.substring(r,i.index)),s+=t.get(i[0].charCodeAt(0)),r=i.index+1;return s+n.substring(r)}}td(/[&<>'"]/g,Zh);const nd=td(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),id=td(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]));var rd,sd;(function(e){e[e["XML"]=0]="XML",e[e["HTML"]=1]="HTML"})(rd||(rd={})),function(e){e[e["UTF8"]=0]="UTF8",e[e["ASCII"]=1]="ASCII",e[e["Extensive"]=2]="Extensive",e[e["Attribute"]=3]="Attribute",e[e["Text"]=4]="Text"}(sd||(sd={}));const od=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((e=>[e.toLowerCase(),e]))),ad=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((e=>[e.toLowerCase(),e]))),cd=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function ld(e){return e.replace(/"/g,"&quot;")}function ud(e,t){var n;if(!e)return;const i=!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)?ld:t.xmlMode||"utf8"!==t.encodeEntities?ed:nd;return Object.keys(e).map((n=>{var r,s;const o=null!==(r=e[n])&&void 0!==r?r:"";return"foreign"===t.xmlMode&&(n=null!==(s=ad.get(n))&&void 0!==s?s:n),t.emptyAttrs||t.xmlMode||""!==o?`${n}="${i(o)}"`:n})).join(" ")}const hd=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function dd(e,t={}){const n="length"in e?e:[e];let i="";for(let r=0;r<n.length;r++)i+=fd(n[r],t);return i}var pd=dd;function fd(e,t){switch(e.type){case ih:return dd(e.children,t);case hh:case sh:return yd(e);case oh:return _d(e);case uh:return Ed(e);case ah:case ch:case lh:return vd(e,t);case rh:return Td(e,t)}}const md=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),gd=new Set(["svg","math"]);function vd(e,t){var n;"foreign"===t.xmlMode&&(e.name=null!==(n=od.get(e.name))&&void 0!==n?n:e.name,e.parent&&md.has(e.parent.name)&&(t={...t,xmlMode:!1})),!t.xmlMode&&gd.has(e.name)&&(t={...t,xmlMode:"foreign"});let i=`<${e.name}`;const r=ud(e.attribs,t);return r&&(i+=` ${r}`),0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&hd.has(e.name))?(t.xmlMode||(i+=" "),i+="/>"):(i+=">",e.children.length>0&&(i+=dd(e.children,t)),!t.xmlMode&&hd.has(e.name)||(i+=`</${e.name}>`)),i}function yd(e){return`<${e.data}>`}function Td(e,t){var n;let i=e.data||"";return!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)||!t.xmlMode&&e.parent&&cd.has(e.parent.name)||(i=t.xmlMode||"utf8"!==t.encodeEntities?ed(i):id(i)),i}function Ed(e){return`<![CDATA[${e.children[0].data}]]>`}function _d(e){return`\x3c!--${e.data}--\x3e`}function bd(e,t){return pd(e,t)}function wd(e,t){return xh(e)?e.children.map((e=>bd(e,t))).join(""):""}function Sd(e){return Array.isArray(e)?e.map(Sd).join(""):_h(e)?"br"===e.name?"\n":Sd(e.children):bh(e)?Sd(e.children):wh(e)?e.data:""}function Ad(e){return Array.isArray(e)?e.map(Ad).join(""):xh(e)&&!Sh(e)?Ad(e.children):wh(e)?e.data:""}function Cd(e){return Array.isArray(e)?e.map(Cd).join(""):xh(e)&&(e.type===th.Tag||bh(e))?Cd(e.children):wh(e)?e.data:""}function xd(e){return xh(e)?e.children:[]}function Id(e){return e.parent||null}function Nd(e){const t=Id(e);if(null!=t)return xd(t);const n=[e];let{prev:i,next:r}=e;while(null!=i)n.unshift(i),({prev:i}=i);while(null!=r)n.push(r),({next:r}=r);return n}function kd(e,t){var n;return null===(n=e.attribs)||void 0===n?void 0:n[t]}function Od(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]}function Rd(e){return e.name}function Dd(e){let{next:t}=e;while(null!==t&&!_h(t))({next:t}=t);return t}function Pd(e){let{prev:t}=e;while(null!==t&&!_h(t))({prev:t}=t);return t}function Ld(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){const t=e.parent.children,n=t.lastIndexOf(e);n>=0&&t.splice(n,1)}e.next=null,e.prev=null,e.parent=null}function Md(e,t){const n=t.prev=e.prev;n&&(n.next=t);const i=t.next=e.next;i&&(i.prev=t);const r=t.parent=e.parent;if(r){const n=r.children;n[n.lastIndexOf(e)]=t,e.parent=null}}function Bd(e,t){if(Ld(t),t.next=null,t.parent=e,e.children.push(t)>1){const n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null}function Fd(e,t){Ld(t);const{parent:n}=e,i=e.next;if(t.next=i,t.prev=e,e.next=t,t.parent=n,i){if(i.prev=t,n){const e=n.children;e.splice(e.lastIndexOf(i),0,t)}}else n&&n.children.push(t)}function Hd(e,t){if(Ld(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){const n=e.children[1];n.prev=t,t.next=n}else t.next=null}function Ud(e,t){Ld(t);const{parent:n}=e;if(n){const i=n.children;i.splice(i.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t}function qd(e,t,n=!0,i=1/0){return Gd(e,Array.isArray(t)?t:[t],n,i)}function Gd(e,t,n,i){const r=[],s=[Array.isArray(t)?t:[t]],o=[0];for(;;){if(o[0]>=s[0].length){if(1===o.length)return r;s.shift(),o.shift();continue}const t=s[0][o[0]++];if(e(t)&&(r.push(t),--i<=0))return r;n&&xh(t)&&t.children.length>0&&(o.unshift(0),s.unshift(t.children))}}function $d(e,t){return t.find(e)}function zd(e,t,n=!0){const i=Array.isArray(t)?t:[t];for(let r=0;r<i.length;r++){const t=i[r];if(_h(t)&&e(t))return t;if(n&&xh(t)&&t.children.length>0){const n=zd(e,t.children,!0);if(n)return n}}return null}function jd(e,t){return(Array.isArray(t)?t:[t]).some((t=>_h(t)&&e(t)||xh(t)&&jd(e,t.children)))}function Vd(e,t){const n=[],i=[Array.isArray(t)?t:[t]],r=[0];for(;;){if(r[0]>=i[0].length){if(1===i.length)return n;i.shift(),r.shift();continue}const t=i[0][r[0]++];_h(t)&&e(t)&&n.push(t),xh(t)&&t.children.length>0&&(r.unshift(0),i.unshift(t.children))}}const Wd={tag_name(e){return"function"===typeof e?t=>_h(t)&&e(t.name):"*"===e?_h:t=>_h(t)&&t.name===e},tag_type(e){return"function"===typeof e?t=>e(t.type):t=>t.type===e},tag_contains(e){return"function"===typeof e?t=>wh(t)&&e(t.data):t=>wh(t)&&t.data===e}};function Yd(e,t){return"function"===typeof t?n=>_h(n)&&t(n.attribs[e]):n=>_h(n)&&n.attribs[e]===t}function Xd(e,t){return n=>e(n)||t(n)}function Kd(e){const t=Object.keys(e).map((t=>{const n=e[t];return Object.prototype.hasOwnProperty.call(Wd,t)?Wd[t](n):Yd(t,n)}));return 0===t.length?null:t.reduce(Xd)}function Qd(e,t){const n=Kd(e);return!n||n(t)}function Zd(e,t,n,i=1/0){const r=Kd(e);return r?qd(r,t,n,i):[]}function Jd(e,t,n=!0){return Array.isArray(t)||(t=[t]),zd(Yd("id",e),t,n)}function ep(e,t,n=!0,i=1/0){return qd(Wd["tag_name"](e),t,n,i)}function tp(e,t,n=!0,i=1/0){return qd(Yd("class",e),t,n,i)}function np(e,t,n=!0,i=1/0){return qd(Wd["tag_type"](e),t,n,i)}function ip(e){let t=e.length;while(--t>=0){const n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0)e.splice(t,1);else for(let i=n.parent;i;i=i.parent)if(e.includes(i)){e.splice(t,1);break}}return e}var rp;function sp(e,t){const n=[],i=[];if(e===t)return 0;let r=xh(e)?e:e.parent;while(r)n.unshift(r),r=r.parent;r=xh(t)?t:t.parent;while(r)i.unshift(r),r=r.parent;const s=Math.min(n.length,i.length);let o=0;while(o<s&&n[o]===i[o])o++;if(0===o)return rp.DISCONNECTED;const a=n[o-1],c=a.children,l=n[o],u=i[o];return c.indexOf(l)>c.indexOf(u)?a===t?rp.FOLLOWING|rp.CONTAINED_BY:rp.FOLLOWING:a===e?rp.PRECEDING|rp.CONTAINS:rp.PRECEDING}function op(e){return e=e.filter(((e,t,n)=>!n.includes(e,t+1))),e.sort(((e,t)=>{const n=sp(e,t);return n&rp.PRECEDING?-1:n&rp.FOLLOWING?1:0})),e}function ap(e){const t=pp(gp,e);return t?"feed"===t.name?cp(t):lp(t):null}function cp(e){var t;const n=e.children,i={type:"atom",items:ep("entry",n).map((e=>{var t;const{children:n}=e,i={media:dp(n)};mp(i,"id","id",n),mp(i,"title","title",n);const r=null===(t=pp("link",n))||void 0===t?void 0:t.attribs["href"];r&&(i.link=r);const s=fp("summary",n)||fp("content",n);s&&(i.description=s);const o=fp("updated",n);return o&&(i.pubDate=new Date(o)),i}))};mp(i,"id","id",n),mp(i,"title","title",n);const r=null===(t=pp("link",n))||void 0===t?void 0:t.attribs["href"];r&&(i.link=r),mp(i,"description","subtitle",n);const s=fp("updated",n);return s&&(i.updated=new Date(s)),mp(i,"author","email",n,!0),i}function lp(e){var t,n;const i=null!==(n=null===(t=pp("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==n?n:[],r={type:e.name.substr(0,3),id:"",items:ep("item",e.children).map((e=>{const{children:t}=e,n={media:dp(t)};mp(n,"id","guid",t),mp(n,"title","title",t),mp(n,"link","link",t),mp(n,"description","description",t);const i=fp("pubDate",t)||fp("dc:date",t);return i&&(n.pubDate=new Date(i)),n}))};mp(r,"title","title",i),mp(r,"link","link",i),mp(r,"description","description",i);const s=fp("lastBuildDate",i);return s&&(r.updated=new Date(s)),mp(r,"author","managingEditor",i,!0),r}(function(e){e[e["DISCONNECTED"]=1]="DISCONNECTED",e[e["PRECEDING"]=2]="PRECEDING",e[e["FOLLOWING"]=4]="FOLLOWING",e[e["CONTAINS"]=8]="CONTAINS",e[e["CONTAINED_BY"]=16]="CONTAINED_BY"})(rp||(rp={}));const up=["url","type","lang"],hp=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function dp(e){return ep("media:content",e).map((e=>{const{attribs:t}=e,n={medium:t["medium"],isDefault:!!t["isDefault"]};for(const i of up)t[i]&&(n[i]=t[i]);for(const i of hp)t[i]&&(n[i]=parseInt(t[i],10));return t["expression"]&&(n.expression=t["expression"]),n}))}function pp(e,t){return ep(e,t,!0,1)[0]}function fp(e,t,n=!1){return Ad(ep(e,t,n,1)).trim()}function mp(e,t,n,i,r=!1){const s=fp(n,i,r);s&&(e[t]=s)}function gp(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}function vp(e,t,n){return e?e(null!==t&&void 0!==t?t:e._root.children,null,void 0,n).toString():""}function yp(e,t){return!t&&"object"===typeof e&&null!=e&&!("length"in e)&&!("type"in e)}function Tp(e,t){const n=yp(e)?void(t=e):e,i={...Zu,...null===this||void 0===this?void 0:this._options,...eh(null!==t&&void 0!==t?t:{})};return vp(this,n,i)}function Ep(e){const t={...this._options,xmlMode:!0};return vp(this,e,t)}function _p(e){const t=e||(this?this.root():[]);let n="";for(let i=0;i<t.length;i++)n+=Ad(t[i]);return n}function bp(e,t,n="boolean"===typeof t&&t){if(!e||"string"!==typeof e)return null;"boolean"===typeof t&&(n=t);const i=this.load(e,Zu,!1);return n||i("script").remove(),i.root()[0].children.slice()}function wp(){return this(this._root)}function Sp(e,t){if(t===e)return!1;let n=t;while(n&&n!==n.parent)if(n=n.parent,n===e)return!0;return!1}function Ap(e,t){if(!Cp(e)||!Cp(t))return;let n=e.length;const i=+t.length;for(let r=0;r<i;r++)e[n++]=t[r];return e.length=n,e}function Cp(e){if(Array.isArray(e))return!0;if("object"!==typeof e||!Object.prototype.hasOwnProperty.call(e,"length")||"number"!==typeof e.length||e.length<0)return!1;for(let t=0;t<e.length;t++)if(!(t in e))return!1;return!0}function xp(e){return null!=e.cheerio}function Ip(e){return e.replace(/[_.-](\w|$)/g,((e,t)=>t.toUpperCase()))}function Np(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()}function kp(e,t){const n=e.length;for(let i=0;i<n;i++)t(e[i],i);return e}function Op(e){const t="length"in e?Array.prototype.map.call(e,(e=>Ih(e,!0))):[Ih(e,!0)],n=new Th(t);return t.forEach((e=>{e.parent=n})),t}var Rp;function Dp(e){const t=e.indexOf("<");if(t<0||t>e.length-3)return!1;const n=e.charCodeAt(t+1);return(n>=Rp.LowerA&&n<=Rp.LowerZ||n>=Rp.UpperA&&n<=Rp.UpperZ||n===Rp.Exclamation)&&e.includes(">",t+2)}(function(e){e[e["LowerA"]=97]="LowerA",e[e["LowerZ"]=122]="LowerZ",e[e["UpperA"]=65]="UpperA",e[e["UpperZ"]=90]="UpperZ",e[e["Exclamation"]=33]="Exclamation"})(Rp||(Rp={}));const Pp=Object.prototype.hasOwnProperty,Lp=/\s+/,Mp="data-",Bp={null:null,true:!0,false:!1},Fp=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Hp=/^{[^]*}$|^\[[^]*]$/;function Up(e,t,n){var i;if(e&&_h(e))return null!==(i=e.attribs)&&void 0!==i||(e.attribs={}),t?Pp.call(e.attribs,t)?!n&&Fp.test(t)?t:e.attribs[t]:"option"===e.name&&"value"===t?_p(e.children):"input"!==e.name||"radio"!==e.attribs["type"]&&"checkbox"!==e.attribs["type"]||"value"!==t?void 0:"on":e.attribs}function qp(e,t,n){null===n?Kp(e,t):e.attribs[t]=`${n}`}function Gp(e,t){if("object"===typeof e||void 0!==t){if("function"===typeof t){if("string"!==typeof e)throw new Error("Bad combination of arguments.");return kp(this,((n,i)=>{_h(n)&&qp(n,e,t.call(n,i,n.attribs[e]))}))}return kp(this,(n=>{_h(n)&&("object"===typeof e?Object.keys(e).forEach((t=>{const i=e[t];qp(n,t,i)})):qp(n,e,t))}))}return arguments.length>1?this:Up(this[0],e,this.options.xmlMode)}function $p(e,t,n){return t in e?e[t]:!n&&Fp.test(t)?void 0!==Up(e,t,!1):Up(e,t,n)}function zp(e,t,n,i){t in e?e[t]=n:qp(e,t,!i&&Fp.test(t)?n?"":null:`${n}`)}function jp(e,t){var n;if("string"===typeof e&&void 0===t){const t=this[0];if(!t||!_h(t))return;switch(e){case"style":{const e=this.css(),t=Object.keys(e);return t.forEach(((t,n)=>{e[n]=t})),e.length=t.length,e}case"tagName":case"nodeName":return t.name.toUpperCase();case"href":case"src":{const i=null===(n=t.attribs)||void 0===n?void 0:n[e];return"undefined"===typeof URL||("href"!==e||"a"!==t.tagName&&"link"!==t.name)&&("src"!==e||"img"!==t.tagName&&"iframe"!==t.tagName&&"audio"!==t.tagName&&"video"!==t.tagName&&"source"!==t.tagName)||void 0===i||!this.options.baseURI?i:new URL(i,this.options.baseURI).href}case"innerText":return Cd(t);case"textContent":return Ad(t);case"outerHTML":return this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return $p(t,e,this.options.xmlMode)}}if("object"===typeof e||void 0!==t){if("function"===typeof t){if("object"===typeof e)throw new Error("Bad combination of arguments.");return kp(this,((n,i)=>{_h(n)&&zp(n,e,t.call(n,i,$p(n,e,this.options.xmlMode)),this.options.xmlMode)}))}return kp(this,(n=>{_h(n)&&("object"===typeof e?Object.keys(e).forEach((t=>{const i=e[t];zp(n,t,i,this.options.xmlMode)})):zp(n,e,t,this.options.xmlMode))}))}}function Vp(e,t,n){var i;const r=e;null!==(i=r.data)&&void 0!==i||(r.data={}),"object"===typeof t?Object.assign(r.data,t):"string"===typeof t&&void 0!==n&&(r.data[t]=n)}function Wp(e,t){let n,i,r;null==t?(n=Object.keys(e.attribs).filter((e=>e.startsWith(Mp))),i=n.map((e=>Ip(e.slice(Mp.length))))):(n=[Mp+Np(t)],i=[t]);for(let s=0;s<n.length;++s){const t=n[s],o=i[s];if(Pp.call(e.attribs,t)&&!Pp.call(e.data,o)){if(r=e.attribs[t],Pp.call(Bp,r))r=Bp[r];else if(r===String(Number(r)))r=Number(r);else if(Hp.test(r))try{r=JSON.parse(r)}catch(lS){}e.data[o]=r}}return null==t?e.data:r}function Yp(e,t){var n;const i=this[0];if(!i||!_h(i))return;const r=i;return null!==(n=r.data)&&void 0!==n||(r.data={}),e?"object"===typeof e||void 0!==t?(kp(this,(n=>{_h(n)&&("object"===typeof e?Vp(n,e):Vp(n,e,t))})),this):Pp.call(r.data,e)?r.data[e]:Wp(r,e):Wp(r)}function Xp(e){const t=0===arguments.length,n=this[0];if(!n||!_h(n))return t?void 0:this;switch(n.name){case"textarea":return this.text(e);case"select":{const n=this.find("option:selected");if(!t){if(null==this.attr("multiple")&&"object"===typeof e)return this;this.find("option").removeAttr("selected");const t="object"!==typeof e?[e]:e;for(let e=0;e<t.length;e++)this.find(`option[value="${t[e]}"]`).attr("selected","");return this}return this.attr("multiple")?n.toArray().map((e=>_p(e.children))):n.attr("value")}case"input":case"option":return t?this.attr("value"):this.attr("value",e)}}function Kp(e,t){e.attribs&&Pp.call(e.attribs,t)&&delete e.attribs[t]}function Qp(e){return e?e.trim().split(Lp):[]}function Zp(e){const t=Qp(e);for(let n=0;n<t.length;n++)kp(this,(e=>{_h(e)&&Kp(e,t[n])}));return this}function Jp(e){return this.toArray().some((t=>{const n=_h(t)&&t.attribs["class"];let i=-1;if(n&&e.length)while((i=n.indexOf(e,i+1))>-1){const t=i+e.length;if((0===i||Lp.test(n[i-1]))&&(t===n.length||Lp.test(n[t])))return!0}return!1}))}function ef(e){if("function"===typeof e)return kp(this,((t,n)=>{if(_h(t)){const i=t.attribs["class"]||"";ef.call([t],e.call(t,n,i))}}));if(!e||"string"!==typeof e)return this;const t=e.split(Lp),n=this.length;for(let i=0;i<n;i++){const e=this[i];if(!_h(e))continue;const n=Up(e,"class",!1);if(n){let i=` ${n} `;for(let e=0;e<t.length;e++){const n=`${t[e]} `;i.includes(` ${n}`)||(i+=n)}qp(e,"class",i.trim())}else qp(e,"class",t.join(" ").trim())}return this}function tf(e){if("function"===typeof e)return kp(this,((t,n)=>{_h(t)&&tf.call([t],e.call(t,n,t.attribs["class"]||""))}));const t=Qp(e),n=t.length,i=0===arguments.length;return kp(this,(e=>{if(_h(e))if(i)e.attribs["class"]="";else{const i=Qp(e.attribs["class"]);let r=!1;for(let e=0;e<n;e++){const n=i.indexOf(t[e]);n>=0&&(i.splice(n,1),r=!0,e--)}r&&(e.attribs["class"]=i.join(" "))}}))}function nf(e,t){if("function"===typeof e)return kp(this,((n,i)=>{_h(n)&&nf.call([n],e.call(n,i,n.attribs["class"]||"",t),t)}));if(!e||"string"!==typeof e)return this;const n=e.split(Lp),i=n.length,r="boolean"===typeof t?t?1:-1:0,s=this.length;for(let o=0;o<s;o++){const e=this[o];if(!_h(e))continue;const t=Qp(e.attribs["class"]);for(let s=0;s<i;s++){const e=t.indexOf(n[s]);r>=0&&e<0?t.push(n[s]):r<=0&&e>=0&&t.splice(e,1)}e.attribs["class"]=t.join(" ")}return this}var rf;(function(e){e["Attribute"]="attribute",e["Pseudo"]="pseudo",e["PseudoElement"]="pseudo-element",e["Tag"]="tag",e["Universal"]="universal",e["Adjacent"]="adjacent",e["Child"]="child",e["Descendant"]="descendant",e["Parent"]="parent",e["Sibling"]="sibling",e["ColumnCombinator"]="column-combinator"})(rf||(rf={}));var sf;(function(e){e["Any"]="any",e["Element"]="element",e["End"]="end",e["Equals"]="equals",e["Exists"]="exists",e["Hyphen"]="hyphen",e["Not"]="not",e["Start"]="start"})(sf||(sf={}));const of=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,af=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,cf=new Map([[126,sf.Element],[94,sf.Start],[36,sf.End],[42,sf.Any],[33,sf.Not],[124,sf.Hyphen]]),lf=new Set(["has","not","matches","is","where","host","host-context"]);function uf(e){switch(e.type){case rf.Adjacent:case rf.Child:case rf.Descendant:case rf.Parent:case rf.Sibling:case rf.ColumnCombinator:return!0;default:return!1}}const hf=new Set(["contains","icontains"]);function df(e,t,n){const i=parseInt(t,16)-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)}function pf(e){return e.replace(af,df)}function ff(e){return 39===e||34===e}function mf(e){return 32===e||9===e||10===e||12===e||13===e}function gf(e){const t=[],n=vf(t,`${e}`,0);if(n<e.length)throw new Error(`Unmatched selector: ${e.slice(n)}`);return t}function vf(e,t,n){let i=[];function r(e){const i=t.slice(n+e).match(of);if(!i)throw new Error(`Expected name, found ${t.slice(n)}`);const[r]=i;return n+=e+r.length,pf(r)}function s(e){n+=e;while(n<t.length&&mf(t.charCodeAt(n)))n++}function o(){n+=1;const e=n;let i=1;for(;i>0&&n<t.length;n++)40!==t.charCodeAt(n)||a(n)?41!==t.charCodeAt(n)||a(n)||i--:i++;if(i)throw new Error("Parenthesis not matched");return pf(t.slice(e,n-1))}function a(e){let n=0;while(92===t.charCodeAt(--e))n++;return 1===(1&n)}function c(){if(i.length>0&&uf(i[i.length-1]))throw new Error("Did not expect successive traversals.")}function l(e){i.length>0&&i[i.length-1].type===rf.Descendant?i[i.length-1].type=e:(c(),i.push({type:e}))}function u(e,t){i.push({type:rf.Attribute,name:e,action:t,value:r(1),namespace:null,ignoreCase:"quirks"})}function h(){if(i.length&&i[i.length-1].type===rf.Descendant&&i.pop(),0===i.length)throw new Error("Empty sub-selector");e.push(i)}if(s(0),t.length===n)return n;e:while(n<t.length){const e=t.charCodeAt(n);switch(e){case 32:case 9:case 10:case 12:case 13:0!==i.length&&i[0].type===rf.Descendant||(c(),i.push({type:rf.Descendant})),s(1);break;case 62:l(rf.Child),s(1);break;case 60:l(rf.Parent),s(1);break;case 126:l(rf.Sibling),s(1);break;case 43:l(rf.Adjacent),s(1);break;case 46:u("class",sf.Element);break;case 35:u("id",sf.Equals);break;case 91:{let e;s(1);let o=null;124===t.charCodeAt(n)?e=r(1):t.startsWith("*|",n)?(o="*",e=r(2)):(e=r(0),124===t.charCodeAt(n)&&61!==t.charCodeAt(n+1)&&(o=e,e=r(1))),s(0);let c=sf.Exists;const l=cf.get(t.charCodeAt(n));if(l){if(c=l,61!==t.charCodeAt(n+1))throw new Error("Expected `=`");s(2)}else 61===t.charCodeAt(n)&&(c=sf.Equals,s(1));let u="",h=null;if("exists"!==c){if(ff(t.charCodeAt(n))){const e=t.charCodeAt(n);let i=n+1;while(i<t.length&&(t.charCodeAt(i)!==e||a(i)))i+=1;if(t.charCodeAt(i)!==e)throw new Error("Attribute value didn't end");u=pf(t.slice(n+1,i)),n=i+1}else{const e=n;while(n<t.length&&(!mf(t.charCodeAt(n))&&93!==t.charCodeAt(n)||a(n)))n+=1;u=pf(t.slice(e,n))}s(0);const e=32|t.charCodeAt(n);115===e?(h=!1,s(1)):105===e&&(h=!0,s(1))}if(93!==t.charCodeAt(n))throw new Error("Attribute selector didn't terminate");n+=1;const d={type:rf.Attribute,name:e,action:c,value:u,namespace:o,ignoreCase:h};i.push(d);break}case 58:{if(58===t.charCodeAt(n+1)){i.push({type:rf.PseudoElement,name:r(2).toLowerCase(),data:40===t.charCodeAt(n)?o():null});continue}const e=r(1).toLowerCase();let s=null;if(40===t.charCodeAt(n))if(lf.has(e)){if(ff(t.charCodeAt(n+1)))throw new Error(`Pseudo-selector ${e} cannot be quoted`);if(s=[],n=vf(s,t,n+1),41!==t.charCodeAt(n))throw new Error(`Missing closing parenthesis in :${e} (${t})`);n+=1}else{if(s=o(),hf.has(e)){const e=s.charCodeAt(0);e===s.charCodeAt(s.length-1)&&ff(e)&&(s=s.slice(1,-1))}s=pf(s)}i.push({type:rf.Pseudo,name:e,data:s});break}case 44:h(),i=[],s(1);break;default:{if(t.startsWith("/*",n)){const e=t.indexOf("*/",n+2);if(e<0)throw new Error("Comment was not terminated");n=e+2,0===i.length&&s(0);break}let o,a=null;if(42===e)n+=1,o="*";else if(124===e){if(o="",124===t.charCodeAt(n+1)){l(rf.ColumnCombinator),s(2);break}}else{if(!of.test(t.slice(n)))break e;o=r(0)}124===t.charCodeAt(n)&&124!==t.charCodeAt(n+1)&&(a=o,42===t.charCodeAt(n+1)?(o="*",n+=2):o=r(1)),i.push("*"===o?{type:rf.Universal,namespace:a}:{type:rf.Tag,name:o,namespace:a})}}}return h(),n}var yf=__webpack_require__(1264);const Tf=new Map([[rf.Universal,50],[rf.Tag,30],[rf.Attribute,1],[rf.Pseudo,0]]);function Ef(e){return!Tf.has(e.type)}const _f=new Map([[sf.Exists,10],[sf.Equals,8],[sf.Not,7],[sf.Start,6],[sf.End,6],[sf.Any,5]]);function bf(e){const t=e.map(wf);for(let n=1;n<e.length;n++){const i=t[n];if(!(i<0))for(let r=n-1;r>=0&&i<t[r];r--){const n=e[r+1];e[r+1]=e[r],e[r]=n,t[r+1]=t[r],t[r]=i}}}function wf(e){var t,n;let i=null!==(t=Tf.get(e.type))&&void 0!==t?t:-1;return e.type===rf.Attribute?(i=null!==(n=_f.get(e.action))&&void 0!==n?n:4,e.action===sf.Equals&&"id"===e.name&&(i=9),e.ignoreCase&&(i>>=1)):e.type===rf.Pseudo&&(e.data?"has"===e.name||"contains"===e.name?i=0:Array.isArray(e.data)?(i=Math.min(...e.data.map((e=>Math.min(...e.map(wf))))),i<0&&(i=0)):i=2:i=3),i}const Sf=/[-[\]{}()*+?.,\\^$|#\s]/g;function Af(e){return e.replace(Sf,"\\$&")}const Cf=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function xf(e,t){return"boolean"===typeof e.ignoreCase?e.ignoreCase:"quirks"===e.ignoreCase?!!t.quirksMode:!t.xmlMode&&Cf.has(e.name)}const If={equals(e,t,n){const{adapter:i}=n,{name:r}=t;let{value:s}=t;return xf(t,n)?(s=s.toLowerCase(),t=>{const n=i.getAttributeValue(t,r);return null!=n&&n.length===s.length&&n.toLowerCase()===s&&e(t)}):t=>i.getAttributeValue(t,r)===s&&e(t)},hyphen(e,t,n){const{adapter:i}=n,{name:r}=t;let{value:s}=t;const o=s.length;return xf(t,n)?(s=s.toLowerCase(),function(t){const n=i.getAttributeValue(t,r);return null!=n&&(n.length===o||"-"===n.charAt(o))&&n.substr(0,o).toLowerCase()===s&&e(t)}):function(t){const n=i.getAttributeValue(t,r);return null!=n&&(n.length===o||"-"===n.charAt(o))&&n.substr(0,o)===s&&e(t)}},element(e,t,n){const{adapter:i}=n,{name:r,value:s}=t;if(/\s/.test(s))return yf.falseFunc;const o=new RegExp(`(?:^|\\s)${Af(s)}(?:$|\\s)`,xf(t,n)?"i":"");return function(t){const n=i.getAttributeValue(t,r);return null!=n&&n.length>=s.length&&o.test(n)&&e(t)}},exists(e,{name:t},{adapter:n}){return i=>n.hasAttrib(i,t)&&e(i)},start(e,t,n){const{adapter:i}=n,{name:r}=t;let{value:s}=t;const o=s.length;return 0===o?yf.falseFunc:xf(t,n)?(s=s.toLowerCase(),t=>{const n=i.getAttributeValue(t,r);return null!=n&&n.length>=o&&n.substr(0,o).toLowerCase()===s&&e(t)}):t=>{var n;return!!(null===(n=i.getAttributeValue(t,r))||void 0===n?void 0:n.startsWith(s))&&e(t)}},end(e,t,n){const{adapter:i}=n,{name:r}=t;let{value:s}=t;const o=-s.length;return 0===o?yf.falseFunc:xf(t,n)?(s=s.toLowerCase(),t=>{var n;return(null===(n=i.getAttributeValue(t,r))||void 0===n?void 0:n.substr(o).toLowerCase())===s&&e(t)}):t=>{var n;return!!(null===(n=i.getAttributeValue(t,r))||void 0===n?void 0:n.endsWith(s))&&e(t)}},any(e,t,n){const{adapter:i}=n,{name:r,value:s}=t;if(""===s)return yf.falseFunc;if(xf(t,n)){const t=new RegExp(Af(s),"i");return function(n){const o=i.getAttributeValue(n,r);return null!=o&&o.length>=s.length&&t.test(o)&&e(n)}}return t=>{var n;return!!(null===(n=i.getAttributeValue(t,r))||void 0===n?void 0:n.includes(s))&&e(t)}},not(e,t,n){const{adapter:i}=n,{name:r}=t;let{value:s}=t;return""===s?t=>!!i.getAttributeValue(t,r)&&e(t):xf(t,n)?(s=s.toLowerCase(),t=>{const n=i.getAttributeValue(t,r);return(null==n||n.length!==s.length||n.toLowerCase()!==s)&&e(t)}):t=>i.getAttributeValue(t,r)!==s&&e(t)}},Nf=new Set([9,10,12,13,32]),kf="0".charCodeAt(0),Of="9".charCodeAt(0);function Rf(e){if(e=e.trim().toLowerCase(),"even"===e)return[2,0];if("odd"===e)return[2,1];let t=0,n=0,i=s(),r=o();if(t<e.length&&"n"===e.charAt(t)&&(t++,n=i*(null!==r&&void 0!==r?r:1),a(),t<e.length?(i=s(),a(),r=o()):i=r=0),null===r||t<e.length)throw new Error(`n-th rule couldn't be parsed ('${e}')`);return[n,i*r];function s(){return"-"===e.charAt(t)?(t++,-1):("+"===e.charAt(t)&&t++,1)}function o(){const n=t;let i=0;while(t<e.length&&e.charCodeAt(t)>=kf&&e.charCodeAt(t)<=Of)i=10*i+(e.charCodeAt(t)-kf),t++;return t===n?null:i}function a(){while(t<e.length&&Nf.has(e.charCodeAt(t)))t++}}function Df(e){const t=e[0],n=e[1]-1;if(n<0&&t<=0)return yf.falseFunc;if(-1===t)return e=>e<=n;if(0===t)return e=>e===n;if(1===t)return n<0?yf.trueFunc:e=>e>=n;const i=Math.abs(t),r=(n%i+i)%i;return t>1?e=>e>=n&&e%i===r:e=>e<=n&&e%i===r}function Pf(e){return Df(Rf(e))}function Lf(e,t){return n=>{const i=t.getParent(n);return null!=i&&t.isTag(i)&&e(n)}}const Mf={contains(e,t,{adapter:n}){return function(i){return e(i)&&n.getText(i).includes(t)}},icontains(e,t,{adapter:n}){const i=t.toLowerCase();return function(t){return e(t)&&n.getText(t).toLowerCase().includes(i)}},"nth-child"(e,t,{adapter:n,equals:i}){const r=Pf(t);return r===yf.falseFunc?yf.falseFunc:r===yf.trueFunc?Lf(e,n):function(t){const s=n.getSiblings(t);let o=0;for(let e=0;e<s.length;e++){if(i(t,s[e]))break;n.isTag(s[e])&&o++}return r(o)&&e(t)}},"nth-last-child"(e,t,{adapter:n,equals:i}){const r=Pf(t);return r===yf.falseFunc?yf.falseFunc:r===yf.trueFunc?Lf(e,n):function(t){const s=n.getSiblings(t);let o=0;for(let e=s.length-1;e>=0;e--){if(i(t,s[e]))break;n.isTag(s[e])&&o++}return r(o)&&e(t)}},"nth-of-type"(e,t,{adapter:n,equals:i}){const r=Pf(t);return r===yf.falseFunc?yf.falseFunc:r===yf.trueFunc?Lf(e,n):function(t){const s=n.getSiblings(t);let o=0;for(let e=0;e<s.length;e++){const r=s[e];if(i(t,r))break;n.isTag(r)&&n.getName(r)===n.getName(t)&&o++}return r(o)&&e(t)}},"nth-last-of-type"(e,t,{adapter:n,equals:i}){const r=Pf(t);return r===yf.falseFunc?yf.falseFunc:r===yf.trueFunc?Lf(e,n):function(t){const s=n.getSiblings(t);let o=0;for(let e=s.length-1;e>=0;e--){const r=s[e];if(i(t,r))break;n.isTag(r)&&n.getName(r)===n.getName(t)&&o++}return r(o)&&e(t)}},root(e,t,{adapter:n}){return t=>{const i=n.getParent(t);return(null==i||!n.isTag(i))&&e(t)}},scope(e,t,n,i){const{equals:r}=n;return i&&0!==i.length?1===i.length?t=>r(i[0],t)&&e(t):t=>i.includes(t)&&e(t):Mf["root"](e,t,n)},hover:Bf("isHovered"),visited:Bf("isVisited"),active:Bf("isActive")};function Bf(e){return function(t,n,{adapter:i}){const r=i[e];return"function"!==typeof r?yf.falseFunc:function(e){return r(e)&&t(e)}}}const Ff={empty(e,{adapter:t}){return!t.getChildren(e).some((e=>t.isTag(e)||""!==t.getText(e)))},"first-child"(e,{adapter:t,equals:n}){if(t.prevElementSibling)return null==t.prevElementSibling(e);const i=t.getSiblings(e).find((e=>t.isTag(e)));return null!=i&&n(e,i)},"last-child"(e,{adapter:t,equals:n}){const i=t.getSiblings(e);for(let r=i.length-1;r>=0;r--){if(n(e,i[r]))return!0;if(t.isTag(i[r]))break}return!1},"first-of-type"(e,{adapter:t,equals:n}){const i=t.getSiblings(e),r=t.getName(e);for(let s=0;s<i.length;s++){const o=i[s];if(n(e,o))return!0;if(t.isTag(o)&&t.getName(o)===r)break}return!1},"last-of-type"(e,{adapter:t,equals:n}){const i=t.getSiblings(e),r=t.getName(e);for(let s=i.length-1;s>=0;s--){const o=i[s];if(n(e,o))return!0;if(t.isTag(o)&&t.getName(o)===r)break}return!1},"only-of-type"(e,{adapter:t,equals:n}){const i=t.getName(e);return t.getSiblings(e).every((r=>n(e,r)||!t.isTag(r)||t.getName(r)!==i))},"only-child"(e,{adapter:t,equals:n}){return t.getSiblings(e).every((i=>n(e,i)||!t.isTag(i)))}};function Hf(e,t,n,i){if(null===n){if(e.length>i)throw new Error(`Pseudo-class :${t} requires an argument`)}else if(e.length===i)throw new Error(`Pseudo-class :${t} doesn't have any arguments`)}const Uf={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:":is(\n        :is(button, input, select, textarea, optgroup, option)[disabled],\n        optgroup[disabled] > option,\n        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)\n    )",enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},qf={};function Gf(e,t){return e===yf.falseFunc?yf.falseFunc:n=>t.isTag(n)&&e(n)}function $f(e,t){const n=t.getSiblings(e);if(n.length<=1)return[];const i=n.indexOf(e);return i<0||i===n.length-1?[]:n.slice(i+1).filter(t.isTag)}function zf(e){return{xmlMode:!!e.xmlMode,lowerCaseAttributeNames:!!e.lowerCaseAttributeNames,lowerCaseTags:!!e.lowerCaseTags,quirksMode:!!e.quirksMode,cacheResults:!!e.cacheResults,pseudos:e.pseudos,adapter:e.adapter,equals:e.equals}}const jf=(e,t,n,i,r)=>{const s=r(t,zf(n),i);return s===yf.trueFunc?e:s===yf.falseFunc?yf.falseFunc:t=>s(t)&&e(t)},Vf={is:jf,matches:jf,where:jf,not(e,t,n,i,r){const s=r(t,zf(n),i);return s===yf.falseFunc?e:s===yf.trueFunc?yf.falseFunc:t=>!s(t)&&e(t)},has(e,t,n,i,r){const{adapter:s}=n,o=zf(n);o.relativeSelector=!0;const a=t.some((e=>e.some(Ef)))?[qf]:void 0,c=r(t,o,a);if(c===yf.falseFunc)return yf.falseFunc;const l=Gf(c,s);if(a&&c!==yf.trueFunc){const{shouldTestNextSiblings:t=!1}=c;return n=>{if(!e(n))return!1;a[0]=n;const i=s.getChildren(n),r=t?[...i,...$f(n,s)]:i;return s.existsOne(l,r)}}return t=>e(t)&&s.existsOne(l,s.getChildren(t))}};function Wf(e,t,n,i,r){var s;const{name:o,data:a}=t;if(Array.isArray(a)){if(!(o in Vf))throw new Error(`Unknown pseudo-class :${o}(${a})`);return Vf[o](e,a,n,i,r)}const c=null===(s=n.pseudos)||void 0===s?void 0:s[o],l="string"===typeof c?c:Uf[o];if("string"===typeof l){if(null!=a)throw new Error(`Pseudo ${o} doesn't have any arguments`);const t=gf(l);return Vf["is"](e,t,n,i,r)}if("function"===typeof c)return Hf(c,o,a,1),t=>c(t,a)&&e(t);if(o in Mf)return Mf[o](e,a,n,i);if(o in Ff){const t=Ff[o];return Hf(t,o,a,2),i=>t(i,n,a)&&e(i)}throw new Error(`Unknown pseudo-class :${o}`)}function Yf(e,t){const n=t.getParent(e);return n&&t.isTag(n)?n:null}function Xf(e,t,n,i,r){const{adapter:s,equals:o}=n;switch(t.type){case rf.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case rf.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case rf.Attribute:if(null!=t.namespace)throw new Error("Namespaced attributes are not yet supported by css-select");return n.xmlMode&&!n.lowerCaseAttributeNames||(t.name=t.name.toLowerCase()),If[t.action](e,t,n);case rf.Pseudo:return Wf(e,t,n,i,r);case rf.Tag:{if(null!=t.namespace)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:i}=t;return n.xmlMode&&!n.lowerCaseTags||(i=i.toLowerCase()),function(t){return s.getName(t)===i&&e(t)}}case rf.Descendant:{if(!1===n.cacheResults||"undefined"===typeof WeakSet)return function(t){let n=t;while(n=Yf(n,s))if(e(n))return!0;return!1};const t=new WeakSet;return function(n){let i=n;while(i=Yf(i,s))if(!t.has(i)){if(s.isTag(i)&&e(i))return!0;t.add(i)}return!1}}case"_flexibleDescendant":return function(t){let n=t;do{if(e(n))return!0}while(n=Yf(n,s));return!1};case rf.Parent:return function(t){return s.getChildren(t).some((t=>s.isTag(t)&&e(t)))};case rf.Child:return function(t){const n=s.getParent(t);return null!=n&&s.isTag(n)&&e(n)};case rf.Sibling:return function(t){const n=s.getSiblings(t);for(let i=0;i<n.length;i++){const r=n[i];if(o(t,r))break;if(s.isTag(r)&&e(r))return!0}return!1};case rf.Adjacent:return s.prevElementSibling?function(t){const n=s.prevElementSibling(t);return null!=n&&e(n)}:function(t){const n=s.getSiblings(t);let i;for(let e=0;e<n.length;e++){const r=n[e];if(o(t,r))break;s.isTag(r)&&(i=r)}return!!i&&e(i)};case rf.Universal:if(null!=t.namespace&&"*"!==t.namespace)throw new Error("Namespaced universal selectors are not yet supported by css-select");return e}}function Kf(e,t,n){const i=Qf(e,t,n);return Gf(i,t.adapter)}function Qf(e,t,n){const i="string"===typeof e?gf(e):e;return im(i,t,n)}function Zf(e){return e.type===rf.Pseudo&&("scope"===e.name||Array.isArray(e.data)&&e.data.some((e=>e.some(Zf))))}const Jf={type:rf.Descendant},em={type:"_flexibleDescendant"},tm={type:rf.Pseudo,name:"scope",data:null};function nm(e,{adapter:t},n){const i=!!(null===n||void 0===n?void 0:n.every((e=>{const n=t.isTag(e)&&t.getParent(e);return e===qf||n&&t.isTag(n)})));for(const r of e){if(r.length>0&&Ef(r[0])&&r[0].type!==rf.Descendant);else{if(!i||r.some(Zf))continue;r.unshift(Jf)}r.unshift(tm)}}function im(e,t,n){var i;e.forEach(bf),n=null!==(i=t.context)&&void 0!==i?i:n;const r=Array.isArray(n),s=n&&(Array.isArray(n)?n:[n]);if(!1!==t.relativeSelector)nm(e,t,s);else if(e.some((e=>e.length>0&&Ef(e[0]))))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let o=!1;const a=e.map((e=>{if(e.length>=2){const[t,n]=e;t.type!==rf.Pseudo||"scope"!==t.name||(r&&n.type===rf.Descendant?e[1]=em:n.type!==rf.Adjacent&&n.type!==rf.Sibling||(o=!0))}return rm(e,t,s)})).reduce(sm,yf.falseFunc);return a.shouldTestNextSiblings=o,a}function rm(e,t,n){var i;return e.reduce(((e,i)=>e===yf.falseFunc?yf.falseFunc:Xf(e,i,t,n,im)),null!==(i=t.rootFunc)&&void 0!==i?i:yf.trueFunc)}function sm(e,t){return t===yf.falseFunc||e===yf.trueFunc?e:e===yf.falseFunc||t===yf.trueFunc?t:function(n){return e(n)||t(n)}}const om=(e,t)=>e===t,am={adapter:t,equals:om};function cm(e){var n,i,r,s;const o=null!==e&&void 0!==e?e:am;return null!==(n=o.adapter)&&void 0!==n||(o.adapter=t),null!==(i=o.equals)&&void 0!==i||(o.equals=null!==(s=null===(r=o.adapter)||void 0===r?void 0:r.equals)&&void 0!==s?s:om),o}function lm(e){return function(t,n,i){const r=cm(n);return e(t,r,i)}}lm(Kf),lm(Qf);const um=lm(im);function hm(e){return function(t,n,i){const r=cm(i);"function"!==typeof t&&(t=Qf(t,r,n));const s=dm(n,r.adapter,t.shouldTestNextSiblings);return e(t,s,r)}}function dm(e,t,n=!1){return n&&(e=pm(e,t)),Array.isArray(e)?t.removeSubsets(e):t.getChildren(e)}function pm(e,t){const n=Array.isArray(e)?e.slice(0):[e],i=n.length;for(let r=0;r<i;r++){const e=$f(n[r],t);n.push(...e)}return n}hm(((e,t,n)=>e!==yf.falseFunc&&t&&0!==t.length?n.adapter.findAll(e,t):[])),hm(((e,t,n)=>e!==yf.falseFunc&&t&&0!==t.length?n.adapter.findOne(e,t):null));const fm=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function mm(e){return"pseudo"===e.type&&(!!fm.has(e.name)||!("not"!==e.name||!Array.isArray(e.data))&&e.data.some((e=>e.some(mm))))}function gm(e,t,n){const i=null!=t?parseInt(t,10):NaN;switch(e){case"first":return 1;case"nth":case"eq":return isFinite(i)?i>=0?i+1:1/0:0;case"lt":return isFinite(i)?i>=0?Math.min(i,n):1/0:0;case"gt":return isFinite(i)?1/0:0;case"odd":return 2*n;case"even":return 2*n-1;case"last":case"not":return 1/0}}function vm(e){while(e.parent)e=e.parent;return e}function ym(e){const t=[],n=[];for(const i of e)i.some(mm)?t.push(i):n.push(i);return[n,t]}const Tm={type:rf.Universal,namespace:null},Em={type:rf.Pseudo,name:"scope",data:null};function _m(e,t,n={}){return bm([e],t,n)}function bm(e,t,n={}){if("function"===typeof t)return e.some(t);const[i,r]=ym(gf(t));return i.length>0&&e.some(um(i,n))||r.some((t=>Cm(t,e,n).length>0))}function wm(e,t,n,i){const r="string"===typeof n?parseInt(n,10):NaN;switch(e){case"first":case"lt":return t;case"last":return t.length>0?[t[t.length-1]]:t;case"nth":case"eq":return isFinite(r)&&Math.abs(r)<t.length?[r<0?t[t.length+r]:t[r]]:[];case"gt":return isFinite(r)?t.slice(r+1):[];case"even":return t.filter(((e,t)=>t%2===0));case"odd":return t.filter(((e,t)=>t%2===1));case"not":{const e=new Set(Am(n,t,i));return t.filter((t=>!e.has(t)))}}}function Sm(e,t,n={}){return Am(gf(e),t,n)}function Am(e,t,n){if(0===t.length)return[];const[i,r]=ym(e);let s;if(i.length){const e=Om(t,i,n);if(0===r.length)return e;e.length&&(s=new Set(e))}for(let o=0;o<r.length&&(null===s||void 0===s?void 0:s.size)!==t.length;o++){const e=r[o],i=s?t.filter((e=>_h(e)&&!s.has(e))):t;if(0===i.length)break;const a=Cm(e,t,n);if(a.length)if(s)a.forEach((e=>s.add(e)));else{if(o===r.length-1)return a;s=new Set(a)}}return"undefined"!==typeof s?s.size===t.length?t:t.filter((e=>s.has(e))):[]}function Cm(e,t,n){var i;if(e.some(uf)){const r=null!==(i=n.root)&&void 0!==i?i:vm(t[0]),s={...n,context:t,relativeSelector:!1};return e.push(Em),Im(r,e,s,!0,t.length)}return Im(t,e,n,!1,t.length)}function xm(e,t,n={},i=1/0){if("function"===typeof e)return km(t,e);const[r,s]=ym(gf(e)),o=s.map((e=>Im(t,e,n,!0,i)));return r.length&&o.push(Nm(t,r,n,i)),0===o.length?[]:1===o.length?o[0]:op(o.reduce(((e,t)=>[...e,...t])))}function Im(e,n,i,r,s){const o=n.findIndex(mm),a=n.slice(0,o),c=n[o],l=n.length-1===o?s:1/0,u=gm(c.name,c.data,l);if(0===u)return[];const h=0!==a.length||Array.isArray(e)?0===a.length?(Array.isArray(e)?e:[e]).filter(_h):r||a.some(uf)?Nm(e,[a],i,u):Om(e,[a],i):xd(e).filter(_h),d=h.slice(0,u);let p=wm(c.name,d,c.data,i);if(0===p.length||n.length===o+1)return p;const f=n.slice(o+1),m=f.some(uf);if(m){if(uf(f[0])){const{type:e}=f[0];e!==rf.Sibling&&e!==rf.Adjacent||(p=dm(p,t,!0)),f.unshift(Tm)}i={...i,relativeSelector:!1,rootFunc:e=>p.includes(e)}}else i.rootFunc&&i.rootFunc!==yf.trueFunc&&(i={...i,rootFunc:yf.trueFunc});return f.some(mm)?Im(p,f,i,!1,s):m?Nm(p,[f],i,s):Om(p,[f],i)}function Nm(e,t,n,i){const r=um(t,n,e);return km(e,r,i)}function km(e,n,i=1/0){const r=dm(e,t,n.shouldTestNextSiblings);return Gd((e=>_h(e)&&n(e)),r,!0,i)}function Om(e,t,n){const i=(Array.isArray(e)?e:[e]).filter(_h);if(0===i.length)return i;const r=um(t,n);return r===yf.trueFunc?i:i.filter(r)}const Rm=/^\s*[~+]/;function Dm(e){var t;if(!e)return this._make([]);const n=this.toArray();if("string"!==typeof e){const t=xp(e)?e.toArray():[e];return this._make(t.filter((e=>n.some((t=>Sp(t,e))))))}const i=Rm.test(e)?n:this.children().toArray(),r={context:n,root:null===(t=this._root)||void 0===t?void 0:t[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(xm(e,i,r))}function Pm(e){return function(t,...n){return function(i){var r;let s=e(t,this);return i&&(s=ng(s,i,this.options.xmlMode,null===(r=this._root)||void 0===r?void 0:r[0])),this._make(this.length>1&&s.length>1?n.reduce(((e,t)=>t(e)),s):s)}}}const Lm=Pm(((e,t)=>{const n=[];for(let i=0;i<t.length;i++){const r=e(t[i]);n.push(r)}return(new Array).concat(...n)})),Mm=Pm(((e,t)=>{const n=[];for(let i=0;i<t.length;i++){const r=e(t[i]);null!==r&&n.push(r)}return n}));function Bm(e,...t){let n=null;const i=Pm(((e,t)=>{const i=[];return kp(t,(t=>{for(let r;r=e(t);t=r){if(null===n||void 0===n?void 0:n(r,i.length))break;i.push(r)}})),i}))(e,...t);return function(e,t){n="string"===typeof e?t=>_m(t,e,this.options):e?eg(e):null;const r=i.call(this,t);return n=null,r}}function Fm(e){return Array.from(new Set(e))}const Hm=Mm((({parent:e})=>e&&!Ch(e)?e:null),Fm),Um=Lm((e=>{const t=[];while(e.parent&&!Ch(e.parent))t.push(e.parent),e=e.parent;return t}),op,(e=>e.reverse())),qm=Bm((({parent:e})=>e&&!Ch(e)?e:null),op,(e=>e.reverse()));function Gm(e){var t;const n=[];if(!e)return this._make(n);const i={xmlMode:this.options.xmlMode,root:null===(t=this._root)||void 0===t?void 0:t[0]},r="string"===typeof e?t=>_m(t,e,i):eg(e);return kp(this,(e=>{while(e&&_h(e)){if(r(e,0)){n.includes(e)||n.push(e);break}e=e.parent}})),this._make(n)}const $m=Mm((e=>Dd(e))),zm=Lm((e=>{const t=[];while(e.next)e=e.next,_h(e)&&t.push(e);return t}),Fm),jm=Bm((e=>Dd(e)),Fm),Vm=Mm((e=>Pd(e))),Wm=Lm((e=>{const t=[];while(e.prev)e=e.prev,_h(e)&&t.push(e);return t}),Fm),Ym=Bm((e=>Pd(e)),Fm),Xm=Lm((e=>Nd(e).filter((t=>_h(t)&&t!==e))),op),Km=Lm((e=>xd(e).filter(_h)),Fm);function Qm(){const e=this.toArray().reduce(((e,t)=>xh(t)?e.concat(t.children):e),[]);return this._make(e)}function Zm(e){let t=0;const n=this.length;while(t<n&&!1!==e.call(this[t],t,this[t]))++t;return this}function Jm(e){let t=[];for(let n=0;n<this.length;n++){const i=this[n],r=e.call(i,n,i);null!=r&&(t=t.concat(r))}return this._make(t)}function eg(e){return"function"===typeof e?(t,n)=>e.call(t,n,t):xp(e)?t=>Array.prototype.includes.call(e,t):function(t){return e===t}}function tg(e){var t;return this._make(ng(this.toArray(),e,this.options.xmlMode,null===(t=this._root)||void 0===t?void 0:t[0]))}function ng(e,t,n,i){return"string"===typeof t?Sm(t,e,{xmlMode:n,root:i}):e.filter(eg(t))}function ig(e){const t=this.toArray();return"string"===typeof e?bm(t.filter(_h),e,this.options):!!e&&t.some(eg(e))}function rg(e){let t=this.toArray();if("string"===typeof e){const n=new Set(Sm(e,t,this.options));t=t.filter((e=>!n.has(e)))}else{const n=eg(e);t=t.filter(((e,t)=>!n(e,t)))}return this._make(t)}function sg(e){return this.filter("string"===typeof e?`:has(${e})`:(t,n)=>this._make(n).find(e).length>0)}function og(){return this.length>1?this._make(this[0]):this}function ag(){return this.length>0?this._make(this[this.length-1]):this}function cg(e){var t;return e=+e,0===e&&this.length<=1?this:(e<0&&(e=this.length+e),this._make(null!==(t=this[e])&&void 0!==t?t:[]))}function lg(e){return null==e?this.toArray():this[e<0?this.length+e:e]}function ug(){return Array.prototype.slice.call(this)}function hg(e){let t,n;return null==e?(t=this.parent().children(),n=this[0]):"string"===typeof e?(t=this._make(e),n=this[0]):(t=this,n=xp(e)?e[0]:e),Array.prototype.indexOf.call(t,n)}function dg(e,t){return this._make(Array.prototype.slice.call(this,e,t))}function pg(){var e;return null!==(e=this.prevObject)&&void 0!==e?e:this._make([])}function fg(e,t){const n=this._make(e,t),i=op([...this.get(),...n.get()]);return this._make(i)}function mg(e){return this.prevObject?this.add(e?this.prevObject.filter(e):this.prevObject):this}function gg(e){return function(t,n,i,r){if("undefined"!==typeof Buffer&&Buffer.isBuffer(t)&&(t=t.toString()),"string"===typeof t)return e(t,n,i,r);const s=t;if(!Array.isArray(s)&&Ch(s))return s;const o=new Th([]);return vg(s,o),o}}function vg(e,t){const n=Array.isArray(e)?e:[e];t?t.children=n:t=null;for(let i=0;i<n.length;i++){const e=n[i];e.parent&&e.parent.children!==n&&Ld(e),t?(e.prev=n[i-1]||null,e.next=n[i+1]||null):e.prev=e.next=null,e.parent=t}return t}function yg(e,t){return null==e?[]:xp(e)?t?Op(e.get()):e.get():Array.isArray(e)?e.reduce(((e,n)=>e.concat(this._makeDomArray(n,t))),[]):"string"===typeof e?this._parse(e,this.options,!1,null).children:t?Op([e]):[e]}function Tg(e){return function(...t){const n=this.length-1;return kp(this,((i,r)=>{if(!xh(i))return;const s="function"===typeof t[0]?t[0].call(i,r,this._render(i.children)):t,o=this._makeDomArray(s,r<n);e(o,i.children,i)}))}}function Eg(e,t,n,i,r){var s,o;const a=[t,n,...i],c=0===t?null:e[t-1],l=t+n>=e.length?null:e[t+n];for(let u=0;u<i.length;++u){const e=i[u],n=e.parent;if(n){const i=n.children,s=i.indexOf(e);s>-1&&(n.children.splice(s,1),r===n&&t>s&&a[0]--)}e.parent=r,e.prev&&(e.prev.next=null!==(s=e.next)&&void 0!==s?s:null),e.next&&(e.next.prev=null!==(o=e.prev)&&void 0!==o?o:null),e.prev=0===u?c:i[u-1],e.next=u===i.length-1?l:i[u+1]}return c&&(c.next=i[0]),l&&(l.prev=i[i.length-1]),e.splice(...a)}function _g(e){const t=xp(e)?e:this._make(e);return t.append(this),this}function bg(e){const t=xp(e)?e:this._make(e);return t.prepend(this),this}const wg=Tg(((e,t,n)=>{Eg(t,t.length,0,e,n)})),Sg=Tg(((e,t,n)=>{Eg(t,0,0,e,n)}));function Ag(e){return function(t){const n=this.length-1,i=this.parents().last();for(let r=0;r<this.length;r++){const s=this[r],o="function"===typeof t?t.call(s,r,s):"string"!==typeof t||Dp(t)?t:i.find(t).clone(),[a]=this._makeDomArray(o,r<n);if(!a||!xh(a))continue;let c=a,l=0;while(l<c.children.length){const e=c.children[l];_h(e)?(c=e,l=0):l++}e(s,c,[a])}return this}}const Cg=Ag(((e,t,n)=>{const{parent:i}=e;if(!i)return;const r=i.children,s=r.indexOf(e);vg([e],t),Eg(r,s,0,n,i)})),xg=Ag(((e,t,n)=>{xh(e)&&(vg(e.children,t),vg(n,e))}));function Ig(e){return this.parent(e).not("body").each(((e,t)=>{this._make(t).replaceWith(t.children)})),this}function Ng(e){const t=this[0];if(t){const n=this._make("function"===typeof e?e.call(t,0,t):e).insertBefore(t);let i;for(let e=0;e<n.length;e++)"tag"===n[e].type&&(i=n[e]);let r=0;while(i&&r<i.children.length){const e=i.children[r];"tag"===e.type?(i=e,r=0):r++}i&&this._make(i).append(this)}return this}function kg(...e){const t=this.length-1;return kp(this,((n,i)=>{const{parent:r}=n;if(!xh(n)||!r)return;const s=r.children,o=s.indexOf(n);if(o<0)return;const a="function"===typeof e[0]?e[0].call(n,i,this._render(n.children)):e,c=this._makeDomArray(a,i<t);Eg(s,o+1,0,c,r)}))}function Og(e){"string"===typeof e&&(e=this._make(e)),this.remove();const t=[];return this._makeDomArray(e).forEach((e=>{const n=this.clone().toArray(),{parent:i}=e;if(!i)return;const r=i.children,s=r.indexOf(e);s<0||(Eg(r,s+1,0,n,i),t.push(...n))})),this._make(t)}function Rg(...e){const t=this.length-1;return kp(this,((n,i)=>{const{parent:r}=n;if(!xh(n)||!r)return;const s=r.children,o=s.indexOf(n);if(o<0)return;const a="function"===typeof e[0]?e[0].call(n,i,this._render(n.children)):e,c=this._makeDomArray(a,i<t);Eg(s,o,0,c,r)}))}function Dg(e){const t=this._make(e);this.remove();const n=[];return kp(t,(e=>{const t=this.clone().toArray(),{parent:i}=e;if(!i)return;const r=i.children,s=r.indexOf(e);s<0||(Eg(r,s,0,t,i),n.push(...t))})),this._make(n)}function Pg(e){const t=e?this.filter(e):this;return kp(t,(e=>{Ld(e),e.prev=e.next=e.parent=null})),this}function Lg(e){return kp(this,((t,n)=>{const{parent:i}=t;if(!i)return;const r=i.children,s="function"===typeof e?e.call(t,n,t):e,o=this._makeDomArray(s);vg(o,null);const a=r.indexOf(t);Eg(r,a,1,o,i),o.includes(t)||(t.parent=t.prev=t.next=null)}))}function Mg(){return kp(this,(e=>{xh(e)&&(e.children.forEach((e=>{e.next=e.prev=e.parent=null})),e.children.length=0)}))}function Bg(e){if(void 0===e){const e=this[0];return e&&xh(e)?this._render(e.children):null}return kp(this,(t=>{if(!xh(t))return;t.children.forEach((e=>{e.next=e.prev=e.parent=null}));const n=xp(e)?e.toArray():this._parse(`${e}`,this.options,!1,t).children;vg(n,t)}))}function Fg(){return this._render(this)}function Hg(e){return void 0===e?_p(this):kp(this,"function"===typeof e?(t,n)=>this._make(t).text(e.call(t,n,_p([t]))):t=>{if(!xh(t))return;t.children.forEach((e=>{e.next=e.prev=e.parent=null}));const n=new fh(`${e}`);vg(n,t)})}function Ug(){return this._make(Op(this.get()))}function qg(e,t){return null!=e&&null!=t||"object"===typeof e&&!Array.isArray(e)?kp(this,((n,i)=>{_h(n)&&Gg(n,e,t,i)})):0!==this.length?$g(this[0],e):void 0}function Gg(e,t,n,i){if("string"===typeof t){const r=$g(e),s="function"===typeof n?n.call(e,i,r[t]):n;""===s?delete r[t]:null!=s&&(r[t]=s),e.attribs["style"]=zg(r)}else"object"===typeof t&&Object.keys(t).forEach(((n,i)=>{Gg(e,n,t[n],i)}))}function $g(e,t){if(!e||!_h(e))return;const n=jg(e.attribs["style"]);if("string"===typeof t)return n[t];if(Array.isArray(t)){const e={};return t.forEach((t=>{null!=n[t]&&(e[t]=n[t])})),e}return n}function zg(e){return Object.keys(e).reduce(((t,n)=>`${t}${t?" ":""}${n}: ${e[n]};`),"")}function jg(e){if(e=(e||"").trim(),!e)return{};const t={};let n;for(const i of e.split(";")){const e=i.indexOf(":");if(e<1||e===i.length-1){const e=i.trimEnd();e.length>0&&void 0!==n&&(t[n]+=`;${e}`)}else n=i.slice(0,e).trim(),t[n]=i.slice(e+1).trim()}return t}const Vg="input,select,textarea,keygen",Wg=/%20/g,Yg=/\r?\n/g;function Xg(){const e=this.serializeArray(),t=e.map((e=>`${encodeURIComponent(e.name)}=${encodeURIComponent(e.value)}`));return t.join("&").replace(Wg,"+")}function Kg(){return this.map(((e,t)=>{const n=this._make(t);return _h(t)&&"form"===t.name?n.find(Vg).toArray():n.filter(Vg).toArray()})).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map(((e,t)=>{var n;const i=this._make(t),r=i.attr("name"),s=null!==(n=i.val())&&void 0!==n?n:"";return Array.isArray(s)?s.map((e=>({name:r,value:e.replace(Yg,"\r\n")}))):{name:r,value:s.replace(Yg,"\r\n")}})).toArray()}class Qg{constructor(e,t,n){if(this.length=0,this.options=n,this._root=t,e){for(let t=0;t<e.length;t++)this[t]=e[t];this.length=e.length}}}function Zg(e,t){return function i(r,s,o=!0){if(null==r)throw new Error("cheerio.load() expects a string");const a={...Zu,...eh(s)},c=e(r,a,o,null);class l extends Qg{_make(e,t){const n=u(e,t);return n.prevObject=this,n}_parse(t,n,i,r){return e(t,n,i,r)}_render(e){return t(e,this.options)}}function u(t,n,i=c,r){if(t&&xp(t))return t;const s={...a,...eh(r)},o="string"===typeof i?[e(i,s,!1,null)]:"length"in i?i:[i],u=xp(o)?o:new l(o,null,s);if(u._root=u,!t)return new l(void 0,u,s);const h="string"===typeof t&&Dp(t)?e(t,s,!1,null).children:Jg(t)?[t]:Array.isArray(t)?t:void 0,d=new l(h,u,s);if(h)return d;if("string"!==typeof t)throw new Error("Unexpected type of selector");let p=t;const f=n?"string"===typeof n?Dp(n)?new l([e(n,s,!1,null)],u,s):(p=`${n} ${p}`,u):xp(n)?n:new l(Array.isArray(n)?n:[n],u,s):u;return f?f.find(p):d}return Object.assign(u,n,{load:i,_root:c,_options:a,fn:l.prototype,prototype:l.prototype}),u}}function Jg(e){return!!e.name||"root"===e.type||"text"===e.type||"comment"===e.type}Qg.prototype.cheerio="[cheerio object]",Qg.prototype.splice=Array.prototype.splice,Qg.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],Object.assign(Qg.prototype,i,r,s,o,a);const ev=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),tv="";var nv;(function(e){e[e["EOF"]=-1]="EOF",e[e["NULL"]=0]="NULL",e[e["TABULATION"]=9]="TABULATION",e[e["CARRIAGE_RETURN"]=13]="CARRIAGE_RETURN",e[e["LINE_FEED"]=10]="LINE_FEED",e[e["FORM_FEED"]=12]="FORM_FEED",e[e["SPACE"]=32]="SPACE",e[e["EXCLAMATION_MARK"]=33]="EXCLAMATION_MARK",e[e["QUOTATION_MARK"]=34]="QUOTATION_MARK",e[e["AMPERSAND"]=38]="AMPERSAND",e[e["APOSTROPHE"]=39]="APOSTROPHE",e[e["HYPHEN_MINUS"]=45]="HYPHEN_MINUS",e[e["SOLIDUS"]=47]="SOLIDUS",e[e["DIGIT_0"]=48]="DIGIT_0",e[e["DIGIT_9"]=57]="DIGIT_9",e[e["SEMICOLON"]=59]="SEMICOLON",e[e["LESS_THAN_SIGN"]=60]="LESS_THAN_SIGN",e[e["EQUALS_SIGN"]=61]="EQUALS_SIGN",e[e["GREATER_THAN_SIGN"]=62]="GREATER_THAN_SIGN",e[e["QUESTION_MARK"]=63]="QUESTION_MARK",e[e["LATIN_CAPITAL_A"]=65]="LATIN_CAPITAL_A",e[e["LATIN_CAPITAL_Z"]=90]="LATIN_CAPITAL_Z",e[e["RIGHT_SQUARE_BRACKET"]=93]="RIGHT_SQUARE_BRACKET",e[e["GRAVE_ACCENT"]=96]="GRAVE_ACCENT",e[e["LATIN_SMALL_A"]=97]="LATIN_SMALL_A",e[e["LATIN_SMALL_Z"]=122]="LATIN_SMALL_Z"})(nv||(nv={}));const iv={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function rv(e){return e>=55296&&e<=57343}function sv(e){return e>=56320&&e<=57343}function ov(e,t){return 1024*(e-55296)+9216+t}function av(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159}function cv(e){return e>=64976&&e<=65007||ev.has(e)}var lv;(function(e){e["controlCharacterInInputStream"]="control-character-in-input-stream",e["noncharacterInInputStream"]="noncharacter-in-input-stream",e["surrogateInInputStream"]="surrogate-in-input-stream",e["nonVoidHtmlElementStartTagWithTrailingSolidus"]="non-void-html-element-start-tag-with-trailing-solidus",e["endTagWithAttributes"]="end-tag-with-attributes",e["endTagWithTrailingSolidus"]="end-tag-with-trailing-solidus",e["unexpectedSolidusInTag"]="unexpected-solidus-in-tag",e["unexpectedNullCharacter"]="unexpected-null-character",e["unexpectedQuestionMarkInsteadOfTagName"]="unexpected-question-mark-instead-of-tag-name",e["invalidFirstCharacterOfTagName"]="invalid-first-character-of-tag-name",e["unexpectedEqualsSignBeforeAttributeName"]="unexpected-equals-sign-before-attribute-name",e["missingEndTagName"]="missing-end-tag-name",e["unexpectedCharacterInAttributeName"]="unexpected-character-in-attribute-name",e["unknownNamedCharacterReference"]="unknown-named-character-reference",e["missingSemicolonAfterCharacterReference"]="missing-semicolon-after-character-reference",e["unexpectedCharacterAfterDoctypeSystemIdentifier"]="unexpected-character-after-doctype-system-identifier",e["unexpectedCharacterInUnquotedAttributeValue"]="unexpected-character-in-unquoted-attribute-value",e["eofBeforeTagName"]="eof-before-tag-name",e["eofInTag"]="eof-in-tag",e["missingAttributeValue"]="missing-attribute-value",e["missingWhitespaceBetweenAttributes"]="missing-whitespace-between-attributes",e["missingWhitespaceAfterDoctypePublicKeyword"]="missing-whitespace-after-doctype-public-keyword",e["missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers"]="missing-whitespace-between-doctype-public-and-system-identifiers",e["missingWhitespaceAfterDoctypeSystemKeyword"]="missing-whitespace-after-doctype-system-keyword",e["missingQuoteBeforeDoctypePublicIdentifier"]="missing-quote-before-doctype-public-identifier",e["missingQuoteBeforeDoctypeSystemIdentifier"]="missing-quote-before-doctype-system-identifier",e["missingDoctypePublicIdentifier"]="missing-doctype-public-identifier",e["missingDoctypeSystemIdentifier"]="missing-doctype-system-identifier",e["abruptDoctypePublicIdentifier"]="abrupt-doctype-public-identifier",e["abruptDoctypeSystemIdentifier"]="abrupt-doctype-system-identifier",e["cdataInHtmlContent"]="cdata-in-html-content",e["incorrectlyOpenedComment"]="incorrectly-opened-comment",e["eofInScriptHtmlCommentLikeText"]="eof-in-script-html-comment-like-text",e["eofInDoctype"]="eof-in-doctype",e["nestedComment"]="nested-comment",e["abruptClosingOfEmptyComment"]="abrupt-closing-of-empty-comment",e["eofInComment"]="eof-in-comment",e["incorrectlyClosedComment"]="incorrectly-closed-comment",e["eofInCdata"]="eof-in-cdata",e["absenceOfDigitsInNumericCharacterReference"]="absence-of-digits-in-numeric-character-reference",e["nullCharacterReference"]="null-character-reference",e["surrogateCharacterReference"]="surrogate-character-reference",e["characterReferenceOutsideUnicodeRange"]="character-reference-outside-unicode-range",e["controlCharacterReference"]="control-character-reference",e["noncharacterCharacterReference"]="noncharacter-character-reference",e["missingWhitespaceBeforeDoctypeName"]="missing-whitespace-before-doctype-name",e["missingDoctypeName"]="missing-doctype-name",e["invalidCharacterSequenceAfterDoctypeName"]="invalid-character-sequence-after-doctype-name",e["duplicateAttribute"]="duplicate-attribute",e["nonConformingDoctype"]="non-conforming-doctype",e["missingDoctype"]="missing-doctype",e["misplacedDoctype"]="misplaced-doctype",e["endTagWithoutMatchingOpenElement"]="end-tag-without-matching-open-element",e["closingOfElementWithOpenChildElements"]="closing-of-element-with-open-child-elements",e["disallowedContentInNoscriptInHead"]="disallowed-content-in-noscript-in-head",e["openElementsLeftAfterEof"]="open-elements-left-after-eof",e["abandonedHeadElementChild"]="abandoned-head-element-child",e["misplacedStartTagForHeadElement"]="misplaced-start-tag-for-head-element",e["nestedNoscriptInHead"]="nested-noscript-in-head",e["eofInElementThatCanContainOnlyText"]="eof-in-element-that-can-contain-only-text"})(lv||(lv={}));const uv=65536;class hv{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=uv,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,t){const{line:n,col:i,offset:r}=this,s=i+t,o=r+t;return{code:e,startLine:n,endLine:n,startCol:s,endCol:s,startOffset:o,endOffset:o}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const t=this.html.charCodeAt(this.pos+1);if(sv(t))return this.pos++,this._addGap(),ov(e,t)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,nv.EOF;return this._err(lv.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,t){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,t){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(t)return this.html.startsWith(e,this.pos);for(let n=0;n<e.length;n++){const t=32|this.html.charCodeAt(this.pos+n);if(t!==e.charCodeAt(n))return!1}return!0}peek(e){const t=this.pos+e;if(t>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,nv.EOF;const n=this.html.charCodeAt(t);return n===nv.CARRIAGE_RETURN?nv.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,nv.EOF;let e=this.html.charCodeAt(this.pos);if(e===nv.CARRIAGE_RETURN)return this.isEol=!0,this.skipNextNewLine=!0,nv.LINE_FEED;if(e===nv.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine))return this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance();this.skipNextNewLine=!1,rv(e)&&(e=this._processSurrogate(e));const t=null===this.handler.onParseError||e>31&&e<127||e===nv.LINE_FEED||e===nv.CARRIAGE_RETURN||e>159&&e<64976;return t||this._checkForProblematicCharacters(e),e}_checkForProblematicCharacters(e){av(e)?this._err(lv.controlCharacterInInputStream):cv(e)&&this._err(lv.noncharacterInInputStream)}retreat(e){this.pos-=e;while(this.pos<this.lastGapPos)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var dv;function pv(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}(function(e){e[e["CHARACTER"]=0]="CHARACTER",e[e["NULL_CHARACTER"]=1]="NULL_CHARACTER",e[e["WHITESPACE_CHARACTER"]=2]="WHITESPACE_CHARACTER",e[e["START_TAG"]=3]="START_TAG",e[e["END_TAG"]=4]="END_TAG",e[e["COMMENT"]=5]="COMMENT",e[e["DOCTYPE"]=6]="DOCTYPE",e[e["EOF"]=7]="EOF",e[e["HIBERNATION"]=8]="HIBERNATION"})(dv||(dv={}));const fv=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map((e=>e.charCodeAt(0))));var mv;const gv=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);mv=String.fromCodePoint;function vv(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=gv.get(e))&&void 0!==t?t:e}var yv;(function(e){e[e["NUM"]=35]="NUM",e[e["SEMI"]=59]="SEMI",e[e["EQUALS"]=61]="EQUALS",e[e["ZERO"]=48]="ZERO",e[e["NINE"]=57]="NINE",e[e["LOWER_A"]=97]="LOWER_A",e[e["LOWER_F"]=102]="LOWER_F",e[e["LOWER_X"]=120]="LOWER_X",e[e["LOWER_Z"]=122]="LOWER_Z",e[e["UPPER_A"]=65]="UPPER_A",e[e["UPPER_F"]=70]="UPPER_F",e[e["UPPER_Z"]=90]="UPPER_Z"})(yv||(yv={}));const Tv=32;var Ev,_v,bv;function wv(e){return e>=yv.ZERO&&e<=yv.NINE}function Sv(e){return e>=yv.UPPER_A&&e<=yv.UPPER_F||e>=yv.LOWER_A&&e<=yv.LOWER_F}function Av(e){return e>=yv.UPPER_A&&e<=yv.UPPER_Z||e>=yv.LOWER_A&&e<=yv.LOWER_Z||wv(e)}function Cv(e){return e===yv.EQUALS||Av(e)}(function(e){e[e["VALUE_LENGTH"]=49152]="VALUE_LENGTH",e[e["BRANCH_LENGTH"]=16256]="BRANCH_LENGTH",e[e["JUMP_TABLE"]=127]="JUMP_TABLE"})(Ev||(Ev={})),function(e){e[e["EntityStart"]=0]="EntityStart",e[e["NumericStart"]=1]="NumericStart",e[e["NumericDecimal"]=2]="NumericDecimal",e[e["NumericHex"]=3]="NumericHex",e[e["NamedEntity"]=4]="NamedEntity"}(_v||(_v={})),function(e){e[e["Legacy"]=0]="Legacy",e[e["Strict"]=1]="Strict",e[e["Attribute"]=2]="Attribute"}(bv||(bv={}));class xv{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=_v.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=bv.Strict}startEntity(e){this.decodeMode=e,this.state=_v.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case _v.EntityStart:return e.charCodeAt(t)===yv.NUM?(this.state=_v.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=_v.NamedEntity,this.stateNamedEntity(e,t));case _v.NumericStart:return this.stateNumericStart(e,t);case _v.NumericDecimal:return this.stateNumericDecimal(e,t);case _v.NumericHex:return this.stateNumericHex(e,t);case _v.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|Tv)===yv.LOWER_X?(this.state=_v.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=_v.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,i){if(t!==n){const r=n-t;this.result=this.result*Math.pow(i,r)+Number.parseInt(e.substr(t,r),i),this.consumed+=r}}stateNumericHex(e,t){const n=t;while(t<e.length){const i=e.charCodeAt(t);if(!wv(i)&&!Sv(i))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(i,3);t+=1}return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){const n=t;while(t<e.length){const i=e.charCodeAt(t);if(!wv(i))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(i,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===yv.SEMI)this.consumed+=1;else if(this.decodeMode===bv.Strict)return 0;return this.emitCodePoint(vv(this.result),this.consumed),this.errors&&(e!==yv.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:n}=this;let i=n[this.treeIndex],r=(i&Ev.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const s=e.charCodeAt(t);if(this.treeIndex=Iv(n,i,this.treeIndex+Math.max(1,r),s),this.treeIndex<0)return 0===this.result||this.decodeMode===bv.Attribute&&(0===r||Cv(s))?0:this.emitNotTerminatedNamedEntity();if(i=n[this.treeIndex],r=(i&Ev.VALUE_LENGTH)>>14,0!==r){if(s===yv.SEMI)return this.emitNamedEntityData(this.treeIndex,r,this.consumed+this.excess);this.decodeMode!==bv.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:n}=this,i=(n[t]&Ev.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){const{decodeTree:i}=this;return this.emitCodePoint(1===t?i[e]&~Ev.VALUE_LENGTH:i[e+1],n),3===t&&this.emitCodePoint(i[e+2],n),n}end(){var e;switch(this.state){case _v.NamedEntity:return 0===this.result||this.decodeMode===bv.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case _v.NumericDecimal:return this.emitNumericEntity(0,2);case _v.NumericHex:return this.emitNumericEntity(0,3);case _v.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case _v.EntityStart:return 0}}}function Iv(e,t,n,i){const r=(t&Ev.BRANCH_LENGTH)>>7,s=t&Ev.JUMP_TABLE;if(0===r)return 0!==s&&i===s?n:-1;if(s){const t=i-s;return t<0||t>=r?-1:e[n+t]-1}let o=n,a=o+r-1;while(o<=a){const t=o+a>>>1,n=e[t];if(n<i)o=t+1;else{if(!(n>i))return e[t+r];a=t-1}}return-1}var Nv,kv,Ov,Rv,Dv;(function(e){e["HTML"]="http://www.w3.org/1999/xhtml",e["MATHML"]="http://www.w3.org/1998/Math/MathML",e["SVG"]="http://www.w3.org/2000/svg",e["XLINK"]="http://www.w3.org/1999/xlink",e["XML"]="http://www.w3.org/XML/1998/namespace",e["XMLNS"]="http://www.w3.org/2000/xmlns/"})(Nv||(Nv={})),function(e){e["TYPE"]="type",e["ACTION"]="action",e["ENCODING"]="encoding",e["PROMPT"]="prompt",e["NAME"]="name",e["COLOR"]="color",e["FACE"]="face",e["SIZE"]="size"}(kv||(kv={})),function(e){e["NO_QUIRKS"]="no-quirks",e["QUIRKS"]="quirks",e["LIMITED_QUIRKS"]="limited-quirks"}(Ov||(Ov={})),function(e){e["A"]="a",e["ADDRESS"]="address",e["ANNOTATION_XML"]="annotation-xml",e["APPLET"]="applet",e["AREA"]="area",e["ARTICLE"]="article",e["ASIDE"]="aside",e["B"]="b",e["BASE"]="base",e["BASEFONT"]="basefont",e["BGSOUND"]="bgsound",e["BIG"]="big",e["BLOCKQUOTE"]="blockquote",e["BODY"]="body",e["BR"]="br",e["BUTTON"]="button",e["CAPTION"]="caption",e["CENTER"]="center",e["CODE"]="code",e["COL"]="col",e["COLGROUP"]="colgroup",e["DD"]="dd",e["DESC"]="desc",e["DETAILS"]="details",e["DIALOG"]="dialog",e["DIR"]="dir",e["DIV"]="div",e["DL"]="dl",e["DT"]="dt",e["EM"]="em",e["EMBED"]="embed",e["FIELDSET"]="fieldset",e["FIGCAPTION"]="figcaption",e["FIGURE"]="figure",e["FONT"]="font",e["FOOTER"]="footer",e["FOREIGN_OBJECT"]="foreignObject",e["FORM"]="form",e["FRAME"]="frame",e["FRAMESET"]="frameset",e["H1"]="h1",e["H2"]="h2",e["H3"]="h3",e["H4"]="h4",e["H5"]="h5",e["H6"]="h6",e["HEAD"]="head",e["HEADER"]="header",e["HGROUP"]="hgroup",e["HR"]="hr",e["HTML"]="html",e["I"]="i",e["IMG"]="img",e["IMAGE"]="image",e["INPUT"]="input",e["IFRAME"]="iframe",e["KEYGEN"]="keygen",e["LABEL"]="label",e["LI"]="li",e["LINK"]="link",e["LISTING"]="listing",e["MAIN"]="main",e["MALIGNMARK"]="malignmark",e["MARQUEE"]="marquee",e["MATH"]="math",e["MENU"]="menu",e["META"]="meta",e["MGLYPH"]="mglyph",e["MI"]="mi",e["MO"]="mo",e["MN"]="mn",e["MS"]="ms",e["MTEXT"]="mtext",e["NAV"]="nav",e["NOBR"]="nobr",e["NOFRAMES"]="noframes",e["NOEMBED"]="noembed",e["NOSCRIPT"]="noscript",e["OBJECT"]="object",e["OL"]="ol",e["OPTGROUP"]="optgroup",e["OPTION"]="option",e["P"]="p",e["PARAM"]="param",e["PLAINTEXT"]="plaintext",e["PRE"]="pre",e["RB"]="rb",e["RP"]="rp",e["RT"]="rt",e["RTC"]="rtc",e["RUBY"]="ruby",e["S"]="s",e["SCRIPT"]="script",e["SEARCH"]="search",e["SECTION"]="section",e["SELECT"]="select",e["SOURCE"]="source",e["SMALL"]="small",e["SPAN"]="span",e["STRIKE"]="strike",e["STRONG"]="strong",e["STYLE"]="style",e["SUB"]="sub",e["SUMMARY"]="summary",e["SUP"]="sup",e["TABLE"]="table",e["TBODY"]="tbody",e["TEMPLATE"]="template",e["TEXTAREA"]="textarea",e["TFOOT"]="tfoot",e["TD"]="td",e["TH"]="th",e["THEAD"]="thead",e["TITLE"]="title",e["TR"]="tr",e["TRACK"]="track",e["TT"]="tt",e["U"]="u",e["UL"]="ul",e["SVG"]="svg",e["VAR"]="var",e["WBR"]="wbr",e["XMP"]="xmp"}(Rv||(Rv={})),function(e){e[e["UNKNOWN"]=0]="UNKNOWN",e[e["A"]=1]="A",e[e["ADDRESS"]=2]="ADDRESS",e[e["ANNOTATION_XML"]=3]="ANNOTATION_XML",e[e["APPLET"]=4]="APPLET",e[e["AREA"]=5]="AREA",e[e["ARTICLE"]=6]="ARTICLE",e[e["ASIDE"]=7]="ASIDE",e[e["B"]=8]="B",e[e["BASE"]=9]="BASE",e[e["BASEFONT"]=10]="BASEFONT",e[e["BGSOUND"]=11]="BGSOUND",e[e["BIG"]=12]="BIG",e[e["BLOCKQUOTE"]=13]="BLOCKQUOTE",e[e["BODY"]=14]="BODY",e[e["BR"]=15]="BR",e[e["BUTTON"]=16]="BUTTON",e[e["CAPTION"]=17]="CAPTION",e[e["CENTER"]=18]="CENTER",e[e["CODE"]=19]="CODE",e[e["COL"]=20]="COL",e[e["COLGROUP"]=21]="COLGROUP",e[e["DD"]=22]="DD",e[e["DESC"]=23]="DESC",e[e["DETAILS"]=24]="DETAILS",e[e["DIALOG"]=25]="DIALOG",e[e["DIR"]=26]="DIR",e[e["DIV"]=27]="DIV",e[e["DL"]=28]="DL",e[e["DT"]=29]="DT",e[e["EM"]=30]="EM",e[e["EMBED"]=31]="EMBED",e[e["FIELDSET"]=32]="FIELDSET",e[e["FIGCAPTION"]=33]="FIGCAPTION",e[e["FIGURE"]=34]="FIGURE",e[e["FONT"]=35]="FONT",e[e["FOOTER"]=36]="FOOTER",e[e["FOREIGN_OBJECT"]=37]="FOREIGN_OBJECT",e[e["FORM"]=38]="FORM",e[e["FRAME"]=39]="FRAME",e[e["FRAMESET"]=40]="FRAMESET",e[e["H1"]=41]="H1",e[e["H2"]=42]="H2",e[e["H3"]=43]="H3",e[e["H4"]=44]="H4",e[e["H5"]=45]="H5",e[e["H6"]=46]="H6",e[e["HEAD"]=47]="HEAD",e[e["HEADER"]=48]="HEADER",e[e["HGROUP"]=49]="HGROUP",e[e["HR"]=50]="HR",e[e["HTML"]=51]="HTML",e[e["I"]=52]="I",e[e["IMG"]=53]="IMG",e[e["IMAGE"]=54]="IMAGE",e[e["INPUT"]=55]="INPUT",e[e["IFRAME"]=56]="IFRAME",e[e["KEYGEN"]=57]="KEYGEN",e[e["LABEL"]=58]="LABEL",e[e["LI"]=59]="LI",e[e["LINK"]=60]="LINK",e[e["LISTING"]=61]="LISTING",e[e["MAIN"]=62]="MAIN",e[e["MALIGNMARK"]=63]="MALIGNMARK",e[e["MARQUEE"]=64]="MARQUEE",e[e["MATH"]=65]="MATH",e[e["MENU"]=66]="MENU",e[e["META"]=67]="META",e[e["MGLYPH"]=68]="MGLYPH",e[e["MI"]=69]="MI",e[e["MO"]=70]="MO",e[e["MN"]=71]="MN",e[e["MS"]=72]="MS",e[e["MTEXT"]=73]="MTEXT",e[e["NAV"]=74]="NAV",e[e["NOBR"]=75]="NOBR",e[e["NOFRAMES"]=76]="NOFRAMES",e[e["NOEMBED"]=77]="NOEMBED",e[e["NOSCRIPT"]=78]="NOSCRIPT",e[e["OBJECT"]=79]="OBJECT",e[e["OL"]=80]="OL",e[e["OPTGROUP"]=81]="OPTGROUP",e[e["OPTION"]=82]="OPTION",e[e["P"]=83]="P",e[e["PARAM"]=84]="PARAM",e[e["PLAINTEXT"]=85]="PLAINTEXT",e[e["PRE"]=86]="PRE",e[e["RB"]=87]="RB",e[e["RP"]=88]="RP",e[e["RT"]=89]="RT",e[e["RTC"]=90]="RTC",e[e["RUBY"]=91]="RUBY",e[e["S"]=92]="S",e[e["SCRIPT"]=93]="SCRIPT",e[e["SEARCH"]=94]="SEARCH",e[e["SECTION"]=95]="SECTION",e[e["SELECT"]=96]="SELECT",e[e["SOURCE"]=97]="SOURCE",e[e["SMALL"]=98]="SMALL",e[e["SPAN"]=99]="SPAN",e[e["STRIKE"]=100]="STRIKE",e[e["STRONG"]=101]="STRONG",e[e["STYLE"]=102]="STYLE",e[e["SUB"]=103]="SUB",e[e["SUMMARY"]=104]="SUMMARY",e[e["SUP"]=105]="SUP",e[e["TABLE"]=106]="TABLE",e[e["TBODY"]=107]="TBODY",e[e["TEMPLATE"]=108]="TEMPLATE",e[e["TEXTAREA"]=109]="TEXTAREA",e[e["TFOOT"]=110]="TFOOT",e[e["TD"]=111]="TD",e[e["TH"]=112]="TH",e[e["THEAD"]=113]="THEAD",e[e["TITLE"]=114]="TITLE",e[e["TR"]=115]="TR",e[e["TRACK"]=116]="TRACK",e[e["TT"]=117]="TT",e[e["U"]=118]="U",e[e["UL"]=119]="UL",e[e["SVG"]=120]="SVG",e[e["VAR"]=121]="VAR",e[e["WBR"]=122]="WBR",e[e["XMP"]=123]="XMP"}(Dv||(Dv={}));const Pv=new Map([[Rv.A,Dv.A],[Rv.ADDRESS,Dv.ADDRESS],[Rv.ANNOTATION_XML,Dv.ANNOTATION_XML],[Rv.APPLET,Dv.APPLET],[Rv.AREA,Dv.AREA],[Rv.ARTICLE,Dv.ARTICLE],[Rv.ASIDE,Dv.ASIDE],[Rv.B,Dv.B],[Rv.BASE,Dv.BASE],[Rv.BASEFONT,Dv.BASEFONT],[Rv.BGSOUND,Dv.BGSOUND],[Rv.BIG,Dv.BIG],[Rv.BLOCKQUOTE,Dv.BLOCKQUOTE],[Rv.BODY,Dv.BODY],[Rv.BR,Dv.BR],[Rv.BUTTON,Dv.BUTTON],[Rv.CAPTION,Dv.CAPTION],[Rv.CENTER,Dv.CENTER],[Rv.CODE,Dv.CODE],[Rv.COL,Dv.COL],[Rv.COLGROUP,Dv.COLGROUP],[Rv.DD,Dv.DD],[Rv.DESC,Dv.DESC],[Rv.DETAILS,Dv.DETAILS],[Rv.DIALOG,Dv.DIALOG],[Rv.DIR,Dv.DIR],[Rv.DIV,Dv.DIV],[Rv.DL,Dv.DL],[Rv.DT,Dv.DT],[Rv.EM,Dv.EM],[Rv.EMBED,Dv.EMBED],[Rv.FIELDSET,Dv.FIELDSET],[Rv.FIGCAPTION,Dv.FIGCAPTION],[Rv.FIGURE,Dv.FIGURE],[Rv.FONT,Dv.FONT],[Rv.FOOTER,Dv.FOOTER],[Rv.FOREIGN_OBJECT,Dv.FOREIGN_OBJECT],[Rv.FORM,Dv.FORM],[Rv.FRAME,Dv.FRAME],[Rv.FRAMESET,Dv.FRAMESET],[Rv.H1,Dv.H1],[Rv.H2,Dv.H2],[Rv.H3,Dv.H3],[Rv.H4,Dv.H4],[Rv.H5,Dv.H5],[Rv.H6,Dv.H6],[Rv.HEAD,Dv.HEAD],[Rv.HEADER,Dv.HEADER],[Rv.HGROUP,Dv.HGROUP],[Rv.HR,Dv.HR],[Rv.HTML,Dv.HTML],[Rv.I,Dv.I],[Rv.IMG,Dv.IMG],[Rv.IMAGE,Dv.IMAGE],[Rv.INPUT,Dv.INPUT],[Rv.IFRAME,Dv.IFRAME],[Rv.KEYGEN,Dv.KEYGEN],[Rv.LABEL,Dv.LABEL],[Rv.LI,Dv.LI],[Rv.LINK,Dv.LINK],[Rv.LISTING,Dv.LISTING],[Rv.MAIN,Dv.MAIN],[Rv.MALIGNMARK,Dv.MALIGNMARK],[Rv.MARQUEE,Dv.MARQUEE],[Rv.MATH,Dv.MATH],[Rv.MENU,Dv.MENU],[Rv.META,Dv.META],[Rv.MGLYPH,Dv.MGLYPH],[Rv.MI,Dv.MI],[Rv.MO,Dv.MO],[Rv.MN,Dv.MN],[Rv.MS,Dv.MS],[Rv.MTEXT,Dv.MTEXT],[Rv.NAV,Dv.NAV],[Rv.NOBR,Dv.NOBR],[Rv.NOFRAMES,Dv.NOFRAMES],[Rv.NOEMBED,Dv.NOEMBED],[Rv.NOSCRIPT,Dv.NOSCRIPT],[Rv.OBJECT,Dv.OBJECT],[Rv.OL,Dv.OL],[Rv.OPTGROUP,Dv.OPTGROUP],[Rv.OPTION,Dv.OPTION],[Rv.P,Dv.P],[Rv.PARAM,Dv.PARAM],[Rv.PLAINTEXT,Dv.PLAINTEXT],[Rv.PRE,Dv.PRE],[Rv.RB,Dv.RB],[Rv.RP,Dv.RP],[Rv.RT,Dv.RT],[Rv.RTC,Dv.RTC],[Rv.RUBY,Dv.RUBY],[Rv.S,Dv.S],[Rv.SCRIPT,Dv.SCRIPT],[Rv.SEARCH,Dv.SEARCH],[Rv.SECTION,Dv.SECTION],[Rv.SELECT,Dv.SELECT],[Rv.SOURCE,Dv.SOURCE],[Rv.SMALL,Dv.SMALL],[Rv.SPAN,Dv.SPAN],[Rv.STRIKE,Dv.STRIKE],[Rv.STRONG,Dv.STRONG],[Rv.STYLE,Dv.STYLE],[Rv.SUB,Dv.SUB],[Rv.SUMMARY,Dv.SUMMARY],[Rv.SUP,Dv.SUP],[Rv.TABLE,Dv.TABLE],[Rv.TBODY,Dv.TBODY],[Rv.TEMPLATE,Dv.TEMPLATE],[Rv.TEXTAREA,Dv.TEXTAREA],[Rv.TFOOT,Dv.TFOOT],[Rv.TD,Dv.TD],[Rv.TH,Dv.TH],[Rv.THEAD,Dv.THEAD],[Rv.TITLE,Dv.TITLE],[Rv.TR,Dv.TR],[Rv.TRACK,Dv.TRACK],[Rv.TT,Dv.TT],[Rv.U,Dv.U],[Rv.UL,Dv.UL],[Rv.SVG,Dv.SVG],[Rv.VAR,Dv.VAR],[Rv.WBR,Dv.WBR],[Rv.XMP,Dv.XMP]]);function Lv(e){var t;return null!==(t=Pv.get(e))&&void 0!==t?t:Dv.UNKNOWN}const Mv=Dv,Bv={[Nv.HTML]:new Set([Mv.ADDRESS,Mv.APPLET,Mv.AREA,Mv.ARTICLE,Mv.ASIDE,Mv.BASE,Mv.BASEFONT,Mv.BGSOUND,Mv.BLOCKQUOTE,Mv.BODY,Mv.BR,Mv.BUTTON,Mv.CAPTION,Mv.CENTER,Mv.COL,Mv.COLGROUP,Mv.DD,Mv.DETAILS,Mv.DIR,Mv.DIV,Mv.DL,Mv.DT,Mv.EMBED,Mv.FIELDSET,Mv.FIGCAPTION,Mv.FIGURE,Mv.FOOTER,Mv.FORM,Mv.FRAME,Mv.FRAMESET,Mv.H1,Mv.H2,Mv.H3,Mv.H4,Mv.H5,Mv.H6,Mv.HEAD,Mv.HEADER,Mv.HGROUP,Mv.HR,Mv.HTML,Mv.IFRAME,Mv.IMG,Mv.INPUT,Mv.LI,Mv.LINK,Mv.LISTING,Mv.MAIN,Mv.MARQUEE,Mv.MENU,Mv.META,Mv.NAV,Mv.NOEMBED,Mv.NOFRAMES,Mv.NOSCRIPT,Mv.OBJECT,Mv.OL,Mv.P,Mv.PARAM,Mv.PLAINTEXT,Mv.PRE,Mv.SCRIPT,Mv.SECTION,Mv.SELECT,Mv.SOURCE,Mv.STYLE,Mv.SUMMARY,Mv.TABLE,Mv.TBODY,Mv.TD,Mv.TEMPLATE,Mv.TEXTAREA,Mv.TFOOT,Mv.TH,Mv.THEAD,Mv.TITLE,Mv.TR,Mv.TRACK,Mv.UL,Mv.WBR,Mv.XMP]),[Nv.MATHML]:new Set([Mv.MI,Mv.MO,Mv.MN,Mv.MS,Mv.MTEXT,Mv.ANNOTATION_XML]),[Nv.SVG]:new Set([Mv.TITLE,Mv.FOREIGN_OBJECT,Mv.DESC]),[Nv.XLINK]:new Set,[Nv.XML]:new Set,[Nv.XMLNS]:new Set},Fv=new Set([Mv.H1,Mv.H2,Mv.H3,Mv.H4,Mv.H5,Mv.H6]),Hv=new Set([Rv.STYLE,Rv.SCRIPT,Rv.XMP,Rv.IFRAME,Rv.NOEMBED,Rv.NOFRAMES,Rv.PLAINTEXT]);function Uv(e,t){return Hv.has(e)||t&&e===Rv.NOSCRIPT}var qv;(function(e){e[e["DATA"]=0]="DATA",e[e["RCDATA"]=1]="RCDATA",e[e["RAWTEXT"]=2]="RAWTEXT",e[e["SCRIPT_DATA"]=3]="SCRIPT_DATA",e[e["PLAINTEXT"]=4]="PLAINTEXT",e[e["TAG_OPEN"]=5]="TAG_OPEN",e[e["END_TAG_OPEN"]=6]="END_TAG_OPEN",e[e["TAG_NAME"]=7]="TAG_NAME",e[e["RCDATA_LESS_THAN_SIGN"]=8]="RCDATA_LESS_THAN_SIGN",e[e["RCDATA_END_TAG_OPEN"]=9]="RCDATA_END_TAG_OPEN",e[e["RCDATA_END_TAG_NAME"]=10]="RCDATA_END_TAG_NAME",e[e["RAWTEXT_LESS_THAN_SIGN"]=11]="RAWTEXT_LESS_THAN_SIGN",e[e["RAWTEXT_END_TAG_OPEN"]=12]="RAWTEXT_END_TAG_OPEN",e[e["RAWTEXT_END_TAG_NAME"]=13]="RAWTEXT_END_TAG_NAME",e[e["SCRIPT_DATA_LESS_THAN_SIGN"]=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e["SCRIPT_DATA_END_TAG_OPEN"]=15]="SCRIPT_DATA_END_TAG_OPEN",e[e["SCRIPT_DATA_END_TAG_NAME"]=16]="SCRIPT_DATA_END_TAG_NAME",e[e["SCRIPT_DATA_ESCAPE_START"]=17]="SCRIPT_DATA_ESCAPE_START",e[e["SCRIPT_DATA_ESCAPE_START_DASH"]=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e["SCRIPT_DATA_ESCAPED"]=19]="SCRIPT_DATA_ESCAPED",e[e["SCRIPT_DATA_ESCAPED_DASH"]=20]="SCRIPT_DATA_ESCAPED_DASH",e[e["SCRIPT_DATA_ESCAPED_DASH_DASH"]=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e["SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN"]=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e["SCRIPT_DATA_ESCAPED_END_TAG_OPEN"]=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e["SCRIPT_DATA_ESCAPED_END_TAG_NAME"]=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e["SCRIPT_DATA_DOUBLE_ESCAPE_START"]=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e["SCRIPT_DATA_DOUBLE_ESCAPED"]=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e["SCRIPT_DATA_DOUBLE_ESCAPED_DASH"]=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e["SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH"]=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e["SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN"]=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e["SCRIPT_DATA_DOUBLE_ESCAPE_END"]=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e["BEFORE_ATTRIBUTE_NAME"]=31]="BEFORE_ATTRIBUTE_NAME",e[e["ATTRIBUTE_NAME"]=32]="ATTRIBUTE_NAME",e[e["AFTER_ATTRIBUTE_NAME"]=33]="AFTER_ATTRIBUTE_NAME",e[e["BEFORE_ATTRIBUTE_VALUE"]=34]="BEFORE_ATTRIBUTE_VALUE",e[e["ATTRIBUTE_VALUE_DOUBLE_QUOTED"]=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e["ATTRIBUTE_VALUE_SINGLE_QUOTED"]=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e["ATTRIBUTE_VALUE_UNQUOTED"]=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e["AFTER_ATTRIBUTE_VALUE_QUOTED"]=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e["SELF_CLOSING_START_TAG"]=39]="SELF_CLOSING_START_TAG",e[e["BOGUS_COMMENT"]=40]="BOGUS_COMMENT",e[e["MARKUP_DECLARATION_OPEN"]=41]="MARKUP_DECLARATION_OPEN",e[e["COMMENT_START"]=42]="COMMENT_START",e[e["COMMENT_START_DASH"]=43]="COMMENT_START_DASH",e[e["COMMENT"]=44]="COMMENT",e[e["COMMENT_LESS_THAN_SIGN"]=45]="COMMENT_LESS_THAN_SIGN",e[e["COMMENT_LESS_THAN_SIGN_BANG"]=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e["COMMENT_LESS_THAN_SIGN_BANG_DASH"]=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e["COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH"]=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e["COMMENT_END_DASH"]=49]="COMMENT_END_DASH",e[e["COMMENT_END"]=50]="COMMENT_END",e[e["COMMENT_END_BANG"]=51]="COMMENT_END_BANG",e[e["DOCTYPE"]=52]="DOCTYPE",e[e["BEFORE_DOCTYPE_NAME"]=53]="BEFORE_DOCTYPE_NAME",e[e["DOCTYPE_NAME"]=54]="DOCTYPE_NAME",e[e["AFTER_DOCTYPE_NAME"]=55]="AFTER_DOCTYPE_NAME",e[e["AFTER_DOCTYPE_PUBLIC_KEYWORD"]=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e["BEFORE_DOCTYPE_PUBLIC_IDENTIFIER"]=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e["DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED"]=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e["DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED"]=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e["AFTER_DOCTYPE_PUBLIC_IDENTIFIER"]=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e["BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS"]=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e["AFTER_DOCTYPE_SYSTEM_KEYWORD"]=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e["BEFORE_DOCTYPE_SYSTEM_IDENTIFIER"]=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e["DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED"]=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e["DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED"]=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e["AFTER_DOCTYPE_SYSTEM_IDENTIFIER"]=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e["BOGUS_DOCTYPE"]=67]="BOGUS_DOCTYPE",e[e["CDATA_SECTION"]=68]="CDATA_SECTION",e[e["CDATA_SECTION_BRACKET"]=69]="CDATA_SECTION_BRACKET",e[e["CDATA_SECTION_END"]=70]="CDATA_SECTION_END",e[e["CHARACTER_REFERENCE"]=71]="CHARACTER_REFERENCE",e[e["AMBIGUOUS_AMPERSAND"]=72]="AMBIGUOUS_AMPERSAND"})(qv||(qv={}));const Gv={DATA:qv.DATA,RCDATA:qv.RCDATA,RAWTEXT:qv.RAWTEXT,SCRIPT_DATA:qv.SCRIPT_DATA,PLAINTEXT:qv.PLAINTEXT,CDATA_SECTION:qv.CDATA_SECTION};function $v(e){return e>=nv.DIGIT_0&&e<=nv.DIGIT_9}function zv(e){return e>=nv.LATIN_CAPITAL_A&&e<=nv.LATIN_CAPITAL_Z}function jv(e){return e>=nv.LATIN_SMALL_A&&e<=nv.LATIN_SMALL_Z}function Vv(e){return jv(e)||zv(e)}function Wv(e){return Vv(e)||$v(e)}function Yv(e){return e+32}function Xv(e){return e===nv.SPACE||e===nv.LINE_FEED||e===nv.TABULATION||e===nv.FORM_FEED}function Kv(e){return Xv(e)||e===nv.SOLIDUS||e===nv.GREATER_THAN_SIGN}function Qv(e){return e===nv.NULL?lv.nullCharacterReference:e>1114111?lv.characterReferenceOutsideUnicodeRange:rv(e)?lv.surrogateCharacterReference:cv(e)?lv.noncharacterCharacterReference:av(e)||e===nv.CARRIAGE_RETURN?lv.controlCharacterReference:null}class Zv{constructor(e,t){this.options=e,this.handler=t,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=qv.DATA,this.returnState=qv.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new hv(t),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new xv(fv,((e,t)=>{this.preprocessor.pos=this.entityStartPos+t-1,this._flushCodePointConsumedAsCharacterReference(e)}),t.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(lv.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:e=>{this._err(lv.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+e)},validateNumericCharacterReference:e=>{const t=Qv(e);t&&this._err(t,1)}}:void 0)}_err(e,t=0){var n,i;null===(i=(n=this.handler).onParseError)||void 0===i||i.call(n,this.preprocessor.getError(e,t))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){this.inLoop=!0;while(this.active&&!this.paused){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,this.inLoop||(this._runParsingLoop(),this.paused||null===e||void 0===e||e())}write(e,t,n){this.active=!0,this.preprocessor.write(e,t),this._runParsingLoop(),this.paused||null===n||void 0===n||n()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return!!this.preprocessor.endOfChunkHit&&(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0)}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let t=0;t<e;t++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,t){return!!this.preprocessor.startsWith(e,t)&&(this._advanceBy(e.length-1),!0)}_createStartTagToken(){this.currentToken={type:dv.START_TAG,tagName:"",tagID:Dv.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:dv.END_TAG,tagName:"",tagID:Dv.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:dv.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:dv.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,t;const n=this.currentToken;if(null===pv(n,this.currentAttr.name)){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){const i=null!==(e=(t=n.location).attrs)&&void 0!==e?e:t.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(lv.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=Lv(e.tagName),e.type===dv.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(lv.endTagWithAttributes),e.selfClosing&&this._err(lv.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case dv.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case dv.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case dv.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:dv.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,t){if(this.currentCharacterToken){if(this.currentCharacterToken.type===e)return void(this.currentCharacterToken.chars+=t);this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk()}this._createCharacterToken(e,t)}_emitCodePoint(e){const t=Xv(e)?dv.WHITESPACE_CHARACTER:e===nv.NULL?dv.NULL_CHARACTER:dv.CHARACTER;this._appendCharToCurrentCharacterToken(t,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(dv.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=qv.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?bv.Attribute:bv.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===qv.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===qv.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===qv.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case qv.DATA:this._stateData(e);break;case qv.RCDATA:this._stateRcdata(e);break;case qv.RAWTEXT:this._stateRawtext(e);break;case qv.SCRIPT_DATA:this._stateScriptData(e);break;case qv.PLAINTEXT:this._statePlaintext(e);break;case qv.TAG_OPEN:this._stateTagOpen(e);break;case qv.END_TAG_OPEN:this._stateEndTagOpen(e);break;case qv.TAG_NAME:this._stateTagName(e);break;case qv.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(e);break;case qv.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(e);break;case qv.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(e);break;case qv.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(e);break;case qv.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(e);break;case qv.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(e);break;case qv.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(e);break;case qv.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(e);break;case qv.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(e);break;case qv.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(e);break;case qv.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(e);break;case qv.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(e);break;case qv.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(e);break;case qv.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(e);break;case qv.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(e);break;case qv.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(e);break;case qv.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(e);break;case qv.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(e);break;case qv.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(e);break;case qv.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(e);break;case qv.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(e);break;case qv.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(e);break;case qv.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(e);break;case qv.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(e);break;case qv.ATTRIBUTE_NAME:this._stateAttributeName(e);break;case qv.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(e);break;case qv.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(e);break;case qv.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(e);break;case qv.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(e);break;case qv.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(e);break;case qv.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(e);break;case qv.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(e);break;case qv.BOGUS_COMMENT:this._stateBogusComment(e);break;case qv.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(e);break;case qv.COMMENT_START:this._stateCommentStart(e);break;case qv.COMMENT_START_DASH:this._stateCommentStartDash(e);break;case qv.COMMENT:this._stateComment(e);break;case qv.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(e);break;case qv.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(e);break;case qv.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(e);break;case qv.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(e);break;case qv.COMMENT_END_DASH:this._stateCommentEndDash(e);break;case qv.COMMENT_END:this._stateCommentEnd(e);break;case qv.COMMENT_END_BANG:this._stateCommentEndBang(e);break;case qv.DOCTYPE:this._stateDoctype(e);break;case qv.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(e);break;case qv.DOCTYPE_NAME:this._stateDoctypeName(e);break;case qv.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(e);break;case qv.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(e);break;case qv.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(e);break;case qv.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(e);break;case qv.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(e);break;case qv.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(e);break;case qv.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break;case qv.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(e);break;case qv.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(e);break;case qv.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(e);break;case qv.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(e);break;case qv.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(e);break;case qv.BOGUS_DOCTYPE:this._stateBogusDoctype(e);break;case qv.CDATA_SECTION:this._stateCdataSection(e);break;case qv.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(e);break;case qv.CDATA_SECTION_END:this._stateCdataSectionEnd(e);break;case qv.CHARACTER_REFERENCE:this._stateCharacterReference();break;case qv.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(e);break;default:throw new Error("Unknown state")}}_stateData(e){switch(e){case nv.LESS_THAN_SIGN:this.state=qv.TAG_OPEN;break;case nv.AMPERSAND:this._startCharacterReference();break;case nv.NULL:this._err(lv.unexpectedNullCharacter),this._emitCodePoint(e);break;case nv.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case nv.AMPERSAND:this._startCharacterReference();break;case nv.LESS_THAN_SIGN:this.state=qv.RCDATA_LESS_THAN_SIGN;break;case nv.NULL:this._err(lv.unexpectedNullCharacter),this._emitChars(tv);break;case nv.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case nv.LESS_THAN_SIGN:this.state=qv.RAWTEXT_LESS_THAN_SIGN;break;case nv.NULL:this._err(lv.unexpectedNullCharacter),this._emitChars(tv);break;case nv.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case nv.LESS_THAN_SIGN:this.state=qv.SCRIPT_DATA_LESS_THAN_SIGN;break;case nv.NULL:this._err(lv.unexpectedNullCharacter),this._emitChars(tv);break;case nv.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case nv.NULL:this._err(lv.unexpectedNullCharacter),this._emitChars(tv);break;case nv.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Vv(e))this._createStartTagToken(),this.state=qv.TAG_NAME,this._stateTagName(e);else switch(e){case nv.EXCLAMATION_MARK:this.state=qv.MARKUP_DECLARATION_OPEN;break;case nv.SOLIDUS:this.state=qv.END_TAG_OPEN;break;case nv.QUESTION_MARK:this._err(lv.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=qv.BOGUS_COMMENT,this._stateBogusComment(e);break;case nv.EOF:this._err(lv.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(lv.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=qv.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Vv(e))this._createEndTagToken(),this.state=qv.TAG_NAME,this._stateTagName(e);else switch(e){case nv.GREATER_THAN_SIGN:this._err(lv.missingEndTagName),this.state=qv.DATA;break;case nv.EOF:this._err(lv.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(lv.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=qv.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const t=this.currentToken;switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:this.state=qv.BEFORE_ATTRIBUTE_NAME;break;case nv.SOLIDUS:this.state=qv.SELF_CLOSING_START_TAG;break;case nv.GREATER_THAN_SIGN:this.state=qv.DATA,this.emitCurrentTagToken();break;case nv.NULL:this._err(lv.unexpectedNullCharacter),t.tagName+=tv;break;case nv.EOF:this._err(lv.eofInTag),this._emitEOFToken();break;default:t.tagName+=String.fromCodePoint(zv(e)?Yv(e):e)}}_stateRcdataLessThanSign(e){e===nv.SOLIDUS?this.state=qv.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=qv.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Vv(e)?(this.state=qv.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=qv.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const t=this.currentToken;t.tagName=this.lastStartTagName;const n=this.preprocessor.peek(this.lastStartTagName.length);switch(n){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=qv.BEFORE_ATTRIBUTE_NAME,!1;case nv.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=qv.SELF_CLOSING_START_TAG,!1;case nv.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=qv.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=qv.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===nv.SOLIDUS?this.state=qv.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=qv.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Vv(e)?(this.state=qv.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=qv.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=qv.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case nv.SOLIDUS:this.state=qv.SCRIPT_DATA_END_TAG_OPEN;break;case nv.EXCLAMATION_MARK:this.state=qv.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=qv.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Vv(e)?(this.state=qv.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=qv.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=qv.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===nv.HYPHEN_MINUS?(this.state=qv.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=qv.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===nv.HYPHEN_MINUS?(this.state=qv.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=qv.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case nv.HYPHEN_MINUS:this.state=qv.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case nv.LESS_THAN_SIGN:this.state=qv.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case nv.NULL:this._err(lv.unexpectedNullCharacter),this._emitChars(tv);break;case nv.EOF:this._err(lv.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case nv.HYPHEN_MINUS:this.state=qv.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case nv.LESS_THAN_SIGN:this.state=qv.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case nv.NULL:this._err(lv.unexpectedNullCharacter),this.state=qv.SCRIPT_DATA_ESCAPED,this._emitChars(tv);break;case nv.EOF:this._err(lv.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=qv.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case nv.HYPHEN_MINUS:this._emitChars("-");break;case nv.LESS_THAN_SIGN:this.state=qv.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case nv.GREATER_THAN_SIGN:this.state=qv.SCRIPT_DATA,this._emitChars(">");break;case nv.NULL:this._err(lv.unexpectedNullCharacter),this.state=qv.SCRIPT_DATA_ESCAPED,this._emitChars(tv);break;case nv.EOF:this._err(lv.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=qv.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===nv.SOLIDUS?this.state=qv.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Vv(e)?(this._emitChars("<"),this.state=qv.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=qv.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Vv(e)?(this.state=qv.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=qv.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=qv.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(iv.SCRIPT,!1)&&Kv(this.preprocessor.peek(iv.SCRIPT.length))){this._emitCodePoint(e);for(let e=0;e<iv.SCRIPT.length;e++)this._emitCodePoint(this._consume());this.state=qv.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=qv.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case nv.HYPHEN_MINUS:this.state=qv.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case nv.LESS_THAN_SIGN:this.state=qv.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case nv.NULL:this._err(lv.unexpectedNullCharacter),this._emitChars(tv);break;case nv.EOF:this._err(lv.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case nv.HYPHEN_MINUS:this.state=qv.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case nv.LESS_THAN_SIGN:this.state=qv.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case nv.NULL:this._err(lv.unexpectedNullCharacter),this.state=qv.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(tv);break;case nv.EOF:this._err(lv.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=qv.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case nv.HYPHEN_MINUS:this._emitChars("-");break;case nv.LESS_THAN_SIGN:this.state=qv.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case nv.GREATER_THAN_SIGN:this.state=qv.SCRIPT_DATA,this._emitChars(">");break;case nv.NULL:this._err(lv.unexpectedNullCharacter),this.state=qv.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(tv);break;case nv.EOF:this._err(lv.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=qv.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===nv.SOLIDUS?(this.state=qv.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=qv.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(iv.SCRIPT,!1)&&Kv(this.preprocessor.peek(iv.SCRIPT.length))){this._emitCodePoint(e);for(let e=0;e<iv.SCRIPT.length;e++)this._emitCodePoint(this._consume());this.state=qv.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=qv.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:break;case nv.SOLIDUS:case nv.GREATER_THAN_SIGN:case nv.EOF:this.state=qv.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case nv.EQUALS_SIGN:this._err(lv.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=qv.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=qv.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:case nv.SOLIDUS:case nv.GREATER_THAN_SIGN:case nv.EOF:this._leaveAttrName(),this.state=qv.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case nv.EQUALS_SIGN:this._leaveAttrName(),this.state=qv.BEFORE_ATTRIBUTE_VALUE;break;case nv.QUOTATION_MARK:case nv.APOSTROPHE:case nv.LESS_THAN_SIGN:this._err(lv.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break;case nv.NULL:this._err(lv.unexpectedNullCharacter),this.currentAttr.name+=tv;break;default:this.currentAttr.name+=String.fromCodePoint(zv(e)?Yv(e):e)}}_stateAfterAttributeName(e){switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:break;case nv.SOLIDUS:this.state=qv.SELF_CLOSING_START_TAG;break;case nv.EQUALS_SIGN:this.state=qv.BEFORE_ATTRIBUTE_VALUE;break;case nv.GREATER_THAN_SIGN:this.state=qv.DATA,this.emitCurrentTagToken();break;case nv.EOF:this._err(lv.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=qv.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:break;case nv.QUOTATION_MARK:this.state=qv.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case nv.APOSTROPHE:this.state=qv.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case nv.GREATER_THAN_SIGN:this._err(lv.missingAttributeValue),this.state=qv.DATA,this.emitCurrentTagToken();break;default:this.state=qv.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case nv.QUOTATION_MARK:this.state=qv.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case nv.AMPERSAND:this._startCharacterReference();break;case nv.NULL:this._err(lv.unexpectedNullCharacter),this.currentAttr.value+=tv;break;case nv.EOF:this._err(lv.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case nv.APOSTROPHE:this.state=qv.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case nv.AMPERSAND:this._startCharacterReference();break;case nv.NULL:this._err(lv.unexpectedNullCharacter),this.currentAttr.value+=tv;break;case nv.EOF:this._err(lv.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:this._leaveAttrValue(),this.state=qv.BEFORE_ATTRIBUTE_NAME;break;case nv.AMPERSAND:this._startCharacterReference();break;case nv.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=qv.DATA,this.emitCurrentTagToken();break;case nv.NULL:this._err(lv.unexpectedNullCharacter),this.currentAttr.value+=tv;break;case nv.QUOTATION_MARK:case nv.APOSTROPHE:case nv.LESS_THAN_SIGN:case nv.EQUALS_SIGN:case nv.GRAVE_ACCENT:this._err(lv.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break;case nv.EOF:this._err(lv.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:this._leaveAttrValue(),this.state=qv.BEFORE_ATTRIBUTE_NAME;break;case nv.SOLIDUS:this._leaveAttrValue(),this.state=qv.SELF_CLOSING_START_TAG;break;case nv.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=qv.DATA,this.emitCurrentTagToken();break;case nv.EOF:this._err(lv.eofInTag),this._emitEOFToken();break;default:this._err(lv.missingWhitespaceBetweenAttributes),this.state=qv.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case nv.GREATER_THAN_SIGN:{const e=this.currentToken;e.selfClosing=!0,this.state=qv.DATA,this.emitCurrentTagToken();break}case nv.EOF:this._err(lv.eofInTag),this._emitEOFToken();break;default:this._err(lv.unexpectedSolidusInTag),this.state=qv.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const t=this.currentToken;switch(e){case nv.GREATER_THAN_SIGN:this.state=qv.DATA,this.emitCurrentComment(t);break;case nv.EOF:this.emitCurrentComment(t),this._emitEOFToken();break;case nv.NULL:this._err(lv.unexpectedNullCharacter),t.data+=tv;break;default:t.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(iv.DASH_DASH,!0)?(this._createCommentToken(iv.DASH_DASH.length+1),this.state=qv.COMMENT_START):this._consumeSequenceIfMatch(iv.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(iv.DOCTYPE.length+1),this.state=qv.DOCTYPE):this._consumeSequenceIfMatch(iv.CDATA_START,!0)?this.inForeignNode?this.state=qv.CDATA_SECTION:(this._err(lv.cdataInHtmlContent),this._createCommentToken(iv.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=qv.BOGUS_COMMENT):this._ensureHibernation()||(this._err(lv.incorrectlyOpenedComment),this._createCommentToken(2),this.state=qv.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case nv.HYPHEN_MINUS:this.state=qv.COMMENT_START_DASH;break;case nv.GREATER_THAN_SIGN:{this._err(lv.abruptClosingOfEmptyComment),this.state=qv.DATA;const e=this.currentToken;this.emitCurrentComment(e);break}default:this.state=qv.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const t=this.currentToken;switch(e){case nv.HYPHEN_MINUS:this.state=qv.COMMENT_END;break;case nv.GREATER_THAN_SIGN:this._err(lv.abruptClosingOfEmptyComment),this.state=qv.DATA,this.emitCurrentComment(t);break;case nv.EOF:this._err(lv.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=qv.COMMENT,this._stateComment(e)}}_stateComment(e){const t=this.currentToken;switch(e){case nv.HYPHEN_MINUS:this.state=qv.COMMENT_END_DASH;break;case nv.LESS_THAN_SIGN:t.data+="<",this.state=qv.COMMENT_LESS_THAN_SIGN;break;case nv.NULL:this._err(lv.unexpectedNullCharacter),t.data+=tv;break;case nv.EOF:this._err(lv.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const t=this.currentToken;switch(e){case nv.EXCLAMATION_MARK:t.data+="!",this.state=qv.COMMENT_LESS_THAN_SIGN_BANG;break;case nv.LESS_THAN_SIGN:t.data+="<";break;default:this.state=qv.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===nv.HYPHEN_MINUS?this.state=qv.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=qv.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===nv.HYPHEN_MINUS?this.state=qv.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=qv.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==nv.GREATER_THAN_SIGN&&e!==nv.EOF&&this._err(lv.nestedComment),this.state=qv.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const t=this.currentToken;switch(e){case nv.HYPHEN_MINUS:this.state=qv.COMMENT_END;break;case nv.EOF:this._err(lv.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=qv.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const t=this.currentToken;switch(e){case nv.GREATER_THAN_SIGN:this.state=qv.DATA,this.emitCurrentComment(t);break;case nv.EXCLAMATION_MARK:this.state=qv.COMMENT_END_BANG;break;case nv.HYPHEN_MINUS:t.data+="-";break;case nv.EOF:this._err(lv.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--",this.state=qv.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const t=this.currentToken;switch(e){case nv.HYPHEN_MINUS:t.data+="--!",this.state=qv.COMMENT_END_DASH;break;case nv.GREATER_THAN_SIGN:this._err(lv.incorrectlyClosedComment),this.state=qv.DATA,this.emitCurrentComment(t);break;case nv.EOF:this._err(lv.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--!",this.state=qv.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:this.state=qv.BEFORE_DOCTYPE_NAME;break;case nv.GREATER_THAN_SIGN:this.state=qv.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break;case nv.EOF:{this._err(lv.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(lv.missingWhitespaceBeforeDoctypeName),this.state=qv.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(zv(e))this._createDoctypeToken(String.fromCharCode(Yv(e))),this.state=qv.DOCTYPE_NAME;else switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:break;case nv.NULL:this._err(lv.unexpectedNullCharacter),this._createDoctypeToken(tv),this.state=qv.DOCTYPE_NAME;break;case nv.GREATER_THAN_SIGN:{this._err(lv.missingDoctypeName),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=qv.DATA;break}case nv.EOF:{this._err(lv.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=qv.DOCTYPE_NAME}}_stateDoctypeName(e){const t=this.currentToken;switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:this.state=qv.AFTER_DOCTYPE_NAME;break;case nv.GREATER_THAN_SIGN:this.state=qv.DATA,this.emitCurrentDoctype(t);break;case nv.NULL:this._err(lv.unexpectedNullCharacter),t.name+=tv;break;case nv.EOF:this._err(lv.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.name+=String.fromCodePoint(zv(e)?Yv(e):e)}}_stateAfterDoctypeName(e){const t=this.currentToken;switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:break;case nv.GREATER_THAN_SIGN:this.state=qv.DATA,this.emitCurrentDoctype(t);break;case nv.EOF:this._err(lv.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._consumeSequenceIfMatch(iv.PUBLIC,!1)?this.state=qv.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(iv.SYSTEM,!1)?this.state=qv.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(lv.invalidCharacterSequenceAfterDoctypeName),t.forceQuirks=!0,this.state=qv.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const t=this.currentToken;switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:this.state=qv.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case nv.QUOTATION_MARK:this._err(lv.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=qv.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case nv.APOSTROPHE:this._err(lv.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=qv.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case nv.GREATER_THAN_SIGN:this._err(lv.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=qv.DATA,this.emitCurrentDoctype(t);break;case nv.EOF:this._err(lv.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(lv.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=qv.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:break;case nv.QUOTATION_MARK:t.publicId="",this.state=qv.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case nv.APOSTROPHE:t.publicId="",this.state=qv.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case nv.GREATER_THAN_SIGN:this._err(lv.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=qv.DATA,this.emitCurrentDoctype(t);break;case nv.EOF:this._err(lv.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(lv.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=qv.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case nv.QUOTATION_MARK:this.state=qv.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case nv.NULL:this._err(lv.unexpectedNullCharacter),t.publicId+=tv;break;case nv.GREATER_THAN_SIGN:this._err(lv.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=qv.DATA;break;case nv.EOF:this._err(lv.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case nv.APOSTROPHE:this.state=qv.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case nv.NULL:this._err(lv.unexpectedNullCharacter),t.publicId+=tv;break;case nv.GREATER_THAN_SIGN:this._err(lv.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=qv.DATA;break;case nv.EOF:this._err(lv.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:this.state=qv.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case nv.GREATER_THAN_SIGN:this.state=qv.DATA,this.emitCurrentDoctype(t);break;case nv.QUOTATION_MARK:this._err(lv.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=qv.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case nv.APOSTROPHE:this._err(lv.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=qv.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case nv.EOF:this._err(lv.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(lv.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=qv.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const t=this.currentToken;switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:break;case nv.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=qv.DATA;break;case nv.QUOTATION_MARK:t.systemId="",this.state=qv.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case nv.APOSTROPHE:t.systemId="",this.state=qv.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case nv.EOF:this._err(lv.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(lv.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=qv.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const t=this.currentToken;switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:this.state=qv.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case nv.QUOTATION_MARK:this._err(lv.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=qv.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case nv.APOSTROPHE:this._err(lv.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=qv.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case nv.GREATER_THAN_SIGN:this._err(lv.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=qv.DATA,this.emitCurrentDoctype(t);break;case nv.EOF:this._err(lv.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(lv.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=qv.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:break;case nv.QUOTATION_MARK:t.systemId="",this.state=qv.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case nv.APOSTROPHE:t.systemId="",this.state=qv.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case nv.GREATER_THAN_SIGN:this._err(lv.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=qv.DATA,this.emitCurrentDoctype(t);break;case nv.EOF:this._err(lv.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(lv.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=qv.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case nv.QUOTATION_MARK:this.state=qv.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case nv.NULL:this._err(lv.unexpectedNullCharacter),t.systemId+=tv;break;case nv.GREATER_THAN_SIGN:this._err(lv.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=qv.DATA;break;case nv.EOF:this._err(lv.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case nv.APOSTROPHE:this.state=qv.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case nv.NULL:this._err(lv.unexpectedNullCharacter),t.systemId+=tv;break;case nv.GREATER_THAN_SIGN:this._err(lv.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=qv.DATA;break;case nv.EOF:this._err(lv.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case nv.SPACE:case nv.LINE_FEED:case nv.TABULATION:case nv.FORM_FEED:break;case nv.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=qv.DATA;break;case nv.EOF:this._err(lv.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(lv.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=qv.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const t=this.currentToken;switch(e){case nv.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=qv.DATA;break;case nv.NULL:this._err(lv.unexpectedNullCharacter);break;case nv.EOF:this.emitCurrentDoctype(t),this._emitEOFToken();break;default:}}_stateCdataSection(e){switch(e){case nv.RIGHT_SQUARE_BRACKET:this.state=qv.CDATA_SECTION_BRACKET;break;case nv.EOF:this._err(lv.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===nv.RIGHT_SQUARE_BRACKET?this.state=qv.CDATA_SECTION_END:(this._emitChars("]"),this.state=qv.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case nv.GREATER_THAN_SIGN:this.state=qv.DATA;break;case nv.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=qv.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0){if(!this.preprocessor.lastChunkWritten)return this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,void(this.preprocessor.endOfChunkHit=!0);e=this.entityDecoder.end()}0===e?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(nv.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&Wv(this.preprocessor.peek(1))?qv.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){Wv(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===nv.SEMICOLON&&this._err(lv.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const Jv=new Set([Dv.DD,Dv.DT,Dv.LI,Dv.OPTGROUP,Dv.OPTION,Dv.P,Dv.RB,Dv.RP,Dv.RT,Dv.RTC]),ey=new Set([...Jv,Dv.CAPTION,Dv.COLGROUP,Dv.TBODY,Dv.TD,Dv.TFOOT,Dv.TH,Dv.THEAD,Dv.TR]),ty=new Set([Dv.APPLET,Dv.CAPTION,Dv.HTML,Dv.MARQUEE,Dv.OBJECT,Dv.TABLE,Dv.TD,Dv.TEMPLATE,Dv.TH]),ny=new Set([...ty,Dv.OL,Dv.UL]),iy=new Set([...ty,Dv.BUTTON]),ry=new Set([Dv.ANNOTATION_XML,Dv.MI,Dv.MN,Dv.MO,Dv.MS,Dv.MTEXT]),sy=new Set([Dv.DESC,Dv.FOREIGN_OBJECT,Dv.TITLE]),oy=new Set([Dv.TR,Dv.TEMPLATE,Dv.HTML]),ay=new Set([Dv.TBODY,Dv.TFOOT,Dv.THEAD,Dv.TEMPLATE,Dv.HTML]),cy=new Set([Dv.TABLE,Dv.TEMPLATE,Dv.HTML]),ly=new Set([Dv.TD,Dv.TH]);class uy{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,t,n){this.treeAdapter=t,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=Dv.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===Dv.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Nv.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,t){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=t,this.currentTagId=t,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,t,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,t){const n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&(this.current=t)}insertAfter(e,t,n){const i=this._indexOf(e)+1;this.items.splice(i,0,t),this.tagIDs.splice(i,0,n),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.current&&void 0!==this.currentTagId&&this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(e){let t=this.stackTop+1;do{t=this.tagIDs.lastIndexOf(e,t-1)}while(t>0&&this.treeAdapter.getNamespaceURI(this.items[t])!==Nv.HTML);this.shortenToLength(Math.max(t,0))}shortenToLength(e){while(this.stackTop>=e){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,this.stackTop<e)}}popUntilElementPopped(e){const t=this._indexOf(e);this.shortenToLength(Math.max(t,0))}popUntilPopped(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(Math.max(n,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(Fv,Nv.HTML)}popUntilTableCellPopped(){this.popUntilPopped(ly,Nv.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,t){for(let n=this.stackTop;n>=0;n--)if(e.has(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===t)return n;return-1}clearBackTo(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(cy,Nv.HTML)}clearBackToTableBodyContext(){this.clearBackTo(ay,Nv.HTML)}clearBackToTableRowContext(){this.clearBackTo(oy,Nv.HTML)}remove(e){const t=this._indexOf(e);t>=0&&(t===this.stackTop?this.pop():(this.items.splice(t,1),this.tagIDs.splice(t,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===Dv.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const t=this._indexOf(e)-1;return t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.tagIDs[0]===Dv.HTML}hasInDynamicScope(e,t){for(let n=this.stackTop;n>=0;n--){const i=this.tagIDs[n];switch(this.treeAdapter.getNamespaceURI(this.items[n])){case Nv.HTML:if(i===e)return!0;if(t.has(i))return!1;break;case Nv.SVG:if(sy.has(i))return!1;break;case Nv.MATHML:if(ry.has(i))return!1;break}}return!0}hasInScope(e){return this.hasInDynamicScope(e,ty)}hasInListItemScope(e){return this.hasInDynamicScope(e,ny)}hasInButtonScope(e){return this.hasInDynamicScope(e,iy)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case Nv.HTML:if(Fv.has(t))return!0;if(ty.has(t))return!1;break;case Nv.SVG:if(sy.has(t))return!1;break;case Nv.MATHML:if(ry.has(t))return!1;break}}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===Nv.HTML)switch(this.tagIDs[t]){case e:return!0;case Dv.TABLE:case Dv.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===Nv.HTML)switch(this.tagIDs[e]){case Dv.TBODY:case Dv.THEAD:case Dv.TFOOT:return!0;case Dv.TABLE:case Dv.HTML:return!1}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===Nv.HTML)switch(this.tagIDs[t]){case e:return!0;case Dv.OPTION:case Dv.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){while(void 0!==this.currentTagId&&Jv.has(this.currentTagId))this.pop()}generateImpliedEndTagsThoroughly(){while(void 0!==this.currentTagId&&ey.has(this.currentTagId))this.pop()}generateImpliedEndTagsWithExclusion(e){while(void 0!==this.currentTagId&&this.currentTagId!==e&&ey.has(this.currentTagId))this.pop()}}const hy=3;var dy;(function(e){e[e["Marker"]=0]="Marker",e[e["Element"]=1]="Element"})(dy||(dy={}));const py={type:dy.Marker};class fy{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,t){const n=[],i=t.length,r=this.treeAdapter.getTagName(e),s=this.treeAdapter.getNamespaceURI(e);for(let o=0;o<this.entries.length;o++){const e=this.entries[o];if(e.type===dy.Marker)break;const{element:t}=e;if(this.treeAdapter.getTagName(t)===r&&this.treeAdapter.getNamespaceURI(t)===s){const e=this.treeAdapter.getAttrList(t);e.length===i&&n.push({idx:o,attrs:e})}}return n}_ensureNoahArkCondition(e){if(this.entries.length<hy)return;const t=this.treeAdapter.getAttrList(e),n=this._getNoahArkConditionCandidates(e,t);if(n.length<hy)return;const i=new Map(t.map((e=>[e.name,e.value])));let r=0;for(let s=0;s<n.length;s++){const e=n[s];e.attrs.every((e=>i.get(e.name)===e.value))&&(r+=1,r>=hy&&this.entries.splice(e.idx,1))}}insertMarker(){this.entries.unshift(py)}pushElement(e,t){this._ensureNoahArkCondition(e),this.entries.unshift({type:dy.Element,element:e,token:t})}insertElementAfterBookmark(e,t){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:dy.Element,element:e,token:t})}removeEntry(e){const t=this.entries.indexOf(e);-1!==t&&this.entries.splice(t,1)}clearToLastMarker(){const e=this.entries.indexOf(py);-1===e?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const t=this.entries.find((t=>t.type===dy.Marker||this.treeAdapter.getTagName(t.element)===e));return t&&t.type===dy.Element?t:null}getElementEntry(e){return this.entries.find((t=>t.type===dy.Element&&t.element===e))}}const my={createDocument(){return{nodeName:"#document",mode:Ov.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const i=e.childNodes.indexOf(n);e.childNodes.splice(i,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,i){const r=e.childNodes.find((e=>"#documentType"===e.nodeName));if(r)r.name=t,r.publicId=n,r.systemId=i;else{const r={nodeName:"#documentType",name:t,publicId:n,systemId:i,parentNode:null};my.appendChild(e,r)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(my.isTextNode(n))return void(n.value+=t)}my.appendChild(e,my.createTextNode(t))},insertTextBefore(e,t,n){const i=e.childNodes[e.childNodes.indexOf(n)-1];i&&my.isTextNode(i)?i.value+=t:my.insertBefore(e,my.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map((e=>e.name)));for(let i=0;i<t.length;i++)n.has(t[i].name)||e.attrs.push(t[i])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return"#text"===e.nodeName},isCommentNode(e){return"#comment"===e.nodeName},isDocumentTypeNode(e){return"#documentType"===e.nodeName},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},gy="html",vy="about:legacy-compat",yy="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Ty=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Ey=[...Ty,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],_y=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),by=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],wy=[...by,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Sy(e,t){return t.some((t=>e.startsWith(t)))}function Ay(e){return e.name===gy&&null===e.publicId&&(null===e.systemId||e.systemId===vy)}function Cy(e){if(e.name!==gy)return Ov.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===yy)return Ov.QUIRKS;let{publicId:n}=e;if(null!==n){if(n=n.toLowerCase(),_y.has(n))return Ov.QUIRKS;let e=null===t?Ey:Ty;if(Sy(n,e))return Ov.QUIRKS;if(e=null===t?by:wy,Sy(n,e))return Ov.LIMITED_QUIRKS}return Ov.NO_QUIRKS}const xy={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Iy="definitionurl",Ny="definitionURL",ky=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((e=>[e.toLowerCase(),e]))),Oy=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Nv.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Nv.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Nv.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Nv.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Nv.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Nv.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Nv.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Nv.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Nv.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Nv.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Nv.XMLNS}]]),Ry=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((e=>[e.toLowerCase(),e]))),Dy=new Set([Dv.B,Dv.BIG,Dv.BLOCKQUOTE,Dv.BODY,Dv.BR,Dv.CENTER,Dv.CODE,Dv.DD,Dv.DIV,Dv.DL,Dv.DT,Dv.EM,Dv.EMBED,Dv.H1,Dv.H2,Dv.H3,Dv.H4,Dv.H5,Dv.H6,Dv.HEAD,Dv.HR,Dv.I,Dv.IMG,Dv.LI,Dv.LISTING,Dv.MENU,Dv.META,Dv.NOBR,Dv.OL,Dv.P,Dv.PRE,Dv.RUBY,Dv.S,Dv.SMALL,Dv.SPAN,Dv.STRONG,Dv.STRIKE,Dv.SUB,Dv.SUP,Dv.TABLE,Dv.TT,Dv.U,Dv.UL,Dv.VAR]);function Py(e){const t=e.tagID,n=t===Dv.FONT&&e.attrs.some((({name:e})=>e===kv.COLOR||e===kv.SIZE||e===kv.FACE));return n||Dy.has(t)}function Ly(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Iy){e.attrs[t].name=Ny;break}}function My(e){for(let t=0;t<e.attrs.length;t++){const n=ky.get(e.attrs[t].name);null!=n&&(e.attrs[t].name=n)}}function By(e){for(let t=0;t<e.attrs.length;t++){const n=Oy.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Fy(e){const t=Ry.get(e.tagName);null!=t&&(e.tagName=t,e.tagID=Lv(e.tagName))}function Hy(e,t){return t===Nv.MATHML&&(e===Dv.MI||e===Dv.MO||e===Dv.MN||e===Dv.MS||e===Dv.MTEXT)}function Uy(e,t,n){if(t===Nv.MATHML&&e===Dv.ANNOTATION_XML)for(let i=0;i<n.length;i++)if(n[i].name===kv.ENCODING){const e=n[i].value.toLowerCase();return e===xy.TEXT_HTML||e===xy.APPLICATION_XML}return t===Nv.SVG&&(e===Dv.FOREIGN_OBJECT||e===Dv.DESC||e===Dv.TITLE)}function qy(e,t,n,i){return(!i||i===Nv.HTML)&&Uy(e,t,n)||(!i||i===Nv.MATHML)&&Hy(e,t)}const Gy="hidden",$y=8,zy=3;var jy;(function(e){e[e["INITIAL"]=0]="INITIAL",e[e["BEFORE_HTML"]=1]="BEFORE_HTML",e[e["BEFORE_HEAD"]=2]="BEFORE_HEAD",e[e["IN_HEAD"]=3]="IN_HEAD",e[e["IN_HEAD_NO_SCRIPT"]=4]="IN_HEAD_NO_SCRIPT",e[e["AFTER_HEAD"]=5]="AFTER_HEAD",e[e["IN_BODY"]=6]="IN_BODY",e[e["TEXT"]=7]="TEXT",e[e["IN_TABLE"]=8]="IN_TABLE",e[e["IN_TABLE_TEXT"]=9]="IN_TABLE_TEXT",e[e["IN_CAPTION"]=10]="IN_CAPTION",e[e["IN_COLUMN_GROUP"]=11]="IN_COLUMN_GROUP",e[e["IN_TABLE_BODY"]=12]="IN_TABLE_BODY",e[e["IN_ROW"]=13]="IN_ROW",e[e["IN_CELL"]=14]="IN_CELL",e[e["IN_SELECT"]=15]="IN_SELECT",e[e["IN_SELECT_IN_TABLE"]=16]="IN_SELECT_IN_TABLE",e[e["IN_TEMPLATE"]=17]="IN_TEMPLATE",e[e["AFTER_BODY"]=18]="AFTER_BODY",e[e["IN_FRAMESET"]=19]="IN_FRAMESET",e[e["AFTER_FRAMESET"]=20]="AFTER_FRAMESET",e[e["AFTER_AFTER_BODY"]=21]="AFTER_AFTER_BODY",e[e["AFTER_AFTER_FRAMESET"]=22]="AFTER_AFTER_FRAMESET"})(jy||(jy={}));const Vy={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Wy=new Set([Dv.TABLE,Dv.TBODY,Dv.TFOOT,Dv.THEAD,Dv.TR]),Yy={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:my,onParseError:null};class Xy{constructor(e,t,n=null,i=null){this.fragmentContext=n,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=jy.INITIAL,this.originalInsertionMode=jy.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Yy,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=null!==t&&void 0!==t?t:this.treeAdapter.createDocument(),this.tokenizer=new Zv(this.options,this),this.activeFormattingElements=new fy(this.treeAdapter),this.fragmentContextID=n?Lv(this.treeAdapter.getTagName(n)):Dv.UNKNOWN,this._setContextModes(null!==n&&void 0!==n?n:this.document,this.fragmentContextID),this.openElements=new uy(this.document,this.treeAdapter,this)}static parse(e,t){const n=new this(t);return n.tokenizer.write(e,!0),n.document}static getFragmentParser(e,t){const n={...Yy,...t};null!==e&&void 0!==e||(e=n.treeAdapter.createElement(Rv.TEMPLATE,Nv.HTML,[]));const i=n.treeAdapter.createElement("documentmock",Nv.HTML,[]),r=new this(n,i,e);return r.fragmentContextID===Dv.TEMPLATE&&r.tmplInsertionModeStack.unshift(jy.IN_TEMPLATE),r._initTokenizerForFragmentParsing(),r._insertFakeRootElement(),r._resetInsertionMode(),r._findFormInFragmentContext(),r}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}_err(e,t,n){var i;if(!this.onParseError)return;const r=null!==(i=e.location)&&void 0!==i?i:Vy,s={code:t,startLine:r.startLine,startCol:r.startCol,startOffset:r.startOffset,endLine:n?r.startLine:r.endLine,endCol:n?r.startCol:r.endCol,endOffset:n?r.startOffset:r.endOffset};this.onParseError(s)}onItemPush(e,t,n){var i,r;null===(r=(i=this.treeAdapter).onItemPush)||void 0===r||r.call(i,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,t)}onItemPop(e,t){var n,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),null===(i=(n=this.treeAdapter).onItemPop)||void 0===i||i.call(n,e,this.openElements.current),t){let e,t;0===this.openElements.stackTop&&this.fragmentContext?(e=this.fragmentContext,t=this.fragmentContextID):({current:e,currentTagId:t}=this.openElements),this._setContextModes(e,t)}}_setContextModes(e,t){const n=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===Nv.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&void 0!==e&&void 0!==t&&!this._isIntegrationPoint(t,e)}_switchToTextParsing(e,t){this._insertElement(e,Nv.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=jy.TEXT}switchToPlaintextParsing(){this.insertionMode=jy.TEXT,this.originalInsertionMode=jy.IN_BODY,this.tokenizer.state=Gv.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;while(e){if(this.treeAdapter.getTagName(e)===Rv.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===Nv.HTML)switch(this.fragmentContextID){case Dv.TITLE:case Dv.TEXTAREA:this.tokenizer.state=Gv.RCDATA;break;case Dv.STYLE:case Dv.XMP:case Dv.IFRAME:case Dv.NOEMBED:case Dv.NOFRAMES:case Dv.NOSCRIPT:this.tokenizer.state=Gv.RAWTEXT;break;case Dv.SCRIPT:this.tokenizer.state=Gv.SCRIPT_DATA;break;case Dv.PLAINTEXT:this.tokenizer.state=Gv.PLAINTEXT;break;default:}}_setDocumentType(e){const t=e.name||"",n=e.publicId||"",i=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,n,i),e.location){const t=this.treeAdapter.getChildNodes(this.document),n=t.find((e=>this.treeAdapter.isDocumentTypeNode(e)));n&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}}_attachElementToTree(e,t){if(this.options.sourceCodeLocationInfo){const n=t&&{...t,startTag:t};this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(null!==t&&void 0!==t?t:this.document,e)}}_appendElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location)}_insertElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}_insertFakeElement(e,t){const n=this.treeAdapter.createElement(e,Nv.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,Nv.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(Rv.HTML,Nv.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,Dv.HTML)}_appendCommentNode(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}_insertCharacters(e){let t,n;if(this._shouldFosterParentOnInsertion()?(({parent:t,beforeElement:n}=this._findFosterParentingLocation()),n?this.treeAdapter.insertTextBefore(t,e.chars,n):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;const i=this.treeAdapter.getChildNodes(t),r=n?i.lastIndexOf(n):i.length,s=i[r-1],o=this.treeAdapter.getNodeSourceCodeLocation(s);if(o){const{endLine:t,endCol:n,endOffset:i}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:t,endCol:n,endOffset:i})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,e.location)}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,i=this.treeAdapter.getTagName(e),r=t.type===dv.END_TAG&&i===t.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,r)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let t,n;return 0===this.openElements.stackTop&&this.fragmentContext?(t=this.fragmentContext,n=this.fragmentContextID):({current:t,currentTagId:n}=this.openElements),(e.tagID!==Dv.SVG||this.treeAdapter.getTagName(t)!==Rv.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(t)!==Nv.MATHML)&&(this.tokenizer.inForeignNode||(e.tagID===Dv.MGLYPH||e.tagID===Dv.MALIGNMARK)&&void 0!==n&&!this._isIntegrationPoint(n,t,Nv.HTML))}_processToken(e){switch(e.type){case dv.CHARACTER:this.onCharacter(e);break;case dv.NULL_CHARACTER:this.onNullCharacter(e);break;case dv.COMMENT:this.onComment(e);break;case dv.DOCTYPE:this.onDoctype(e);break;case dv.START_TAG:this._processStartTag(e);break;case dv.END_TAG:this.onEndTag(e);break;case dv.EOF:this.onEof(e);break;case dv.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(e);break}}_isIntegrationPoint(e,t,n){const i=this.treeAdapter.getNamespaceURI(t),r=this.treeAdapter.getAttrList(t);return qy(e,i,r,n)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const t=this.activeFormattingElements.entries.findIndex((e=>e.type===dy.Marker||this.openElements.contains(e.element))),n=-1===t?e-1:t-1;for(let e=n;e>=0;e--){const t=this.activeFormattingElements.entries[e];this._insertElement(t.token,this.treeAdapter.getNamespaceURI(t.element)),t.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=jy.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(Dv.P),this.openElements.popUntilTagNamePopped(Dv.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(0===e&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case Dv.TR:return void(this.insertionMode=jy.IN_ROW);case Dv.TBODY:case Dv.THEAD:case Dv.TFOOT:return void(this.insertionMode=jy.IN_TABLE_BODY);case Dv.CAPTION:return void(this.insertionMode=jy.IN_CAPTION);case Dv.COLGROUP:return void(this.insertionMode=jy.IN_COLUMN_GROUP);case Dv.TABLE:return void(this.insertionMode=jy.IN_TABLE);case Dv.BODY:return void(this.insertionMode=jy.IN_BODY);case Dv.FRAMESET:return void(this.insertionMode=jy.IN_FRAMESET);case Dv.SELECT:return void this._resetInsertionModeForSelect(e);case Dv.TEMPLATE:return void(this.insertionMode=this.tmplInsertionModeStack[0]);case Dv.HTML:return void(this.insertionMode=this.headElement?jy.AFTER_HEAD:jy.BEFORE_HEAD);case Dv.TD:case Dv.TH:if(e>0)return void(this.insertionMode=jy.IN_CELL);break;case Dv.HEAD:if(e>0)return void(this.insertionMode=jy.IN_HEAD);break}this.insertionMode=jy.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.tagIDs[t];if(e===Dv.TEMPLATE)break;if(e===Dv.TABLE)return void(this.insertionMode=jy.IN_SELECT_IN_TABLE)}this.insertionMode=jy.IN_SELECT}_isElementCausesFosterParenting(e){return Wy.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&void 0!==this.openElements.currentTagId&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case Dv.TEMPLATE:if(this.treeAdapter.getNamespaceURI(t)===Nv.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break;case Dv.TABLE:{const n=this.treeAdapter.getParentNode(t);return n?{parent:n,beforeElement:t}:{parent:this.openElements.items[e-1],beforeElement:null}}default:}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_isSpecialElement(e,t){const n=this.treeAdapter.getNamespaceURI(e);return Bv[n].has(t)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)p_(this,e);else switch(this.insertionMode){case jy.INITIAL:cT(this,e);break;case jy.BEFORE_HTML:hT(this,e);break;case jy.BEFORE_HEAD:fT(this,e);break;case jy.IN_HEAD:yT(this,e);break;case jy.IN_HEAD_NO_SCRIPT:_T(this,e);break;case jy.AFTER_HEAD:ST(this,e);break;case jy.IN_BODY:case jy.IN_CAPTION:case jy.IN_CELL:case jy.IN_TEMPLATE:xT(this,e);break;case jy.TEXT:case jy.IN_SELECT:case jy.IN_SELECT_IN_TABLE:this._insertCharacters(e);break;case jy.IN_TABLE:case jy.IN_TABLE_BODY:case jy.IN_ROW:bE(this,e);break;case jy.IN_TABLE_TEXT:LE(this,e);break;case jy.IN_COLUMN_GROUP:GE(this,e);break;case jy.AFTER_BODY:r_(this,e);break;case jy.AFTER_AFTER_BODY:u_(this,e);break;default:}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)d_(this,e);else switch(this.insertionMode){case jy.INITIAL:cT(this,e);break;case jy.BEFORE_HTML:hT(this,e);break;case jy.BEFORE_HEAD:fT(this,e);break;case jy.IN_HEAD:yT(this,e);break;case jy.IN_HEAD_NO_SCRIPT:_T(this,e);break;case jy.AFTER_HEAD:ST(this,e);break;case jy.TEXT:this._insertCharacters(e);break;case jy.IN_TABLE:case jy.IN_TABLE_BODY:case jy.IN_ROW:bE(this,e);break;case jy.IN_COLUMN_GROUP:GE(this,e);break;case jy.AFTER_BODY:r_(this,e);break;case jy.AFTER_AFTER_BODY:u_(this,e);break;default:}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML)iT(this,e);else switch(this.insertionMode){case jy.INITIAL:case jy.BEFORE_HTML:case jy.BEFORE_HEAD:case jy.IN_HEAD:case jy.IN_HEAD_NO_SCRIPT:case jy.AFTER_HEAD:case jy.IN_BODY:case jy.IN_TABLE:case jy.IN_CAPTION:case jy.IN_COLUMN_GROUP:case jy.IN_TABLE_BODY:case jy.IN_ROW:case jy.IN_CELL:case jy.IN_SELECT:case jy.IN_SELECT_IN_TABLE:case jy.IN_TEMPLATE:case jy.IN_FRAMESET:case jy.AFTER_FRAMESET:iT(this,e);break;case jy.IN_TABLE_TEXT:ME(this,e);break;case jy.AFTER_BODY:rT(this,e);break;case jy.AFTER_AFTER_BODY:case jy.AFTER_AFTER_FRAMESET:sT(this,e);break;default:}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case jy.INITIAL:aT(this,e);break;case jy.BEFORE_HEAD:case jy.IN_HEAD:case jy.IN_HEAD_NO_SCRIPT:case jy.AFTER_HEAD:this._err(e,lv.misplacedDoctype);break;case jy.IN_TABLE_TEXT:ME(this,e);break;default:}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,lv.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?m_(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case jy.INITIAL:cT(this,e);break;case jy.BEFORE_HTML:lT(this,e);break;case jy.BEFORE_HEAD:dT(this,e);break;case jy.IN_HEAD:mT(this,e);break;case jy.IN_HEAD_NO_SCRIPT:TT(this,e);break;case jy.AFTER_HEAD:bT(this,e);break;case jy.IN_BODY:oE(this,e);break;case jy.IN_TABLE:OE(this,e);break;case jy.IN_TABLE_TEXT:ME(this,e);break;case jy.IN_CAPTION:FE(this,e);break;case jy.IN_COLUMN_GROUP:UE(this,e);break;case jy.IN_TABLE_BODY:$E(this,e);break;case jy.IN_ROW:jE(this,e);break;case jy.IN_CELL:WE(this,e);break;case jy.IN_SELECT:XE(this,e);break;case jy.IN_SELECT_IN_TABLE:QE(this,e);break;case jy.IN_TEMPLATE:JE(this,e);break;case jy.AFTER_BODY:n_(this,e);break;case jy.IN_FRAMESET:s_(this,e);break;case jy.AFTER_FRAMESET:a_(this,e);break;case jy.AFTER_AFTER_BODY:l_(this,e);break;case jy.AFTER_AFTER_FRAMESET:h_(this,e);break;default:}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?g_(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case jy.INITIAL:cT(this,e);break;case jy.BEFORE_HTML:uT(this,e);break;case jy.BEFORE_HEAD:pT(this,e);break;case jy.IN_HEAD:gT(this,e);break;case jy.IN_HEAD_NO_SCRIPT:ET(this,e);break;case jy.AFTER_HEAD:wT(this,e);break;case jy.IN_BODY:yE(this,e);break;case jy.TEXT:EE(this,e);break;case jy.IN_TABLE:RE(this,e);break;case jy.IN_TABLE_TEXT:ME(this,e);break;case jy.IN_CAPTION:HE(this,e);break;case jy.IN_COLUMN_GROUP:qE(this,e);break;case jy.IN_TABLE_BODY:zE(this,e);break;case jy.IN_ROW:VE(this,e);break;case jy.IN_CELL:YE(this,e);break;case jy.IN_SELECT:KE(this,e);break;case jy.IN_SELECT_IN_TABLE:ZE(this,e);break;case jy.IN_TEMPLATE:e_(this,e);break;case jy.AFTER_BODY:i_(this,e);break;case jy.IN_FRAMESET:o_(this,e);break;case jy.AFTER_FRAMESET:c_(this,e);break;case jy.AFTER_AFTER_BODY:u_(this,e);break;default:}}onEof(e){switch(this.insertionMode){case jy.INITIAL:cT(this,e);break;case jy.BEFORE_HTML:hT(this,e);break;case jy.BEFORE_HEAD:fT(this,e);break;case jy.IN_HEAD:yT(this,e);break;case jy.IN_HEAD_NO_SCRIPT:_T(this,e);break;case jy.AFTER_HEAD:ST(this,e);break;case jy.IN_BODY:case jy.IN_TABLE:case jy.IN_CAPTION:case jy.IN_COLUMN_GROUP:case jy.IN_TABLE_BODY:case jy.IN_ROW:case jy.IN_CELL:case jy.IN_SELECT:case jy.IN_SELECT_IN_TABLE:TE(this,e);break;case jy.TEXT:_E(this,e);break;case jy.IN_TABLE_TEXT:ME(this,e);break;case jy.IN_TEMPLATE:t_(this,e);break;case jy.AFTER_BODY:case jy.IN_FRAMESET:case jy.AFTER_FRAMESET:case jy.AFTER_AFTER_BODY:case jy.AFTER_AFTER_FRAMESET:oT(this,e);break;default:}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===nv.LINE_FEED)){if(1===e.chars.length)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode)this._insertCharacters(e);else switch(this.insertionMode){case jy.IN_HEAD:case jy.IN_HEAD_NO_SCRIPT:case jy.AFTER_HEAD:case jy.TEXT:case jy.IN_COLUMN_GROUP:case jy.IN_SELECT:case jy.IN_SELECT_IN_TABLE:case jy.IN_FRAMESET:case jy.AFTER_FRAMESET:this._insertCharacters(e);break;case jy.IN_BODY:case jy.IN_CAPTION:case jy.IN_CELL:case jy.IN_TEMPLATE:case jy.AFTER_BODY:case jy.AFTER_AFTER_BODY:case jy.AFTER_AFTER_FRAMESET:CT(this,e);break;case jy.IN_TABLE:case jy.IN_TABLE_BODY:case jy.IN_ROW:bE(this,e);break;case jy.IN_TABLE_TEXT:PE(this,e);break;default:}}}function Ky(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):vE(e,t),n}function Qy(e,t){let n=null,i=e.openElements.stackTop;for(;i>=0;i--){const r=e.openElements.items[i];if(r===t.element)break;e._isSpecialElement(r,e.openElements.tagIDs[i])&&(n=r)}return n||(e.openElements.shortenToLength(Math.max(i,0)),e.activeFormattingElements.removeEntry(t)),n}function Zy(e,t,n){let i=t,r=e.openElements.getCommonAncestor(t);for(let s=0,o=r;o!==n;s++,o=r){r=e.openElements.getCommonAncestor(o);const n=e.activeFormattingElements.getElementEntry(o),a=n&&s>=zy,c=!n||a;c?(a&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(o)):(o=Jy(e,n),i===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(i),e.treeAdapter.appendChild(o,i),i=o)}return i}function Jy(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),i=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,i),t.element=i,i}function eT(e,t,n){const i=e.treeAdapter.getTagName(t),r=Lv(i);if(e._isElementCausesFosterParenting(r))e._fosterParentElement(n);else{const i=e.treeAdapter.getNamespaceURI(t);r===Dv.TEMPLATE&&i===Nv.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function tT(e,t,n){const i=e.treeAdapter.getNamespaceURI(n.element),{token:r}=n,s=e.treeAdapter.createElement(r.tagName,i,r.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,r),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,r.tagID)}function nT(e,t){for(let n=0;n<$y;n++){const n=Ky(e,t);if(!n)break;const i=Qy(e,n);if(!i)break;e.activeFormattingElements.bookmark=n;const r=Zy(e,i,n.element),s=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(r),s&&eT(e,s,r),tT(e,i,n)}}function iT(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function rT(e,t){e._appendCommentNode(t,e.openElements.items[0])}function sT(e,t){e._appendCommentNode(t,e.document)}function oT(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let i=e.openElements.stackTop;i>=n;i--)e._setEndLocation(e.openElements.items[i],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const n=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(n);if(i&&!i.endTag&&(e._setEndLocation(n,t),e.openElements.stackTop>=1)){const n=e.openElements.items[1],i=e.treeAdapter.getNodeSourceCodeLocation(n);i&&!i.endTag&&e._setEndLocation(n,t)}}}}function aT(e,t){e._setDocumentType(t);const n=t.forceQuirks?Ov.QUIRKS:Cy(t);Ay(t)||e._err(t,lv.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=jy.BEFORE_HTML}function cT(e,t){e._err(t,lv.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Ov.QUIRKS),e.insertionMode=jy.BEFORE_HTML,e._processToken(t)}function lT(e,t){t.tagID===Dv.HTML?(e._insertElement(t,Nv.HTML),e.insertionMode=jy.BEFORE_HEAD):hT(e,t)}function uT(e,t){const n=t.tagID;n!==Dv.HTML&&n!==Dv.HEAD&&n!==Dv.BODY&&n!==Dv.BR||hT(e,t)}function hT(e,t){e._insertFakeRootElement(),e.insertionMode=jy.BEFORE_HEAD,e._processToken(t)}function dT(e,t){switch(t.tagID){case Dv.HTML:oE(e,t);break;case Dv.HEAD:e._insertElement(t,Nv.HTML),e.headElement=e.openElements.current,e.insertionMode=jy.IN_HEAD;break;default:fT(e,t)}}function pT(e,t){const n=t.tagID;n===Dv.HEAD||n===Dv.BODY||n===Dv.HTML||n===Dv.BR?fT(e,t):e._err(t,lv.endTagWithoutMatchingOpenElement)}function fT(e,t){e._insertFakeElement(Rv.HEAD,Dv.HEAD),e.headElement=e.openElements.current,e.insertionMode=jy.IN_HEAD,e._processToken(t)}function mT(e,t){switch(t.tagID){case Dv.HTML:oE(e,t);break;case Dv.BASE:case Dv.BASEFONT:case Dv.BGSOUND:case Dv.LINK:case Dv.META:e._appendElement(t,Nv.HTML),t.ackSelfClosing=!0;break;case Dv.TITLE:e._switchToTextParsing(t,Gv.RCDATA);break;case Dv.NOSCRIPT:e.options.scriptingEnabled?e._switchToTextParsing(t,Gv.RAWTEXT):(e._insertElement(t,Nv.HTML),e.insertionMode=jy.IN_HEAD_NO_SCRIPT);break;case Dv.NOFRAMES:case Dv.STYLE:e._switchToTextParsing(t,Gv.RAWTEXT);break;case Dv.SCRIPT:e._switchToTextParsing(t,Gv.SCRIPT_DATA);break;case Dv.TEMPLATE:e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=jy.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(jy.IN_TEMPLATE);break;case Dv.HEAD:e._err(t,lv.misplacedStartTagForHeadElement);break;default:yT(e,t)}}function gT(e,t){switch(t.tagID){case Dv.HEAD:e.openElements.pop(),e.insertionMode=jy.AFTER_HEAD;break;case Dv.BODY:case Dv.BR:case Dv.HTML:yT(e,t);break;case Dv.TEMPLATE:vT(e,t);break;default:e._err(t,lv.endTagWithoutMatchingOpenElement)}}function vT(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==Dv.TEMPLATE&&e._err(t,lv.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(Dv.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,lv.endTagWithoutMatchingOpenElement)}function yT(e,t){e.openElements.pop(),e.insertionMode=jy.AFTER_HEAD,e._processToken(t)}function TT(e,t){switch(t.tagID){case Dv.HTML:oE(e,t);break;case Dv.BASEFONT:case Dv.BGSOUND:case Dv.HEAD:case Dv.LINK:case Dv.META:case Dv.NOFRAMES:case Dv.STYLE:mT(e,t);break;case Dv.NOSCRIPT:e._err(t,lv.nestedNoscriptInHead);break;default:_T(e,t)}}function ET(e,t){switch(t.tagID){case Dv.NOSCRIPT:e.openElements.pop(),e.insertionMode=jy.IN_HEAD;break;case Dv.BR:_T(e,t);break;default:e._err(t,lv.endTagWithoutMatchingOpenElement)}}function _T(e,t){const n=t.type===dv.EOF?lv.openElementsLeftAfterEof:lv.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=jy.IN_HEAD,e._processToken(t)}function bT(e,t){switch(t.tagID){case Dv.HTML:oE(e,t);break;case Dv.BODY:e._insertElement(t,Nv.HTML),e.framesetOk=!1,e.insertionMode=jy.IN_BODY;break;case Dv.FRAMESET:e._insertElement(t,Nv.HTML),e.insertionMode=jy.IN_FRAMESET;break;case Dv.BASE:case Dv.BASEFONT:case Dv.BGSOUND:case Dv.LINK:case Dv.META:case Dv.NOFRAMES:case Dv.SCRIPT:case Dv.STYLE:case Dv.TEMPLATE:case Dv.TITLE:e._err(t,lv.abandonedHeadElementChild),e.openElements.push(e.headElement,Dv.HEAD),mT(e,t),e.openElements.remove(e.headElement);break;case Dv.HEAD:e._err(t,lv.misplacedStartTagForHeadElement);break;default:ST(e,t)}}function wT(e,t){switch(t.tagID){case Dv.BODY:case Dv.HTML:case Dv.BR:ST(e,t);break;case Dv.TEMPLATE:vT(e,t);break;default:e._err(t,lv.endTagWithoutMatchingOpenElement)}}function ST(e,t){e._insertFakeElement(Rv.BODY,Dv.BODY),e.insertionMode=jy.IN_BODY,AT(e,t)}function AT(e,t){switch(t.type){case dv.CHARACTER:xT(e,t);break;case dv.WHITESPACE_CHARACTER:CT(e,t);break;case dv.COMMENT:iT(e,t);break;case dv.START_TAG:oE(e,t);break;case dv.END_TAG:yE(e,t);break;case dv.EOF:TE(e,t);break;default:}}function CT(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function xT(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function IT(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function NT(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function kT(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Nv.HTML),e.insertionMode=jy.IN_FRAMESET)}function OT(e,t){e.openElements.hasInButtonScope(Dv.P)&&e._closePElement(),e._insertElement(t,Nv.HTML)}function RT(e,t){e.openElements.hasInButtonScope(Dv.P)&&e._closePElement(),void 0!==e.openElements.currentTagId&&Fv.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Nv.HTML)}function DT(e,t){e.openElements.hasInButtonScope(Dv.P)&&e._closePElement(),e._insertElement(t,Nv.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function PT(e,t){const n=e.openElements.tmplCount>0;e.formElement&&!n||(e.openElements.hasInButtonScope(Dv.P)&&e._closePElement(),e._insertElement(t,Nv.HTML),n||(e.formElement=e.openElements.current))}function LT(e,t){e.framesetOk=!1;const n=t.tagID;for(let i=e.openElements.stackTop;i>=0;i--){const t=e.openElements.tagIDs[i];if(n===Dv.LI&&t===Dv.LI||(n===Dv.DD||n===Dv.DT)&&(t===Dv.DD||t===Dv.DT)){e.openElements.generateImpliedEndTagsWithExclusion(t),e.openElements.popUntilTagNamePopped(t);break}if(t!==Dv.ADDRESS&&t!==Dv.DIV&&t!==Dv.P&&e._isSpecialElement(e.openElements.items[i],t))break}e.openElements.hasInButtonScope(Dv.P)&&e._closePElement(),e._insertElement(t,Nv.HTML)}function MT(e,t){e.openElements.hasInButtonScope(Dv.P)&&e._closePElement(),e._insertElement(t,Nv.HTML),e.tokenizer.state=Gv.PLAINTEXT}function BT(e,t){e.openElements.hasInScope(Dv.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(Dv.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Nv.HTML),e.framesetOk=!1}function FT(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Rv.A);n&&(nT(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Nv.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function HT(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Nv.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function UT(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(Dv.NOBR)&&(nT(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Nv.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function qT(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Nv.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function GT(e,t){e.treeAdapter.getDocumentMode(e.document)!==Ov.QUIRKS&&e.openElements.hasInButtonScope(Dv.P)&&e._closePElement(),e._insertElement(t,Nv.HTML),e.framesetOk=!1,e.insertionMode=jy.IN_TABLE}function $T(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Nv.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function zT(e){const t=pv(e,kv.TYPE);return null!=t&&t.toLowerCase()===Gy}function jT(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Nv.HTML),zT(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function VT(e,t){e._appendElement(t,Nv.HTML),t.ackSelfClosing=!0}function WT(e,t){e.openElements.hasInButtonScope(Dv.P)&&e._closePElement(),e._appendElement(t,Nv.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function YT(e,t){t.tagName=Rv.IMG,t.tagID=Dv.IMG,$T(e,t)}function XT(e,t){e._insertElement(t,Nv.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Gv.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=jy.TEXT}function KT(e,t){e.openElements.hasInButtonScope(Dv.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Gv.RAWTEXT)}function QT(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Gv.RAWTEXT)}function ZT(e,t){e._switchToTextParsing(t,Gv.RAWTEXT)}function JT(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Nv.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===jy.IN_TABLE||e.insertionMode===jy.IN_CAPTION||e.insertionMode===jy.IN_TABLE_BODY||e.insertionMode===jy.IN_ROW||e.insertionMode===jy.IN_CELL?jy.IN_SELECT_IN_TABLE:jy.IN_SELECT}function eE(e,t){e.openElements.currentTagId===Dv.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Nv.HTML)}function tE(e,t){e.openElements.hasInScope(Dv.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Nv.HTML)}function nE(e,t){e.openElements.hasInScope(Dv.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(Dv.RTC),e._insertElement(t,Nv.HTML)}function iE(e,t){e._reconstructActiveFormattingElements(),Ly(t),By(t),t.selfClosing?e._appendElement(t,Nv.MATHML):e._insertElement(t,Nv.MATHML),t.ackSelfClosing=!0}function rE(e,t){e._reconstructActiveFormattingElements(),My(t),By(t),t.selfClosing?e._appendElement(t,Nv.SVG):e._insertElement(t,Nv.SVG),t.ackSelfClosing=!0}function sE(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Nv.HTML)}function oE(e,t){switch(t.tagID){case Dv.I:case Dv.S:case Dv.B:case Dv.U:case Dv.EM:case Dv.TT:case Dv.BIG:case Dv.CODE:case Dv.FONT:case Dv.SMALL:case Dv.STRIKE:case Dv.STRONG:HT(e,t);break;case Dv.A:FT(e,t);break;case Dv.H1:case Dv.H2:case Dv.H3:case Dv.H4:case Dv.H5:case Dv.H6:RT(e,t);break;case Dv.P:case Dv.DL:case Dv.OL:case Dv.UL:case Dv.DIV:case Dv.DIR:case Dv.NAV:case Dv.MAIN:case Dv.MENU:case Dv.ASIDE:case Dv.CENTER:case Dv.FIGURE:case Dv.FOOTER:case Dv.HEADER:case Dv.HGROUP:case Dv.DIALOG:case Dv.DETAILS:case Dv.ADDRESS:case Dv.ARTICLE:case Dv.SEARCH:case Dv.SECTION:case Dv.SUMMARY:case Dv.FIELDSET:case Dv.BLOCKQUOTE:case Dv.FIGCAPTION:OT(e,t);break;case Dv.LI:case Dv.DD:case Dv.DT:LT(e,t);break;case Dv.BR:case Dv.IMG:case Dv.WBR:case Dv.AREA:case Dv.EMBED:case Dv.KEYGEN:$T(e,t);break;case Dv.HR:WT(e,t);break;case Dv.RB:case Dv.RTC:tE(e,t);break;case Dv.RT:case Dv.RP:nE(e,t);break;case Dv.PRE:case Dv.LISTING:DT(e,t);break;case Dv.XMP:KT(e,t);break;case Dv.SVG:rE(e,t);break;case Dv.HTML:IT(e,t);break;case Dv.BASE:case Dv.LINK:case Dv.META:case Dv.STYLE:case Dv.TITLE:case Dv.SCRIPT:case Dv.BGSOUND:case Dv.BASEFONT:case Dv.TEMPLATE:mT(e,t);break;case Dv.BODY:NT(e,t);break;case Dv.FORM:PT(e,t);break;case Dv.NOBR:UT(e,t);break;case Dv.MATH:iE(e,t);break;case Dv.TABLE:GT(e,t);break;case Dv.INPUT:jT(e,t);break;case Dv.PARAM:case Dv.TRACK:case Dv.SOURCE:VT(e,t);break;case Dv.IMAGE:YT(e,t);break;case Dv.BUTTON:BT(e,t);break;case Dv.APPLET:case Dv.OBJECT:case Dv.MARQUEE:qT(e,t);break;case Dv.IFRAME:QT(e,t);break;case Dv.SELECT:JT(e,t);break;case Dv.OPTION:case Dv.OPTGROUP:eE(e,t);break;case Dv.NOEMBED:case Dv.NOFRAMES:ZT(e,t);break;case Dv.FRAMESET:kT(e,t);break;case Dv.TEXTAREA:XT(e,t);break;case Dv.NOSCRIPT:e.options.scriptingEnabled?ZT(e,t):sE(e,t);break;case Dv.PLAINTEXT:MT(e,t);break;case Dv.COL:case Dv.TH:case Dv.TD:case Dv.TR:case Dv.HEAD:case Dv.FRAME:case Dv.TBODY:case Dv.TFOOT:case Dv.THEAD:case Dv.CAPTION:case Dv.COLGROUP:break;default:sE(e,t)}}function aE(e,t){if(e.openElements.hasInScope(Dv.BODY)&&(e.insertionMode=jy.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function cE(e,t){e.openElements.hasInScope(Dv.BODY)&&(e.insertionMode=jy.AFTER_BODY,i_(e,t))}function lE(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function uE(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(Dv.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(Dv.FORM):n&&e.openElements.remove(n))}function hE(e){e.openElements.hasInButtonScope(Dv.P)||e._insertFakeElement(Rv.P,Dv.P),e._closePElement()}function dE(e){e.openElements.hasInListItemScope(Dv.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(Dv.LI),e.openElements.popUntilTagNamePopped(Dv.LI))}function pE(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function fE(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function mE(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function gE(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Rv.BR,Dv.BR),e.openElements.pop(),e.framesetOk=!1}function vE(e,t){const n=t.tagName,i=t.tagID;for(let r=e.openElements.stackTop;r>0;r--){const t=e.openElements.items[r],s=e.openElements.tagIDs[r];if(i===s&&(i!==Dv.UNKNOWN||e.treeAdapter.getTagName(t)===n)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.stackTop>=r&&e.openElements.shortenToLength(r);break}if(e._isSpecialElement(t,s))break}}function yE(e,t){switch(t.tagID){case Dv.A:case Dv.B:case Dv.I:case Dv.S:case Dv.U:case Dv.EM:case Dv.TT:case Dv.BIG:case Dv.CODE:case Dv.FONT:case Dv.NOBR:case Dv.SMALL:case Dv.STRIKE:case Dv.STRONG:nT(e,t);break;case Dv.P:hE(e);break;case Dv.DL:case Dv.UL:case Dv.OL:case Dv.DIR:case Dv.DIV:case Dv.NAV:case Dv.PRE:case Dv.MAIN:case Dv.MENU:case Dv.ASIDE:case Dv.BUTTON:case Dv.CENTER:case Dv.FIGURE:case Dv.FOOTER:case Dv.HEADER:case Dv.HGROUP:case Dv.DIALOG:case Dv.ADDRESS:case Dv.ARTICLE:case Dv.DETAILS:case Dv.SEARCH:case Dv.SECTION:case Dv.SUMMARY:case Dv.LISTING:case Dv.FIELDSET:case Dv.BLOCKQUOTE:case Dv.FIGCAPTION:lE(e,t);break;case Dv.LI:dE(e);break;case Dv.DD:case Dv.DT:pE(e,t);break;case Dv.H1:case Dv.H2:case Dv.H3:case Dv.H4:case Dv.H5:case Dv.H6:fE(e);break;case Dv.BR:gE(e);break;case Dv.BODY:aE(e,t);break;case Dv.HTML:cE(e,t);break;case Dv.FORM:uE(e);break;case Dv.APPLET:case Dv.OBJECT:case Dv.MARQUEE:mE(e,t);break;case Dv.TEMPLATE:vT(e,t);break;default:vE(e,t)}}function TE(e,t){e.tmplInsertionModeStack.length>0?t_(e,t):oT(e,t)}function EE(e,t){var n;t.tagID===Dv.SCRIPT&&(null===(n=e.scriptHandler)||void 0===n||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function _E(e,t){e._err(t,lv.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function bE(e,t){if(void 0!==e.openElements.currentTagId&&Wy.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=jy.IN_TABLE_TEXT,t.type){case dv.CHARACTER:LE(e,t);break;case dv.WHITESPACE_CHARACTER:PE(e,t);break}else DE(e,t)}function wE(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Nv.HTML),e.insertionMode=jy.IN_CAPTION}function SE(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Nv.HTML),e.insertionMode=jy.IN_COLUMN_GROUP}function AE(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Rv.COLGROUP,Dv.COLGROUP),e.insertionMode=jy.IN_COLUMN_GROUP,UE(e,t)}function CE(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Nv.HTML),e.insertionMode=jy.IN_TABLE_BODY}function xE(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Rv.TBODY,Dv.TBODY),e.insertionMode=jy.IN_TABLE_BODY,$E(e,t)}function IE(e,t){e.openElements.hasInTableScope(Dv.TABLE)&&(e.openElements.popUntilTagNamePopped(Dv.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function NE(e,t){zT(t)?e._appendElement(t,Nv.HTML):DE(e,t),t.ackSelfClosing=!0}function kE(e,t){e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,Nv.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function OE(e,t){switch(t.tagID){case Dv.TD:case Dv.TH:case Dv.TR:xE(e,t);break;case Dv.STYLE:case Dv.SCRIPT:case Dv.TEMPLATE:mT(e,t);break;case Dv.COL:AE(e,t);break;case Dv.FORM:kE(e,t);break;case Dv.TABLE:IE(e,t);break;case Dv.TBODY:case Dv.TFOOT:case Dv.THEAD:CE(e,t);break;case Dv.INPUT:NE(e,t);break;case Dv.CAPTION:wE(e,t);break;case Dv.COLGROUP:SE(e,t);break;default:DE(e,t)}}function RE(e,t){switch(t.tagID){case Dv.TABLE:e.openElements.hasInTableScope(Dv.TABLE)&&(e.openElements.popUntilTagNamePopped(Dv.TABLE),e._resetInsertionMode());break;case Dv.TEMPLATE:vT(e,t);break;case Dv.BODY:case Dv.CAPTION:case Dv.COL:case Dv.COLGROUP:case Dv.HTML:case Dv.TBODY:case Dv.TD:case Dv.TFOOT:case Dv.TH:case Dv.THEAD:case Dv.TR:break;default:DE(e,t)}}function DE(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,AT(e,t),e.fosterParentingEnabled=n}function PE(e,t){e.pendingCharacterTokens.push(t)}function LE(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function ME(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)DE(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const BE=new Set([Dv.CAPTION,Dv.COL,Dv.COLGROUP,Dv.TBODY,Dv.TD,Dv.TFOOT,Dv.TH,Dv.THEAD,Dv.TR]);function FE(e,t){const n=t.tagID;BE.has(n)?e.openElements.hasInTableScope(Dv.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(Dv.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=jy.IN_TABLE,OE(e,t)):oE(e,t)}function HE(e,t){const n=t.tagID;switch(n){case Dv.CAPTION:case Dv.TABLE:e.openElements.hasInTableScope(Dv.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(Dv.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=jy.IN_TABLE,n===Dv.TABLE&&RE(e,t));break;case Dv.BODY:case Dv.COL:case Dv.COLGROUP:case Dv.HTML:case Dv.TBODY:case Dv.TD:case Dv.TFOOT:case Dv.TH:case Dv.THEAD:case Dv.TR:break;default:yE(e,t)}}function UE(e,t){switch(t.tagID){case Dv.HTML:oE(e,t);break;case Dv.COL:e._appendElement(t,Nv.HTML),t.ackSelfClosing=!0;break;case Dv.TEMPLATE:mT(e,t);break;default:GE(e,t)}}function qE(e,t){switch(t.tagID){case Dv.COLGROUP:e.openElements.currentTagId===Dv.COLGROUP&&(e.openElements.pop(),e.insertionMode=jy.IN_TABLE);break;case Dv.TEMPLATE:vT(e,t);break;case Dv.COL:break;default:GE(e,t)}}function GE(e,t){e.openElements.currentTagId===Dv.COLGROUP&&(e.openElements.pop(),e.insertionMode=jy.IN_TABLE,e._processToken(t))}function $E(e,t){switch(t.tagID){case Dv.TR:e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Nv.HTML),e.insertionMode=jy.IN_ROW;break;case Dv.TH:case Dv.TD:e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Rv.TR,Dv.TR),e.insertionMode=jy.IN_ROW,jE(e,t);break;case Dv.CAPTION:case Dv.COL:case Dv.COLGROUP:case Dv.TBODY:case Dv.TFOOT:case Dv.THEAD:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=jy.IN_TABLE,OE(e,t));break;default:OE(e,t)}}function zE(e,t){const n=t.tagID;switch(t.tagID){case Dv.TBODY:case Dv.TFOOT:case Dv.THEAD:e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=jy.IN_TABLE);break;case Dv.TABLE:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=jy.IN_TABLE,RE(e,t));break;case Dv.BODY:case Dv.CAPTION:case Dv.COL:case Dv.COLGROUP:case Dv.HTML:case Dv.TD:case Dv.TH:case Dv.TR:break;default:RE(e,t)}}function jE(e,t){switch(t.tagID){case Dv.TH:case Dv.TD:e.openElements.clearBackToTableRowContext(),e._insertElement(t,Nv.HTML),e.insertionMode=jy.IN_CELL,e.activeFormattingElements.insertMarker();break;case Dv.CAPTION:case Dv.COL:case Dv.COLGROUP:case Dv.TBODY:case Dv.TFOOT:case Dv.THEAD:case Dv.TR:e.openElements.hasInTableScope(Dv.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=jy.IN_TABLE_BODY,$E(e,t));break;default:OE(e,t)}}function VE(e,t){switch(t.tagID){case Dv.TR:e.openElements.hasInTableScope(Dv.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=jy.IN_TABLE_BODY);break;case Dv.TABLE:e.openElements.hasInTableScope(Dv.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=jy.IN_TABLE_BODY,zE(e,t));break;case Dv.TBODY:case Dv.TFOOT:case Dv.THEAD:(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(Dv.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=jy.IN_TABLE_BODY,zE(e,t));break;case Dv.BODY:case Dv.CAPTION:case Dv.COL:case Dv.COLGROUP:case Dv.HTML:case Dv.TD:case Dv.TH:break;default:RE(e,t)}}function WE(e,t){const n=t.tagID;BE.has(n)?(e.openElements.hasInTableScope(Dv.TD)||e.openElements.hasInTableScope(Dv.TH))&&(e._closeTableCell(),jE(e,t)):oE(e,t)}function YE(e,t){const n=t.tagID;switch(n){case Dv.TD:case Dv.TH:e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=jy.IN_ROW);break;case Dv.TABLE:case Dv.TBODY:case Dv.TFOOT:case Dv.THEAD:case Dv.TR:e.openElements.hasInTableScope(n)&&(e._closeTableCell(),VE(e,t));break;case Dv.BODY:case Dv.CAPTION:case Dv.COL:case Dv.COLGROUP:case Dv.HTML:break;default:yE(e,t)}}function XE(e,t){switch(t.tagID){case Dv.HTML:oE(e,t);break;case Dv.OPTION:e.openElements.currentTagId===Dv.OPTION&&e.openElements.pop(),e._insertElement(t,Nv.HTML);break;case Dv.OPTGROUP:e.openElements.currentTagId===Dv.OPTION&&e.openElements.pop(),e.openElements.currentTagId===Dv.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Nv.HTML);break;case Dv.HR:e.openElements.currentTagId===Dv.OPTION&&e.openElements.pop(),e.openElements.currentTagId===Dv.OPTGROUP&&e.openElements.pop(),e._appendElement(t,Nv.HTML),t.ackSelfClosing=!0;break;case Dv.INPUT:case Dv.KEYGEN:case Dv.TEXTAREA:case Dv.SELECT:e.openElements.hasInSelectScope(Dv.SELECT)&&(e.openElements.popUntilTagNamePopped(Dv.SELECT),e._resetInsertionMode(),t.tagID!==Dv.SELECT&&e._processStartTag(t));break;case Dv.SCRIPT:case Dv.TEMPLATE:mT(e,t);break;default:}}function KE(e,t){switch(t.tagID){case Dv.OPTGROUP:e.openElements.stackTop>0&&e.openElements.currentTagId===Dv.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===Dv.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===Dv.OPTGROUP&&e.openElements.pop();break;case Dv.OPTION:e.openElements.currentTagId===Dv.OPTION&&e.openElements.pop();break;case Dv.SELECT:e.openElements.hasInSelectScope(Dv.SELECT)&&(e.openElements.popUntilTagNamePopped(Dv.SELECT),e._resetInsertionMode());break;case Dv.TEMPLATE:vT(e,t);break;default:}}function QE(e,t){const n=t.tagID;n===Dv.CAPTION||n===Dv.TABLE||n===Dv.TBODY||n===Dv.TFOOT||n===Dv.THEAD||n===Dv.TR||n===Dv.TD||n===Dv.TH?(e.openElements.popUntilTagNamePopped(Dv.SELECT),e._resetInsertionMode(),e._processStartTag(t)):XE(e,t)}function ZE(e,t){const n=t.tagID;n===Dv.CAPTION||n===Dv.TABLE||n===Dv.TBODY||n===Dv.TFOOT||n===Dv.THEAD||n===Dv.TR||n===Dv.TD||n===Dv.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(Dv.SELECT),e._resetInsertionMode(),e.onEndTag(t)):KE(e,t)}function JE(e,t){switch(t.tagID){case Dv.BASE:case Dv.BASEFONT:case Dv.BGSOUND:case Dv.LINK:case Dv.META:case Dv.NOFRAMES:case Dv.SCRIPT:case Dv.STYLE:case Dv.TEMPLATE:case Dv.TITLE:mT(e,t);break;case Dv.CAPTION:case Dv.COLGROUP:case Dv.TBODY:case Dv.TFOOT:case Dv.THEAD:e.tmplInsertionModeStack[0]=jy.IN_TABLE,e.insertionMode=jy.IN_TABLE,OE(e,t);break;case Dv.COL:e.tmplInsertionModeStack[0]=jy.IN_COLUMN_GROUP,e.insertionMode=jy.IN_COLUMN_GROUP,UE(e,t);break;case Dv.TR:e.tmplInsertionModeStack[0]=jy.IN_TABLE_BODY,e.insertionMode=jy.IN_TABLE_BODY,$E(e,t);break;case Dv.TD:case Dv.TH:e.tmplInsertionModeStack[0]=jy.IN_ROW,e.insertionMode=jy.IN_ROW,jE(e,t);break;default:e.tmplInsertionModeStack[0]=jy.IN_BODY,e.insertionMode=jy.IN_BODY,oE(e,t)}}function e_(e,t){t.tagID===Dv.TEMPLATE&&vT(e,t)}function t_(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(Dv.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):oT(e,t)}function n_(e,t){t.tagID===Dv.HTML?oE(e,t):r_(e,t)}function i_(e,t){var n;if(t.tagID===Dv.HTML){if(e.fragmentContext||(e.insertionMode=jy.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===Dv.HTML){e._setEndLocation(e.openElements.items[0],t);const i=e.openElements.items[1];i&&!(null===(n=e.treeAdapter.getNodeSourceCodeLocation(i))||void 0===n?void 0:n.endTag)&&e._setEndLocation(i,t)}}else r_(e,t)}function r_(e,t){e.insertionMode=jy.IN_BODY,AT(e,t)}function s_(e,t){switch(t.tagID){case Dv.HTML:oE(e,t);break;case Dv.FRAMESET:e._insertElement(t,Nv.HTML);break;case Dv.FRAME:e._appendElement(t,Nv.HTML),t.ackSelfClosing=!0;break;case Dv.NOFRAMES:mT(e,t);break;default:}}function o_(e,t){t.tagID!==Dv.FRAMESET||e.openElements.isRootHtmlElementCurrent()||(e.openElements.pop(),e.fragmentContext||e.openElements.currentTagId===Dv.FRAMESET||(e.insertionMode=jy.AFTER_FRAMESET))}function a_(e,t){switch(t.tagID){case Dv.HTML:oE(e,t);break;case Dv.NOFRAMES:mT(e,t);break;default:}}function c_(e,t){t.tagID===Dv.HTML&&(e.insertionMode=jy.AFTER_AFTER_FRAMESET)}function l_(e,t){t.tagID===Dv.HTML?oE(e,t):u_(e,t)}function u_(e,t){e.insertionMode=jy.IN_BODY,AT(e,t)}function h_(e,t){switch(t.tagID){case Dv.HTML:oE(e,t);break;case Dv.NOFRAMES:mT(e,t);break;default:}}function d_(e,t){t.chars=tv,e._insertCharacters(t)}function p_(e,t){e._insertCharacters(t),e.framesetOk=!1}function f_(e){while(e.treeAdapter.getNamespaceURI(e.openElements.current)!==Nv.HTML&&void 0!==e.openElements.currentTagId&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current))e.openElements.pop()}function m_(e,t){if(Py(t))f_(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),i=e.treeAdapter.getNamespaceURI(n);i===Nv.MATHML?Ly(t):i===Nv.SVG&&(Fy(t),My(t)),By(t),t.selfClosing?e._appendElement(t,i):e._insertElement(t,i),t.ackSelfClosing=!0}}function g_(e,t){if(t.tagID===Dv.P||t.tagID===Dv.BR)return f_(e),void e._endTagOutsideForeignContent(t);for(let n=e.openElements.stackTop;n>0;n--){const i=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(i)===Nv.HTML){e._endTagOutsideForeignContent(t);break}const r=e.treeAdapter.getTagName(i);if(r.toLowerCase()===t.tagName){t.tagName=r,e.openElements.shortenToLength(n);break}}}new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),String.prototype.codePointAt;function v_(e,t){return function(n){let i,r=0,s="";while(i=e.exec(n))r!==i.index&&(s+=n.substring(r,i.index)),s+=t.get(i[0].charCodeAt(0)),r=i.index+1;return s+n.substring(r)}}const y_=v_(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),T_=v_(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),E_=new Set([Rv.AREA,Rv.BASE,Rv.BASEFONT,Rv.BGSOUND,Rv.BR,Rv.COL,Rv.EMBED,Rv.FRAME,Rv.HR,Rv.IMG,Rv.INPUT,Rv.KEYGEN,Rv.LINK,Rv.META,Rv.PARAM,Rv.SOURCE,Rv.TRACK,Rv.WBR]);function __(e,t){return t.treeAdapter.isElementNode(e)&&t.treeAdapter.getNamespaceURI(e)===Nv.HTML&&E_.has(t.treeAdapter.getTagName(e))}const b_={treeAdapter:my,scriptingEnabled:!0};function w_(e,t){const n={...b_,...t};return A_(e,n)}function S_(e,t){let n="";const i=t.treeAdapter.isElementNode(e)&&t.treeAdapter.getTagName(e)===Rv.TEMPLATE&&t.treeAdapter.getNamespaceURI(e)===Nv.HTML?t.treeAdapter.getTemplateContent(e):e,r=t.treeAdapter.getChildNodes(i);if(r)for(const s of r)n+=A_(s,t);return n}function A_(e,t){return t.treeAdapter.isElementNode(e)?C_(e,t):t.treeAdapter.isTextNode(e)?I_(e,t):t.treeAdapter.isCommentNode(e)?N_(e,t):t.treeAdapter.isDocumentTypeNode(e)?k_(e,t):""}function C_(e,t){const n=t.treeAdapter.getTagName(e);return`<${n}${x_(e,t)}>${__(e,t)?"":`${S_(e,t)}</${n}>`}`}function x_(e,{treeAdapter:t}){let n="";for(const i of t.getAttrList(e)){if(n+=" ",i.namespace)switch(i.namespace){case Nv.XML:n+=`xml:${i.name}`;break;case Nv.XMLNS:"xmlns"!==i.name&&(n+="xmlns:"),n+=i.name;break;case Nv.XLINK:n+=`xlink:${i.name}`;break;default:n+=`${i.prefix}:${i.name}`}else n+=i.name;n+=`="${y_(i.value)}"`}return n}function I_(e,t){const{treeAdapter:n}=t,i=n.getTextNodeContent(e),r=n.getParentNode(e),s=r&&n.isElementNode(r)&&n.getTagName(r);return s&&n.getNamespaceURI(r)===Nv.HTML&&Uv(s,t.scriptingEnabled)?i:T_(i)}function N_(e,{treeAdapter:t}){return`\x3c!--${t.getCommentNodeContent(e)}--\x3e`}function k_(e,{treeAdapter:t}){return`<!DOCTYPE ${t.getDocumentTypeNodeName(e)}>`}function O_(e,t){return Xy.parse(e,t)}function R_(e,t,n){"string"===typeof e&&(n=t,t=e,e=null);const i=Xy.getFragmentParser(e,n);return i.tokenizer.write(t,!0),i.getFragment()}function D_(e){const t=e.includes('"')?"'":'"';return t+e+t}function P_(e,t,n){let i="!DOCTYPE ";return e&&(i+=e),t?i+=` PUBLIC ${D_(t)}`:n&&(i+=" SYSTEM"),n&&(i+=` ${D_(n)}`),i}const L_={isCommentNode:Sh,isElementNode:_h,isTextNode:wh,createDocument(){const e=new Th([]);return e["x-mode"]=Ov.NO_QUIRKS,e},createDocumentFragment(){return new Th([])},createElement(e,t,n){const i=Object.create(null),r=Object.create(null),s=Object.create(null);for(let a=0;a<n.length;a++){const e=n[a].name;i[e]=n[a].value,r[e]=n[a].namespace,s[e]=n[a].prefix}const o=new Eh(e,i,[]);return o.namespace=t,o["x-attribsNamespace"]=r,o["x-attribsPrefix"]=s,o},createCommentNode(e){return new mh(e)},createTextNode(e){return new fh(e)},appendChild(e,t){const n=e.children[e.children.length-1];n&&(n.next=t,t.prev=n),e.children.push(t),t.parent=e},insertBefore(e,t,n){const i=e.children.indexOf(n),{prev:r}=n;r&&(r.next=t,t.prev=r),n.prev=t,t.next=n,e.children.splice(i,0,t),t.parent=e},setTemplateContent(e,t){L_.appendChild(e,t)},getTemplateContent(e){return e.children[0]},setDocumentType(e,t,n,i){const r=P_(t,n,i);let s=e.children.find((e=>Ah(e)&&"!doctype"===e.name));s?s.data=null!==r&&void 0!==r?r:null:(s=new gh("!doctype",r),L_.appendChild(e,s)),s["x-name"]=t,s["x-publicId"]=n,s["x-systemId"]=i},setDocumentMode(e,t){e["x-mode"]=t},getDocumentMode(e){return e["x-mode"]},detachNode(e){if(e.parent){const t=e.parent.children.indexOf(e),{prev:n,next:i}=e;e.prev=null,e.next=null,n&&(n.next=i),i&&(i.prev=n),e.parent.children.splice(t,1),e.parent=null}},insertText(e,t){const n=e.children[e.children.length-1];n&&wh(n)?n.data+=t:L_.appendChild(e,L_.createTextNode(t))},insertTextBefore(e,t,n){const i=e.children[e.children.indexOf(n)-1];i&&wh(i)?i.data+=t:L_.insertBefore(e,L_.createTextNode(t),n)},adoptAttributes(e,t){for(let n=0;n<t.length;n++){const i=t[n].name;void 0===e.attribs[i]&&(e.attribs[i]=t[n].value,e["x-attribsNamespace"][i]=t[n].namespace,e["x-attribsPrefix"][i]=t[n].prefix)}},getFirstChild(e){return e.children[0]},getChildNodes(e){return e.children},getParentNode(e){return e.parent},getAttrList(e){return e.attributes},getTagName(e){return e.name},getNamespaceURI(e){return e.namespace},getTextNodeContent(e){return e.data},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){var t;return null!==(t=e["x-name"])&&void 0!==t?t:""},getDocumentTypeNodePublicId(e){var t;return null!==(t=e["x-publicId"])&&void 0!==t?t:""},getDocumentTypeNodeSystemId(e){var t;return null!==(t=e["x-systemId"])&&void 0!==t?t:""},isDocumentTypeNode(e){return Ah(e)&&"!doctype"===e.name},setNodeSourceCodeLocation(e,t){t&&(e.startIndex=t.startOffset,e.endIndex=t.endOffset),e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){null!=t.endOffset&&(e.endIndex=t.endOffset),e.sourceCodeLocation={...e.sourceCodeLocation,...t}}};function M_(e,t,n,i){const r={scriptingEnabled:"boolean"!==typeof t.scriptingEnabled||t.scriptingEnabled,treeAdapter:L_,sourceCodeLocationInfo:t.sourceCodeLocationInfo};return n?O_(e,r):R_(i,e,r)}const B_={treeAdapter:L_};function F_(e){const t="length"in e?e:[e];for(let i=0;i<t.length;i+=1){const e=t[i];Ch(e)&&Array.prototype.splice.call(t,i,1,...e.children)}let n="";for(let i=0;i<t.length;i+=1){const e=t[i];n+=w_(e,B_)}return n}var H_,U_,q_;function G_(e){return e===H_.Space||e===H_.NewLine||e===H_.Tab||e===H_.FormFeed||e===H_.CarriageReturn}function $_(e){return e===H_.Slash||e===H_.Gt||G_(e)}function z_(e){return e>=H_.Zero&&e<=H_.Nine}function j_(e){return e>=H_.LowerA&&e<=H_.LowerZ||e>=H_.UpperA&&e<=H_.UpperZ}function V_(e){return e>=H_.UpperA&&e<=H_.UpperF||e>=H_.LowerA&&e<=H_.LowerF}(function(e){e[e["Tab"]=9]="Tab",e[e["NewLine"]=10]="NewLine",e[e["FormFeed"]=12]="FormFeed",e[e["CarriageReturn"]=13]="CarriageReturn",e[e["Space"]=32]="Space",e[e["ExclamationMark"]=33]="ExclamationMark",e[e["Number"]=35]="Number",e[e["Amp"]=38]="Amp",e[e["SingleQuote"]=39]="SingleQuote",e[e["DoubleQuote"]=34]="DoubleQuote",e[e["Dash"]=45]="Dash",e[e["Slash"]=47]="Slash",e[e["Zero"]=48]="Zero",e[e["Nine"]=57]="Nine",e[e["Semi"]=59]="Semi",e[e["Lt"]=60]="Lt",e[e["Eq"]=61]="Eq",e[e["Gt"]=62]="Gt",e[e["Questionmark"]=63]="Questionmark",e[e["UpperA"]=65]="UpperA",e[e["LowerA"]=97]="LowerA",e[e["UpperF"]=70]="UpperF",e[e["LowerF"]=102]="LowerF",e[e["UpperZ"]=90]="UpperZ",e[e["LowerZ"]=122]="LowerZ",e[e["LowerX"]=120]="LowerX",e[e["OpeningSquareBracket"]=91]="OpeningSquareBracket"})(H_||(H_={})),function(e){e[e["Text"]=1]="Text",e[e["BeforeTagName"]=2]="BeforeTagName",e[e["InTagName"]=3]="InTagName",e[e["InSelfClosingTag"]=4]="InSelfClosingTag",e[e["BeforeClosingTagName"]=5]="BeforeClosingTagName",e[e["InClosingTagName"]=6]="InClosingTagName",e[e["AfterClosingTagName"]=7]="AfterClosingTagName",e[e["BeforeAttributeName"]=8]="BeforeAttributeName",e[e["InAttributeName"]=9]="InAttributeName",e[e["AfterAttributeName"]=10]="AfterAttributeName",e[e["BeforeAttributeValue"]=11]="BeforeAttributeValue",e[e["InAttributeValueDq"]=12]="InAttributeValueDq",e[e["InAttributeValueSq"]=13]="InAttributeValueSq",e[e["InAttributeValueNq"]=14]="InAttributeValueNq",e[e["BeforeDeclaration"]=15]="BeforeDeclaration",e[e["InDeclaration"]=16]="InDeclaration",e[e["InProcessingInstruction"]=17]="InProcessingInstruction",e[e["BeforeComment"]=18]="BeforeComment",e[e["CDATASequence"]=19]="CDATASequence",e[e["InSpecialComment"]=20]="InSpecialComment",e[e["InCommentLike"]=21]="InCommentLike",e[e["BeforeSpecialS"]=22]="BeforeSpecialS",e[e["SpecialStartSequence"]=23]="SpecialStartSequence",e[e["InSpecialTag"]=24]="InSpecialTag",e[e["BeforeEntity"]=25]="BeforeEntity",e[e["BeforeNumericEntity"]=26]="BeforeNumericEntity",e[e["InNamedEntity"]=27]="InNamedEntity",e[e["InNumericEntity"]=28]="InNumericEntity",e[e["InHexEntity"]=29]="InHexEntity"}(U_||(U_={})),function(e){e[e["NoValue"]=0]="NoValue",e[e["Unquoted"]=1]="Unquoted",e[e["Single"]=2]="Single",e[e["Double"]=3]="Double"}(q_||(q_={}));const W_={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class Y_{constructor({xmlMode:e=!1,decodeEntities:t=!0},n){this.cbs=n,this.state=U_.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=U_.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=e,this.decodeEntities=t,this.entityTrie=e?Ph:Dh}reset(){this.state=U_.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=U_.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(e){e===H_.Lt||!this.decodeEntities&&this.fastForwardTo(H_.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=U_.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===H_.Amp&&(this.state=U_.BeforeEntity)}stateSpecialStartSequence(e){const t=this.sequenceIndex===this.currentSequence.length,n=t?$_(e):(32|e)===this.currentSequence[this.sequenceIndex];if(n){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=U_.InTagName,this.stateInTagName(e)}stateInSpecialTag(e){if(this.sequenceIndex===this.currentSequence.length){if(e===H_.Gt||G_(e)){const t=this.index-this.currentSequence.length;if(this.sectionStart<t){const e=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=e}return this.isSpecial=!1,this.sectionStart=t+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===W_.TitleEnd?this.decodeEntities&&e===H_.Amp&&(this.state=U_.BeforeEntity):this.fastForwardTo(H_.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(e===H_.Lt)}stateCDATASequence(e){e===W_.Cdata[this.sequenceIndex]?++this.sequenceIndex===W_.Cdata.length&&(this.state=U_.InCommentLike,this.currentSequence=W_.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=U_.InDeclaration,this.stateInDeclaration(e))}fastForwardTo(e){while(++this.index<this.buffer.length+this.offset)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===W_.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=U_.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(e){return this.xmlMode?!$_(e):j_(e)}startSpecial(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=U_.SpecialStartSequence}stateBeforeTagName(e){if(e===H_.ExclamationMark)this.state=U_.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===H_.Questionmark)this.state=U_.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){const t=32|e;this.sectionStart=this.index,this.xmlMode||t!==W_.TitleEnd[2]?this.state=this.xmlMode||t!==W_.ScriptEnd[2]?U_.InTagName:U_.BeforeSpecialS:this.startSpecial(W_.TitleEnd,3)}else e===H_.Slash?this.state=U_.BeforeClosingTagName:(this.state=U_.Text,this.stateText(e))}stateInTagName(e){$_(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=U_.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateBeforeClosingTagName(e){G_(e)||(e===H_.Gt?this.state=U_.Text:(this.state=this.isTagStartChar(e)?U_.InClosingTagName:U_.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(e){(e===H_.Gt||G_(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=U_.AfterClosingTagName,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){(e===H_.Gt||this.fastForwardTo(H_.Gt))&&(this.state=U_.Text,this.baseState=U_.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(e){e===H_.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=U_.InSpecialTag,this.sequenceIndex=0):this.state=U_.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===H_.Slash?this.state=U_.InSelfClosingTag:G_(e)||(this.state=U_.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===H_.Gt?(this.cbs.onselfclosingtag(this.index),this.state=U_.Text,this.baseState=U_.Text,this.sectionStart=this.index+1,this.isSpecial=!1):G_(e)||(this.state=U_.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateInAttributeName(e){(e===H_.Eq||$_(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=U_.AfterAttributeName,this.stateAfterAttributeName(e))}stateAfterAttributeName(e){e===H_.Eq?this.state=U_.BeforeAttributeValue:e===H_.Slash||e===H_.Gt?(this.cbs.onattribend(q_.NoValue,this.index),this.state=U_.BeforeAttributeName,this.stateBeforeAttributeName(e)):G_(e)||(this.cbs.onattribend(q_.NoValue,this.index),this.state=U_.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(e){e===H_.DoubleQuote?(this.state=U_.InAttributeValueDq,this.sectionStart=this.index+1):e===H_.SingleQuote?(this.state=U_.InAttributeValueSq,this.sectionStart=this.index+1):G_(e)||(this.sectionStart=this.index,this.state=U_.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))}handleInAttributeValue(e,t){e===t||!this.decodeEntities&&this.fastForwardTo(t)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===H_.DoubleQuote?q_.Double:q_.Single,this.index),this.state=U_.BeforeAttributeName):this.decodeEntities&&e===H_.Amp&&(this.baseState=this.state,this.state=U_.BeforeEntity)}stateInAttributeValueDoubleQuotes(e){this.handleInAttributeValue(e,H_.DoubleQuote)}stateInAttributeValueSingleQuotes(e){this.handleInAttributeValue(e,H_.SingleQuote)}stateInAttributeValueNoQuotes(e){G_(e)||e===H_.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(q_.Unquoted,this.index),this.state=U_.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===H_.Amp&&(this.baseState=this.state,this.state=U_.BeforeEntity)}stateBeforeDeclaration(e){e===H_.OpeningSquareBracket?(this.state=U_.CDATASequence,this.sequenceIndex=0):this.state=e===H_.Dash?U_.BeforeComment:U_.InDeclaration}stateInDeclaration(e){(e===H_.Gt||this.fastForwardTo(H_.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=U_.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===H_.Gt||this.fastForwardTo(H_.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=U_.Text,this.sectionStart=this.index+1)}stateBeforeComment(e){e===H_.Dash?(this.state=U_.InCommentLike,this.currentSequence=W_.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=U_.InDeclaration}stateInSpecialComment(e){(e===H_.Gt||this.fastForwardTo(H_.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=U_.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){const t=32|e;t===W_.ScriptEnd[3]?this.startSpecial(W_.ScriptEnd,4):t===W_.StyleEnd[3]?this.startSpecial(W_.StyleEnd,4):(this.state=U_.InTagName,this.stateInTagName(e))}stateBeforeEntity(e){this.entityExcess=1,this.entityResult=0,e===H_.Number?this.state=U_.BeforeNumericEntity:e===H_.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=U_.InNamedEntity,this.stateInNamedEntity(e))}stateInNamedEntity(e){if(this.entityExcess+=1,this.trieIndex=Xh(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0)return this.emitNamedEntity(),void this.index--;this.trieCurrent=this.entityTrie[this.trieIndex];const t=this.trieCurrent&Uh.VALUE_LENGTH;if(t){const n=(t>>14)-1;if(this.allowLegacyEntity()||e===H_.Semi){const e=this.index-this.entityExcess+1;e>this.sectionStart&&this.emitPartial(this.sectionStart,e),this.entityResult=this.trieIndex,this.trieIndex+=n,this.entityExcess=0,this.sectionStart=this.index+1,0===n&&this.emitNamedEntity()}else this.trieIndex+=n}}emitNamedEntity(){if(this.state=this.baseState,0===this.entityResult)return;const e=(this.entityTrie[this.entityResult]&Uh.VALUE_LENGTH)>>14;switch(e){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~Uh.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}stateBeforeNumericEntity(e){(32|e)===H_.LowerX?(this.entityExcess++,this.state=U_.InHexEntity):(this.state=U_.InNumericEntity,this.stateInNumericEntity(e))}emitNumericEntity(e){const t=this.index-this.entityExcess-1,n=t+2+Number(this.state===U_.InHexEntity);n!==this.index&&(t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.sectionStart=this.index+Number(e),this.emitCodePoint(Bh(this.entityResult))),this.state=this.baseState}stateInNumericEntity(e){e===H_.Semi?this.emitNumericEntity(!0):z_(e)?(this.entityResult=10*this.entityResult+(e-H_.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}stateInHexEntity(e){e===H_.Semi?this.emitNumericEntity(!0):z_(e)?(this.entityResult=16*this.entityResult+(e-H_.Zero),this.entityExcess++):V_(e)?(this.entityResult=16*this.entityResult+((32|e)-H_.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===U_.Text||this.baseState===U_.InSpecialTag)}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===U_.Text||this.state===U_.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):this.state!==U_.InAttributeValueDq&&this.state!==U_.InAttributeValueSq&&this.state!==U_.InAttributeValueNq||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){while(this.shouldContinue()){const e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case U_.Text:this.stateText(e);break;case U_.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case U_.InSpecialTag:this.stateInSpecialTag(e);break;case U_.CDATASequence:this.stateCDATASequence(e);break;case U_.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case U_.InAttributeName:this.stateInAttributeName(e);break;case U_.InCommentLike:this.stateInCommentLike(e);break;case U_.InSpecialComment:this.stateInSpecialComment(e);break;case U_.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case U_.InTagName:this.stateInTagName(e);break;case U_.InClosingTagName:this.stateInClosingTagName(e);break;case U_.BeforeTagName:this.stateBeforeTagName(e);break;case U_.AfterAttributeName:this.stateAfterAttributeName(e);break;case U_.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case U_.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case U_.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case U_.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case U_.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case U_.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case U_.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case U_.InDeclaration:this.stateInDeclaration(e);break;case U_.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case U_.BeforeComment:this.stateBeforeComment(e);break;case U_.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case U_.InNamedEntity:this.stateInNamedEntity(e);break;case U_.BeforeEntity:this.stateBeforeEntity(e);break;case U_.InHexEntity:this.stateInHexEntity(e);break;case U_.InNumericEntity:this.stateInNumericEntity(e);break;default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()}finish(){this.state===U_.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length+this.offset;this.state===U_.InCommentLike?this.currentSequence===W_.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===U_.InNumericEntity&&this.allowLegacyEntity()||this.state===U_.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===U_.InTagName||this.state===U_.BeforeAttributeName||this.state===U_.BeforeAttributeValue||this.state===U_.AfterAttributeName||this.state===U_.InAttributeName||this.state===U_.InAttributeValueSq||this.state===U_.InAttributeValueDq||this.state===U_.InAttributeValueNq||this.state===U_.InClosingTagName||this.cbs.ontext(this.sectionStart,e)}emitPartial(e,t){this.baseState!==U_.Text&&this.baseState!==U_.InSpecialTag?this.cbs.onattribdata(e,t):this.cbs.ontext(e,t)}emitCodePoint(e){this.baseState!==U_.Text&&this.baseState!==U_.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)}}const X_=new Set(["input","option","optgroup","select","button","datalist","textarea"]),K_=new Set(["p"]),Q_=new Set(["thead","tbody"]),Z_=new Set(["dd","dt"]),J_=new Set(["rt","rp"]),eb=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",K_],["h1",K_],["h2",K_],["h3",K_],["h4",K_],["h5",K_],["h6",K_],["select",X_],["input",X_],["output",X_],["button",X_],["datalist",X_],["textarea",X_],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",Z_],["dt",Z_],["address",K_],["article",K_],["aside",K_],["blockquote",K_],["details",K_],["div",K_],["dl",K_],["fieldset",K_],["figcaption",K_],["figure",K_],["footer",K_],["form",K_],["header",K_],["hr",K_],["main",K_],["nav",K_],["ol",K_],["pre",K_],["section",K_],["table",K_],["ul",K_],["rt",J_],["rp",J_],["tbody",Q_],["tfoot",Q_]]),tb=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),nb=new Set(["math","svg"]),ib=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),rb=/\s|\//;class sb{constructor(e,t={}){var n,i,r,s,o;this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=null!==e&&void 0!==e?e:{},this.lowerCaseTagNames=null!==(n=t.lowerCaseTags)&&void 0!==n?n:!t.xmlMode,this.lowerCaseAttributeNames=null!==(i=t.lowerCaseAttributeNames)&&void 0!==i?i:!t.xmlMode,this.tokenizer=new(null!==(r=t.Tokenizer)&&void 0!==r?r:Y_)(this.options,this),null===(o=(s=this.cbs).onparserinit)||void 0===o||o.call(s,this)}ontext(e,t){var n,i;const r=this.getSlice(e,t);this.endIndex=t-1,null===(i=(n=this.cbs).ontext)||void 0===i||i.call(n,r),this.startIndex=t}ontextentity(e){var t,n;const i=this.tokenizer.getSectionStart();this.endIndex=i-1,null===(n=(t=this.cbs).ontext)||void 0===n||n.call(t,Mh(e)),this.startIndex=i}isVoidElement(e){return!this.options.xmlMode&&tb.has(e)}onopentagname(e,t){this.endIndex=t;let n=this.getSlice(e,t);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)}emitOpenTag(e){var t,n,i,r;this.openTagStart=this.startIndex,this.tagname=e;const s=!this.options.xmlMode&&eb.get(e);if(s)while(this.stack.length>0&&s.has(this.stack[this.stack.length-1])){const e=this.stack.pop();null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,e,!0)}this.isVoidElement(e)||(this.stack.push(e),nb.has(e)?this.foreignContext.push(!0):ib.has(e)&&this.foreignContext.push(!1)),null===(r=(i=this.cbs).onopentagname)||void 0===r||r.call(i,e),this.cbs.onopentag&&(this.attribs={})}endOpenTag(e){var t,n;this.startIndex=this.openTagStart,this.attribs&&(null===(n=(t=this.cbs).onopentag)||void 0===n||n.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1}onclosetag(e,t){var n,i,r,s,o,a;this.endIndex=t;let c=this.getSlice(e,t);if(this.lowerCaseTagNames&&(c=c.toLowerCase()),(nb.has(c)||ib.has(c))&&this.foreignContext.pop(),this.isVoidElement(c))this.options.xmlMode||"br"!==c||(null===(i=(n=this.cbs).onopentagname)||void 0===i||i.call(n,"br"),null===(s=(r=this.cbs).onopentag)||void 0===s||s.call(r,"br",{},!0),null===(a=(o=this.cbs).onclosetag)||void 0===a||a.call(o,"br",!1));else{const e=this.stack.lastIndexOf(c);if(-1!==e)if(this.cbs.onclosetag){let t=this.stack.length-e;while(t--)this.cbs.onclosetag(this.stack.pop(),0!==t)}else this.stack.length=e;else this.options.xmlMode||"p"!==c||(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1}onselfclosingtag(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)}closeCurrentTag(e){var t,n;const i=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===i&&(null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,i,!e),this.stack.pop())}onattribname(e,t){this.startIndex=e;const n=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n}onattribdata(e,t){this.attribvalue+=this.getSlice(e,t)}onattribentity(e){this.attribvalue+=Mh(e)}onattribend(e,t){var n,i;this.endIndex=t,null===(i=(n=this.cbs).onattribute)||void 0===i||i.call(n,this.attribname,this.attribvalue,e===q_.Double?'"':e===q_.Single?"'":e===q_.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(e){const t=e.search(rb);let n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n}ondeclaration(e,t){this.endIndex=t;const n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){const e=this.getInstructionName(n);this.cbs.onprocessinginstruction(`!${e}`,`!${n}`)}this.startIndex=t+1}onprocessinginstruction(e,t){this.endIndex=t;const n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){const e=this.getInstructionName(n);this.cbs.onprocessinginstruction(`?${e}`,`?${n}`)}this.startIndex=t+1}oncomment(e,t,n){var i,r,s,o;this.endIndex=t,null===(r=(i=this.cbs).oncomment)||void 0===r||r.call(i,this.getSlice(e,t-n)),null===(o=(s=this.cbs).oncommentend)||void 0===o||o.call(s),this.startIndex=t+1}oncdata(e,t,n){var i,r,s,o,a,c,l,u,h,d;this.endIndex=t;const p=this.getSlice(e,t-n);this.options.xmlMode||this.options.recognizeCDATA?(null===(r=(i=this.cbs).oncdatastart)||void 0===r||r.call(i),null===(o=(s=this.cbs).ontext)||void 0===o||o.call(s,p),null===(c=(a=this.cbs).oncdataend)||void 0===c||c.call(a)):(null===(u=(l=this.cbs).oncomment)||void 0===u||u.call(l,`[CDATA[${p}]]`),null===(d=(h=this.cbs).oncommentend)||void 0===d||d.call(h)),this.startIndex=t+1}onend(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let e=this.stack.length;e>0;this.cbs.onclosetag(this.stack[--e],!0));}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)}reset(){var e,t,n,i;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(i=(n=this.cbs).onparserinit)||void 0===i||i.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(e){this.reset(),this.end(e)}getSlice(e,t){while(e-this.bufferOffset>=this.buffers[0].length)this.shiftBuffer();let n=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);while(t-this.bufferOffset>this.buffers[0].length)this.shiftBuffer(),n+=this.buffers[0].slice(0,t-this.bufferOffset);return n}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))}end(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())}pause(){this.tokenizer.pause()}resume(){this.tokenizer.resume();while(this.tokenizer.running&&this.writeIndex<this.buffers.length)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(e){this.write(e)}done(e){this.end(e)}}function ob(e,t){const n=new Oh(void 0,t);return new sb(n,t).end(e),n.root}const ab=gg(((e,t,n,i)=>t.xmlMode||t._useHtmlParser2?ob(e,t):M_(e,t,n,i))),cb=Zg(ab,((e,t)=>t.xmlMode||t._useHtmlParser2?pd(e,t):F_(e)));var lb=cb([]);const{contains:ub}=n,{merge:hb}=n,{parseHTML:db}=n,{root:pb}=n,fb=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,mb={stripTags:!1,ellipsis:"...",decodeEntities:!1,byWords:!1,excludes:"",customNodeStrategy:e=>e,reserveLastWord:!1,trimTheOnlyWord:!1,keepWhitespaces:!1};let gb=mb;function vb(e,t,n){const i=Eb(t,n);if(!e||isNaN(i.length)||i.length<1||i.length===1/0)return wb(e)?e.html()||"":e;let r;r=wb(e)?e:lb.load(`${e}`,{decodeEntities:i.decodeEntities},!1);const s=r.root();if(i.excludes&&s.find(i.excludes).remove(),i.stripTags)return yb(s.text(),i);const o=function(e,t=!0){const n=e.contents(),s=n.length-1;return n.each((function(e){const n=this.type,a=r(this);if("text"===n)return i.limit?void(this.data=yb(a.text(),i,t&&e===s)):void a.remove();if("tag"!==n)a.remove();else{if(!i.limit)return void a.remove();const n=i.customNodeStrategy(a);if("remove"===n)return void a.remove();if("keep"===n)return;o(n||a,t&&e===s)}}))};return o(s),s.html()||""}function yb(e,t,n){t.keepWhitespaces||(e=e.replace(/\s+/g," "));const i=t.byWords,r=e.match(fb);if(!r)return"";const s=r.length;let o=0,a=0,c=i,l=!1;while(o<s)if(l=_b(r[o++]),!i||c!==l){if(a===t.limit){if(c&&l){c=l;continue}--o;break}i?l||++a:l&&c||++a,c=l}if(t.limit-=a,t.limit)return e;const u=i?r.slice(0,o).join(""):Tb(r,o,t);return u===e?n?e:e+t.ellipsis:u+t.ellipsis}function Tb(e,t,n){const i=e.slice(0,t).join("");if(!n.reserveLastWord||e.length===t)return i;const r=e.slice(t-1,t+1).join("");if(/\W/.test(r))return i;if("number"===typeof n.reserveLastWord&&n.reserveLastWord<0){const e=i.replace(/\w+$/,"");if(0!==e.length||i.length!==n.length)return e;if(n.trimTheOnlyWord)return i}const s=!0!==n.reserveLastWord&&n.reserveLastWord>0?n.reserveLastWord:10,o=e.slice(t).join("").match(/(\w+)/),a=o?o[1]:"";return i+a.substring(0,s)}function Eb(e,t){switch(typeof e){case"object":t=e;break;case"number":"object"===typeof t?t.length=e:t={length:e}}t&&t.excludes&&(Array.isArray(t.excludes)||(t.excludes=[t.excludes]),t.excludes=t.excludes.join(","));const n=bb(Object.assign({},gb,t),mb);return n.limit=n.length,n}function _b(e){return" "===e||"\f"===e||"\n"===e||"\r"===e||"\t"===e||"\v"===e||""===e||"\u2028"===e||"\u2029"===e}function bb(e,t){null==e&&(e={});for(const n in t){const i=t[n];null==e[n]&&(e[n]=i)}return e}function wb(e){return e&&e.contains&&e.html&&e.parseHTML&&!0}vb.setup=function(e){gb=bb(e,mb)};var Sb=__webpack_require__(4791),Ab=__webpack_require__.n(Sb),Cb=__webpack_require__(2206),xb=__webpack_require__.n(Cb),Ib=__webpack_require__(8395),Nb=__webpack_require__.n(Ib),kb={getLangLabel:function(e){var t=!0;2==e.length&&(e=Object.keys(this.languages()).filter((function(t){return t.split("-")[0]==e}))[0],t=!1);var n=this.languages()[e],i=n&&t?n["label"]:n?n["lang"]:e;return i},flatten:function(e,t){return t?e.reduce((function(e,n){return e.concat(n[t])}),[]).filter(Boolean):e.reduce((function(e,t){return e.concat(t)}),[]).filter(Boolean)},hexDict:function(){return{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},languages:function(){return{"ar-SA":{label:"Arabic (Saudi Arabia)",tag:"ar-SA",lang:"Arabic",region:"Saudi Arabia"},"bn-BD":{label:"Bangla (Bangladesh)",tag:"bn-BD",lang:"Bangla",region:"Bangladesh"},"bn-IN":{label:"Bangla (India)",tag:"bn-IN",lang:"Bangla",region:"India"},"cs-CZ":{label:"Czech (Czech Republic)",tag:"cs-CZ",lang:"Czech",region:"Czech Republic"},"da-DK":{label:"Danish (Denmark)",tag:"da-DK",lang:"Danish",region:"Denmark"},"de-AT":{label:"Austrian German",tag:"de-AT",lang:"German",region:"Austria"},"de-CH":{label:"'Swiss' German",tag:"de-CH",lang:"German",region:"Switzerland"},"de-DE":{label:"Standard German (as spoken in Germany)",tag:"de-DE",lang:"German",region:"Germany"},"el-GR":{label:"Modern Greek",tag:"el-GR",lang:"Greek",region:"Greece"},"en-AU":{label:"Australian English",tag:"en-AU",lang:"English",region:"Australia"},"en-CA":{label:"Canadian English",tag:"en-CA",lang:"English",region:"Canada"},"en-GB":{label:"British English",tag:"en-GB",lang:"English",region:"United Kingdom"},"en-IE":{label:"Irish English",tag:"en-IE",lang:"English",region:"Ireland"},"en-IN":{label:"Indian English",tag:"en-IN",lang:"English",region:"India"},"en-NZ":{label:"New Zealand English",tag:"en-NZ",lang:"English",region:"New Zealand"},"en-US":{label:"US English",tag:"en-US",lang:"English",region:"United States"},"en-ZA":{label:"English (South Africa)",tag:"en-ZA",lang:"English",region:"South Africa"},"es-AR":{label:"Argentine Spanish",tag:"es-AR",lang:"Spanish",region:"Argentina"},"es-CL":{label:"Chilean Spanish",tag:"es-CL",lang:"Spanish",region:"Chile"},"es-CO":{label:"Colombian Spanish",tag:"es-CO",lang:"Spanish",region:"Columbia"},"es-ES":{label:"Castilian Spanish (as spoken in Central-Northern Spain)",tag:"es-ES",lang:"Spanish",region:"Spain"},"es-MX":{label:"Mexican Spanish",tag:"es-MX",lang:"Spanish",region:"Mexico"},"es-US":{label:"American Spanish",tag:"es-US",lang:"Spanish",region:"United States"},"fi-FI":{label:"Finnish (Finland)",tag:"fi-FI",lang:"Finnish",region:"Finland"},"fr-BE":{label:"Belgian French",tag:"fr-BE",lang:"French",region:"Belgium"},"fr-CA":{label:"Canadian French",tag:"fr-CA",lang:"French",region:"Canada"},"fr-CH":{label:"'Swiss' French",tag:"fr-CH",lang:"French",region:"Switzerland"},"fr-FR":{label:"Standard French (especially in France)",tag:"fr-FR",lang:"French",region:"France"},"he-IL":{label:"Hebrew (Israel)",tag:"he-IL",lang:"Hebrew",region:"Israel"},"hi-IN":{label:"Hindi (India)",tag:"hi-IN",lang:"Hindi",region:"India"},"hu-HU":{label:"Hungarian (Hungary)",tag:"hu-HU",lang:"Hungarian",region:"Hungary"},"id-ID":{label:"Indonesian (Indonesia)",tag:"id-ID",lang:"Indonesian",region:"Indonesia"},"it-CH":{label:"'Swiss' Italian",tag:"it-CH",lang:"Italian",region:"Switzerland"},"it-IT":{label:"Standard Italian (as spoken in Italy)",tag:"it-IT",lang:"Italian",region:"Italy"},"ja-JP":{label:"Japanese (Japan)",tag:"ja-JP",lang:"Japanese",region:"Japan"},"ko-KR":{label:"Korean (Republic of Korea)",tag:"ko-KR",lang:"Korean",region:"Republic of Korea"},"nl-BE":{label:"Belgian Dutch",tag:"nl-BE",lang:"Dutch",region:"Belgium"},"nl-NL":{label:"Standard Dutch (as spoken in The Netherlands)",tag:"nl-NL",lang:"Dutch",region:"The Netherlands"},"no-NO":{label:"Norwegian (Norway)",tag:"no-NO",lang:"Norwegian",region:"Norway"},"pl-PL":{label:"Polish (Poland)",tag:"pl-PL",lang:"Polish",region:"Poland"},"pt-BR":{label:"Brazilian Portuguese",tag:"pt-BR",lang:"Portugese",region:"Brazil"},"pt-PT":{label:"European Portuguese (as written and spoken in Portugal)",tag:"pt-PT",lang:"Portugese",region:"Portugal"},"ro-RO":{label:"Romanian (Romania)",tag:"ro-RO",lang:"Romanian",region:"Romania"},"ru-RU":{label:"Russian (Russian Federation)",tag:"ru-RU",lang:"Russian",region:"Russian Federation"},"sk-SK":{label:"Slovak (Slovakia)",tag:"sk-SK",lang:"Slovak",region:"Slovakia"},"sv-SE":{label:"Swedish (Sweden)",tag:"sv-SE",lang:"Swedish",region:"Sweden"},"ta-IN":{label:"Indian Tamil",tag:"ta-IN",lang:"Tamil",region:"India"},"ta-LK":{label:"Sri Lankan Tamil",tag:"ta-LK",lang:"Tamil",region:"Sri Lanka"},"th-TH":{label:"Thai (Thailand)",tag:"th-TH",lang:"Thai",region:"Thailand"},"tr-TR":{label:"Turkish (Turkey)",tag:"tr-TR",lang:"Turkish",region:"Turkey"},"zh-CN":{label:"Mainland China, simplified characters",tag:"zh-CN",lang:"Chinese",region:"China"},"zh-HK":{label:"Hong Kong, traditional characters",tag:"zh-HK",lang:"Chinese",region:"Hond Kong"},"zh-TW":{label:"Taiwan, traditional characters",tag:"zh-TW",lang:"Chinese",region:"Taiwan"}}}};function Ob(e){return Lb(e)||Pb(e)||Db(e)||Rb()}function Rb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Db(e,t){if(e){if("string"==typeof e)return Mb(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mb(e,t):void 0}}function Pb(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Lb(e){if(Array.isArray(e))return Mb(e)}function Mb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var Bb={textoverlay:{opacity:100,fontcolor:"#000000",background:"none"},buttons:{autorun:'<i class="fas fa-magic"></i>',autorunoff:'<i class="fas fa-stop-circle"></i>',overlay:'<i class="fas fa-toggle-off"></i>',overlayoff:'<i class="fas fa-toggle-on"></i>',textoverlay:'<i class="fas fa-align-justify"></i>',annooff:'<i class="fas fa-pen-nib"></i>',anno:'<i class="fas fa-file-alt"></i>',hide:'<i class="fas fa-caret-up"></i>',hideoff:'<i class="fas fa-caret-down"></i>',collapsehide:'<i class="fas fa-caret-left"></i>',collapsehideoff:'<i class="fas fa-caret-right"></i>',playpause:'<i class="fas fa-play"></i>',playpauseoff:'<i class="fas fa-pause"></i>',tags:'<i class="fas fa-tag"></i>',reload:'<i class="fas fa-redo"></i>',info:'<i class="fas fa-info-circle"></i>',layers:'<i class="fas fa-layer-group"></i>',keyboard:'<i class="fas fa-keyboard"></i>',rangeprev:'<i class="fas fa-chevron-left"></i>',rangenext:'<i class="fas fa-chevron-right"></i>',perpage:'<i class="fas fa-book-open"></i>',fullscreen:'<i class="fas fa-expand"></i>',fullscreenoff:'<i class="fas fa-compress"></i>',settings:'<i class="fas fa-cog"></i>'},booleanitems:{isexcerpt:!1,isoverlaytoggled:!1,istextoverlaytoggled:!1,annoinfoshown:!1,imageinfoshown:!1,additionalinfoshown:!1,tocshown:!1,istranscription:!1,collectioninfoshown:!1},objectToNewObject:function(e){return JSON.parse(JSON.stringify(e))},imageextensions:["jpeg","jpg","png","svg","bmp","gif","apng","avif","jfif","pjpeg","pjp","webp","ico","cur"],on_structure:function(e){return e["on"]&&"undefined"!==typeof e["on"]?"Array"===e["on"].constructor.name?e["on"]:[e["on"]]:void 0},getsettings:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.styling,r={};if(n||null===document.getElementById("config")||""==document.getElementById("config").innerHTML||(r=JSON.parse(document.getElementById("config").innerHTML)),i)for(var s=i.split(";").filter((function(e){return""!=e})),o=0;o<s.length;o++){var a=s[o].split(":"),c=s[o].substring(s[o].indexOf(":")+1).trim();c="false"!=c&&c,c="true"==c||c,c=parseInt(c)&&parseInt(c).toString().length==c.length?parseInt(c):c,c=c&&"String"==c.constructor.name?this.tryJsonParse(c):c,r[a[0].trim()]=c}if("scrollview"==r.annoview&&(r.startposition=void 0!=r.startposition?r.startposition:1,r.hide_nextbuttons=void 0==r.hide_nextbuttons||r.hide_nextbuttons),Object.keys(r).join("").indexOf("toggle")>-1&&e.booleanitems)for(var l=["overlay","textoverlay"],u=0;u<l.length;u++){var h=r["toggle"+l[u]];h&&(e.booleanitems["is"+l[u]+"toggled"]=h)}if(Object.keys(r).join("").indexOf("textoverlay")>-1&&e.textoverlay)for(var d=["opacity","fontcolor","background"],p=0;p<d.length;p++){var f=r["textoverlay"+d[p]];f&&(e.textoverlay[d[p]]=f)}return r.tagscolor&&(r.tagscolor=Object.keys(r.tagscolor).reduce((function(e,n){return e[t.tagsToClass(n)]=r.tagscolor[n],e}),{})),r},parseCharValue:function(e){try{var t=JSON.parse(e);if("Array"!=t.constructor.name||"Object"!=t.constructor.name)return e;var n=t["@context"],i="";for(var r in t)"@context"!=r&&(i+='<div class="'+(n?n[r]:r)+'">'+r+": "+t[r]+"</div>");return i}catch(s){return e}},stripHTML:function(e){var t=document.createElement("div");return t.innerHTML=e,(t.textContent||t.innerText||"").trim()},colorDict:function(e,t){var n={},i="",r=document.implementation.createHTMLDocument(""),s=document.createElement("style");s.textContent=e,r.body.appendChild(s);for(var o=s.sheet.cssRules,a=0;a<o.length;a++){var c="."+t+"[. {]",l=new RegExp(c);if(l.test(o[a].cssText)){var u=o[a].selectorText.replaceAll(".","").replace(t,"").trim();n[u]=o[a].style.color,i+=o[a].cssText}}return{colordict:n,stylesheet:i}},tagsToClass:function(e){var t="-?[_a-zA-Z]+[_a-zA-Z0-9-]*",n=e&&e.group?e.group:"";return e=e&&e.value?e.value:e,e.length>0?[].concat(Ob((""+(n?n.toLowerCase():n)+e.toLowerCase()).matchAll(t))).join(""):""},groupToClass:function(e){var t="-?[_a-zA-Z]+[_a-zA-Z0-9-]*";return[].concat(Ob((""+(e?e.toLowerCase():e)).matchAll(t))).join("")},getLongEdge:function(e){var t=e.world.getItemAt(0).getContentSize(),n=e.viewport.viewerElementToImageCoordinates(e.viewport.getContainerSize()),i=n["x"]/t["x"]*t["y"];return t["y"]-n["y"]>t["x"]-n["x"]&&i-n["y"]>0?"vertical":"horizontal"},chars:function(e){var t,n,i,r,s=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=e.body?e.body:e.resource?e.resource:"",c=[],l=[],u=[],h=[],d=e.stylesheet?e.stylesheet.value:"",p=e.target&&e.target.styleClass?e.target.styleClass:"";if(d&&"cssstylesheet"==e.stylesheet.type.toLowerCase()){var f=this.colorDict(d,e.target.styleClass);d=f["colordict"],r=f["stylesheet"]}var m=e.label?e.label:e.resource&&e.resource.label?e.resource.label:void 0;a=[].concat(a),e.bodyValue&&c.push(e.bodyValue);for(var g=0;g<a.length;g++){var v=a[g],y=Object.keys(v)[Object.keys(v).findIndex((function(e){return e.includes("type")}))],T=v[y],E=v["value"]?v["value"]:v["@value"]?v["@value"]:v["chars"],_=v["purpose"]?v["purpose"].split("#").slice(-1)[0]:e["motivation"]&&!Array.isArray(e["motivation"])?e["motivation"]:T;if(_=_?_.toLowerCase():_,v.selector&&(t=v.selector.value),v["geometry"]&&(i=v["geometry"]),E){var b=v["@id"]?v["@id"]:v["id"]?v["id"]:"";if(E=decodeURIComponent(escape(unescape(encodeURIComponent(E)))),b&&(E='<a href="'+b+'" target="_blank">'+E+"</a?>"),E=this.parseCharValue(E),v.creator||v["annotatedBy"]||v["oa:annotatedBy"]){var w=this.getAuthor(v).split(", ");E+="tagging"!=_&&"oa:Tag"!==T?'<div class="authorship">Written by: '+[].concat(Ob(new Set(w))).join(", ")+"</div>":""}"TextualBody"===T?"tagging"===_?l.push({value:E,group:""}):"transcribing"==_||"supplementing"==_?u.push(E):c.push('<div class="'+_+'">'+E+"</div>"):"oa:Tag"===T?l.push({value:E,group:""}):"dctypes:Dataset"===T||"Dataset"===T?v["@id"]?c.push('<a href="'+v["@id"]+'">Download dataset ('+v["format"]+")</a>"):"tagging"==_?l.push(v["value"]):"transcribing"==_||"supplementing"==_?u.push(v["value"]):c.push('<div class="'+_+'">'+E+"</div>"):"cnt:ContentAsText"===T&&(T.toLowerCase()===_||_.indexOf("painting")>-1)?u.push(E):c.push('<div class="'+_+'">'+E+"</div>")}else if("Choice"===T){n=v["items"].map((function(e){return'<option value="'+e["language"]+'"'+(o.indexOf(e["language"])>-1||navigator.language.indexOf(e["language"])>-1?" selected":"")+">"+kb.getLangLabel(e["language"])+"</option>"}));var S=[];v["items"].map((function(e){return S.push(s.createItemsDict(_,e))})),c=c.concat(S)}else if("dctypes:Image"===T||"Image"===T){var A='<img src="'+this.getId(v)+'">';A+=v["attribution"]?'<div class="attribution">'+v["attribution"]+"</div>":"",A+=v["description"]?'<div class="caption">'+v["description"]+"</div>":"",c.push(A)}}return h=this.getAuthor(e),{ocr:u,textual_body:c,tags:l,type:t,languages:n,label:m,language:v?v["language"]:"",authors:h,styles:d,stylesheet:r,itemclass:p,geometry:i}},createItemsDict:function(e,t){var n=decodeURIComponent(escape(unescape(encodeURIComponent(t["value"])))),i={purpose:e,language:t["language"],value:n};return i},selectorParser:function(e){var t=e.item?e.item.value:e.default?e.default.value:e.value,n=this.getSVGoverlay(t);if(n){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.id="getBounds",i.appendChild(n);var r=document.getElementsByClassName("annonaview");r=r.length>0?r[0]:document.getElementsByTagName("body")[0],r.appendChild(i);var s=document.getElementById("getBounds").getBBox();return r.removeChild(i),{bounds:s["x"]+","+s["y"]+","+s["width"]+","+s["height"],svg:n}}return{bounds:t.split("=").slice(-1)[0],svg:void 0}},findLimits:function(e,t){for(var n=e.getTotalLength(),i=e.getPointAtLength(0),r=e.getPointAtLength(n),s={p:0,x:i["x"],y:i["y"]},o={p:n,x:r["x"],y:r["y"]},a={p:0,x:i["x"],y:i["y"]},c={p:0,x:r["x"],y:r["y"]},l={x:t[0],y:t[1]+t[3]},u={x:t[0],y:t[1]},h={x:t[0]+t[2],y:t[1]+t[3]},d={x:t[0]+t[2],y:t[1]},p=0;p<n;p++){var f=e.getPointAtLength(p),m={p:p,x:f["x"],y:f["y"]};this.diffpt(f,l)<=this.diffpt(s,l)&&(s=m),this.diffpt2(f,h)<=this.diffpt2(o,h)&&(o=m),this.diffpt2(f,u)<=this.diffpt2(a,u)&&(a=m),this.diffpt2(f,d)<=this.diffpt2(c,d)&&(c=m)}return{start:s,end:o,topleft:a,topright:c}},diffpt:function(e,t){var n=Math.sqrt(Math.pow(t["x"]-e.x,2)+Math.pow(t["y"]-e.y,2));return n},diffpt2:function(e,t){var n=Math.abs(e["x"]-t["x"])+Math.sqrt(Math.pow(t["x"]-e.x,2)+Math.pow(t["y"]-e.y,2));return n},polyToPath:function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","path"),n="M"+e.getAttribute("points");return"polygon"==e.tagName&&(n+="z"),t.setAttribute("d",n),t},findSVGcoords:function(e,t){var n,i;try{e.points&&(e=this.polyToPath(e)),n=this.findLimits(e,t)}catch(g){return{path:"M"}}var r=Math.sqrt(Math.pow(n["start"]["x"]-n["topleft"]["x"],2)+Math.pow(n["start"]["y"]-n["topleft"]["y"],2)),s=Math.sqrt(Math.pow(n["end"]["x"]-n["topright"]["x"],2)+Math.pow(n["end"]["y"]-n["topright"]["y"],2));i=r>s?r:s;var o=n["start"]["p"]-n["end"]["p"],a=n["start"]["p"],c=n["end"]["p"],l=!1;o<0&&(a=n["end"]["p"],c=n["start"]["p"],l=!0);for(var u="",h=a;h>c;h--){var d=e.getPointAtLength(h);u+=d["x"]+","+d["y"]+" "}u=l?u.split(" ").reverse().join(" ").trim():u;var p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d","M"+u.trim());var f=p.getTotalLength(),m=e.id?e.id:Math.random().toString(36).substring(2,7);return m+="-ocrtextoverlaypath",{path:"M"+u.trim(),fontsize:1.1*i,textLength:f,pathid:m}},createPath:function(e){var t=document.createElement("path");return t.setAttribute("d",e.getAttribute("d")),t},textOverlayHTML:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="";n&&(i=this.findSVGcoords(n,e));var r=this.stripHTML(t.join("\n").replace(/<div class="authorship">[\s\S]*?<\/div>/g,"")),s=r.split("\n"),o="";if(i&&"M"!=i["path"]&&s.length<2){var a=n.getAttribute("d")?this.createPath(n):n;a.setAttribute("style","z-index:-1;"),a.setAttribute("fill","none"),a.setAttribute("stroke","none"),a.classList="svgBackground",o="\n      "+a.outerHTML+'\n      <def>\n      <path id="'+i["pathid"]+'" d="'+i["path"]+'" fill="none"  stroke-width="30" stroke="red"/>\n      </def>\n      <text class="textOverlayText" textLength="'+i["textLength"]+'" font-size="'+i["fontsize"]+'" lengthAdjust="spacingAndGlyphs">\n        <textPath textLength="'+i["textLength"]+'" font-size="'+i["fontsize"]+'" xlink:href="#'+i["pathid"]+'" text-anchor="start" lengthAdjust="spacingAndGlyphs">\n          '+r+"\n        </textPath>\n      </text>\n      "}else{var c=e[0],l=e[1]+e[3],u=e[3]/s.length>10;if(u)for(var h=0;h<s.length;h++){var d=e[3]/s.length,p=e[1]+d*(h+1);o+='<text class="textOverlayText" textLength="'+e[2]+'" font-size="'+d+'" x="'+e[0]+'" y="'+p+'" lengthAdjust="spacingAndGlyphs">\n            '+s[h]+"\n          </text>"}else o='\n        <text class="textOverlayText" x="'+c+'" y="'+l+'" textLength="'+e[2]+'" font-size="'+1.1*e[3]+'" lengthAdjust="spacingAndGlyphs">\n            '+r+"\n        </text>\n      "}return o},canvasRegion:function(e,t){var n,i,r=!1;if(t&&t.selector){var s=this.selectorParser(t.selector);n=s["bounds"],i=s["svg"]}if(e&&"string"!==typeof e){if(e.selector){var o=e.selector;if(e.selector.constructor===Array){var a=e.selector.filter((function(e){return e.value.indexOf("svg")>-1}));a=a.length>0?a:e.selector.filter((function(e){return e.value.indexOf("xywh")>-1})),o=a[0]}var c=this.selectorParser(o);n=c["bounds"],i=c["svg"]}if(e["source"]){var l="String"==e.source.constructor.name?e.source:this.getId(e.source);e="String"==l.constructor.name?e.source:e}e=this.getId(e)}return e&&e.indexOf("#xywh")>-1&&(n=e.split("#")[1].split("=")[1],e.indexOf("pct")>-1&&(r=!0),e=e.split("#")[0]),n&&""!==n.trim()||(n="full"),n&&n.indexOf("percent")>-1&&(r=!0),"full"!=n&&(n=n.split(",").map((function(e){return e.replace(/[^0-9.]/g,"")})).join(",")),r&&(n="pct:"+n),{canvasId:e.replace("/info.json",""),canvasRegion:n,svg:i}},manifestlink:function(e,t,n){var i;if(void 0===e||""===e){var r=this.on_structure(t);r=r?r[0]:r;var s=t["target"]?t["target"]:r;if(s){var o=Object.keys(s)[Object.keys(s).findIndex((function(e){return e.toLowerCase().includes("partof")}))],a=o?s[o]:"",c=Object.keys(n)[Object.keys(n).findIndex((function(e){return e.toLowerCase().includes("partof")}))];if(!a&&s["source"]){o=Object.keys(s["source"])[Object.keys(s["source"]).findIndex((function(e){return e.toLowerCase().includes("partof")}))];a=o?s["source"][o]:""}}a=a||t["partOf"];var l=a&&Array.isArray(a)?a[0]:a||(c?n[c]:r?r["within"]:void 0);l=l||(n["within"]?n["within"]["within"]:""),i=this.getId(l)}else i=e;return i},getAnnotations:function(e){var t=e.resources?e.resources:e.items?e.items:e;return t=[].concat(t),t},getValueField:function(e){if(e)return e["@value"]?e["@value"]:e["value"]?e["value"]:e},parseMetaFields:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="";if(e){var r=n||window.navigator.language.split("-")[0],s=r?r.split("-")[0]:"";i=Array.isArray(e)&&r?e.filter((function(e){return t.getField(e,"language")===r||t.getField(e,"language")===s})):e,i="Object"==i.constructor.name&&i[r]?i[r]:i,i=i&&i.length>0?i:e,i=Array.isArray(i)?i.map((function(e){return t.getValueField(e)})).join("/"):i,i=this.getValueField(i),i=i&&"Object"==i.constructor.name?Object.values(i).join(" "):i}return i},getField:function(e,t){return e["@"+t]?e["@"+t]:e[t]?e[t]:e},getHTMLMeta:function(e,t,n,i){for(var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o="",a="",c=e.description?e.description:e.summary,l=e.attribution?e.attribution:e.requiredStatement,u=[{label:n,value:t?'<a href="'+t+'" target="_blank">'+t+"</a>":""},{label:"title",value:e.label},{label:"description",value:c},{label:"attribution",value:l},{label:"license",value:e.license},{label:"rights",value:e.rights}],h=["metadata","seeAlso","rendering","homepage"],d=0;d<h.length;d++)u=e[h[d]]?u.concat(e[h[d]]):u;for(var p=0;p<u.length;p++){var f=u[p]["value"]&&u[p]["value"]["label"]?u[p]["value"]["label"]:u[p]["label"],m=(n=this.parseMetaFields(f,r),this.parseMetaFields(u[p]["value"],r));("Dataset"==u[p]["type"]||u[p]["format"])&&(m=this.getId(u[p]),m=m?'<a href="'+m+'">'+m+"</a>":""),"title"!==n||1!=p||i.title||(o=m);var g=!s||"title"!==n;m&&""!==m&&g&&(a+='<div id="'+n+'">'+(n?"<b>"+(n.charAt(0).toUpperCase()+n.slice(1))+": ":"")+"</b>"+m+"</div>")}return{title:o,text:a}},getCanvasId:function(e){var t=this.on_structure(e),n="";return e.target?n=e.target:t&&(n=t[0]&&t[0].full?t.map((function(e){return e.full})):t[0]&&t[0].source?t.map((function(e){return e.source})):this.flatten(t)),n=[].concat(n),n},getSVGoverlay:function(e){var t;if(e){var n=document.createElement("html");n.innerHTML=e;var i=n.getElementsByTagName("path")[0],r=n.getElementsByTagName("svg")[0];r&&(i=r.children[0]),t=i}return t},getAuthor:function(e){var t=[],n=e.creator?e.creator:e["annotatedBy"]?e["annotatedBy"]:e["oa:annotatedBy"]?e["oa:annotatedBy"]:"";n=n["name"]?n["name"]:n["id"]?n["id"]:n,Array.isArray(n)||(n=[n]),n=n.filter((function(e){return null!=e&&""!=e}));for(var i=0;i<n.length;i++){var r=n[i],s=r["name"]?r["name"]:r["label"]?r["label"]:r;t.push(s)}return[].concat(Ob(new Set(t))).join(", ")},getTagDict:function(e,t,n){for(var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s={},o=0;o<e.length;o++){var a,c=e[o].value?e[o].value:e[o],l=e[o].group?this.groupToClass(e[o].group):"";if(""!=c&&c){var u=this.tagsToClass(e[o]);r&&(a=r[u],a=a?a.color:!!r[l]&&r[l].color),t.tagscolor&&(a=t.tagscolor[u],a=a||t.tagscolor[l]);var h=a||"#"+Math.random().toString(16).substr(-6);l&&!t.tagscolor[l]&&(t.tagscolor[l]=h);var d=e.filter((function(e){return i.tagsToClass(e)===u})).length;s[u]={color:h,checked:n,group:e[o]["group"],count:d,key:u,label:c.split("_").join(" ")}}}return s},groupBy:function(e,t){var n=this;return Object.values(e).reduce((function(e,i){var r="function"===typeof t?""+t(i):i[t],s=r||"",o=e[s]=e[s]||{count:0,tags:[],checked:i.checked};return o["tags"].push(i),o["tags"]=n.sortBy(o["tags"],"key"),0==i.checked&&(o["checked"]=!1),o["color"]=i.color,o["count"]+=i["count"],e}),{})},sortBy:function(e,t){return e.sort((function(e,n){return e[t]>n[t]?1:-1}))},parseObject:function(e,t){if("Object"==e.constructor.name){var n=t||Object.keys(e)[0],i=e[n];return"Array"==i.constructor.name?i.join("\n"):i}return e},createContent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="",r="",s="",o=e?Object.values(e).filter((function(e){return e&&e.length>0})):[];if(o.length>0){var a=t||e["language"],c=a&&Nb().isRtlLang(a)?"rtl":"ltr",l='<span style="direction: '+c+';">',u=e["textual_body"],h=e["label"]?'<div class="title">'+this.parseObject(e["label"],t)+"</div>":"",d=e["ocr"];if(t&&u[0]&&u[0]["language"]){var p=u.filter((function(e){return e["language"]===t}));if(p.length>0)i='<div class="'+p[0]["purpose"]+'">'+p[0]["value"]+"</div>";else{var f=kb.getLangLabel(t);i='Translation not avaliable in "'+(f||t)+'"'}}else i=""+u.join("");d=d.length>0?'<div id="ocr">'+d.join("")+"</div>":"";var m=e["authors"]?'<div class="authorship">Written by: '+e["authors"]+"</div>":"",g=e["tags"].length>0?'<div class="tags">Tags: '+e["tags"].map((function(e){return e["value"]?e["value"]:e})).join(", ")+"</div>":"",v=l+(""+h)+"*replacementtext*"+m+(n?"":g)+"</span>"+(e&&e.stylesheet?"<style>"+e.stylesheet+"</style>":"").replace(/\s\s+/g," ");n&&d?i+=d:!i&&d&&(i=d);var y=l+"</span>",T=v.replace("*replacementtext*",i);r=T==y?"":T;var E=d?v.replace("*replacementtext*",d):"";s=E==y?"":E}return{anno:r,transcription:s}},getExtension:function(e){return e.split("?")[0].split(".").slice(-1)[0].toLowerCase()},getTileFormat:function(e){var t=this.getExtension(e);return this.imageextensions.includes(t)&&(e={type:"image",url:""+e}),e},isURL:function(e,t){if(e.constructor==String&&e.indexOf("base64,")>-1){var n=e.split("base64,").slice(-1)[0];e=JSON.parse(atob(n))}var i=this.parseInput(e),r=i.constructor===String,s=t.customid?t.customid:e;return r||(s=t.customid?t.customid:i["@id"]?i["@id"]:i["id"]?i["id"]:Math.random().toString(36).substring(7)),s=s.replace(/\/\s*$/,"").split("/").slice(-2).join("_").replace("-list","").replace(".json",""),{isURL:r,json:i,id:s.replace(/[~`!@#$%^&*()+={};:'"<>.,?]/g,"")}},parseInput:function(e){try{return JSON.parse(document.getElementById(e).innerHTML)}catch(t){return e}},tryJsonParse:function(e){try{return JSON.parse(e.replace(/'/g,'"'))}catch(t){return e}},flatten:function(e,t){return kb.flatten(e,t)},getCanvasTile:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.resource?e.resource:e.body?e.body:e;n=n.items?n.items:n;var i=!!(n&&JSON.stringify(n).indexOf("http://iiif.io/api/image/")>-1);n="Array"==n.constructor.name?n[0]:n;var r=n.service&&"Array"==n.service.constructor.name?this.getId(n.service[0]).split("/full/")[0]:n.service?this.getId(n.service).split("/full/")[0]:this.getId(n);return r=this.iiifOrImageCheck(r,t,i),{canvas_tile:r,img_resource:n}},iiifOrImageCheck:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(this.imageextensions.indexOf(this.getExtension(e))<0||n)&&(e+="/"!==e.slice(-1)?"/":"",t&&(e+="info.json")),e},matchCanvasData:function(e,t,n,i){for(var r=e,s=t.images?t.images:this.flatten(t.items.map((function(e){return e["items"]}))),o=s[0].body&&s[0].body.items?this.flatten(s.map((function(e){return e["body"]["items"]}))):s[0].body&&s[0].body.source?this.flatten(s.map((function(e){return e["body"]["source"]}))):s,a=0;a<s.length;a++)s[a]["body"]&&s[a]["body"]["selector"]&&(o[a]["rotation"]=s[a]["body"]["selector"]["rotation"],o[a]["section"]=s[a]["body"]["selector"]["region"]?s[a]["body"]["selector"]["region"].split(",").map((function(e){return parseInt(e)})):"");if(r=t.label,r=this.getValueField(r),r&&"Object"==r.constructor.name){i=i||Object.keys(r)[0];r=r[i]}return r=Array.isArray(r)?r[0]:r,r=r&&-1==e.indexOf(r)&&1!==n.length?e+=": "+r:e,{images:o,title:r,width:t.width||o[0].resource.width,height:t.height||o[0].resource.height}},getAllCanvases:function(e){return e["items"]?this.flatten(e["items"]):this.flatten(e["sequences"].map((function(e){return e["canvases"]})))},getManifestAnnotations:function(e){return e["otherContent"]?e["otherContent"]:e["annotations"]},matchCanvas:function(e,t,n,i,r){var s=e.sequences?e.sequences[0].canvases:e.items,o=n;if(i)return this.matchCanvasData(n,i,s,r);for(var a=0;a<s.length;a++){var c=t.split("/canvas").slice(-1)[0],l=c?new RegExp(c+"$","g"):new RegExp(t+"$","g"),u=this.getId(s[a]).replace("https","http").replace("/info.json","");if(u===t.replace("https","http")||l.test(u))return this.matchCanvasData(n,s[a],s,r)}return{images:i,title:o}},getVersion:function(e){return e["@context"]&&-1==e["@context"].indexOf("2")?"3":"2"},getImages:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"2",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"default.jpg",s=new RegExp("/+$"),o="2"==i?"full":"max",a=n.split(",").filter(Boolean).length>1?n.split(",")[0]+",":n;e=e.replace(s,"");var c=this.getExtension(e);t.split(",").length>1&&-1==t.indexOf("pct")&&(t=t.split(",").map((function(e){return parseInt(e)})).join(",")),n="full"==n?o:n,a="full"==a?o:a;var l=this.imageextensions.indexOf(c)>-1?e:e+"/"+t+"/"+a+"/0/"+r,u=this.imageextensions.indexOf(c)>-1?e:"full"!==t?e+"/full/"+n+"/0/"+r:"";return{fullImage:u,imageurl:l}},keyboardShortcuts:function(e,t){var n=t.buttons,i={autorun:{icon:n["autorun"],label:"Start/Stop Autorun",shortcut:["b","1"],function:{function:"autoRun",args:""}},reload:{icon:n["reload"],label:"Reload",shortcut:["j","shift+1"],function:{function:"reload",args:""}},info:{icon:n["info"],label:"View source image information",shortcut:["i","2"],function:{function:"clickButton",args:"info"}},home:{icon:'<i class="fas fa-home"></i>',label:"View full image",shortcut:["h","0"],function:{function:"zoom",args:"home"}},zoomin:{icon:'<i class="fas fa-search-plus"></i>',label:"Zoom In",shortcut:["z","+","shift+ArrowUp"],function:{function:"zoom",args:"in"}},zoomout:{icon:'<i class="fas fa-search-minus"></i>',label:"Zoom Out",shortcut:["m","-","shift+ArrowDown"],function:{function:"zoom",args:"out"}},prev:{icon:'<i class="fa fa-arrow-left"></i>',label:"Previous Annotation",shortcut:["p",",","shift+ArrowLeft"],function:{function:"next",args:"prev"}},next:{icon:'<i class="fa fa-arrow-right"></i>',label:"Next Annotation",shortcut:["n",".","shift+ArrowRight"],function:{function:"next",args:"next"}},overlay:{icon:n["overlay"],label:"Toggle overlays",shortcut:["o","4"],function:{function:"createOverlay",args:""}},keyboard:{icon:n["keyboard"],label:"Toggle Keyboard Shortcuts",shortcut:["s","8"],function:{function:"clickButton",args:"keyboard"}},settings:{icon:n["settings"],label:"Change settings",shortcut:["k","q"],function:{function:"clickButton",args:"settings"}},fullscreen:{icon:n["fullscreen"],label:"Toggle Fullscreen",shortcut:["alt+f",";"],function:{function:"toggle_fullscreen",args:""}},hide:{icon:n["hide"],label:"Collapse text",shortcut:["c","7"],function:{function:"hide",args:""}},close:{icon:'<i class="fas fa-times"></i>',label:"Close",shortcut:["x","6"],function:{function:"close",args:"",run:!0}}};("storyboard"==e&&Object.keys(t.tagslist).length>0||"multistoryboard"==e&&t.tags)&&(i["tags"]={icon:n["tags"],label:"Toggle Tags",shortcut:["t","3"],function:{function:"clickButton",args:"tags"}}),("storyboard"==e&&t.layerslist.length>1||"multistoryboard"==e&&t.layerslist)&&(i["layers"]={icon:n["layers"],label:"View Avaliable Layers",shortcut:["l","5"],function:{function:"clickButton",args:"layers"}}),t.settings.tts&&(i["playpause"]={icon:n["playpause"],label:"Play/Pause",shortcut:["v","9"],function:{function:"playpause",args:""}}),t.$parent.range&&t.$parent.rangelist.length>1&&(i["prevanno"]={icon:t.$parent.buttons.rangeprev,label:"Previous Page",shortcut:["alt+p","alt+,","alt+ArrowLeft"],function:{function:"nextItemRange",args:"prev"},run:!0},i["nextanno"]={icon:t.$parent.buttons.rangenext,label:"Next Page",shortcut:["alt+n","alt+.","alt+ArrowRight"],function:{function:"nextItemRange",args:"next"},run:!0});var r="storyboard"==e?t.annotations:this.flatten(t.$children.map((function(e){return e.annotations}))),s=this.flatten(r.filter((function(e){return e&&e.ocr&&e.ocr.length>0}))),o=r.some((function(e){return e&&e.ocr&&e.ocr.length>0&&e.textual_body&&e.textual_body.length>0&&e.ocr!=e.textual_body}));s.length>0&&(i["textoverlay"]={icon:n["textoverlay"],label:"Show OCR text overlay settings box",shortcut:["g","alt+z"],function:{function:"clickButton",args:"textoverlay"}},o&&(i["transcription"]={icon:n.anno,label:"Toggle between transcription/annotation",shortcut:["e","`"],function:{function:"toggletranscription",args:""}})),t.settings.perpage&&(i["perpage"]={icon:n.perpage,label:"Switch the number of pages shown",shortcut:["y"],function:{function:"clickButton",args:"perpage"}}),0==r.length&&(delete i["prev"],delete i["next"],delete i["overlay"],delete i["autorun"]),t.settings.perpage?t.settings.perpage>1&&delete i["autorun"]:t.settings.continousboard&&delete i["autorun"];var a=t.basecompontent&&t.basecompontent.range?t.basecompontent:t;a=a.$parent&&"storyboard2"==a.$parent.$options.name?a.$parent:a;var c=a.isurl;0==c&&delete i["reload"];for(var l=Object.keys(t.settings).filter((function(e){return e.indexOf("hide_")>-1})),u=0;u<l.length;u++)if(t.settings[l[u]]){var h=l[u],d=h.split("_").slice(-1)[0].split("button")[0];delete i[d],"next"==d&&delete i["prev"]}return i},getId:function(e){return e["id"]?e["id"]:e["@id"]?e["@id"]:e}},Fb=__webpack_require__(7698),Hb=__webpack_require__.n(Fb),Ub=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.$parent.shown&&e.show,expression:"$parent.shown && show"}],staticClass:"annotation",class:[e.$parent.booleanitems.isexcerpt?"excerpt":"fullcontent",e.$parent.textposition,e.$parent.settings.toolbarposition?e.$parent.settings.toolbarposition+"_menu_annotation":"",e.$parent.settings.hide_toolbar?"no_toolbar_annotation":""],attrs:{id:e.$parent.seadragonid+"_annotation",tabindex:"0"}},[e.$parent.settings.hide_annocontrols||!0===e.$parent.settings.hide_annocontrols?e._e():t("boxtoolbar",{attrs:{parent:e.$parent}}),"layers"==e.$parent.shown?t("div",{staticClass:"content",attrs:{id:"layers"}},e._l(e.$parent.layerslist,(function(n){return t("div",{key:n.tile},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.checked,expression:"layer.checked"}],staticClass:"tagscheck",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(n.checked)?e._i(n.checked,null)>-1:n.checked},on:{click:function(t){return e.$parent.sendMessage({function:"setOpacity",args:n})},change:function(t){var i=n.checked,r=t.target,s=!!r.checked;if(Array.isArray(i)){var o=null,a=e._i(i,o);r.checked?a<0&&e.$set(n,"checked",i.concat([o])):a>-1&&e.$set(n,"checked",i.slice(0,a).concat(i.slice(a+1)))}else e.$set(n,"checked",s)}}}),t("span",{domProps:{innerHTML:e._s(e.layerLang(n.label))}}),t("div",{staticClass:"slidecontainer"},[e._v("Opacity: "),t("input",{staticClass:"slider",attrs:{type:"range",min:"0",max:"100"},domProps:{value:100*n.opacity},on:{change:function(t){return e.$parent.sendMessage({function:"setOpacity",args:{event:t,layer:n}})}}})])])})),0):e._e(),"textoverlay"==e.$parent.shown?t("textoverlay",{attrs:{parent:e.$parent}}):e._e(),"keyboard"==e.$parent.shown?t("shortcuts",{attrs:{parent:e.$parent}}):e._e(),"tags"==e.$parent.shown?t("tags",{attrs:{parent:e.$parent}}):e._e(),"info"==e.$parent.shown?t("info",{attrs:{parent:e.$parent}}):e._e(),"settings"==e.$parent.shown?t("settings",{attrs:{parent:e.$parent}}):e._e(),"perpage"==e.$parent.shown&&e.show?t("perpage",{attrs:{parent:e.$parent}}):e._e(),"transcription"==e.$parent.shown?t("div",{staticClass:"content",class:e.$parent.currentanno.itemclass,attrs:{id:"transcription"}},[e.$parent.booleanitems.isexcerpt||e.$parent.settings.transcription||e.isscrollview?!e.$parent.booleanitems.isexcerpt&&e.$parent.settings.transcription||e.isscrollview?e._l(e.transcriptions,(function(n,i){return t("button",{key:i,staticClass:"buttonastext",class:[i==e.$parent.position&&"scrollview"!=e.$parent.settings.annoview?"activeword":"","scrollview"==e.$parent.settings.annoview?"scrolltext":"ocrlink"],on:{click:function(t){return e.$parent.sendMessage({function:"next",args:i})}}},[n?t("div",{ref:i,refInFor:!0,staticClass:"ocrtranscription",attrs:{id:"line"+i},domProps:{innerHTML:e._s(n)}}):e._e()])})):e.$parent.booleanitems.isexcerpt?t("span",{domProps:{innerHTML:e._s(e.$parent.$options.filters.truncate(e.$parent.annoContent["transcription"],e.$parent.settings.truncate_length))}}):e._e():t("span",{domProps:{innerHTML:e._s(e.$parent.annoContent["transcription"])}})],2):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:"anno"==e.$parent.shown,expression:"$parent.shown == 'anno'"}],staticClass:"content",class:e.$parent.currentanno.itemclass,attrs:{id:"annotation_text"}},[e.$parent.booleanitems.isexcerpt||e.isscrollview?e.isscrollview?!e.$parent.booleanitems.isexcerpt||e.isscrollview?e._l(e.scrollitems,(function(n,i){return t("button",{key:i,staticClass:"buttonastext scrolltext",on:{click:function(t){return e.$parent.sendMessage({function:"next",args:i})}}},[n?t("div",{ref:i,refInFor:!0,staticClass:"scrollitem",attrs:{id:"line"+i},domProps:{innerHTML:e._s(n)}}):e._e()])})):e._e():t("span",{domProps:{innerHTML:e._s(e.$parent.$options.filters.truncate(e.$parent.annoContent["anno"],e.$parent.settings.truncate_length))}}):t("span",{domProps:{innerHTML:e._s(e.$parent.annoContent["anno"])}}),e.$parent.leaflet?t("div",e._l(e.$parent.annotations,(function(n,i){return t("div",{key:i},[n.geometry?t("leaflet",{directives:[{name:"show",rawName:"v-show",value:e.$parent.position==i&&!e.$parent.booleanitems.isexcerpt,expression:"$parent.position == index && !$parent.booleanitems.isexcerpt"}],key:i,attrs:{parent:e.$parent,position:i,annotation:n}}):e._e()],1)})),0):e._e()],2),e._l(e.updated,(function(n,i){return t("span",{key:i,attrs:{id:i}},[e.$parent.settings[i]&&n?t("span",{domProps:{innerHTML:e._s(e.customCSS(i))}}):e._e()])})),e.$parent.shortcuts["textoverlay"]?t("span",{domProps:{innerHTML:e._s(e.customStyle)}}):e._e()],2)},qb=[],Gb=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"180px"},attrs:{id:this.mapid}})},$b=[],zb={name:"leaflet",data:function(){return{mapid:"",jsonLayer:"",watcher:"",leafletloaded:!1}},props:["position","annotation","parent"],watch:{"parent.basecompontent.leaflet":function(e){this.leafletloaded=e},"parent.leaflet":function(e){this.leafletloaded=e},leafletloaded:function(e){var t=this;1==e&&this.$nextTick((function(){t.addGeometry()}))}},mounted:function(){var e=this.parent.seadragonid?this.parent.seadragonid:this.parent.annotationid;this.mapid=e+"-map-"+this.position,this.leafletloaded=this.parent.basecompontent?this.parent.basecompontent.leaflet:this.parent.leaflet,1!=this.leafletloaded&&this.addLeafletLibrary()},methods:{addLeafletLibrary:function(){var e=this,t=document.getElementsByTagName("head")[0],n="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js",i=Array.from(t.children).some((function(e){return e.src&&e.src.indexOf(n)>-1}));if(i)setTimeout((function(){e.parent.basecompontent?e.parent.basecompontent.leaflet=!0:e.parent.leaflet=!0}),1e3);else{var r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css",t.append(r);var s=document.createElement("script");s.type="text/javascript",s.src=n,s.readyState?s.onreadystatechange=function(){"loaded"!==s.readyState&&"complete"!==s.readyState||(s.onreadystatechange=null,e.parent.basecompontent?e.parent.basecompontent.leaflet=!0:e.parent.leaflet=!0)}:s.onload=function(){e.parent.basecompontent?e.parent.basecompontent.leaflet=!0:e.parent.leaflet=!0},t.appendChild(s)}},retryAdd:function(){var e=this;setTimeout((function(){e.addGeometry()}),10)},addGeometry:function(){var e=this.parent.settings.maplayer&&this.parent.settings.mapattribution?{layer:this.parent.settings.maplayer,attribution:this.parent.settings.mapattribution}:"",t=document.getElementById(this.mapid);if(t&&0==t.classList.length){var n={type:"Feature",geometry:this.annotation["geometry"]},i=L.map(this.mapid),r=e?e["layer"]:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",s=e?e["attribution"]:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';L.tileLayer(r,{attribution:s}).addTo(i);var o=L.geoJSON(n);this.jsonLayer=o,i.addLayer(o);var a=o.getBounds();i.fitBounds(a);var c=i.getZoom();0==c&&(this.watcher=this.$watch("parent.position",(function(e){if(this.position==e){var t=this;setTimeout((function(){o.fire("click"),t.watcher()}),10)}}))),o.on("click",(function(){i.fitBounds(o.getBounds())}));var l=new ResizeObserver((function(){i.invalidateSize()}));l.observe(t)}else t||this.retryAdd()}}},jb=zb;function Vb(e,t,n,i,r,s,o,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),o?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,c):[c]}return{exports:e,options:l}}var Wb=Vb(jb,Gb,$b,!1,null,null,null),Yb=Wb.exports,Xb=function(){var e=this,t=e._self._c;return t("span",{attrs:{id:"annotation_controls"}},[e._l(e.filterButtons,(function(n){return t("button",{key:n,staticClass:"annocontrols_button",class:{inactive:"next"==n&&e.sendparent.next_inactive||"prev"==n&&e.sendparent.prev_inactive},attrs:{"aria-label":e.parent.shortcuts[n]["label"],id:n+"_button"},on:{click:function(t){return e.sendparent.sendMessage(e.parent.shortcuts[n]["function"])}}},[e.parent.buttons[n]?t("span",{domProps:{innerHTML:e._s(e.parent.buttons[n])}}):t("span",{domProps:{innerHTML:e._s(e.parent.shortcuts[n]["icon"])}})])})),e.parent.hastranscription&&e.parent.shortcuts["transcription"]?t("button",{staticClass:"annocontrols_button",attrs:{id:"transcription_button","aria-label":"toggle transcription button"},on:{click:function(t){return e.sendparent.sendMessage(e.parent.shortcuts["transcription"]["function"])}}},[t("span",{domProps:{innerHTML:e._s(e.parent.buttons.anno)}})]):e._e(),e.parent.languages.length>0?t("span",{staticClass:"lang-icon",attrs:{id:"lang_button"}},[t("select",{staticClass:"lang_drop",attrs:{"aria-label":"change language dropdown"},domProps:{innerHTML:e._s(e.parent.languages.join(""))},on:{change:function(t){return e.sendparent.sendMessage({function:"changeLang",args:t})}}})]):e._e(),e.parent.basecompontent&&e.parent.basecompontent.langs&&e.parent.basecompontent.langs.length>1&&"info"==e.parent.shown?t("span",{staticClass:"lang-icon",attrs:{id:"lang_button"}},[t("select",{staticClass:"lang_drop",attrs:{"aria-label":"change language dropdown"},domProps:{innerHTML:e._s(e.parent.basecompontent.langs.join(""))},on:{change:function(t){return e.parent.sendMessage({function:"changeLang",args:t})}}})]):e._e()],2)},Kb=[],Qb={props:["parent"],name:"boxtoolbar",data:function(){return{toolbarbuttons:["close","hide","playpause","tags","info","prev","next","settings"],sendparent:""}},created:function(){this.sendparent=this.parent.$parent.multi?this.parent.$parent:this.parent},computed:{filterButtons:function(){var e=this;return this.toolbarbuttons.filter((function(t){return e.parent.shortcuts&&e.parent.shortcuts[t]}))}}},Zb=Qb,Jb=Vb(Zb,Xb,Kb,!1,null,null,null),ew=Jb.exports,tw=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content",attrs:{id:"textoverlay"}},[t("b",[e._v("Text Overlay")]),t("input",{key:e.parent.booleanitems.istextoverlaytoggled,staticClass:"toggletextoverlay",attrs:{id:e.parent.seadragonid+"toggletextoverly",type:"checkbox"},domProps:{checked:e.parent.booleanitems.istextoverlaytoggled},on:{change:function(t){return e.sendparent.sendMessage({function:"createOverlay",args:"textoverlay"})}}}),t("label",{staticClass:"toggletextoverlaylabel",attrs:{for:e.parent.seadragonid+"toggletextoverly"}},[e._v("Toggle text overlay")]),t("p",[t("label",{attrs:{for:"backgroundcolor"}},[e._v("Background Color: ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sendparent.textoverlay.background,expression:"sendparent.textoverlay.background"}],attrs:{type:"color",id:"backgroundcolor"},domProps:{value:e.sendparent.textoverlay.background},on:{input:function(t){t.target.composing||e.$set(e.sendparent.textoverlay,"background",t.target.value)}}})]),t("p",[t("label",{attrs:{for:"fontcolor"}},[e._v("Font Color: ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sendparent.textoverlay.fontcolor,expression:"sendparent.textoverlay.fontcolor"}],attrs:{type:"color",id:"fontcolor"},domProps:{value:e.sendparent.textoverlay.fontcolor},on:{input:function(t){t.target.composing||e.$set(e.sendparent.textoverlay,"fontcolor",t.target.value)}}})]),t("p",{staticClass:"slidecontainer"},[t("label",{attrs:{for:"textoverlayopacity"}},[e._v("Opacity:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sendparent.textoverlay.opacity,expression:"sendparent.textoverlay.opacity"}],staticClass:"slider",attrs:{id:"textoverlayopacity",type:"range",min:"0",max:"100"},domProps:{value:e.sendparent.textoverlay.opacity},on:{__r:function(t){return e.$set(e.sendparent.textoverlay,"opacity",t.target.value)}}})])])},nw=[],iw={props:["parent"],name:"textoverlay",data:function(){return{sendparent:""}},watch:{"sendparent.textoverlay":{deep:!0,handler:function(){for(var e=["background","fontcolor","opacity"],t=0;t<e.length;t++)window.annonasettings["textoverlay"+e[t]]=this.sendparent.textoverlay[e[t]]}}},created:function(){this.sendparent=this.parent.$parent&&this.parent.$parent.multi?this.parent.$parent:this.parent}},rw=iw,sw=Vb(rw,tw,nw,!1,null,null,null),ow=sw.exports,aw=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content",attrs:{id:"shortcuts"}},[t("p",[e._v("There are multiple possible keyboard shortcuts for each button. They are separated by an 'or'. On Macs 'alt' is the 'option' key. ")]),e.parent.booleanitems.isexcerpt?e._e():t("table",[e._m(0),e._l(e.shortcuts,(function(n,i){return t("tr",{key:i,staticClass:"keyboard",attrs:{id:i+"_tags"}},[t("td",[t("span",{staticClass:"shortcuticon",domProps:{innerHTML:e._s(n.icon+" ("+n.label+")")}})]),t("td",e._l(n.shortcut,(function(i,r){return t("span",{key:i},[t("code",[e._v(e._s(i))]),r!=n.shortcut.length-1?t("span",[e._v(" or ")]):e._e()])})),0)])}))],2)])},cw=[function(){var e=this,t=e._self._c;return t("tr",[t("th",[e._v("Icon")]),t("th",[e._v("Keyboard shortcuts")])])}],lw={props:["parent"],name:"shortcuts",data:function(){return{shortcuts:[]}},created:function(){this.shortcuts=this.parent.$parent.multi?this.parent.$parent.shortcuts:this.parent.shortcuts}},uw=lw,hw=Vb(uw,aw,cw,!1,null,null,null),dw=hw.exports,pw=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content",attrs:{id:"tags"}},e._l(e.parent.groupTagDict,(function(n,i){return t("div",{key:i,staticClass:"tagslist"},[i?t("div",{staticClass:"taggroup tags",attrs:{id:i+"_tags"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.checked,expression:"groupval.checked"}],staticClass:"tagscheck",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(n.checked)?e._i(n.checked,null)>-1:n.checked},on:{click:function(t){return e.parent.sendMessage({function:"checksubgrouptags",args:i})},change:function(t){var i=n.checked,r=t.target,s=!!r.checked;if(Array.isArray(i)){var o=null,a=e._i(i,o);r.checked?a<0&&e.$set(n,"checked",i.concat([o])):a>-1&&e.$set(n,"checked",i.slice(0,a).concat(i.slice(a+1)))}else e.$set(n,"checked",s)}}}),t("div",{staticClass:"countkey"},[e._v(" "+e._s(i)+" "),t("span",{staticClass:"tagscount",style:"background: "+n.color},[e.parent.settings.hide_tagcount?e._e():t("span",[e._v(" "+e._s(n.count)+" ")])])])]):e._e(),e._l(n.tags,(function(n){return t("div",{key:n.key,staticClass:"tags",class:{subtags:i},attrs:{id:n.key+"_tags"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.checked,expression:"tagdict.checked"}],staticClass:"tagscheck",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(n.checked)?e._i(n.checked,null)>-1:n.checked},on:{click:function(t){return e.parent.sendMessage({function:"hideshowalltags",args:n.key})},change:function(t){var i=n.checked,r=t.target,s=!!r.checked;if(Array.isArray(i)){var o=null,a=e._i(i,o);r.checked?a<0&&e.$set(n,"checked",i.concat([o])):a>-1&&e.$set(n,"checked",i.slice(0,a).concat(i.slice(a+1)))}else e.$set(n,"checked",s)}}}),t("div",{staticClass:"countkey"},[e._v(" "+e._s(n.label)+" "),t("span",{staticClass:"tagscount",style:"background: "+n.color},[e.parent.settings.hide_tagcount?e._e():t("span",[e._v(" "+e._s(n.count)+" ")])])])])}))],2)})),0)},fw=[],mw={props:["parent"],name:"tags"},gw=mw,vw=Vb(gw,pw,fw,!1,null,null,null),yw=vw.exports,Tw=function(){var e=this,t=e._self._c;return t("div",{staticClass:"info content",staticStyle:{height:"auto"},attrs:{id:"information"}},[t("div",{staticClass:"imagetitle"},[t("h1",{domProps:{innerHTML:e._s(e.title)}})]),e.parent.booleanitems.isexcerpt?e._e():t("span",[e.parent.settings.additionalinfo?t("button",{staticClass:"infolink buttonlink",on:{click:function(t){return e.parent.sendMessage({function:"switchShown",args:"additionalinfoshown"})}}},[e._v(e._s(e.parent.settings.additionalinfotitle))]):e._e(),e.parent.booleanitems.additionalinfoshown?t("div",{staticClass:"imageinfo",domProps:{innerHTML:e._s(e.parent.settings.additionalinfo)}}):e._e(),e.parent.basecompontent.range&&e.parent.basecompontent.collection&&e.parent.basecompontent.collection["manifests"].length>1?t("button",{staticClass:"infolink buttonlink",on:{click:function(t){return e.parent.sendMessage({function:"switchShown",args:"collectioninfoshown"})}}},[e._v(" Collection: "+e._s(e.parent.basecompontent.collection.label)+" ")]):e._e(),e.parent.booleanitems.collectioninfoshown?t("div",{staticClass:"collectioninfo"},[e.parent.basecompontent.collection.metadata?t("div",{domProps:{innerHTML:e._s(e.parent.basecompontent.collection.metadata)}}):e._e(),t("collections",{attrs:{nodes:e.parent.basecompontent.collection["manifests"],parents:e.parent.basecompontent,depth:0}})],1):e._e(),e.parent.basecompontent.range&&e.parent.basecompontent.toc.length>1?t("button",{staticClass:"infolink buttonlink",on:{click:function(t){return e.parent.sendMessage({function:"switchShown",args:"tocshown"})}}},[e._v(e._s(e.parent.basecompontent.toctitle))]):e._e(),e.parent.booleanitems.tocshown?t("div",{staticClass:"tocinfo"},e._l(e.parent.basecompontent.toc,(function(n,i){return t("div",{key:i,attrs:{id:"data_"+n.position}},[t("div",{staticClass:"title"},[t("button",{staticClass:"buttonlink",on:{click:function(t){return e.parent.basecompontent.nextItemRange(n.position)}}},[n.thumbnail?t("img",{staticStyle:{"max-width":"30px"},attrs:{src:n.thumbnail}}):e._e(),e._v(e._s(i+1)+". "+e._s(n.label)+" ")])]),n.description?t("div",{staticClass:"additionaltext",domProps:{innerHTML:e._s(n.description)}}):e._e()])})),0):e._e(),e.annotations.length>0?t("button",{staticClass:"infolink buttonlink annoinfolink",on:{click:function(t){return e.parent.sendMessage({function:"switchShown",args:"annoinfoshown"})}}},[e._v("Annotation information")]):e._e(),e.parent.booleanitems.annoinfoshown?t("div",{staticClass:"annoinfo"},e._l(e.annotations,(function(n,i){return t("span",{key:i+"_"+n.annodata.position},[n.text&&e.annotations.length>1?t("h2",{staticClass:"boardnumber"},[e._v("Board "+e._s(i+1))]):e._e(),t("span",{domProps:{innerHTML:e._s(n.text)}}),i==e.annotations.length-1?t("span",[t("b",[e._v("Number of Annotations:")]),e._v(" "+e._s(n.annodata.length))]):e._e(),t("div",{staticClass:"annotationslist"},e._l(n.annodata,(function(r){return t("div",{key:r.position,attrs:{id:"data_"+i+"_"+r.position}},[t("div",{staticClass:"title"},[t("button",{staticClass:"buttonlink",on:{click:function(e){return n.parent.sendMessage({function:"next",args:r.position})}}},[e._v(e._s(r.title))])]),t("div",{staticClass:"additionaltext",domProps:{innerHTML:e._s(r.additionaltext)}})])})),0)])})),0):e._e(),e.imageinfo.length>0?t("button",{staticClass:"infolink buttonlink imageinfolink",on:{click:function(t){return e.parent.sendMessage({function:"switchShown",args:"imageinfoshown"})}}},[e._v(e._s(e.parent.imageinfo.label))]):e._e(),e._l(e.imageinfo,(function(n,i){return e.parent.booleanitems.imageinfoshown?t("div",{key:i},[e.imageinfo.length>1?t("h2",{staticClass:"boardnumber"},[e._v("Board "+e._s(i+1))]):e._e(),t("div",{staticClass:"imageinfo",domProps:{innerHTML:e._s(n.text)}})]):e._e()}))],2)])},Ew=[],_w=function(){var e=this,t=e._self._c;return t("ul",{staticClass:"tree-menu",class:[{toplevel:0==e.depth},"level-"+e.depth],attrs:{"data-label":e.label}},[t("li",[e.nodedata?t("div",{staticClass:"title",class:[e.active?"activecollection":e.className]},[t("button",{staticClass:"buttonlink",attrs:{id:e.nodedata.id},on:{click:function(t){return e.checkCollapse(e.nodedata)}}},[e.nodedata.thumbnail?t("img",{staticStyle:{"max-width":"30px"},attrs:{src:e.nodedata.thumbnail}}):e._e(),"collection"==e.nodedata.type&&e.showChildren?t("span",[t("i",{staticClass:"fas fa-chevron-up collectionicon"})]):"collection"!=e.nodedata.type||e.showChildren?e._e():t("span",[t("i",{staticClass:"fas fa-chevron-down collectionicon"})]),e._v(e._s(e.nodedata.label)+" "),"collection"!=e.nodedata.type?t("span",[t("i",{staticClass:"fas fa-arrow-right collectionicon"})]):e._e()])]):e._e(),e.nodedata&&e.nodedata.description?t("div",{staticClass:"additionaltext",domProps:{innerHTML:e._s(e.nodedata.description)}}):e._e(),e._l(e.nodesdata,(function(n,i){return t("collections",{directives:[{name:"show",rawName:"v-show",value:e.showChildren||0==e.depth,expression:"showChildren || depth == 0"}],key:e.depth+"-"+i,attrs:{nodes:n.manifests,label:n.label,node:n,thumbnail:n.thumbnail,parents:e.parents,index:i,depth:e.depth+1}})}))],2)])},bw=[],ww={props:["label","index","nodes","depth","id","node","description","parents","thumbnail"],data:function(){return{showChildren:!1,currentcount:"",selected:!1,nodedata:"",nodesdata:[],caretdirection:this.showChildren?"down":"up",parentDescription:"",parentTitle:"",active:!1}},name:"collections",watch:{"parents.annotationurl":function(){this.updateActive()}},mounted:function(){this.nodedata=this.node?JSON.parse(JSON.stringify(this.node)):"",this.nodesdata=this.nodes?JSON.parse(JSON.stringify(this.nodes)):[],this.updateActive()},computed:{className:function(){var e=void 0!=this.$parent.index?this.$parent.index+1+this.index:this.index,t=e%2?"odd":"even";return t}},methods:{updateActive:function(){if(this.nodedata.id==this.parents.annotationurl["manifest"]){this.active=!0;for(var e=this.$parent,t=this.depth;t>0;t--)e.showChildren=!0,e=e.$parent}},checkCollapse:function(e){e["manifests"]||this.parents.updateCollectionManifest(e,!1,this),this.showChildren=!this.showChildren}}},Sw=ww,Aw=Vb(Sw,_w,bw,!1,null,null,null),Cw=Aw.exports,xw={props:["parent"],components:{collections:Cw},name:"info",data:function(){return{title:[],annotations:[],imageinfo:""}},watch:{"parent.imagetitle":function(){this.buildTitles()}},created:function(){this.buildTitles()},methods:{buildTitles:function(){this.title=[this.parent.imagetitle];var e=this.parent.annoinfo;if(e.text&&(e["parent"]=this.parent,this.annotations=[e]),this.imageinfo=[this.parent.imageinfo],this.parent.$parent.multi){if(this.parent.basecompontent.range){this.title=[this.parent.settings.title];var t=this.parent.basecompontent.position,n=this.parent.basecompontent.position+this.parent.basecompontent.settings.perpage;t!=n&&this.parent.settings.perpage>1&&(this.title=this.title.concat(this.parent.basecompontent.toc.slice(t,n).map((function(e){return e.label}))))}else this.title=[];var i=this.parent.$parent.boardchildren;this.imageinfo=[],this.annotations=[];for(var r=0;r<i.length;r++){if(!this.parent.basecompontent.range){var s=i[r].imagetitle;this.title.push(s)}var o=this.imageinfo.map((function(e){return e.link}));if(-1==o.indexOf(i[r].imageinfo.link)&&this.imageinfo.push(i[r].imageinfo),i[r].annoinfo){var a=i[r].annoinfo;a.text&&(a["parent"]=i[r],this.annotations.push(a))}}this.parent.$parent.isreverse&&(this.imageinfo=this.imageinfo.reverse(),this.annotations=this.annotations.reverse())}this.title=this.title.join("<br>")}}},Iw=xw,Nw=Vb(Iw,Tw,Ew,!1,null,null,null),kw=Nw.exports,Ow=function(){var e=this,t=e._self._c;return t("div",[t("label",{attrs:{for:"perpage"}},[e._v("Images per page: ")]),e.arraylist?t("select",{directives:[{name:"model",rawName:"v-model",value:e.perpage,expression:"perpage"}],attrs:{id:"perpage",name:"perpage"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.perpage=t.target.multiple?n:n[0]},function(t){return e.updatePerPage()}]}},e._l(e.arraylist,(function(n){return t("option",{key:n,domProps:{value:n+1}},[e._v(e._s(n+1))])})),0):e._e()])},Rw=[],Dw={props:["parent"],name:"perpage",data:function(){return{arraylist:!1,perpage:1}},created:function(){var e=this.parent.basecompontent.rangelist.length,t=this.parent.basecompontent.settings.perpage;e<this.parent.basecompontent.settings.perpage&&(t=e),this.perpage=t,this.arraylist=Array(e).keys()},methods:{updatePerPage:function(){window.annonasettings["perpage"]=this.perpage;var e=this.parent.basecompontent.position;this.parent.basecompontent.settings.perpage=this.perpage,this.parent.basecompontent.rangelist=[],this.parent.basecompontent.toc=[],this.parent.basecompontent.manifestOrRange(this.parent.basecompontent.rangecontents),this.parent.basecompontent.ready=!1;var t=this;this.parent.basecompontent.position=parseInt(e/this.perpage)*this.perpage,setTimeout((function(){t.parent.basecompontent.ready=!0}),1e3)}}},Pw=Dw,Lw=Vb(Pw,Ow,Rw,!1,null,null,null),Mw=Lw.exports,Bw=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content",attrs:{id:"settings"}},e._l(e.settingfields,(function(n){return t("div",{key:n,staticClass:"setting"},["boolean"==e.settings[n]["type"]?t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.settings[n]["value"],expression:"settings[setting]['value']"}],staticClass:"settings",attrs:{type:"checkbox",id:n},domProps:{checked:Array.isArray(e.settings[n]["value"])?e._i(e.settings[n]["value"],null)>-1:e.settings[n]["value"]},on:{change:[function(t){var i=e.settings[n]["value"],r=t.target,s=!!r.checked;if(Array.isArray(i)){var o=null,a=e._i(i,o);r.checked?a<0&&e.$set(e.settings[n],"value",i.concat([o])):a>-1&&e.$set(e.settings[n],"value",i.slice(0,a).concat(i.slice(a+1)))}else e.$set(e.settings[n],"value",s)},function(t){return e.updateSettings(n)}]}}),t("label",{attrs:{for:n}},[e._v(" "+e._s(e.settings[n]["label"]))]),t("i",{staticClass:"fas fa-info-circle settingsinfo",on:{click:function(t){e.settings[n]["descshown"]=!e.settings[n]["descshown"]},mouseover:function(t){e.settings[n]["descshown"]=!0},mouseleave:function(t){e.settings[n]["descshown"]=!1}}},[e.settings[n]["descshown"]?t("span",{staticClass:"settingsabout"},[e._v(e._s(e.settings[n]["description"]))]):e._e()])]):"text"==e.settings[n]["type"]?t("div",[t("label",{attrs:{for:n}},[e._v(e._s(e.settings[n]["label"]))]),t("i",{staticClass:"fas fa-info-circle settingsinfo",on:{click:function(t){e.settings[n]["descshown"]=!e.settings[n]["descshown"]},mouseover:function(t){e.settings[n]["descshown"]=!0},mouseleave:function(t){e.settings[n]["descshown"]=!1}}},[e.settings[n]["descshown"]?t("span",{staticClass:"settingsabout"},[e._v(e._s(e.settings[n]["description"]))]):e._e()]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.settings[n]["value"],expression:"settings[setting]['value']"}],staticClass:"settings",attrs:{id:n},domProps:{value:e.settings[n]["value"]},on:{change:function(t){return e.updateSettings(n)},input:function(t){t.target.composing||e.$set(e.settings[n],"value",t.target.value)}}})]):"color"==e.settings[n]["type"]?t("div",[t("label",{attrs:{for:n}},[e._v(e._s(e.settings[n]["label"]))]),t("i",{staticClass:"fas fa-info-circle settingsinfo",on:{click:function(t){e.settings[n]["descshown"]=!e.settings[n]["descshown"]},mouseover:function(t){e.settings[n]["descshown"]=!0},mouseleave:function(t){e.settings[n]["descshown"]=!1}}},[e.settings[n]["descshown"]?t("span",{staticClass:"settingsabout"},[e._v(e._s(e.settings[n]["description"]))]):e._e()]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.settings[n]["value"],expression:"settings[setting]['value']"}],attrs:{type:"color",id:n},domProps:{value:e.settings[n]["value"]},on:{change:function(t){return e.updateSettings(n)},input:function(t){t.target.composing||e.$set(e.settings[n],"value",t.target.value)}}})]):"taglist"==e.settings[n]["type"]&&Object.keys(e.settings[n]["value"]).length>0?t("div",[t("h1",{staticStyle:{"font-size":"1em"}},[e._v("Change color for tags "),t("i",{staticClass:"fas fa-info-circle settingsinfo",on:{click:function(t){e.settings[n]["descshown"]=!e.settings[n]["descshown"]},mouseover:function(t){e.settings[n]["descshown"]=!0},mouseleave:function(t){e.settings[n]["descshown"]=!1}}},[e.settings[n]["descshown"]?t("span",{staticClass:"settingsabout"},[e._v(e._s(e.settings[n]["description"]))]):e._e()])]),e._l(e.settings[n]["value"],(function(i,r){return t("div",{key:r},[t("label",{attrs:{for:r}},[e._v(e._s(r)+": ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.settings[n]["value"][r],expression:"settings[setting]['value'][key]"}],attrs:{type:"color",id:r},domProps:{value:e.settings[n]["value"][r]},on:{change:function(t){return e.updateSettings(n)},input:function(t){t.target.composing||e.$set(e.settings[n]["value"],r,t.target.value)}}})])}))],2):"choice"==e.settings[n]["type"]?t("div",[t("label",{attrs:{for:n}},[e._v(e._s(e.settings[n]["label"]))]),t("i",{staticClass:"fas fa-info-circle settingsinfo",on:{click:function(t){e.settings[n]["descshown"]=!e.settings[n]["descshown"]},mouseover:function(t){e.settings[n]["descshown"]=!0},mouseleave:function(t){e.settings[n]["descshown"]=!1}}},[e.settings[n]["descshown"]?t("span",{staticClass:"settingsabout"},[e._v(e._s(e.settings[n]["description"]))]):e._e()]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.settings[n]["value"],expression:"settings[setting]['value']"}],staticClass:"settings",attrs:{name:n,id:n},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.settings[n],"value",t.target.multiple?i:i[0])},function(t){return e.updateSettings(n)}]}},e._l(e.settings[n]["choices"],(function(n){return t("option",{key:n["value"]?n["value"]:n,domProps:{value:n["value"]?n["value"]:n}},[e._v(e._s(n["label"]?n["label"]:n)+" ")])})),0)]):e._e()])})),0)},Fw=[],Hw={props:["parent"],name:"settings",data:function(){return{forceupdate:["toolbarposition","fontsize","annoview","textposition","tagscolor"],settings:{overlaynext:{type:"boolean",value:!1,label:"Overlay Next",description:"When overlays are toggled off, the overlay will appear for the current annotation.",descshown:!1},matchclick:{type:"boolean",value:!1,label:"Match Click",description:"When clicking on overlays, on the other boards it will go to the corresponding annotation. By default it goes to the corresponding location on the image, not the corresponding annotation.",descshown:!1},tts:{type:"choice",value:"none",choices:[{label:"Disabled",value:"none"},{label:"Autodetect",value:!0}],label:"Text to Speech",description:"Enabled Text to Speech on the board. You can choose a langague or choose autodetect which will choose the language set in the annotation.",descshown:!1},fit:{type:"choice",value:"vertical",choices:["horizontal","fill","vertical"],label:"Image Fit",description:"When hitting the home button, which edge the image fits to the viewer on. Fill will fill the viewer window.",descshown:!1},panorzoom:{type:"choice",value:"zoom",choices:["pan","zoom"],label:"Pan or Zoom",description:"When navigating to an annotation zoom to constraints of annotation, or use current zoom to pan to annotation.",descshown:!1},fontsize:{type:"text",value:"20",label:"Font size",description:"Font size of text in annotation box (what you are currently interacting with to change settings).",descshown:!1},autorun_interval:{type:"text",value:"3",label:"Autorun Interval",description:"When using the auto run button (magic wand) the time it takes between going to the next annotation.",descshown:!1},overlaycolor:{type:"color",value:"#ADD8E6",label:"Overlay Color",description:"Change the color of the overlays shown when the overlay layer is toggled.",descshown:!1},activecolor:{type:"color",value:"#FFFF00",label:"Active Color",description:"Change the color that highlights the current annotation selected.",descshown:!1},toolbarposition:{type:"choice",value:"top",choices:["top","bottom"],label:"Toolbar position",description:"Position of the toolbar",descshown:!1},textposition:{type:"choice",value:"none",choices:["none","top","bottom","left","right"],label:"Info related to image",description:"Change the position of the annotation box. By default it is in upper right hand corner. This choice will place the annotation to the top, bottom, left, right of the annotated area.",descshown:!1},annoview:{type:"choice",value:"default",choices:["default","sidebyside","collapse","scrollview"],label:"Sidebar View",descshown:!1,description:"Types of sidebar views avaliable outide of the default."},startenddisplay:{type:"choice",value:"none",choices:["none","tags","info","transcription","keyboard","settings"],label:"Start/End display",description:"When annotations are not visible set a default annotation view.",descshown:!1},tagscolor:{value:{},type:"taglist",description:"Your annotations have tags, these tags have a randomly generated color. These colors can be changed with this section.",descshown:!1}},settingfields:[]}},watch:{"parent.currentlang":function(){this.parent.settings.tts&&(this.settings["tts"]["value"]=this.parent.currentlang)}},created:function(){var e=Object.keys(kb.languages()).map((function(e){return JSON.parse('{"value": "'+e+'", "label": "'+kb.getLangLabel(e)+'"}')}));if(this.settings["tts"]["choices"]=this.settings["tts"]["choices"].concat(e),this.parent.languages)for(var t=/<option value="(.*)">(.*)<\/option>/gm,n=0;n<this.parent.languages.length;n++){var i=this.regexmatch(t,this.parent.languages[n].replace(" selected",""));this.settings["tts"]["choices"].push({value:i[1].split('"')[0],label:i[2]})}"multistoryboard"!==this.parent.basecompontent.$options.name&&delete this.settings["matchclick"];var r="multistoryboard"==this.parent.$parent.$options.name?kb.flatten(this.parent.$parent.boardchildren.map((function(e){return e.annotations}))):this.parent.annotations;for(var n in 0==r.length&&(delete this.settings["tts"],delete this.settings["overlaynext"],delete this.settings["autorun_interval"],delete this.settings["overlaycolor"],delete this.settings["activecolor"],delete this.settings["textposition"],delete this.settings["annoview"],delete this.settings["startenddisplay"],delete this.settings["panorzoom"]),this.settings)Object.keys(this.parent.settings).indexOf(n)>-1&&(n.indexOf("color")>-1&&"tagscolor"!=n&&-1==this.parent.settings[n].indexOf("rgb")&&-1==this.parent.settings[n].indexOf("#")&&(this.parent.settings[n]=this.colorToHex(this.parent.settings[n])),this.settings[n]["value"]=this.parent.settings[n]);var s=this.parent.$parent.tagslist?this.parent.$parent.tagslist:this.parent.tagslist;if(s){for(var o in s)this.settings["tagscolor"]["value"][o]=this.colorToHex(s[o]["color"]);Object.keys(s).length>0&&(this.parent.settings["tagscolor"]=this.settings["tagscolor"]["value"])}this.settingfields=Object.keys(this.settings)},methods:{regexmatch:function(e,t){var n=new RegExp(e);return n.exec(t)},colorToHex:function(e){var t=kb.hexDict();return t[e]?t[e]:e},deleteAnnoOverlay:function(e){var t=document.getElementById(e.seadragonid+"_annotation");e.viewer.removeOverlay(e.seadragonid+"_annotation"),e.textposition="corner",document.getElementById(""+e.seadragonid).appendChild(t),0==e.boardnumber&&(t.style.maxWidth="",t.style.maxHeight="",t.style.display="")},updateSettings:function(e){var t=this.parent.$parent&&"multistoryboard"==this.parent.$parent.$options.name?this.parent.$parent:this.parent,n=!1;"none"==this.settings[e]["value"]||"default"==this.settings[e]["value"]?(delete this.parent.settings[e],"textposition"==e&&(n=!0)):this.parent.settings[e]=this.settings[e]["value"],t.settings=this.parent.settings;var i=!1;if(this.parent.basecompontent)if(this.parent.basecompontent.settings=this.parent.settings,this.parent.$parent.boardchildren){i=this.parent.$parent.boardchildren,n&&this.deleteAnnoOverlay(this.parent.$parent.boardchildren[0]);for(var r=1;r<i.length;r++)this.parent.$parent.boardchildren[r].settings=this.parent.settings,n&&this.deleteAnnoOverlay(this.parent.$parent.boardchildren[r])}else n&&this.deleteAnnoOverlay(this.parent);if("color"==this.settings[e]["type"]||this.forceupdate.indexOf(e)>-1){if(t.$forceUpdate(),i)for(var s=0;s<i.length;s++)i[s].$forceUpdate();Object.keys(this.$parent.updated).indexOf(e)>-1&&(this.$parent.updated[e]=!0,"overlaycolor"==e&&(this.$parent.updated["tagscolor"]=!0,this.parent.settings["activecolor"]=this.settings["activecolor"]["value"],this.$parent.updated["activecolor"]=!0)),this.$parent.$forceUpdate()}window.annonasettings=this.parent.settings}}},Uw=Hw,qw=Vb(Uw,Bw,Fw,!1,null,null,null),Gw=qw.exports,$w={name:"annotationbox",data:function(){return{transcriptions:[],scrollitems:[],isscrollview:!1,updatedto:"",show:!0,updated:{tagscolor:!1,fontsize:!1,overlaycolor:!1,activecolor:!1}}},components:{leaflet:Yb,boxtoolbar:ew,textoverlay:ow,shortcuts:dw,tags:yw,info:kw,perpage:Mw,settings:Gw},watch:{"$parent.annotations":function(){this.scrollContent(0==this.$parent.annotations.length)},"$parent.currentlang":function(){this.scrollContent(!0)},"$parent.shown":function(e){var t=["perpage","textoverlay","keyboard","info","settings"];this.$parent.$parent&&this.$parent.$parent.multi&&t.indexOf(e)>-1?this.show=this.$parent.$parent.boardchildren[0].seadragonid==this.$parent.seadragonid:this.show=!0},"$parent.position":function(e){var t=this;this.updatedto.toString()!=e.toString()&&this.$refs[e]&&this.$nextTick((function(){var n=t.$refs[e][0],i=n.offsetTop-t.padding/2;t.$el.scrollTo(0,i)}))}},mounted:function(){"scrollview"==this.$parent.settings.annoview&&this.$el.addEventListener("scroll",this.handleScroll),this.scrollContent(0==this.$parent.annotations.length)},created:function(){for(var e in this.isscrollview="scrollview"==this.$parent.settings.annoview,this.updated)this.$parent.settings[e]&&(this.updated[e]=!0)},methods:{scrollContent:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.$parent.settings.transcription||this.isscrollview||this.$parent.leaflet){e&&(this.scrollitems=[],this.transcriptions=[]);for(var t=0;t<this.$parent.annotations.length;t++){var n=this.$parent.createAnnoContent(this.$parent.annotations[t]),i=n["transcription"]?n["transcription"]:n["anno"];this.transcriptions.push(i),this.scrollitems.push(n["anno"])}}},layerLang:function(e){var t=this.$parent.currentlang,n="Object"==e.constructor.name,i=e;return n&&(i=t&&-1!=Object.keys(e).indexOf(t)?e[t]:e[Object.keys(e)[0]]),i=Array.isArray(i)?i.join(" | "):i,i},customCSS:function(e){return'<style type="text/css">'+this["custom"+e]()+"</style>"},customtagkey:function(e,t){return"#"+this.cssID+" #"+e+"_tags .tagscount{\n        background: "+t+"!important;\n      }\n      "},customtagscolor:function(){var e="";for(var t in this.$parent.settings.tagscolor){var n=this.$parent.settings.tagscolor[t];e+=this.customoverlaycolor(t,n),e+=this.customtagkey(t,n)}return e},customactivecolor:function(){return"#"+this.cssID+" .active > svg .svgactive {\n        stroke: "+this.$parent.settings["activecolor"]+"!important;\n      }\n      #"+this.cssID+" .active.rect {\n        outline-color: "+this.$parent.settings["activecolor"]+"!important;\n      }\n      #"+this.cssID+" .active.pin {\n        -webkit-text-stroke: "+this.$parent.settings["activecolor"]+"!important;\n      }\n      #"+this.cssID+" .pin.overlay.active circle, rect {\n        stroke: "+this.$parent.settings["activecolor"]+"!important;\n      }\n      "},customoverlaycolor:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e?"#"+this.cssID+" ."+e:"#"+this.cssID+" ",i=t||this.$parent.settings["overlaycolor"];return n+".overlay > svg > * {\n        stroke: "+i+"!important;\n      } "+n+".rect {\n        border-color: "+i+"!important;\n      } "+n+".pin {\n        color: "+i+"!important;\n      }"},customfontsize:function(){var e=this.$parent.settings.fontsize.length>2?"":"px";return"#"+this.cssID+" .content, #"+this.cssID+" .content > *, #"+this.cssID+" .content > * > *{font-size: "+this.$parent.settings.fontsize+e+"!important}"},handleScroll:function(){if("transcription"==this.$parent.shown||"anno"==this.$parent.shown)for(var e in this.$refs){var t=this.$refs[e][0],n=t.offsetTop-this.padding,i=n+t.offsetHeight+this.padding,r=parseInt(e);n<=this.$el.scrollTop&&this.$el.scrollTop<=i&&this.$parent.position!=r&&(this.$parent.$parent.multi?this.$parent.$parent.sendMessage({function:"next",args:r}):this.$parent.sendMessage({function:"next",args:r}),this.updatedto=r)}}},computed:{padding:function(){return(this.$refs["1"][0].offsetTop-this.$refs["0"][0].offsetTop)/1.1},cssID:function(){return this.$parent.$parent&&this.$parent.$parent.storyboardcontainerid?this.$parent.$parent.storyboardcontainerid:this.$parent.seadragonid},customStyle:function(){return'<style type="text/css">#'+this.cssID+" .textoverlay { fill: "+this.$parent.textoverlay.fontcolor+";\n      background: "+this.$parent.textoverlay.background+";\n      opacity: "+this.$parent.textoverlay.opacity/100+";\n      }\n      #"+this.cssID+" .textoverlaywithpath {\n        background: none;\n      }\n      #"+this.cssID+" .svgBackground { fill: "+this.$parent.textoverlay.background+";\n      opacity: "+this.$parent.textoverlay.opacity/100+";\n      }</style>\n      "}}},zw=$w,jw=Vb(zw,Ub,qb,!1,null,null,null),Vw=jw.exports,Ww=function(){var e=this,t=e._self._c;return!e.$parent.settings.hide_toolbar&&e.$parent.shortcuts?t("span",{class:e.menuclass,attrs:{id:"header_toolbar"}},e._l(e.filteredButtons,(function(n){return t("button",{key:n,staticClass:"toolbarButton",class:[{inactive:"next"==n&&e.$parent.next_inactive||"prev"==n&&e.$parent.prev_inactive},e.$parent.toolbardisabled?"toolbardisabled":"toolbaractive"],attrs:{id:n+"Button","aria-label":e.$parent.shortcuts[n].label},on:{click:function(t){return e.$parent.sendMessage(e.$parent.shortcuts[n]["function"])}}},[e.$parent.buttons[n]?t("span",{domProps:{innerHTML:e._s(e.$parent.buttons[n])}}):t("span",{domProps:{innerHTML:e._s(e.$parent.shortcuts[n]["icon"])}}),t("span",{staticClass:"toolbartext"},[e._v(e._s(e.$parent.shortcuts[n].label))])])})),0):e._e()},Yw=[],Xw={name:"toolbar",props:["parent"],data:function(){return{menuclass:"default_menu",toolbarbuttons:["autorun","reload","info","tags","overlay","textoverlay","layers","zoomin","zoomout","home","prev","next","keyboard","perpage","settings","fullscreen"]}},mounted:function(){this.$parent.$el.addEventListener("keydown",this.keydownListener)},created:function(){var e="_menu";this.$parent.multi&&(e="_multi"+e,this.$parent.settings.toolbarposition||(this.menuclass="top"+e)),this.$parent.settings.toolbarposition&&(this.menuclass=this.$parent.settings.toolbarposition+e)},computed:{filteredButtons:function(){var e=this;return this.toolbarbuttons.filter((function(t){return e.$parent.shortcuts[t]}))}},methods:{keydownListener:function(e){var t=!(!e.target.className||"settings"!=e.target.className);if(t)return 0;var n=e.code.replace("Key","").replace("Digit","").toLowerCase(),i=e.altKey?"alt+":e.shiftKey?"shift+":e.metaKey?"cmd+":"";n=i+n;var r=i+e.key;n=n.replace("period",".").replace("comma",",");var s=Object.values(this.$parent.shortcuts).filter((function(e){return e.shortcut.indexOf(n)>-1||e.shortcut.indexOf(r)>-1}));if(s.length>0){var o=s[0],a=o["function"];o["run"]?this.$parent.$parent&&this.$parent.$parent.range&&this.$parent.$parent[a["function"]](a["args"]):this.$parent.sendMessage(a)}}}},Kw=Xw,Qw=Vb(Kw,Ww,Yw,!1,null,null,null),Zw=Qw.exports;function Jw(e){return iS(e)||nS(e)||tS(e)||eS()}function eS(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tS(e,t){if(e){if("string"==typeof e)return rS(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rS(e,t):void 0}}function nS(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function iS(e){if(Array.isArray(e))return rS(e)}function rS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}rr.use(xb());var sS={name:"storyboard",components:{annotationbox:Vw,toolbar:Zw},props:{manifesturl:String,annotationurl:String,annotationlist:String,jsonannotation:[Object,Array],styling:String,ws:String,layers:String},data:function(){return{seadragontile:"",position:-1,seadragonid:"",annotations:[],currentanno:"",compkey:0,hastranscription:!1,textposition:"corner",prev_inactive:!0,next_inactive:!1,toolbar_id:"",booleanitems:Bb.objectToNewObject(Bb.booleanitems),shown:!1,mapmarker:'<i class="fas fa-map-marker-alt map-marker"></i>',anno_elem:"",isautorunning:"",buttons:Bb.objectToNewObject(Bb.buttons),settings:{},textoverlay:Bb.objectToNewObject(Bb.textoverlay),currentlang:"",languages:[],fullscreen:!1,tagslist:{},annoinfo:{text:"",annodata:[]},imageinfo:{text:"",label:"Image information"},imagetitle:"",layerslist:[],shortcuts:{},basecompontent:"",rendered:"",leaflet:!1,boardnumber:0,toolbardisabled:!1,manifestinfo:"",init_canvas:{"@context":"http://iiif.io/api/image/2/context.json","@id":"https://ncsu-libraries.github.io/annona/canvas",profile:["http://iiif.io/api/image/2/level1.json"],protocol:"http://iiif.io/api/image"},isurl:!0,homezoom:!1}},created:function(){this.basecompontent=this.$parent.$parent&&this.$parent.$parent.range?this.$parent.$parent:this.$parent.range||this.$parent.multi?this.$parent:this,window.annonasettings=window.annonasettings?window.annonasettings:{},this.basecompontent&&this.basecompontent.range&&(this.$parent.multi?this.buttons.fullscreen=this.$parent.fullscreen?Bb.buttons["fullscreenoff"]:Bb.buttons["fullscreen"]:this.basecompontent.updateFullScreen(this.basecompontent.isfullscreen),this.textoverlay=Bb.objectToNewObject(this.basecompontent.textoverlay),this.booleanitems=Bb.objectToNewObject(this.basecompontent.booleanitems)),this.settings=Bb.getsettings(this,this.$parent.multi);var e=!!document.documentMode;e&&(this.settings.tts=!1),this.imagetitle=this.settings.title?this.settings.title:"","collapse"==this.settings.annoview&&(this.buttons.hide='<i class="fas fa-caret-left"></i>'),this.loadAnnotation()},watch:{booleanitems:{deep:!0,handler:function(){window.annonasettings["toggleoverlay"]=this.booleanitems.isoverlaytoggled,window.annonasettings["toggletextoverlay"]=this.booleanitems.istextoverlaytoggled,this.basecompontent.range&&(this.basecompontent.booleanitems=Bb.objectToNewObject(this.booleanitems))}},fullscreen:function(e){this.buttons.fullscreen=e?Bb.buttons["fullscreenoff"]:Bb.buttons["fullscreen"]},textoverlay:{deep:!0,handler:function(){this.basecompontent.range&&(this.basecompontent.textoverlay=Bb.objectToNewObject(this.textoverlay))}},shown:function(){window.annonasettings["startenddisplay"]=this.shown},position:function(){window.annonasettings["startposition"]=this.position+1},buttons:{deep:!0,handler:function(){this.$parent.multi&&(this.$parent.buttons=this.buttons)}}},mounted:function(){this.newSocket();var e=this.jsonannotation?this.jsonannotation:this.annotationurl?this.annotationurl:this.annotationlist,t=this.annotationurl?this.annotationurl:this.annotationlist?this.annotationlist:n["isURL"],n=Bb.isURL(e,"");this.isurl=n["isURL"],n["isURL"]||this.parseAnnoData(n["json"],t,t)},methods:{otherLists:function(){if(this.basecompontent.range){var e=this.basecompontent.annotationurl.allOtherLists?this.basecompontent.annotationurl.allOtherLists[this.boardnumber]:this.basecompontent.annotationurl.otherLists;if(e&&e.length>0)for(var t=0;t<e.length;t++){var n=Bb.getId(e[t]);this.loadAnnotation(!1,n)}}},loadAnnotation:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n||(this.jsonannotation?this.jsonannotation:this.annotationurl?this.annotationurl:this.annotationlist),r=Bb.isURL(i,this.settings);this.isurl=r["isURL"],this.seadragonid="storyboard_"+r["id"],this.settings.index&&(this.seadragonid+="_"+this.settings.index),r["isURL"]&&Ku.get(i+"?cb="+Date.now()).then((function(n){e.parseAnnoData(n.data,i,r["isURL"],t)})).catch((function(){t?e.renderError(i):e.removeSpinner()}))},reload:function(){this.basecompontent.range?this.basecompontent.compkey="reload"+(this.basecompontent.compkey+1):(this.toolbardisabled=!0,this.annotations=[],this.currentanno="",this.annoinfo={text:"",annodata:[]},this.$parent.multi&&(this.$parent.boardnumber=0,this.$parent.toolbardisabled=!0),this.next(-1),this.removeOverlay("overlay"),this.removeOverlay("textoverlay"),this.switchSpinner("block"),this.loadAnnotation(!1,this.annotationurl))},removeOverlay:function(e){for(var t=document.getElementsByClassName(e),n=0;n<t.length;n++)this.viewer.removeOverlay(t[n].id)},removeSpinner:function(){var e=document.getElementById("spinner");e&&(this.toolbardisabled=!1,this.$parent.multi&&this.$parent.boardchildren.every((function(e){return 0==e.toolbardisabled}))&&(this.$parent.toolbardisabled=!1),this.switchSpinner("none"))},switchSpinner:function(e){this.anno_elem&&(this.anno_elem.querySelector("#spinner").style.display=e)},checkForText:function(e,t){if(this.settings.startenddisplay!=e){var n=t["anno"],i=t["transcription"];this.hastranscription=n&&i&&n!=i,""!=n||""!=i||"anno"!=e&&"transcription"!=e?(0==Object.keys(this.tagslist).length&&"tags"==this.shown||this.settings.hide_annotationtext||this.layerslist.length<2&&"layers"==this.shown)&&(this.shown=!1):this.shown=!1}},checksubgrouptags:function(e){for(var t=this.groupTagDict[e],n=t.tags,i=0;i<n.length;i++)t.checked==n[i].checked&&this.sendMessage({function:"hideshowalltags",args:n[i]["key"]})},renderError:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!this.basecompontent.manifestcontents&&!this.manifesturl||t?this.rendered='There was a error with <a href="'+e+'">'+e+"</a>":this.getManifestData(this.manifesturl)},parseAnnoData:function(e,t,n){for(var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=Bb.getAnnotations(e),s=Bb.manifestlink(this.manifesturl,r[0],e),o=0;o<r.length;o++){for(var a=Bb.on_structure(r[o]),c=Bb.getCanvasId(r[o]),l=[],u=Bb.chars(r[o],this.currentlang),h=u["type"]?u["type"]:"rect",d=[],p=0;p<c.length;p++){var f=a&&a[p]?a[p]:a,m=Bb.canvasRegion(c[p],f),g=m["canvasRegion"];l.push(g);var v=m["canvasId"];if(m["svg"]){var y=m["svg"].getAttribute("id");h=y?y.split("_")[0]:"path"}(0==g.split(",")[0]&&0==g.split(",")[1]||0!=g.split(",")[2])&&0!=g.split(",")[3]||(h="pin"),d.push(m["svg"])}u=Object.assign({},u,{section:l,type:h,svg_path:d}),this.annotations.push(u),u["geometry"]&&(this.leaflet="true"),u["styles"]&&(u["styles"]["overlay"]&&!this.settings.overlaycolor&&(this.settings.overlaycolor=u["styles"]["overlay"]),u["styles"]["activecolor"]&&!this.settings.activecolor&&(this.settings.activecolor=u["styles"]["activecolor"]),this.settings.tagscolor=this.settings.tagscolor?Object.assign(u["styles"],this.settings.tagscolor):u["styles"]),this.getAnnoInfo(u,this.annotations.length-1)}this.annotations.length>0&&(this.annoinfo.text+='<div class="listinfo">'+(n?'<b>Annotation Url: </b><a href="'+t+'" target="_blank">'+t+"</a><br>":""));var T=this.annotations.filter((function(e){return e.languages}));if(T.length>0){var E=Bb.flatten(this.annotations.map((function(e){return e.textual_body.map((function(e){return e.language}))}))),_=E.filter((function(e){return void 0!=e&&navigator.language.indexOf(e.toLowerCase())>-1}));this.currentlang=this.currentlang?this.currentlang:_.length>0?_[0]:E[0];var b=Bb.flatten(T,"languages");this.languages=Array.from(new Set(b))}i?s?this.getManifestData(s,v,c):this.buildseadragon(v):this.onSeadragonOpen(!1);var w=e["label"]?e["label"]:e["@label"];if(this.imagetitle=this.settings.title?this.imagetitle:w,this.boardnumber=this.$parent.multi&&this.$parent.boardchildren.length>0?this.$parent.boardchildren.map((function(e){return e.seadragontile})).indexOf(this.seadragontile):0,w&&this.basecompontent.range){var S=this.boardnumber+this.basecompontent.position;-1==this.basecompontent.toc[S]["label"].indexOf(w)&&(this.basecompontent.toc[S]["label"]+=": "+w)}else w&&(this.imagetitle+=": "+w);if(this.annotationurl==t){var A=this;setTimeout((function(){A.otherLists()}),"100")}},tagslistShortcuts:function(){var e=Bb.flatten(this.annotations,"tags"),t=!!this.settings.toggleoverlay,n=!!this.$parent.multi&&this.$parent.tagslist;this.tagslist=Bb.getTagDict(e,this.settings,t,n),this.$parent.multi&&(this.$parent.tagslist=Object.assign(this.$parent.tagslist,this.tagslist)),this.booleanitems.istranscription=!(!this.settings.transcription||this.settings.textfirst),this.$parent.multi&&(Object.keys(this.tagslist).length>0&&(this.$parent.tags=!0),this.$parent.shortcuts=Bb.keyboardShortcuts("multistoryboard",this.$parent)),this.shortcuts=Bb.keyboardShortcuts("storyboard",this)},createViewer:function(){var e="fill"==this.settings.fit,t={id:""+this.seadragonid,type:"image",nextButton:"next",previousButton:"previous",tileSources:this.init_canvas,toolbar:""+this.toolbar_id,showNavigator:!1,showNavigationControl:!1,homeFillsViewer:e,constrainDuringPan:!0,visibilityRatio:1,degrees:this.layerslist[0].rotation};this.viewer=Ab()(t);var n=this.viewer,i=this;n.addHandler("zoom",(function(){var e=i.viewer.world.getItemAt(0).viewportToImageRectangle(i.viewer.viewport.getConstrainedBounds());window.annonasettings["zoom"]=e["x"]+","+e["y"]+","+e["width"]+","+e["height"]})),n.addHandler("canvas-click",(function(){i.reposition()})),n.addHandler("canvas-scroll",(function(){i.reposition()})),n.addHandler("canvas-drag",(function(){i.reposition()})),n.addHandler("open",(function(){i.onSeadragonOpen()}))},onSeadragonOpen:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;if(!t.anno_elem.querySelector("#spinner")){var n=document.createElement("div");n.id="spinner",n.style="position: relative; top: 50%;text-align: center;z-index: 10000;;",n.innerHTML='<i class="fas fa-spinner fa-spin" style="font-size:3em"></i>',t.anno_elem.getElementsByClassName("openseadragon-container")[0].appendChild(n),setTimeout((function(){t.switchSpinner("none")}),"500")}var i=t.settings.imagecrop?t.settings.imagecrop.split(",").map((function(e){return parseInt(e)})):t.layerslist[0].section?t.layerslist[0].section:"";if(i&&e){var r=t.viewer.world.getItemAt(0);r.setClip(new(Ab().Rect)(i[0],i[1],i[2],i[3])),t.zoom("home")}if(t.layerslist&&t.layerslist.length>0&&e&&t.addLayers(),e||t.tagslistShortcuts(),t.settings.zoom){var s=t.settings.zoom,o=t.settings.zoom.split(",").map((function(e){return parseFloat(e)}));s=t.viewer.viewport.imageToViewportRectangle(o[0],o[1],o[2],o[3]),t.homezoom=s,t.viewer.viewport.fitBoundsWithConstraints(s).ensureVisible()}t.settings.autorun_onload&&t.autoRun(t.settings.autorun_interval);for(var a=0;a<t.annotations.length;a++)if(t.annotations[a]["tags"].length>0)for(var c=0;c<t.annotations[a]["tags"].length;c++)t.createOverlayElement(a,t.annotations[a]["tags"][c]);else t.createOverlayElement(a,t.annotations[a]["tags"]);if(t.booleanitems.isoverlaytoggled&&t.createOverlay("",!0),t.booleanitems.istextoverlaytoggled&&t.createOverlay("textoverlay",!0),t.currentlang&&t.changeLang(t.currentlang),void 0!=t.settings.startposition)t.next(t.settings.startposition-1);else if(-1!=t.position){var l=t.shown;t.next(t.position),t.clickButton(l)}if(t.settings.fit||(t.settings.fit=Bb.getLongEdge(t.viewer)),t.settings.sortannos){"longedge"==t.settings.sortannos&&(t.settings.sortannos=Bb.getLongEdge(t.viewer));var u="horizontal"==t.settings.sortannos?0:1;t.annotations=t.annotations.sort((function(e,t){return parseFloat(e["section"][0].split(",")[u])>parseFloat(t["section"][0].split(",")[u])?1:-1}))}var h="fill"==this.settings.fit;"horizontal"==t.settings.fit?t.viewer.viewport.fitHorizontally():h||t.viewer.viewport.fitVertically(),this.removeSpinner(),this.focusOnButton()},reposition:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e=e||this.viewer.viewport.getConstrainedBounds();var t=this.viewer.world.getItemAt(0).viewportToImageRectangle(e);this.settings.controller?this.socket.emit("broadcast",{bounds:t}):this.$parent.multi&&this.$parent.moveArea(t)},newSocket:function(){var e=this;if(this.$props.ws){var t=Hb()(this.$props.ws,{origins:"http://localhost:*/* http://127.0.0.1:*/*"});this.socket=t,this.socket.on("message",(function(t){if(t["function"]&&(e.position=t["position"],e.shown=t["shown"],e.booleanitems=t["booleanitems"],e[t["function"]](t["args"])),t["bounds"]){var n=e.viewer.world.getItemAt(0).imageToViewportRectangle(t["bounds"].x,t["bounds"].y,t["bounds"].width,t["bounds"].height);e.viewer.viewport.fitBoundsWithConstraints(n).ensureVisible()}}))}},getAnnoInfo:function(e,t){var n=e["label"]?t+1+". "+e["label"]:"Annotation "+(t+1),i=Bb.createContent(e,this.currentlang)["anno"],r="\n        "+(i?this.$options.filters.truncate(i,5)+"<br>":"")+"\n        "+(e["authors"]?"<b>Authors:</b> "+e["authors"]+"<br>":"")+"\n        "+(e["rights"]?"<b>Rights:</b> "+e["rights"]+"<br>":"")+"\n        "+(e["tags"].length>0?"<b>Tags:</b> "+e["tags"].map((function(e){return e["value"]})).join(", ")+"<br>":"");this.annoinfo.annodata.push({title:n,position:t,additionaltext:r})},changeLang:function(e){var t=e.target?e.target.value:e;this.currentlang=t,this.annoinfo.annodata=[];var n=this.basecompontent&&this.basecompontent.manifestcontents?this.basecompontent.manifestcontents:this.manifestinfo;if(this.basecompontent.range){this.basecompontent.rangetitle=Bb.parseMetaFields(n.label,this.currentlang),this.basecompontent.getTitle();var i=this.settings.title;this.settings.title=this.basecompontent.settings.title,this.imagetitle=this.imagetitle.replace(i,this.basecompontent.settings.title)}var r=Bb.getHTMLMeta(n,this.imageinfo.link,"Manifest",this.settings,this.currentlang);this.imageinfo.text=r["text"]+'<div id="imageurl"><b>Image URL: </b><a href="'+this.seadragontile+'" target="_blank">'+this.seadragontile+"</a></div>",this.imagetitle=r["title"]?r["title"]:this.imagetitle;for(var s=0;s<this.annotations.length;s++)this.getAnnoInfo(this.annotations[s],s);this.settings.tts&&(this.settings.tts=t,this.ttscontent())},createOverlayElement:function(e,t){var n=this.annotations[e];t=t?Bb.tagsToClass(t):"";for(var i=0;i<n["section"].length;i++){var r=n["section"][i].indexOf("pct")>-1,s=n["section"][i].replace("pct:","").split(",");if(r){var o=this.viewer.world.getItemAt(0).getContentSize();s=[parseFloat(s[1])/100*o["x"],parseFloat(s[2])/100*o["y"],parseFloat(s[3])/100*o["x"],parseFloat(s[4])/100*o["y"]],n["section"][i]=s.join(",")}var a=this.viewer.world.getItemAt(0).getBounds(),c=this.viewer.world.getItemAt(0).imageToViewportRectangle(parseInt(s[0]),parseInt(s[1]),parseInt(s[2]),parseInt(s[3]));c="full"==s[0]?a:c;var l=parseInt(s[0]*s[1]/(s[2]*s[3])*1e3);l="full"==s[0]?1:l;var u=document.createElement("div");u.style.display="none",u.id="position"+e;var h=n["section"].length>1?"multi":"",d=("overlay "+t+" "+h).trim();u.className=n["type"]+" "+d;var p=this.tagslist[t]?this.tagslist[t].color:this.settings.overlaycolor?this.settings.overlaycolor:"";if("pin"===n["type"]){u.innerHTML=this.mapmarker,u.style.fill=p;for(var f=0;f<u.children.length;f++)if("svg"==u.children[f].nodeName)for(var m=0;m<u.children[f].children.length;m++)u.children[f].children[m].style.stroke=p}else if(n["svg_path"][i]){var g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.setAttribute("viewBox",s.join(" ")),g.setAttribute("style","position: absolute");var v=n["svg_path"][i];v.style.stroke=p;for(var y=document.createElement(v.tagName),T=0;T<v.attributes.length;T++){var E=v.attributes[T];"style"!=E.name&&y.setAttribute(E.name,E.value)}y.classList.add("svgactive"),this.settings.activecolor&&(y.style.stroke=this.settings.activecolor);var _=parseInt(s[0])+parseInt(s[2])/2+"px "+(parseInt(s[1])+parseInt(s[3])/2)+"px";y.style.transformOrigin=_,y.style.webkitTransformOrigin=_,g.innerHTML=y.outerHTML+v.outerHTML,u.appendChild(g)}if(p&&(u.style.borderColor=p,u.style.color=p,this.settings.activecolor&&(u.style.cssText+="outline-color: "+this.settings.activecolor+"!important"),this.settings.activecolor&&(u.style.webkitTextStrokeColor=this.settings.activecolor)),u.style.zIndex=l,this.viewer.addOverlay({element:u,location:c}),this.addTracking(u,c,e,this),n.ocr.length>0){var b;s=s.map((function(e){return parseFloat(e)}));var w=u.getElementsByTagName("svg").length>0?u.getElementsByTagName("svg")[0].childNodes[0]:"";b=Bb.textOverlayHTML(s,n.ocr,w);var S=document.createElementNS("http://www.w3.org/2000/svg","svg");S.setAttribute("viewBox",s.join(" ")),S.setAttribute("style","position: absolute;z-index: "+(this.annotations.length-e)),S.id="ocr-position"+e;var A=w?"textoverlay textoverlaywithpath":"textoverlay";S.classList=A,S.style.userSelect="text",S.style.display="none",S.innerHTML+=b,this.viewer.addOverlay({element:S,location:c}),new(Ab().MouseTracker)({element:S}).setTracking(!0)}}},playpause:function(){var e=window.speechSynthesis;e.paused?(e.resume(),this.buttons.playpause=Bb.buttons["playpauseoff"]):e.speaking?(e.pause(),this.buttons.playpause=Bb.buttons["playpause"]):(this.ttscontent(),this.buttons.playpause=Bb.buttons["playpauseoff"])},ttscontent:function(){if("anno"==this.shown||"transcription"==this.shown){var e=this.annotations[this.position]?Bb.createContent(this.annotations[this.position],this.currentlang):"";e&&this.tts(e[this.shown])}else this.autoRunTTS()},sendMessage:function(e){this.settings.controller&&(e["position"]=this.position,e["booleanitems"]=this.booleanitems,e["shown"]=this.shown,this.socket.emit("broadcast",e)),this[e["function"]](e["args"])},removeHeight:function(){var e=document.getElementById(this.seadragonid+"_annotation");e&&e.style.removeProperty("height")},close:function(){this.shown=!1,this.setDefaultButtons()},hide:function(){this.removeHeight();var e="collapse"==this.settings.annoview?"collapsehide":"hide";this.booleanitems.isexcerpt?(this.booleanitems.isexcerpt=!1,this.buttons.hide=Bb.buttons[e]):(this.booleanitems.isexcerpt=!0,this.buttons.hide=Bb.buttons[e+"off"])},clickButton:function(e){this.removeHeight(),this.booleanitems.isexcerpt&&"collapse"==this.settings.annoview&&this.hide();var t=this.shown;this.shown===e?this.switchButtons():(this.setShownData(e),this.switchButtons(e)),this.settings.tts&&("anno"==this.shown&&"transcription"==t||"anno"==t&&"transcription"==this.shown)&&this.ttscontent()},switchShown:function(e){this.booleanitems[e]=!this.booleanitems[e]},setShownData:function(e){this.shown=e,this.booleanitems.istranscription="anno"!=e&&("transcription"==e||this.booleanitems.istranscription),this.setDefaultButtons()},setDefaultButtons:function(){for(var e=["info","layers","tags","keyboard","textoverlay","perpage","settings"],t=0;t<e.length;t++)this.buttons[e[t]]=Bb.buttons[e[t]];this.buttons.anno=this.booleanitems.istranscription?'<i class="fas fa-file-alt"></i>':'<i class="fas fa-pen-nib"></i>'},switchButtons:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setDefaultButtons(),e?-1==this.position||this.position>=this.annotations.length?this.buttons[e]='<i class="fas fa-window-close"></i>':this.buttons[e]=this.booleanitems.istranscription?'<i class="fas fa-pen-nib"></i>':'<i class="fas fa-file-alt"></i>':-1==this.position||this.position===this.annotations.length?(this.shown=!!this.settings.startenddisplay&&this.settings.startenddisplay,this.settings.startenddisplay&&this.buttons[this.settings.startenddisplay]&&(this.buttons[this.settings.startenddisplay]='<i class="fas fa-window-close"></i>')):""==this.currentanno||this.settings.hide_annotationtext||this.booleanitems.istranscription?!this.settings.hide_annotationtext&&this.booleanitems.istranscription?this.setShownData("transcription"):this.setShownData(!1):this.setShownData("anno")},hideshowalltags:function(e){for(var t=this.anno_elem.getElementsByClassName(e),n=this.tagslist[e].checked,i=0;i<t.length;i++){for(var r=document.querySelectorAll("#"+t[i].id),s=0;s<r.length;s++)r[s].style.zIndex=0;!0===n?(t[i].style.display="none",this.tagslist[e].checked=!1):(t[i].style.display="block",t[i].style.zIndex=1,this.tagslist[e].checked=!0)}var o=Object.values(this.tagslist).map((function(e){return e["checked"]}));-1===o.indexOf(!0)?(this.booleanitems.isoverlaytoggled=!1,this.buttons.overlay=Bb.buttons["overlay"]):(this.booleanitems.isoverlaytoggled=!0,this.buttons.overlay=Bb.buttons["overlayoff"]),this.shown=!1,this.shown="tags"},getManifestData:function(e,t,n){var i=this,r=!(!(Object.keys(this.settings).indexOf("index")>-1&&this.basecompontent)||isNaN(this.basecompontent.position))&&this.settings.index+this.basecompontent.position;this.basecompontent.rangelist&&this.basecompontent.rangelist[r]&&this.basecompontent.rangelist[r].images?this.manifestDataFunctions(e,this.basecompontent.manifestcontents,t,n,this.basecompontent.rangelist[r].images):this.basecompontent&&this.basecompontent.annotationurl&&this.basecompontent.annotationurl.images?this.manifestDataFunctions(e,this.basecompontent.manifestcontents,t,n,this.basecompontent.annotationurl.images):this.basecompontent.manifestcontents?this.manifestDataFunctions(e,this.basecompontent.manifestcontents,t,n):Ku.get(e).then((function(r){if(!t)for(var s="",o=Bb.getAllCanvases(r.data),a=0;a<o.length;a++){var c=Bb.getManifestAnnotations(o[a]).map((function(e){return Bb.getId(e)}));c.indexOf(i.annotationurl)>-1&&(t=o[a],s=t,n=Bb.getId(o[a]))}i.manifestinfo=r.data,i.manifestDataFunctions(e,r.data,t,n,s)})).catch((function(){i.renderError(e,!0)}))},manifestDataFunctions:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=Bb.getHTMLMeta(t,e,"Manifest",this.settings,this.currentlang);this.imageinfo.text=s["text"],this.imageinfo.link=e,this.imagetitle=s["title"]?s["title"]:this.imagetitle,(t.sequences&&t.sequences[0].canvases.length>1||t.items&&t.items.length>1)&&(this.imageinfo.label="Manifest information");var o=Bb.matchCanvas(t,n,this.imagetitle,r,this.currentlang);this.init_canvas["width"]=o["width"],this.init_canvas["height"]=o["height"],this.imagetitle=o["title"];var a=o["images"];this.getLayerData(a),this.buildseadragon(i)},buildseadragon:function(e){this.settings.startenddisplay&&this.switchButtons(this.settings.startenddisplay),this.settings.startenddisplay&&(this.shown=this.settings.startenddisplay);var t=this.settings.additionalinfo?document.getElementById(this.settings.additionalinfo):"";if(t&&(this.settings.additionalinfotitle=t.title?t.title:""),t&&(this.settings.additionalinfo=t.innerHTML),t&&t.parentNode.removeChild(t),this.settings.truncate_length=this.settings.truncate_length?this.settings.truncate_length:2,""===this.seadragontile){var n=Array.isArray(e)?e[0]:e;n=n.split("#")[0].split("/full/")[0],this.seadragontile=Bb.iiifOrImageCheck(n,!0),this.layerslist.push({tile:this.seadragontile,label:"Layer 1",checked:!0,opacity:1}),this.getLayerData([])}this.createViewer(),this.anno_elem=document.getElementById(""+this.seadragonid),this.settings.autorun_interval=this.settings.autorun_interval?this.settings.autorun_interval:3,this.mapmarker=this.settings.mapmarker?this.settings.mapmarker:this.mapmarker,this.tagslistShortcuts(),this.imageinfo.text+='<div id="imageurl"><b>Image URL: </b><a href="'+this.seadragontile+'" target="_blank">'+this.seadragontile+"</a></div>"},getLayerData:function(e){e=e||[];for(var t=0;t<e.length;t++){var n=Bb.getCanvasTile(e[t],!0),i=!!(e[t].motivation&&e[t].motivation.indexOf("painting")>-1),r=n["canvas_tile"],s=n["img_resource"],o=e[t].resource?Bb.getId(e[t].resource):e[t].target?Bb.getId(e[t].target):"",a=o&&"String"===o.constructor.name&&o.indexOf("xywh")>-1?o:Bb.on_structure(e[t])&&"String"===Bb.on_structure(e[t])[0].constructor.name?Bb.on_structure(e[t])[0]:"";a=a?a.split("xywh=").slice(-1)[0].split(","):a,a=a.length>1?a:"";var c=s.label?s.label:"Layer "+(t+1),l=!(!this.settings.togglelayers&&0!=t&&!i),u=this.settings.togglelayers||0==t||i?1:0,h=e[t]["rotation"]?e[t]["rotation"]:0,d=e[t]["section"]?e[t]["section"]:"";this.layerslist.push({tile:r,xywh:a,label:c,checked:l,opacity:u,rotation:h,section:d})}if(this.layerslist.length>0&&(this.seadragontile=this.layerslist[0].tile),this.$props.layers){var p=this.$props.layers.replace(/'/gm,'"');p=JSON.parse(p);for(var f=0;f<p.length;f++){var m=p[f],g=m["xywh"]?m["xywh"].split(","):[0,0,0,0],v=(d=m["section"]?m["section"].split(",").map((function(e){return parseInt(e)})):"",!!this.settings.togglelayers),y=this.settings.togglelayers?1:0;h=m["rotation"]?m["rotation"]:0;this.layerslist.push({tile:m["image"],xywh:g,label:m["label"],checked:v,opacity:y,section:d,rotation:h})}}this.$parent.multi&&this.layerslist.length>1&&(this.$parent.layerslist=!0)},addLayers:function(){this.layerslist[0]["object"]=this.viewer.world.getItemAt(0);for(var e=0;e<this.layerslist.length;e++)this.setLayers(this.layerslist[e],e)},setLayers:function(e,t){var n=e.xywh,i=this,r=Bb.getTileFormat(e.tile),s=this.viewer.world.getItemAt(0).imageToViewportRectangle(parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])),o=e.section?new(Ab().Rect)(e.section[0],e.section[1],e.section[2],e.section[3]):0;this.viewer.addTiledImage({tileSource:r,x:s.x,y:s.y,width:s.width,opacity:e.opacity,clip:o,degrees:e.rotation,success:function(e){i.layerslist[t]["object"]=e.item},error:function(e){console.log("Failed to add image:",e)}})},setOpacity:function(e){var t=e.layer?e.layer:e,n=e.event?e.event.target.value/100:t.opacity>0?0:1;t.object.setOpacity(n),t.opacity=n;var i=0!=n;t.checked=i},zoom:function(e){var t=parseFloat(this.viewer.viewport.getZoom()),n=parseFloat(this.viewer.viewport.getMinZoom())-.2,i=parseFloat(this.viewer.viewport.getMaxZoom());if("in"===e&&i>=t)this.viewer.viewport.zoomBy(1.1);else if("out"===e&&n<=t)this.viewer.viewport.zoomBy(.9);else{if("home"!==e)return 0;"fill"==this.settings.fit?this.viewer.viewport.fitBounds(this.viewer.viewport.getHomeBounds()):"horizontal"==this.settings.fit?this.viewer.viewport.fitHorizontally():this.homezoom?this.viewer.viewport.fitBoundsWithConstraints(this.homezoom).ensureVisible():this.viewer.viewport.fitVertically(),window.annonasettings["zoom"]=!1}},tts:function(e){var t=window.speechSynthesis;t.cancel();var n=Bb.stripHTML(e),i=new SpeechSynthesisUtterance(n),r=this.currentanno?this.currentanno["language"]:"";i.lang=r||this.settings.tts;var s=t.getVoices().filter((function(e){var t=i.lang;return 2==t.length?e.lang.split("-")[0]==t:e.lang==t}));i.voice=s?s[0]:t.getVoices()[0];var o=this;i.onstart=function(){o.buttons.playpause=Bb.buttons["playpauseoff"]},e?i.onend=o.autoRunTTS:this.autoRunTTS(),console.log("utterance",i),t.speak(i),this.buttons.playpause=Bb.buttons["playpauseoff"]},autoRunTTS:function(){if(this.isautorunning){var e=this,t=1e3*this.settings.autorun_interval;e.isautorunning=setTimeout((function(){e.position>=e.annotations.length&&(e.position=-1),e.next("next")}),t)}else clearTimeout(this.isautorunning);window.speechSynthesis.speaking||window.speechSynthesis.pending||(this.buttons.playpause=Bb.buttons["playpause"])},createOverlay:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=e||"overlay";var n,i,r=this.anno_elem.getElementsByClassName(e),s=this.booleanitems["is"+e+"toggled"];if(s&&!t?(n="none",i=!1,this.booleanitems["is"+e+"toggled"]=!1,Bb.buttons[e+"off"]&&(this.buttons[e]=Bb.buttons[e])):(n="block",i=!0,this.booleanitems["is"+e+"toggled"]=!0,Bb.buttons[e+"off"]&&(this.buttons[e]=Bb.buttons[e+"off"])),"overlay"==e)for(var o in this.tagslist)this.tagslist[o].checked=i;for(var a=0;a<r.length;a++)r[a].style.display=n},addTracking:function(e,t,n,i){new(Ab().MouseTracker)({element:e,clickHandler:function(){i.position=n,i.makeactive(n),i.sendMessage({function:"next",args:n});var e=i.annotations.map((function(e,t){return e.section.map((function(e){return i.annotations[n].section.indexOf(e)>-1})).some((function(e){return!0===e}))?t:-1}));if(e=e.filter((function(e){return-1!=e})),e.length>1&&(i.currentanno=e.map((function(e){return i.annotations[e]}))),i.goToArea(t),i.reposition(t),i.$parent.multi&&(!i.settings.continousboard||1==i.settings.perpage)){var r=i.$parent.boardchildren;i.$parent.next_inactive=i.next_inactive,i.$parent.prev_inactive=i.prev_inactive;for(var s=0;s<r.length;s++)r[s].position=n,i.settings.matchclick&&r[s].next(n)}}}).setTracking(!0)},goToArea:function(e){var t=Array.isArray(this.currentanno)?this.currentanno[0]:this.currentanno,n=t["section"][0].split(","),i="full"==n.join("");if(0==e["height"]&&0==e["width"]&&(e["height"]=.001),i)this.zoom("home");else if("pan"==this.settings.panorzoom){var r=e["x"]+e["width"]/2,s=e["y"]+e["height"]/2;this.viewer.viewport.panTo(new(Ab().Point)(r,s)).applyConstraints()}else this.viewer.viewport.fitBoundsWithConstraints(e).ensureVisible();if(this.settings.textposition){var o=i?"full":e;this.overlayPosition(o)}},toggle_fullscreen:function(){var e=this.basecompontent.range?this.basecompontent.$el:this.$el;this.$fullscreen.toggle(e,{wrap:!1,callback:this.fullscreenChange})},toggletranscription:function(){var e=this.booleanitems.istranscription?"anno":"transcription";this.setShownData(e)},makeactive:function(e){var t=this.anno_elem.getElementsByClassName("active");while(t[0])t[0].classList.remove("active");if(Number.isInteger(e))for(var n=this.anno_elem.querySelectorAll("#position"+e),i=0;i<n.length;i++)n[i].classList.add("active")},focusOnButton:function(){var e=this.basecompontent.isfullscreen||this.basecompontent.settings.fullpage;if(this.fullscreen||this.settings.fullpage||e){var t=e?this.basecompontent:this,n=t.$el.getElementsByClassName("toolbaractive");n.length>0&&n[0].focus()}},fullscreenChange:function(e){this.fullscreen=e,this.focusOnButton(),this.basecompontent.range&&this.basecompontent.updateFullScreen(e)},next:function(e){var t=this;if(this.removeHeight(),"prev"===e&&this.position>-1?this.position-=1:"next"===e&&this.position<this.annotations.length?this.position+=1:isNaN(e)?this.position=this.position:this.position=e,this.buttons.overlay==Bb.buttons["overlay"])for(var n=document.getElementsByClassName("multi"),i=0;i<n.length;i++)n[i].style.display="none";if(this.settings.overlaynext&&!this.booleanitems.isoverlaytoggled)for(var r=this.anno_elem.getElementsByClassName("overlay"),s=0;s<r.length;s++)r[s].style.display="none";if(this.currentanno=this.annotations[this.position],void 0===this.currentanno){if(this.zoom("home"),this.currentanno="",this.makeactive(void 0),this.settings.textposition){var o=document.getElementById(this.seadragonid+"_annotation"),a=this.viewer.viewport.getBounds(),c=new(Ab().Point)(a["x"],a["y"]);this.viewer.updateOverlay(o,c,"TOP_RIGHT"),o.style.maxHeight="",o.style.maxWidth="",this.textposition="corner"}}else{var l=this.currentanno["section"].length,u=this.currentanno["section"][0].split(",");if(this.makeactive(this.position),l<=1){var h=this.viewer.world.getItemAt(0).imageToViewportRectangle(parseInt(u[0]),parseInt(u[1]),parseInt(u[2]),parseInt(u[3]));if(this.goToArea(h),this.settings.overlaynext&&!this.booleanitems.isoverlaytoggled){var d=this.anno_elem.querySelectorAll("#position"+this.position);d[0].style.display="block"}}else{var p=this.currentanno["section"],f=p.map((function(e){return e.split(",")[0]})),m=Math.min.apply(Math,Jw(f)),g=p.map((function(e){return e.split(",")[1]})),v=Math.min.apply(Math,Jw(g)),y=Math.max.apply(Math,Jw(p.map((function(e){return parseInt(e.split(",")[1])+parseInt(e.split(",")[3])})))),T=y-v,E=Math.max.apply(Math,Jw(p.map((function(e){return parseInt(e.split(",")[0])+parseInt(e.split(",")[2])}))))-m,_=this.viewer.world.getItemAt(0).imageToViewportRectangle(m,v,E,T);this.goToArea(_);for(var b=this.anno_elem.querySelectorAll("#position"+this.position),w=0;w<b.length;w++)b[w].style.display="block"}}this.switchButtons(),this.settings.tts&&this.ttscontent(),this.position>=this.annotations.length?this.next_inactive=!0:this.next_inactive=!1,-1===this.position?this.prev_inactive=!0:this.prev_inactive=!1,this.$parent.multi&&this.isautorunning&&this.$parent.autoRunImages(),this.settings.transcription&&this.$nextTick((function(){var e=document.getElementsByClassName("activeword")[0];if(e){var n=document.getElementById(t.seadragonid+"_annotation");n.scrollTop=e.offsetTop-n.offsetTop}}))},overlayPosition:function(e){if("full"==e){var t=this.viewer.viewport.getBounds(),n={x:0,y:0,width:.99,height:t["height"]};e=t["width"]>1||t["height"]>1?n:t}var i=document.getElementById(this.seadragonid+"_annotation"),r={right:{x:e["x"]+e["width"],y:e["y"],placement:"TOP_LEFT",inverse:"left"},left:{x:e["x"],y:e["y"],placement:"TOP_RIGHT",inverse:"right"},top:{x:e["x"]+e["width"]/2,y:e["y"],placement:"BOTTOM",inverse:"bottom"},bottom:{x:e["x"]+e["width"]/2,y:e["y"]+e["height"],placement:"TOP",inverse:"top"}},s=this.getPositionData(r,i);(s["maxHeight"]<65||s["maxWidth"]<65)&&(s=this.getPositionData(r,i,!0)),(s["maxHeight"]<65||s["maxWidth"]<65)&&(s=this.getPositionData(r,i,!1,!0));var o=s["overlayrect"],a=s["maxHeight"],c=s["maxWidth"],l=s["positions"];this.textposition=s["textposition"];var u=this;i.addEventListener("mouseover",(function(){u.enableOSDmouse(!1)})),i.addEventListener("mouseout",(function(){u.enableOSDmouse(!0)})),i.style.maxHeight=a-20+"px",i.style.maxWidth=c-20+"px";var h=Ab().Placement[l["placement"]];this.viewer.getOverlayById(this.seadragonid+"_annotation")?this.viewer.updateOverlay(i.id,o,h):this.viewer.addOverlay({element:i,location:o,placement:h})},enableOSDmouse:function(e){this.viewer.setControlsEnabled(e),this.viewer.setMouseNavEnabled(e)},getPositionData:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e[this.settings.textposition].inverse,s=n?r:this.settings.textposition,o=e[s],a=new(Ab().Point)(o["x"],o["y"]),c=this.viewer.viewport.pixelFromPoint(a),l=this.viewer.viewport.getContainerSize(),u="right"==s?l["x"]-c["x"]:c["x"],h="top"==s?c["y"]:l["y"]-c["y"];return i&&(o["placement"]=e[r].placement,u<65&&(u="100"),h<65&&(h="100")),{positions:o,overlayrect:a,maxWidth:u,maxHeight:h,textposition:s}},autoRun:function(e){e=e||this.settings.autorun_interval,e*=1e3;var t=this.annotations.length;if(""===this.isautorunning){var n=this;this.settings.tts?(this.isautorunning=!0,this.next("next")):this.isautorunning=setInterval((function(){n.position>=t&&(n.position=-1),n.next("next")}),e),this.buttons.autorun=Bb.buttons["autorunoff"]}else clearInterval(this.isautorunning),this.isautorunning="",this.buttons.autorun=Bb.buttons["autorun"]},createAnnoContent:function(e){var t=[],n=[];if(Array.isArray(e)){for(var i=0;i<e.length;i++){var r=Bb.createContent(e[i],this.currentlang);r["anno"]&&t.push(r["anno"]),r["transcription"]&&n.push(r["transcription"])}t=t.join("<hr>"),n=n.join("<hr>")}else{var s=Bb.createContent(e,this.currentlang);n=s["transcription"],t=s["anno"]}t=t||n;var o={anno:t,transcription:n};return this.checkForText(this.shown,o),o}},computed:{groupTagDict:function(){var e=Bb.groupBy(this.tagslist,"group");return e},annoContent:function(){return this.createAnnoContent(this.currentanno)}},filters:{truncate:function(e,t){e=e?e.split('<div class="tags">')[0]:"",e=e?e.split('<div class="authorship">')[0]:"";var n=Bb.stripHTML(e);return vb(n,t,{byWords:!0})}}},oS=sS,aS=Vb(oS,Pa,La,!1,null,null,null),cS=aS.exports;rr.use(Da),rr.customElement("iiif-storyboard",cS)}()})();
//# sourceMappingURL=storyboard.js.map