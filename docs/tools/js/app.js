(function(t){function e(e){for(var i,r,s=e[0],l=e[1],u=e[2],p=0,d=[];p<s.length;p++)r=s[p],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);c&&c(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},o=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/annona/tools/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var c=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("64a9"),a=n.n(i);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["/display"!=this.$route.path?n("div",{staticClass:"form"},["flask"!=t.env.NODE_ENV?n("div",{staticClass:"examples"},[n("a",{attrs:{href:t.baseurl+"#/tag-builder?url=https://dnoneill.github.io/annotate/annotations/wh234bz9013-0001-list.json&viewtype=iiif-storyboard"}},[t._v("\n      Example with tags")]),n("br"),n("a",{attrs:{href:t.baseurl+"#/tag-builder?url=https%3A%2F%2Fdnoneill.github.io%2Fannotate%2Franges%2Frange.json&viewtype=iiif-storyboard"}},[t._v("\n      Example with range. Storyboards have layers.")]),n("br")]):t._e()]):t._e(),n("div",{staticClass:"requiredfields"},[t._l(t.urllength,(function(e,i){return n("span",{key:i+"_urls"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.url[i],expression:"url[index]"}],key:i+"_link",attrs:{"aria-label":"Annotation URL "+i,value:"",placeholder:"Annotation URL or Manifest"},domProps:{value:t.url[i]},on:{change:function(e){return t.updateListType()},input:function(e){e.target.composing||t.$set(t.url,i,e.target.value)}}}),0!=i?n("button",{on:{click:function(e){return t.deleteField("url",i,"urllength")}}},[t._v("\n          Delete Annotation URL\n        ")]):t._e()])})),"iiif-storyboard"==t.viewtype?n("span",[n("button",{attrs:{"aria-label":"Add Annotation URL"},on:{click:function(e){t.urllength+=1}}},[t._v("\n          Add Annotation URL\n        ")])]):t._e(),n("select",{directives:[{name:"model",rawName:"v-model",value:t.viewtype,expression:"viewtype"}],attrs:{"aria-label":"dropdown for storyboard, imageviewer, multistoryboard, range storyboard"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.viewtype=e.target.multiple?n:n[0]},function(e){return t.updateListType()}]}},[n("option",{attrs:{disabled:"",value:""}},[t._v("Please select one")]),n("option",{attrs:{value:"iiif-storyboard"}},[t._v("Storyboard")]),n("option",{attrs:{value:"iiif-annotation"}},[t._v("Image Viewer")])]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.annotationtext,expression:"annotationtext"}],attrs:{"aria-label":"Annotation JSON to be used instead of annotation URL; Will convert to data URI.",type:"text",placeholder:"Annotation JSON to be used instead of annotation URL; Will convert to data URI."},domProps:{value:t.annotationtext},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.buildTags()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void e.preventDefault()},input:function(e){e.target.composing||(t.annotationtext=e.target.value)}}}),t.tag&&t.apiurl?n("div",{staticClass:"savebutton"},[t._m(0),n("input",{directives:[{name:"model",rawName:"v-model",value:t.apifilename,expression:"apifilename"}],attrs:{id:"savetoapi",placeholder:"filename for created file"},domProps:{value:t.apifilename},on:{input:function(e){e.target.composing||(t.apifilename=e.target.value)}}}),n("button",{on:{click:function(e){return t.savetoapi()}}},[t._v("Save")])]):t._e(),t.tag&&t.collectionurl&&"iiif-rangestoryboard"!=t.viewtype?n("div",{staticClass:"savecollection"},[t._m(1),n("select",{directives:[{name:"model",rawName:"v-model",value:t.savecollection["title"],expression:"savecollection['title']"}],attrs:{"aria-label":"collection"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.savecollection,"title",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("New Collection")]),t._l(t.parsecollections,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2),n("input",{directives:[{name:"model",rawName:"v-model",value:t.savecollection["annotitle"],expression:"savecollection['annotitle']"}],attrs:{placeholder:"Annotation title","aria-label":"annotation title"},domProps:{value:t.savecollection["annotitle"]},on:{input:function(e){e.target.composing||t.$set(t.savecollection,"annotitle",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.savecollection["description"],expression:"savecollection['description']"}],attrs:{placeholder:"Annotation description","aria-label":"annotation title"},domProps:{value:t.savecollection["description"]},on:{input:function(e){e.target.composing||t.$set(t.savecollection,"description",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.savecollection["thumbnail"],expression:"savecollection['thumbnail']"}],attrs:{placeholder:"Annotation Thumbnail","aria-label":"annotation title"},domProps:{value:t.savecollection["thumbnail"]},on:{input:function(e){e.target.composing||t.$set(t.savecollection,"thumbnail",e.target.value)}}}),n("button",{on:{click:function(e){return t.savetocollection()}}},[t._v("Add to Collection")])]):t._e()],2),t.tag&&!t.apiurl?n("div",{staticClass:"tagfield",attrs:{"aria-label":"copy tag button"}},[n("div",{staticClass:"tagfieldline"},[t.tag?n("input",{attrs:{id:"tagdata"},domProps:{value:t.tag}}):t._e(),n("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.tag,expression:"tag"}]},[t._v("Copy Tag")])]),n("hr"),n("div",{staticClass:"tagfieldline"},[n("a",{attrs:{href:t.displayURL,target:"_blank"}},[t._v("Static URL")]),n("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.displayURL,expression:"displayURL"}]},[t._v("Copy URL")])])]):t._e(),n("div",{staticClass:"boardbuttons",staticStyle:{float:"right","padding-bottom":"20px"}},[n("button",{staticClass:"undobuttons",on:{click:function(e){return t.undo("reset")}}},[t._v("Reset")])]),n("div",{attrs:{id:"livedemo"}},[t.removebuttons.length>0?n("span",{staticStyle:{width:"100%",display:"flex",height:"22px"}},t._l(t.removebuttons,(function(e){return n("span",{key:e,staticStyle:{"font-size":"14px","background-color":"#f0f0f0",color:"red",height:"20px",border:"2px solid #d3d3d3",width:"100%","margin-right":"2px",position:"relative",padding:"0"},attrs:{id:"remove"+e}},[n("span",{on:{click:function(n){return t.removeItem(e)}}},[n("i",{staticClass:"fas fa-times"})])])})),0):t._e(),n("span",{domProps:{innerHTML:t._s(t.comptagcss)}}),n("span",{key:t.initialtag,domProps:{innerHTML:t._s(t.initialtag)}})])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:"savetoapi"}},[n("b",[t._v("Filename:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:"savecollection"}},[n("b",[t._v("Collection:")])])}],l=(n("8e6e"),n("a481"),n("28a5"),n("ac6a"),n("456d"),n("bd86")),u=(n("6b54"),{createScriptTag:function(t){var e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),n=document.createElement("script");return n.setAttribute("type","application/json"),n.id=e,n.innerHTML=t,{id:e,outerHTML:n.outerHTML}},redirect:function(){var t=window.location.href;t.indexOf("/iiif-annotation/")>-1&&(location.href=t.replace(/\/iiif-annotation\//g,"/annona/"))}});function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){Object(l["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n("2ef0");var d={name:"tagbuilder",props:["apiurl","collectionurl","collections"],data:function(){return{url:"",env:Object({NODE_ENV:"production",BASE_URL:"/annona/tools/"}),baseurl:"",annotationtext:"",removebuttons:[],settings:{},tag:"",tagcss:"",tagshown:!1}},created:function(){u.redirect(),window.addEventListener("change",this.changeInSettings),window.addEventListener("click",this.changeInSettings),window.addEventListener("wheel",this.changeInSettings),this.collections&&(this.parsecollections=this.parseJSON(this.collections));var t=document.getElementById("collections");t&&(this.parsecollections=this.parseJSON(t.innerHTML)),this.baseurl="/annona/tools/",this.initialtag=this.buildTags()},watch:{settings:{deep:!0,handler:function(){console.log("updae settings"),this.tag=this.buildTags(),this.updateRouter()}},url:{deep:!0,handler:function(t,e){JSON.stringify(t)!=JSON.stringify(e)&&(this.initialtag=this.buildTags())}},"$route.query":{handler:function(t,e){JSON.stringify(t)!=JSON.stringify(e)&&this.setParams()},immediate:!0,deep:!0}},computed:{comptagcss:function(){return"<style>".concat(this.tagcss,"</style>")},displayURL:function(){var t=JSON.parse(JSON.stringify(this.settings));t["fullpage"]=!0;var e={url:this.url.join(";"),viewtype:this.viewtype,manifesturl:this.manifesturl,apiurl:this.apiurl,settings:JSON.stringify(t)},n=window.location.protocol+"//"+location.hostname+(location.port?":"+location.port:""),i="flask"!=this.env.NODE_ENV?"".concat(n).concat(this.$router.resolve({name:"display",query:e}).href):"https://ncsu-libraries.github.io/annona/tools/#/tag-builder".concat(this.$router.resolve({name:"display",query:e}).href);return i}},methods:{changeInSettings:function(t){if(window.annonasettings){var e=p({},this.settings,{},JSON.parse(JSON.stringify(window.annonasettings))),n=this.cleanSettings(e);this.settings=n}},updateListType:function(){this.props={},this.settings={},this.url=this.url.length>1&&"iiif-storyboard"==this.viewtype?this.url:[this.url[0]],!(this.url.length>1&&"iiif-storyboard"==this.viewtype)||this.url.length,this.initialtag=this.buildTags()},cleanSettings:function(t){var e={toggletextoverlay:[!1],toggleoverlay:[!1],truncate_length:[2],autorun_interval:[3],startposition:[0],zoom:[!1],startenddisplay:[!1,"anno"],title:[t["title"]]};for(var n in e)e[n].indexOf(t[n])>-1&&delete t[n];return t},undo:function(t){var e=this.parseJSON(JSON.stringify(this.settings));if("last"==t){var n=Object.keys(this.settings).slice(-1)[0];delete e[n],this.settings=e,console.log(this.settings)}else"reset"==t&&(this.settings={},this.tagcss="",window.annonasettings={},this.initialtag=this.buildTags())},setParams:function(){var t=this.$route.query;this.url=t.url?t.url.split(";"):[],this.urllength=this.url.length>1?this.url.length:1,this.viewtype=t.viewtype?t.viewtype:"",this.manifesturl=t.manifesturl?t.manifesturl:"";var e=t.settings?JSON.parse(t.settings):{};t.apiurl&&(this.apiurl=t.apiurl),this.settings=e,t.props&&(this.props=JSON.parse(t.props)),t.css&&(this.css=Object.assign(this.css,JSON.parse(t.css)))},parseJSON:function(t){try{return JSON.parse(t)}catch(e){return[]}},removeItem:function(t){var e=this.parseJSON(JSON.stringify(this.settings));"prev"==t||"next"==t?(e["hide_nextbuttons"]=!0,this.settings=e,this.tagcss+="#prevButton, #removeprev, #nextButton, #removenext {display: none;}"):(e["hide_".concat(t,"button")]=!0,this.settings=e,this.tagcss+="#".concat(t,"Button, #remove").concat(t," {display: none;}"))},getsettings:function(){var t="";for(var e in this.settings){var n=Object.keys(this.settings[e]);n.length>0&&"0"!=n[0]?t+="".concat(e,": ").concat(JSON.stringify(this.settings[e]),";"):t+="".concat(e,": ").concat(this.settings[e],";")}return t},updateRouter:function(){var t=JSON.stringify(this.settings),e={url:this.url.join(";"),viewtype:this.viewtype,manifesturl:this.manifesturl,apiurl:this.apiurl,settings:t};if(JSON.stringify(this.$route.query)==JSON.stringify(e))return!1;this.$router.push({name:"tagbuilder",query:e}).catch((function(t){console.log("router error"),console.log(t)}))},buildTags:function(){if((this.url.length>0||this.annotationtext.length>0)&&""!=this.viewtype){if(this.annotationtext){var t="data:application/json;base64,"+btoa(this.annotationtext);this.url=[t]}this.apiurl&&(this.apifilename=this.url[0].split("/").slice(-1)[0].replace(".json",""));var e="annotationurl";"iiif-storyboard"==this.viewtype&&(e="url");var n="<".concat(this.viewtype," ").concat(e,"='").concat(this.url.join(";"),"'"),i=this.getsettings();this.manifesturl&&(n+=" manifesturl='".concat(this.manifesturl,"'")),i&&(n+=" styling='".concat(i,"'")),n+="></".concat(this.viewtype,">");var a=this;return setTimeout((function(){var t=document.getElementsByClassName("toolbaractive");a.removebuttons=[];for(var e=0;e<t.length;e++)a.removebuttons.push(t[e].id.replace("Button",""))}),"220"),n.trim()}}}},v=d,f=(n("b7c3"),n("2877")),h=Object(f["a"])(v,r,s,!1,null,"500de18e",null),g=h.exports,m={name:"app",components:{tagbuilder:g}},b=m,y=(n("034f"),Object(f["a"])(b,a,o,!1,null,null,null)),w=y.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("tagbuilder",{attrs:{apiurl:"/saveannonaview",collectionurl:"/createcollections"}})],1)},O=[],x={name:"flaskapp",components:{tagbuilder:g}},S=x,N=(n("fb7f"),Object(f["a"])(S,_,O,!1,null,null,null)),j=(N.exports,n("8c4f")),k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.items,(function(e){return n("div",{key:e.path},[n("router-link",{attrs:{to:e.path}},[t._v("\n        "+t._s(e.name)+"\n    ")]),n("p",[t._v(t._s(e.blurb))])],1)})),0)},J=[],P={created:function(){var t=this;u.redirect(),this.$router.options.routes.forEach((function(e){t.items.push({name:e.title,path:e.path,blurb:e.blurb})}))},data:function(){return{items:[]}}},L=P,E=Object(f["a"])(L,k,J,!1,null,null,null),T=E.exports,A=n("af88"),R=n("6018");i["a"].use(R["b"]),i["a"].component("tippy",R["a"]),i["a"].use(j["a"]),i["a"].use(A["a"]),i["a"].config.productionTip=!1;var $=[{path:"/",component:T,name:"index"},{path:"/display",component:g,name:"display",title:"Display Annona items",blurb:"Static URL to display Annona views"},{path:"/tag-builder",component:g,name:"tagbuilder",title:"Tag Builder",blurb:""}];var C=new j["a"]({base:"/annona/tools/",routes:$});console.log($),new i["a"]({render:function(t){return t(w)},router:C}).$mount("#app")},"64a9":function(t,e,n){},b498:function(t,e,n){},b7c3:function(t,e,n){"use strict";var i=n("f994"),a=n.n(i);a.a},f994:function(t,e,n){},fb7f:function(t,e,n){"use strict";var i=n("b498"),a=n.n(i);a.a}});
//# sourceMappingURL=app.js.map